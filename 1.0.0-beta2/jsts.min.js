!function e(t,n,r){function i(s,o){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){(function(e){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function o(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:o(i,t,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){function o(){}function u(){}function l(e){this.message=e||""}function c(){}function g(e){this.message=e||""}function f(e){this.message=e||""}function h(){}function v(){}function y(){}function m(){this.array_=[],arguments[0]instanceof u&&this.addAll(arguments[0])}function p(){this.root_=null,this.size_=0}function d(){}function k(){this.array_=[],arguments[0]instanceof u&&this.addAll(arguments[0])}function A(){}function I(){this.map_=new Map}function E(e){return[e.x,e.y]}function x(e){this.message=e||""}function N(){this.array_=[]}function w(){ae.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},ae.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1};var e={getFactory:function(){return this.factory},getGeometryN:function(e){return this},getArea:function(){return 0},union:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return br.union(e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(e.isEmpty()||i.isEmpty()){if(e.isEmpty()&&i.isEmpty())return Or.createEmptyResult(Or.UNION,e,i,e.factory);if(e.isEmpty())return i.copy();if(i.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(i),Lr.overlayOp(e,i,Or.UNION)}.apply(void 0,n)}};return i.apply(this,n)},isValid:function(){return Vn.isValid(this)},intersection:function(e){if(this.isEmpty()||e.isEmpty())return Or.createEmptyResult(Or.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return yt.map(this,new(function(){function e(){i(this,e)}return s(e,[{key:"map",value:function(e){return e.intersection(t)}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),Lr.overlayOp(this,e,Or.INTERSECTION)},intersects:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?Ii.intersects(this,e):e.isRectangle()?Ii.intersects(e,this):this.relate(e).isIntersects():!1},buffer:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return ai.bufferOp(e,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return ai.bufferOp(e,i,a)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];return ai.bufferOp(e,i,a,s)}.apply(void 0,n)}};return i.apply(this,n)},convexHull:function(){return new oi(this).getConvexHull()},relate:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(i),fi.relate(e,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.relate(i).matches(a)}.apply(void 0,n)}};return i.apply(this,n)},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var e=li.getCentroid(this);return this.createPointFromInternalCoord(e,this)},isEquivalentClass:function(e){return this.getClass()===e.getClass()},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new hi(this);e=n.getInteriorPoint()}else if(1===t){var n=new _r(this);e=n.getInteriorPoint()}else{var n=new jn(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)},symDifference:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return Or.createEmptyResult(Or.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),Lr.overlayOp(this,e,Or.SYMDIFFERENCE)},createPointFromInternalCoord:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},disjoint:function(e){return!this.intersects(e)},toText:function(){var e=new $;return e.write(this)},contains:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?di.contains(this,e):this.relate(e).isContains():!1},difference:function(e){return this.isEmpty()?Or.createEmptyResult(Or.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),Lr.overlayOp(this,e,Or.DIFFERENCE))},isSimple:function(){var e=new Dr(this);return e.isSimple()},isWithinDistance:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:pi.isWithinDistance(this,e,t)},distance:function(e){return pi.distance(this,e)}};for(var t in e)ae.prototype[t]=e[t]}var C=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"equalsWithTolerance",value:function(e,t,n){return Math.abs(e-t)<=n}}]),e}(),O=function Ci(){i(this,Ci)},S=function(){function e(){i(this,e)}return s(e,null,[{key:"isNaN",value:function(e){return Number.isNaN(e)}},{key:"doubleToLongBits",value:function(e){return e}},{key:"longBitsToDouble",value:function(e){return e}},{key:"isInfinite",value:function(e){return!Number.isFinite(e)}}]),e}(),L=function Oi(){i(this,Oi)},R=function Si(){i(this,Si)},T=function Li(){i(this,Li)},P=function Ri(){i(this,Ri)},b=function Ti(){i(this,Ti)},_=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 0:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];n(r,Object.getPrototypeOf(t).call(r))}.apply(void 0,i);case 1:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0];n(r,Object.getPrototypeOf(t).call(r,s))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(b),D=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"shouldNeverReachHere",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.shouldNeverReachHere(null)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];throw new _("Should never reach here"+(null!==r?": "+r:""))}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isTrue",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.isTrue(i,null)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)throw null===i?new _:new _(i)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"equals",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.equals(i,a,null)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];if(!i.equals(r))throw new _("Expected "+r+" but encountered "+i+(null!==a?": "+a:""))}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),M=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.x=null,t.y=null,t.z=null}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,0,0)}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t,i.x,i.y,i.z)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1];o.call(t,a,s,e.NULL_ORDINATE)}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.x=i,t.y=a,t.z=s}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.z=n;break;default:throw new O("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.x!==i.x?!1:e.y!==i.y?!1:!0}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return C.equalsWithTolerance(e.x,i.x,a)&&C.equalsWithTolerance(e.y,i.y,a)?!0:!1}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.z}throw new O("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||S.isNaN(this.z)&&S.isNaN(e.z))}},{key:"equals",value:function(t){return t instanceof e?this.equals2D(t):!1}},{key:"equalInZ",value:function(e,t){return C.equalsWithTolerance(this.z,e.z,t)}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"clone",value:function(){try{var t=a(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t}catch(n){if(n instanceof CloneNotSupportedException)return D.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw n}finally{}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*t+e.hashCode(this.x),t=37*t+e.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.z}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L,R,P]}}],[{key:"hashCode",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0],o=S.doubleToLongBits(s);return Math.trunc(o^o>>>32)}return(t=a(Object.getPrototypeOf(e),"hashCode",this)).call.apply(t,[this].concat(r))}},{key:"DimensionalComparator",get:function(){return F}}]),e}(),F=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.dimensionsToTest=2}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,2)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];if(2!==i&&3!==i)throw new O("only 2 or 3 dimensions may be specified");t.dimensionsToTest=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"compare",value:function(t,n){var r=t,i=n,a=e.compare(r.x,i.x);if(0!==a)return a;var s=e.compare(r.y,i.y);if(0!==s)return s;if(this.dimensionsToTest<=2)return 0;var o=e.compare(r.z,i.z);return o}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[T]}}],[{key:"compare",value:function(e,t){return t>e?-1:e>t?1:S.isNaN(e)?S.isNaN(t)?0:-1:S.isNaN(t)?1:0}}]),e}();M.serialVersionUID=0x5cbf2c235c7e5800,M.NULL_ORDINATE=S.NaN,M.X=0,M.Y=1,M.Z=2;var G=function(){function e(){i(this,e)}return s(e,[{key:"setOrdinate",value:function(e,t,n){}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(e,t){}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getCoordinateCopy",value:function(e){}},{key:"getDimension",value:function(){}},{key:"getX",value:function(e){}},{key:"clone",value:function(){}},{key:"expandEnvelope",value:function(e){}},{key:"copy",value:function(){}},{key:"getY",value:function(e){}},{key:"toCoordinateArray",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[R]}}]),e}();G.X=0,G.Y=1,G.Z=2,G.M=3;var B=function(){function e(){i(this,e)}return s(e,[{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:if(t[0]instanceof Array)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);if(t[0].interfaces_&&t[0].interfaces_.indexOf(G)>-1)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),q=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new O("Unknown location value: "+t)}}]),e}();q.INTERIOR=0,q.BOUNDARY=1,q.EXTERIOR=2,q.NONE=-1;var U=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"log10",value:function(t){var n=Math.log(t);return S.isInfinite(n)?n:S.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function t(e,n,r,i){var t=e;return t>n&&(t=n),t>r&&(t=r),t>i&&(t=i),t}},{key:"clamp",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:if("number"==typeof t[2]&&"number"==typeof t[0]&&"number"==typeof t[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return i>r?i:r>a?a:r}.apply(void 0,t);if(Number.isInteger(t[2])&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return i>r?i:r>a?a:r}.apply(void 0,t)}};return r.apply(this,t)}},{key:"wrap",value:function(e,t){return 0>e?t- -e%t:e%t}},{key:"max",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=r;return i>s&&(s=i),a>s&&(s=a),s}.apply(void 0,t);case 4:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=t[3],o=r;return i>o&&(o=i),a>o&&(o=a),s>o&&(o=s),o}.apply(void 0,t)}};return r.apply(this,t)}},{key:"average",value:function(e,t){return(e+t)/2}}]),e}();U.LOG_10=Math.log(10);var z=function(){function e(t){i(this,e),this.str=t}return s(e,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){return this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),e}(),Y=function(){function e(t){i(this,e),this.value=t}return s(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"isNaN",value:function(e){return Number.isNaN(e)}}]),e}(),X=function Pi(){i(this,Pi)};X.isWhitespace=function(e){return 32>=e&&e>=0||127==e},X.toUpperCase=function(e){return e.toUpperCase()};var V=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.hi=0,t.lo=0}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.init(0)}.apply(void 0,r);case 1:if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i)}.apply(void 0,r);if("string"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];o.call(t,e.parse(a))}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.init(i,a)}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"le",value:function(e){return this.hi<e.hi||this.hi===e.hi&&this.lo<=e.lo}},{key:"extractSignificantDigits",value:function(t,n){var r=this.abs(),i=e.magnitude(r.hi),a=e.TEN.pow(i);r=r.divide(a),r.gt(e.TEN)?(r=r.divide(e.TEN),i+=1):r.lt(e.ONE)&&(r=r.multiply(e.TEN),i-=1);for(var s=i+1,o=new z,u=e.MAX_PRINT_DIGITS-1,l=0;u>=l;l++){t&&l===s&&o.append(".");var c=Math.trunc(r.hi);if(0>c)break;var g=!1,f=0;c>9?(g=!0,f="9"):f="0"+c,o.append(f),r=r.subtract(e.valueOf(c)).multiply(e.TEN),g&&r.selfAdd(e.TEN);var h=!0,v=e.magnitude(r.hi);if(0>v&&Math.abs(v)>=u-l&&(h=!1),!h)break}return n[0]=i,o.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this.hi+this.lo}},{key:"subtract",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.add(i.negate())}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.add(-i)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"equals",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return this.hi===s.hi&&this.lo===s.lo}return(t=a(Object.getPrototypeOf(e.prototype),"equals",this)).call.apply(t,[this].concat(r))}},{key:"isZero",value:function(){return 0===this.hi&&0===this.lo}},{key:"selfSubtract",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.isNaN()?t:t.selfAdd(-i.hi,-i.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.isNaN()?t:t.selfAdd(-i,0)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.selfDivide(i.hi,i.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.selfDivide(i,0)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=null,u=null,l=null,c=null,g=null,f=null,h=null,v=null;return g=t.hi/a,f=e.SPLIT*g,o=f-g,v=e.SPLIT*a,o=f-o,u=g-o,l=v-a,h=g*a,l=v-l,c=a-l,v=o*l-h+o*c+u*l+u*c,f=(t.hi-h-v+t.lo-g*s)/a,v=g+f,t.hi=v,t.lo=g-v+f,t}.apply(void 0,r)}};return a.apply(this,r)}},{key:"dump",value:function(){return"DD<"+this.hi+", "+this.lo+">"}},{key:"divide",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=null,o=null,u=null,l=null,c=null,g=null,f=null,h=null;c=t.hi/a.hi,g=e.SPLIT*c,s=g-c,h=e.SPLIT*a.hi,s=g-s,o=c-s,u=h-a.hi,f=c*a.hi,u=h-u,l=a.hi-u,h=s*u-f+s*l+o*u+o*l,g=(t.hi-f-h+t.lo-c*a.lo)/a.hi,h=c+g;var v=h,y=c-h+g;return new e(v,y)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];return S.isNaN(a)?e.createNaN():e.copy(t).selfDivide(a,0)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"ge",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>=e.lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),r=e.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&r.selfMultiply(n),i/=2,i>0&&(n=n.sqr());else r=n;return 0>t?r.reciprocal():r}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this.hi),n=0;return t===this.hi&&(n=Math.ceil(this.lo)),new e(t,n)}},{key:"compareTo",value:function(e){var t=e;return this.hi<t.hi?-1:this.hi>t.hi?1:this.lo<t.lo?-1:this.lo>t.lo?1:0}},{key:"rint",value:function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()}},{key:"setValue",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.init(i),t}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.init(i),t}.apply(void 0,r)}};return a.apply(this,r)}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this.hi),n=this.hi*t,r=e.valueOf(n),i=this.subtract(r.sqr()),a=i.hi*(.5*t);return r.add(a)}},{key:"selfAdd",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.selfAdd(i.hi,i.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=null,s=null,o=null,u=null,l=null,c=null;return o=t.hi+i,l=o-t.hi,u=o-l,u=i-l+(t.hi-u),c=u+t.lo,a=o+c,s=c+(o-a),t.hi=a+s,t.lo=s+(a-t.hi),t}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=null,o=null,u=null,l=null,c=null,g=null,f=null,h=null;c=t.hi+i,u=t.lo+a,f=c-t.hi,h=u-t.lo,g=c-f,l=u-h,g=i-f+(t.hi-g),l=a-h+(t.lo-l),f=g+u,s=c+f,o=f+(c-s),f=l+o;var v=s+f,y=f+(s-v);return t.hi=v,t.lo=y,t}.apply(void 0,r)}};return a.apply(this,r)}},{key:"selfMultiply",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.selfMultiply(i.hi,i.lo)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.selfMultiply(i,0)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=null,u=null,l=null,c=null,g=null,f=null;g=e.SPLIT*t.hi,o=g-t.hi,f=e.SPLIT*a,o=g-o,u=t.hi-o,l=f-a,g=t.hi*a,l=f-l,c=a-l,f=o*l-g+o*c+u*l+u*c+(t.hi*s+t.lo*a);var h=g+f;o=g-h;var v=f+o;return t.hi=h,t.lo=v,t}.apply(void 0,r)}};return a.apply(this,r)}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this.hi),n=0;return t===this.hi&&(n=Math.floor(this.lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this.hi,-this.lo)}},{key:"clone",value:function(){try{return a(Object.getPrototypeOf(e.prototype),"clone",this).call(this)}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}}},{key:"multiply",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];return a.isNaN()?e.createNaN():e.copy(t).selfMultiply(a)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];return S.isNaN(a)?e.createNaN():e.copy(t).selfMultiply(a,0)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"isNaN",value:function(){return S.isNaN(this.hi)}},{key:"intValue",value:function(){return Math.trunc(this.hi)}},{key:"toString",value:function(){var t=e.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!0,n),i=n[0]+1,a=r;if("."===r.charAt(0))a="0"+r;else if(0>i)a="0."+e.stringOfChar("0",-i)+r;else if(-1===r.indexOf(".")){var s=i-r.length,o=e.stringOfChar("0",s);a=r+o+".0"}return this.isNegative()?"-"+a:a}},{key:"reciprocal",value:function(){var t=null,n=null,r=null,i=null,a=null,s=null,o=null,u=null;a=1/this.hi,s=e.SPLIT*a,t=s-a,u=e.SPLIT*this.hi,t=s-t,n=a-t,r=u-this.hi,o=a*this.hi,r=u-r,i=this.hi-r,u=t*r-o+t*i+n*r+n*i,s=(1-o-u-a*this.lo)/this.hi;var l=a+s,c=a-l+s;return new e(l,c)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!1,n),i=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var a="";r.length>1&&(a=r.substring(1));var s=r.charAt(0)+"."+a;return this.isNegative()?"-"+s+i:s+i}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this.hi>0||0===this.hi&&this.lo>0}},{key:"lt",value:function(e){return this.hi<e.hi||this.hi===e.hi&&this.lo<e.lo}},{key:"add",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];return e.copy(t).selfAdd(a)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];return e.copy(t).selfAdd(a)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"init",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.hi=i,t.lo=0}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.hi=i.hi,t.lo=i.lo}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.hi=i,t.lo=a}.apply(void 0,r)}};return a.apply(this,r)}},{key:"gt",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>e.lo}},{key:"isNegative",value:function(){return this.hi<0||0===this.hi&&this.lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil();
}},{key:"signum",value:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[P,L,R]}}],[{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if("string"==typeof n[0])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.parse(i)}.apply(void 0,n);if("number"==typeof n[0])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new e(i)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,r=t.length;X.isWhitespace(t.charAt(n));)n++;var i=!1;if(r>n){var a=t.charAt(n);("-"===a||"+"===a)&&(n++,"-"===a&&(i=!0))}for(var s=new e,o=0,u=0,l=0;;){if(n>=r)break;var c=t.charAt(n);if(n++,X.isDigit(c)){var g=c-"0";s.selfMultiply(e.TEN),s.selfAdd(g),o++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(n);try{l=Y.parseInt(f)}catch(h){throw h instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+f+" in string "+t):h}finally{}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+n+" in string "+t)}u=o}}var v=s,y=o-u-l;if(0===y)v=s;else if(y>0){var m=e.TEN.pow(y);v=s.divide(m)}else if(0>y){var m=e.TEN.pow(-y);v=s.multiply(m)}return i?v.negate():v}},{key:"createNaN",value:function(){return new e(S.NaN,S.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return t>=10*i&&(r+=1),r}},{key:"stringOfChar",value:function(e,t){for(var n=new z,r=0;t>r;r++)n.append(e);return n.toString()}}]),e}();V.PI=new V(3.141592653589793,1.2246467991473532e-16),V.TWO_PI=new V(6.283185307179586,2.4492935982947064e-16),V.PI_2=new V(1.5707963267948966,6.123233995736766e-17),V.E=new V(2.718281828459045,1.4456468917292502e-16),V.NaN=new V(S.NaN,S.NaN),V.EPS=1.23259516440783e-32,V.SPLIT=134217729,V.MAX_PRINT_DIGITS=32,V.TEN=V.valueOf(10),V.ONE=V.valueOf(1),V.SCI_NOT_EXPONENT_CHAR="E",V.SCI_NOT_ZERO="0.0E0";var j=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var i=e.orientationIndexFilter(t,n,r);if(1>=i)return i;var a=V.valueOf(n.x).selfAdd(-t.x),s=V.valueOf(n.y).selfAdd(-t.y),o=V.valueOf(r.x).selfAdd(-n.x),u=V.valueOf(r.y).selfAdd(-n.y);return a.selfMultiply(u).selfSubtract(s.selfMultiply(o)).signum()}},{key:"signOfDet2x2",value:function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()}},{key:"intersection",value:function(e,t,n,r){var i=V.valueOf(r.y).selfSubtract(n.y).selfMultiply(V.valueOf(t.x).selfSubtract(e.x)),a=V.valueOf(r.x).selfSubtract(n.x).selfMultiply(V.valueOf(t.y).selfSubtract(e.y)),s=i.subtract(a),o=V.valueOf(r.x).selfSubtract(n.x).selfMultiply(V.valueOf(e.y).selfSubtract(n.y)),u=V.valueOf(r.y).selfSubtract(n.y).selfMultiply(V.valueOf(e.x).selfSubtract(n.x)),l=o.subtract(u),c=l.selfDivide(s).doubleValue(),g=V.valueOf(e.x).selfAdd(V.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),f=V.valueOf(t.x).selfSubtract(e.x).selfMultiply(V.valueOf(e.y).selfSubtract(n.y)),h=V.valueOf(t.y).selfSubtract(e.y).selfMultiply(V.valueOf(e.x).selfSubtract(n.x)),v=f.subtract(h),y=v.selfDivide(s).doubleValue(),m=V.valueOf(n.y).selfAdd(V.valueOf(r.y).selfSubtract(n.y).selfMultiply(y)).doubleValue();return new M(g,m)}},{key:"orientationIndexFilter",value:function(t,n,r){var i=null,a=(t.x-r.x)*(n.y-r.y),s=(t.y-r.y)*(n.x-r.x),o=a-s;if(a>0){if(0>=s)return e.signum(o);i=a+s}else{if(!(0>a))return e.signum(o);if(s>=0)return e.signum(o);i=-a-s}var u=e.DP_SAFE_EPSILON*i;return o>=u||-o>=u?e.signum(o):2}},{key:"signum",value:function(e){return e>0?1:0>e?-1:0}}]),e}();j.DP_SAFE_EPSILON=1e-15;var H=function bi(){i(this,bi)},W=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 0:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];n(r,Object.getPrototypeOf(t).call(r,"Projective point not representable on the Cartesian plane."))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(H),K=function(){function e(){i(this,e)}return s(e,null,[{key:"arraycopy",value:function(e,t,n,r,i){for(var a=0,s=t;t+i>s;s++)n[r+a]=e[s],a++}},{key:"getProperty",value:function(e){return{"line.separator":"\n"}[e]}}]),e}(),J=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.x=null,t.y=null,t.w=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.x=0,t.y=0,t.w=1}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.x=i.x,t.y=i.y,t.w=1}.apply(void 0,r);case 2:if("number"==typeof r[0]&&"number"==typeof r[1])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.x=i,t.y=a,t.w=1}.apply(void 0,r);if(r[0]instanceof e&&r[1]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.x=i.y*a.w-a.y*i.w,t.y=a.x*i.w-i.x*a.w,t.w=i.x*a.y-a.x*i.y}.apply(void 0,r);if(r[0]instanceof M&&r[1]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.x=i.y-a.y,t.y=a.x-i.x,t.w=i.x*a.y-a.x*i.y}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.x=i,t.y=a,t.w=s}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3],u=i.y-a.y,l=a.x-i.x,c=i.x*a.y-a.x*i.y,g=s.y-o.y,f=o.x-s.x,h=s.x*o.y-o.x*s.y;t.x=l*h-f*c,t.y=g*c-u*h,t.w=u*f-g*l}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"getY",value:function(){var e=this.y/this.w;if(S.isNaN(e)||S.isInfinite(e))throw new W;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(S.isNaN(e)||S.isInfinite(e))throw new W;return e}},{key:"getCoordinate",value:function(){var e=new M;return e.x=this.getX(),e.y=this.getY(),e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersection",value:function(e,t,n,r){var i=e.y-t.y,a=t.x-e.x,s=e.x*t.y-t.x*e.y,o=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=a*l-u*s,g=o*s-i*l,f=i*u-o*a,h=c/f,v=g/f;if(S.isNaN(h)||S.isInfinite(h)||S.isNaN(v)||S.isInfinite(v))throw new W;return new M(h,v)}}]),e}(),Q=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.minx=null,t.maxx=null,t.miny=null,t.maxy=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.init()}.apply(void 0,r);case 1:if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i.x,i.x,i.y,i.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.init(i.x,a.x,i.y,a.y)}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];t.init(i,a,s,o)}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this.maxx===n.getMaxX()&&this.maxy===n.getMaxY()&&this.minx===n.getMinX()&&this.miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this.minx>t.minx?this.minx:t.minx,r=this.miny>t.miny?this.miny:t.miny,i=this.maxx<t.maxx?this.maxx:t.maxx,a=this.maxy<t.maxy?this.maxy:t.maxy;return new e(n,i,r,a)}},{key:"isNull",value:function(){return this.maxx<this.minx}},{key:"getMaxX",value:function(){return this.maxx}},{key:"covers",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.covers(i.x,i.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.isNull()||i.isNull()?!1:i.getMinX()>=t.minx&&i.getMaxX()<=t.maxx&&i.getMinY()>=t.miny&&i.getMaxY()<=t.maxy}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return t.isNull()?!1:i>=t.minx&&i<=t.maxx&&a>=t.miny&&a<=t.maxy}.apply(void 0,r)}};return a.apply(this,r)}},{key:"intersects",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.isNull()||i.isNull()?!1:!(i.minx>t.maxx||i.maxx<t.minx||i.miny>t.maxy||i.maxy<t.miny)}.apply(void 0,r);if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.intersects(i.x,i.y)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return t.isNull()?!1:!(i>t.maxx||i<t.minx||a>t.maxy||a<t.miny)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"getMinY",value:function(){return this.miny}},{key:"getMinX",value:function(){return this.minx}},{key:"expandToInclude",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.expandToInclude(i.x,i.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return i.isNull()?null:void(t.isNull()?(t.minx=i.getMinX(),t.maxx=i.getMaxX(),t.miny=i.getMinY(),t.maxy=i.getMaxY()):(i.minx<t.minx&&(t.minx=i.minx),i.maxx>t.maxx&&(t.maxx=i.maxx),i.miny<t.miny&&(t.miny=i.miny),i.maxy>t.maxy&&(t.maxy=i.maxy)))}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.isNull()?(t.minx=i,t.maxx=i,t.miny=a,t.maxy=a):(i<t.minx&&(t.minx=i),i>t.maxx&&(t.maxx=i),a<t.miny&&(t.miny=a),a>t.maxy&&(t.maxy=a))}.apply(void 0,r)}};return a.apply(this,r)}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return t>e?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this.maxx-this.minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this.minx<t.minx?-1:this.minx>t.minx?1:this.miny<t.miny?-1:this.miny>t.miny?1:this.maxx<t.maxx?-1:this.maxx>t.maxx?1:this.maxy<t.maxy?-1:this.maxy>t.maxy?1:0}},{key:"translate",value:function(e,t){return this.isNull()?null:void this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"toString",value:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"}},{key:"setToNull",value:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1}},{key:"getHeight",value:function(){return this.isNull()?0:this.maxy-this.miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.expandBy(i,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.isNull()?null:(e.minx-=i,e.maxx+=i,e.miny-=a,e.maxy+=a,void((e.minx>e.maxx||e.miny>e.maxy)&&e.setToNull()))}.apply(void 0,n)}};return i.apply(this,n)}},{key:"contains",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.covers(i)}.apply(void 0,r);if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.covers(i)}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return t.covers(i,a)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"centre",value:function(){return this.isNull()?null:new M((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.setToNull()}.apply(void 0,r);case 1:if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i.x,i.x,i.y,i.y)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.minx=i.minx,t.maxx=i.maxx,t.miny=i.miny,t.maxy=i.maxy}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.init(i.x,a.x,i.y,a.y)}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];a>i?(t.minx=i,t.maxx=a):(t.minx=a,t.maxx=i),o>s?(t.miny=s,t.maxy=o):(t.miny=o,t.maxy=s)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"getMaxY",value:function(){return this.maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this.maxx<e.minx?t=e.minx-this.maxx:this.minx>e.maxx&&(t=this.minx-e.maxx);var n=0;return this.maxy<e.miny?n=e.miny-this.maxy:this.miny>e.maxy&&(n=this.miny-e.maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*e+M.hashCode(this.minx),e=37*e+M.hashCode(this.maxx),e=37*e+M.hashCode(this.miny),e=37*e+M.hashCode(this.maxy)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L,P]}}],[{key:"intersects",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return a.x>=(r.x<i.x?r.x:i.x)&&a.x<=(r.x>i.x?r.x:i.x)&&a.y>=(r.y<i.y?r.y:i.y)&&a.y<=(r.y>i.y?r.y:i.y)?!0:!1}.apply(void 0,t);case 4:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.min(a.x,s.x),u=Math.max(a.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return l>u?!1:o>c?!1:(o=Math.min(a.y,s.y),u=Math.max(a.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u?!1:o>c?!1:!0)}.apply(void 0,t)}};return r.apply(this,t)}}]),e}();Q.serialVersionUID=0x51845cd552189800;var Z=function(){function e(t){i(this,e),this.geometryFactory=t||new st,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}}return s(e,[{key:"read",value:function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);if(-1!==e.search("EMPTY")&&(i=this.regExes.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],this.parse[n]&&(t=this.parse[n].apply(this,[r]))),void 0===t)throw new Error("Could not parse WKT "+e);return t}},{key:"write",value:function(e){return this.extractGeometry(e)}},{key:"extractGeometry",value:function(e){var t=e.getGeometryType().toLowerCase();if(!this.extract[t])return null;var n,r=t.toUpperCase();return n=e.isEmpty()?r+" EMPTY":r+"("+this.extract[t].apply(this,[e])+")"}},{key:"extract",get:function(){return{coordinate:function(e){return e.x+" "+e.y},point:function(e){return this.extract.coordinate.call(this,e.coordinates.coordinates[0])},multipoint:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.point.apply(this,[e.geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(this.extract.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(this.extract.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.linestring.apply(this,[e.geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+this.extract.linestring.apply(this,[e.shell])+")");for(var n=0,r=e.holes.length;r>n;++n)t.push("("+this.extract.linestring.apply(this,[e.holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.polygon.apply(this,[e.geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push(this.extractGeometry.apply(this,[e.geometries[n]]));return t.join(",")}}}},{key:"parse",get:function(){return{point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new M(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var t,n=e.trim().split(","),r=[],i=0,a=n.length;a>i;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),r=[],i=0,a=n.length;a>i;++i)t=n[i].trim().split(this.regExes.spaces),r.push(new M(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(r)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),r=[],i=0,a=n.length;a>i;++i)t=n[i].trim().split(this.regExes.spaces),r.push(new M(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var t,n=e.trim().split(this.regExes.parenComma),r=[],i=0,a=n.length;a>i;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var t,n,r,i,a=e.trim().split(this.regExes.parenComma),s=[],o=0,u=a.length;u>o;++o)t=a[o].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n.points),0===o?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var t,n=e.trim().split(this.regExes.doubleParenComma),r=[],i=0,a=n.length;a>i;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=t.trim().split("|"),r=[],i=0,a=n.length;a>i;++i)r.push(e.prototype.read.apply(this,[n[i]]));return this.geometryFactory.createGeometryCollection(r)}}}}]),e}(),$=function(){function e(t){i(this,e),this.parser=new Z(t)}return s(e,[{key:"write",value:function(e){return this.parser.write(e)}},{key:"toLineString",value:function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}]),e}(),ee=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.result=null,t.inputLines=Array(2).fill().map(function(){return Array(2)}),t.intPt=new Array(2),t.intLineIndex=null,t._isProper=null,t.pa=null,t.pb=null,t.precisionModel=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.intPt[0]=new M,t.intPt[1]=new M,t.pa=t.intPt[0],t.pb=t.intPt[1],t.result=0}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new z;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,r){this.inputLines[0][0]=e,this.inputLines[0][1]=t,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(e,t,n,r)}},{key:"getIntersectionNum",value:function(){return this.result}},{key:"computeIntLineIndex",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];null===e.intLineIndex&&(e.intLineIndex=Array(2).fill().map(function(){return Array(2)}),e.computeIntLineIndex(0),e.computeIntLineIndex(1))}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=e.getEdgeDistance(i,0),s=e.getEdgeDistance(i,1);a>s?(e.intLineIndex[i][0]=0,e.intLineIndex[i][1]=1):(e.intLineIndex[i][0]=1,e.intLineIndex[i][1]=0)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"isInteriorIntersection",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.isInteriorIntersection(0)?!0:e.isInteriorIntersection(1)?!0:!1}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;a<e.result;a++)if(!e.intPt[a].equals2D(e.inputLines[i][0])&&!e.intPt[a].equals2D(e.inputLines[i][1]))return!0;return!1}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getIntersection",value:function(e){return this.intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this.result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){var r=e.computeEdgeDistance(this.intPt[n],this.inputLines[t][0],this.inputLines[t][1]);return r}},{key:"isCollinear",value:function(){return this.result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return $.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+$.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this.inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this.result;t++)if(this.intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[e][t]]}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeEdgeDistance",value:function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),a=-1;if(e.equals(t))a=0;else if(e.equals(n))a=r>i?r:i;else{var s=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);a=r>i?s:o,0!==a||e.equals(t)||(a=Math.max(s,o))}return D.isTrue(!(0===a&&!e.equals(t)),"Bad distance calculation"),a}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=Math.sqrt(r*r+i*i);return D.isTrue(!(0===a&&!e.equals(t)),"Invalid distance calculation"),a}}]),e}();ee.DONT_INTERSECT=0,ee.DO_INTERSECT=1,ee.COLLINEAR=2,ee.NO_INTERSECTION=0,ee.POINT_INTERSECTION=1,ee.COLLINEAR_INTERSECTION=2;var te=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this)),u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"isInSegmentEnvelopes",value:function(e){var t=new Q(this.inputLines[0][0],this.inputLines[0][1]),n=new Q(this.inputLines[1][0],this.inputLines[1][1]);return t.contains(e)&&n.contains(e)}},{key:"computeIntersection",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3!==r.length)return(e=a(Object.getPrototypeOf(t.prototype),"computeIntersection",this)).call.apply(e,[this].concat(r));var s=r[0],o=r[1],u=r[2];return this._isProper=!1,Q.intersects(o,u,s)&&0===ie.orientationIndex(o,u,s)&&0===ie.orientationIndex(u,o,s)?(this._isProper=!0,(s.equals(o)||s.equals(u))&&(this._isProper=!1),this.result=ee.POINT_INTERSECTION,null):void(this.result=ee.NO_INTERSECTION)}},{key:"normalizeToMinimum",value:function(e,t,n,r,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}},{key:"safeHCoordinateIntersection",value:function(e,n,r,i){var a=null;try{a=J.intersection(e,n,r,i)}catch(s){if(!(s instanceof W))throw s;a=t.nearestEndpoint(e,n,r,i)}finally{}return a}},{key:"intersection",value:function(e,n,r,i){var a=this.intersectionWithNormalization(e,n,r,i);return this.isInSegmentEnvelopes(a)||(a=new M(t.nearestEndpoint(e,n,r,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(a),a}},{key:"smallestInAbsValue",value:function(e,t,n,r){var i=e,a=Math.abs(i);return Math.abs(t)<a&&(i=t,a=Math.abs(t)),Math.abs(n)<a&&(i=n,a=Math.abs(n)),Math.abs(r)<a&&(i=r),i}},{key:"checkDD",value:function(e,t,n,r,i){var a=j.intersection(e,t,n,r),s=this.isInSegmentEnvelopes(a);K.out.println("DD in env = "+s+"  --------------------- "+a),i.distance(a)>1e-4&&K.out.println("Distance = "+i.distance(a))}},{key:"intersectionWithNormalization",value:function(e,t,n,r){var i=new M(e),a=new M(t),s=new M(n),o=new M(r),u=new M;this.normalizeToEnvCentre(i,a,s,o,u);var l=this.safeHCoordinateIntersection(i,a,s,o);return l.x+=u.x,l.y+=u.y,l}},{key:"computeCollinearIntersection",value:function(e,t,n,r){var i=Q.intersects(e,t,n),a=Q.intersects(e,t,r),s=Q.intersects(n,r,e),o=Q.intersects(n,r,t);return i&&a?(this.intPt[0]=n,this.intPt[1]=r,ee.COLLINEAR_INTERSECTION):s&&o?(this.intPt[0]=e,this.intPt[1]=t,ee.COLLINEAR_INTERSECTION):i&&s?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||a||o?ee.COLLINEAR_INTERSECTION:ee.POINT_INTERSECTION):i&&o?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||a||s?ee.COLLINEAR_INTERSECTION:ee.POINT_INTERSECTION):a&&s?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||i||o?ee.COLLINEAR_INTERSECTION:ee.POINT_INTERSECTION):a&&o?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||i||s?ee.COLLINEAR_INTERSECTION:ee.POINT_INTERSECTION):ee.NO_INTERSECTION}},{key:"normalizeToEnvCentre",value:function(e,t,n,r,i){var a=e.x<t.x?e.x:t.x,s=e.y<t.y?e.y:t.y,o=e.x>t.x?e.x:t.x,u=e.y>t.y?e.y:t.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,g=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,h=a>l?a:l,v=g>o?o:g,y=s>c?s:c,m=f>u?u:f,p=(h+v)/2,d=(y+m)/2;i.x=p,i.y=d,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}},{key:"computeIntersect",value:function(e,t,n,r){if(this._isProper=!1,!Q.intersects(e,t,n,r))return ee.NO_INTERSECTION;var i=ie.orientationIndex(e,t,n),a=ie.orientationIndex(e,t,r);if(i>0&&a>0||0>i&&0>a)return ee.NO_INTERSECTION;var s=ie.orientationIndex(n,r,e),o=ie.orientationIndex(n,r,t);if(s>0&&o>0||0>s&&0>o)return ee.NO_INTERSECTION;var u=0===i&&0===a&&0===s&&0===o;return u?this.computeCollinearIntersection(e,t,n,r):(0===i||0===a||0===s||0===o?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:0===i?this.intPt[0]=new M(n):0===a?this.intPt[0]=new M(r):0===s?this.intPt[0]=new M(e):0===o&&(this.intPt[0]=new M(t))):(this._isProper=!0,this.intPt[0]=this.intersection(e,t,n,r)),ee.POINT_INTERSECTION)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"nearestEndpoint",value:function(e,t,n,r){var i=e,a=ie.distancePointLine(e,n,r),s=ie.distancePointLine(t,n,r);return a>s&&(a=s,i=t),s=ie.distancePointLine(n,e,t),a>s&&(a=s,i=n),s=ie.distancePointLine(r,e,t),a>s&&(a=s,i=r),i}}]),t}(ee),ne=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var i=n.x-t.x,a=n.y-t.y,s=r.x-n.x,o=r.y-n.y;return e.signOfDet2x2(i,a,s,o)}},{key:"signOfDet2x2",value:function(e,t,n,r){var i=null,a=null,s=null,o=0;if(i=1,0===e||0===r)return 0===t||0===n?0:t>0?n>0?-i:i:n>0?i:-i;if(0===t||0===n)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?r>=t||(i=-i,a=e,e=n,n=a,a=t,t=r,r=a):-r>=t?(i=-i,n=-n,r=-r):(a=e,e=-n,n=a,a=t,t=-r,r=a):r>0?r>=-t?(i=-i,e=-e,t=-t):(a=-e,e=n,n=a,a=-t,t=r,r=a):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,a=-e,e=-n,n=a,a=-t,t=-r,r=a),e>0){if(!(n>0))return i;if(!(n>=e))return i}else{if(n>0)return-i;if(!(e>=n))return-i;i=-i,e=-e,n=-n}for(;;){if(o+=1,s=Math.floor(n/e),n-=s*e,r-=s*t,0>r)return-i;if(r>t)return i;if(e>n+n){if(r+r>t)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(e/n),e-=s*n,t-=s*r,0>t)return i;if(t>r)return-i;if(n>e+e){if(t+t>r)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(0===t)return 0===e?0:i;if(0===e)return-i}}}]),e}(),re=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];
i(this,e),function(){t.p=null,t.crossingCount=0,t.isPointOnSegment=!1}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.p=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"countSegment",value:function(e,t){if(e.x<this.p.x&&t.x<this.p.x)return null;if(this.p.x===t.x&&this.p.y===t.y)return this.isPointOnSegment=!0,null;if(e.y===this.p.y&&t.y===this.p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(e.y>this.p.y&&t.y<=this.p.y||t.y>this.p.y&&e.y<=this.p.y){var i=e.x-this.p.x,a=e.y-this.p.y,s=t.x-this.p.x,o=t.y-this.p.y,u=ne.signOfDet2x2(i,a,s,o);if(0===u)return this.isPointOnSegment=!0,null;a>o&&(u=-u),u>0&&this.crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==q.EXTERIOR}},{key:"getLocation",value:function(){return this.isPointOnSegment?q.BOUNDARY:this.crossingCount%2===1?q.INTERIOR:q.EXTERIOR}},{key:"isOnSegment",value:function(){return this.isPointOnSegment}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"locatePointInRing",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if(n[0]instanceof M&&n[1].interfaces_&&n[1].interfaces_.indexOf(G)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=new e(i),o=new M,u=new M,l=1;l<a.size();l++)if(a.getCoordinate(l,o),a.getCoordinate(l-1,u),s.countSegment(o,u),s.isOnSegment())return s.getLocation();return s.getLocation()}.apply(void 0,n);if(n[0]instanceof M&&n[1]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=new e(i),o=1;o<a.length;o++){var u=a[o],l=a[o-1];if(s.countSegment(u,l),s.isOnSegment())return s.getLocation()}return s.getLocation()}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),ie=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(e,t,n){return j.orientationIndex(e,t,n)}},{key:"signedArea",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:if(t[0]instanceof Array)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];if(r.length<3)return 0;for(var i=0,a=r[0].x,s=1;s<r.length-1;s++){var o=r[s].x-a,u=r[s+1].y,l=r[s-1].y;i+=o*(l-u)}return i/2}.apply(void 0,t);if(t[0].interfaces_&&t[0].interfaces_.indexOf(G)>-1)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=r.size();if(3>i)return 0;var a=new M,s=new M,o=new M;r.getCoordinate(0,s),r.getCoordinate(1,o);var u=s.x;o.x-=u;for(var l=0,c=1;i-1>c;c++)a.y=s.y,s.x=o.x,s.y=o.y,r.getCoordinate(c+1,o),o.x-=u,l+=s.x*(a.y-o.y);return l/2}.apply(void 0,t)}};return r.apply(this,t)}},{key:"distanceLineLine",value:function(t,n,r,i){if(t.equals(n))return e.distancePointLine(t,r,i);if(r.equals(i))return e.distancePointLine(i,t,n);var a=!1;if(Q.intersects(t,n,r,i)){var s=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(0===s)a=!0;else{var o=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),u=(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y),l=u/s,c=o/s;(0>c||c>1||0>l||l>1)&&(a=!0)}}else a=!0;return a?U.min(e.distancePointLine(t,r,i),e.distancePointLine(n,r,i),e.distancePointLine(r,t,n),e.distancePointLine(i,t,n)):0}},{key:"isPointInRing",value:function(t,n){return e.locatePointInRing(t,n)!==q.EXTERIOR}},{key:"isCCW",value:function t(n){var r=n.length-1;if(3>r)throw new O("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=n[0],a=0,s=1;r>=s;s++){var o=n[s];o.y>i.y&&(i=o,a=s)}var u=a;do u-=1,0>u&&(u=r);while(n[u].equals2D(i)&&u!==a);var l=a;do l=(l+1)%r;while(n[l].equals2D(i)&&l!==a);var c=n[u],g=n[l];if(c.equals2D(i)||g.equals2D(i)||c.equals2D(g))return!1;var f=e.computeOrientation(c,i,g),t=!1;return t=0===f?c.x>g.x:f>0}},{key:"locatePointInRing",value:function(e,t){return re.locatePointInRing(e,t)}},{key:"distancePointLinePerpendicular",value:function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)}},{key:"computeOrientation",value:function(t,n,r){return e.orientationIndex(t,n,r)}},{key:"length",value:function(e){var t=e.size();if(1>=t)return 0;var n=0,r=new M;e.getCoordinate(0,r);for(var i=r.x,a=r.y,s=1;t>s;s++){e.getCoordinate(s,r);var o=r.x,u=r.y,l=o-i,c=u-a;n+=Math.sqrt(l*l+c*c),i=o,a=u}return n}},{key:"distancePointLine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];if(0===a.length)throw new O("Line array must contain at least one vertex");for(var s=i.distance(a[0]),o=0;o<a.length-1;o++){var u=e.distancePointLine(i,a[o],a[o+1]);s>u&&(s=u)}return s}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];if(i.x===a.x&&i.y===a.y)return r.distance(i);var s=(a.x-i.x)*(a.x-i.x)+(a.y-i.y)*(a.y-i.y),o=((r.x-i.x)*(a.x-i.x)+(r.y-i.y)*(a.y-i.y))/s;if(0>=o)return r.distance(i);if(o>=1)return r.distance(a);var u=((i.y-r.y)*(a.x-i.x)-(i.x-r.x)*(a.y-i.y))/s;return Math.abs(u)*Math.sqrt(s)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isOnLine",value:function(e,t){for(var n=new te,r=1;r<t.length;r++){var i=t[r-1],a=t[r];if(n.computeIntersection(e,i,a),n.hasIntersection())return!0}return!1}}]),e}();ie.CLOCKWISE=-1,ie.RIGHT=ie.CLOCKWISE,ie.COUNTERCLOCKWISE=1,ie.LEFT=ie.COUNTERCLOCKWISE,ie.COLLINEAR=0,ie.STRAIGHT=ie.COLLINEAR;var ae=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.envelope=null,t.factory=null,t.SRID=null,t.userData=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.factory=i,t.SRID=i.getSRID()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"isGeometryCollection",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this.factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"union",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return UnaryUnionOp.union(e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(e.isEmpty()||i.isEmpty()){if(e.isEmpty()&&i.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,e,i,e.factory);if(e.isEmpty())return i.copy();if(i.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(i),SnapIfNeededOverlayOp.overlayOp(e,i,OverlayOp.UNION)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isValid",value:function(){return IsValidOp.isValid(this)}},{key:"isRectangle",value:function(){return!1}},{key:"equals",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return null===i?!1:t.equalsTopo(i)}.apply(void 0,r);if(r[0]instanceof Object)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];if(!(a instanceof e))return!1;var s=a;return t.equalsExact(s)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"intersection",value:function(e){if(this.isEmpty()||e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return GeometryCollectionMapper.map(this,new(function(){function e(){i(this,e)}return s(e,[{key:"map",value:function(e){return e.intersection(t)}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.INTERSECTION)}},{key:"covers",value:function(e){return this.getEnvelopeInternal().covers(e.getEnvelopeInternal())?this.isRectangle()?!0:this.relate(e).isCovers():!1}},{key:"intersects",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects.intersects(this,e):e.isRectangle()?RectangleIntersects.intersects(e,this):this.relate(e).isIntersects():!1}},{key:"touches",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isTouches(this.getDimension(),e.getDimension()):!1}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"within",value:function(e){return e.contains(this)}},{key:"geometryChangedAction",value:function(){this.envelope=null}},{key:"buffer",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return BufferOp.bufferOp(e,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return BufferOp.bufferOp(e,i,a)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];return BufferOp.bufferOp(e,i,a,s)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"equalsNorm",value:function(e){return null===e?!1:this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=i;return e.getSortIndex()!==a.getSortIndex()?e.getSortIndex()-a.getSortIndex():e.isEmpty()&&a.isEmpty()?0:e.isEmpty()?-1:a.isEmpty()?1:e.compareToSameClass(i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=i;return e.getSortIndex()!==s.getSortIndex()?e.getSortIndex()-s.getSortIndex():e.isEmpty()&&s.isEmpty()?0:e.isEmpty()?-1:s.isEmpty()?1:e.compareToSameClass(i,a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"convexHull",value:function(){return new ConvexHull(this).getConvexHull()}},{key:"equalsTopo",value:function(e){return this.getEnvelopeInternal().equals(e.getEnvelopeInternal())?this.relate(e).isEquals(this.getDimension(),e.getDimension()):!1}},{key:"coveredBy",value:function(e){return e.covers(this)}},{key:"getUserData",value:function(){return this.userData}},{key:"getSRID",value:function(){return this.SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n}},{key:"relate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(i),RelateOp.relate(e,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.relate(i).matches(a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"overlaps",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isOverlaps(this.getDimension(),e.getDimension()):!1}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"getPrecisionModel",value:function(){return this.factory.getPrecisionModel()}},{key:"getCentroid",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=Centroid.getCentroid(this);return this.createPointFromInternalCoord(e,this)}},{key:"getEnvelopeInternal",value:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new Q(this.envelope)}},{key:"isEquivalentClass",value:function(e){return this.name===e.getClass().getName()}},{key:"clone",value:function t(){try{var t=a(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return null!==t.envelope&&(t.envelope=new Q(t.envelope)),t}catch(n){if(n instanceof CloneNotSupportedException)return D.shouldNeverReachHere(),null;throw n}finally{}}},{key:"setSRID",value:function(e){this.SRID=e}},{key:"getInteriorPoint",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new InteriorPointPoint(this);e=n.getInteriorPoint()}else if(1===t){var n=new InteriorPointLine(this);e=n.getInteriorPoint()}else{var n=new InteriorPointArea(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)}},{key:"symDifference",value:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.SYMDIFFERENCE)}},{key:"setUserData",value:function(e){this.userData=e}},{key:"toString",value:function(){return this.toText()}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}},{key:"disjoint",value:function(e){return!this.intersects(e)}},{key:"toText",value:function(){var e=new WKTWriter;return e.write(this)}},{key:"crosses",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isCrosses(this.getDimension(),e.getDimension()):!1}},{key:"contains",value:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?RectangleContains.contains(this,e):this.relate(e).isContains():!1}},{key:"difference",value:function(e){return this.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.DIFFERENCE))}},{key:"isSimple",value:function(){var e=new IsSimpleOp(this);return e.isSimple()}},{key:"compare",value:function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),a=r.next(),s=i.compareTo(a);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"isWithinDistance",value:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:DistanceOp.isWithinDistance(this,e,t)}},{key:"distance",value:function(e){return DistanceOp.distance(this,e)}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===e.SORTINDEX_MULTIPOINT||this.getSortIndex()===e.SORTINDEX_MULTILINESTRING||this.getSortIndex()===e.SORTINDEX_MULTIPOLYGON?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[R,L,P]}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}]),e}();ae.serialVersionUID=0x799ea46522854c00,ae.SORTINDEX_POINT=0,ae.SORTINDEX_MULTIPOINT=1,ae.SORTINDEX_LINESTRING=2,ae.SORTINDEX_LINEARRING=3,ae.SORTINDEX_MULTILINESTRING=4,ae.SORTINDEX_POLYGON=5,ae.SORTINDEX_MULTIPOLYGON=6,ae.SORTINDEX_GEOMETRYCOLLECTION=7,ae.geometryChangedFilter=new(function(){function e(){i(this,e)}return s(e,[{key:"filter",value:function(e){e.geometryChangedAction()}}]),e}());var se=function(){function e(){i(this,e)}return s(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),oe=function(){function e(){i(this,e)}return s(e,[{key:"isInBoundary",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"Mod2BoundaryNodeRule",get:function(){return ue}},{key:"EndPointBoundaryNodeRule",get:function(){return le}},{key:"MultiValentEndPointBoundaryNodeRule",get:function(){return ce}},{key:"MonoValentEndPointBoundaryNodeRule",get:function(){return ge}}]),e}(),ue=function(){function e(){i(this,e)}return s(e,[{key:"isInBoundary",value:function(e){return e%2===1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[oe]}}]),e}(),le=function(){function e(){i(this,e)}return s(e,[{key:"isInBoundary",value:function(e){return e>0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[oe]}}]),e}(),ce=function(){function e(){i(this,e)}return s(e,[{key:"isInBoundary",value:function(e){return e>1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[oe]}}]),e}(),ge=function(){function e(){i(this,e)}return s(e,[{key:"isInBoundary",value:function(e){return 1===e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[oe]}}]),e}();oe.MOD2_BOUNDARY_RULE=new ue,oe.ENDPOINT_BOUNDARY_RULE=new le,oe.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new ce,oe.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new ge,oe.OGC_SFS_BOUNDARY_RULE=oe.MOD2_BOUNDARY_RULE,o.prototype.hasNext=function(){},o.prototype.next=function(){},o.prototype.remove=function(){},u.prototype.add=function(){},u.prototype.addAll=function(){},u.prototype.isEmpty=function(){},u.prototype.iterator=function(){},u.prototype.size=function(){},u.prototype.toArray=function(){},u.prototype.remove=function(){},l.prototype=new Error,l.prototype.name="IndexOutOfBoundsException",c.prototype=new u,c.prototype.get=function(){},c.prototype.set=function(){},c.prototype.isEmpty=function(){},g.prototype=new Error,g.prototype.name="NoSuchElementException",f.prototype=new Error,f.prototype.name="OperationNotSupported";var fe=function(e){function t(){i(this,t);var e=n(this,Object.getPrototypeOf(t).call(this));return e.array_=[],arguments[0]instanceof u&&e.addAll(arguments[0]),e}return r(t,e),s(t,[{key:"ensureCapacity",value:function(){}},{key:"interfaces_",get:function(){return[c,u]}}]),t}(c);fe.prototype.add=function(e){return this.array_.push(e),!0},fe.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},fe.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},fe.prototype.iterator=function(){return new he(this)},fe.prototype.get=function(e){if(0>e||e>=this.size())throw new l;return this.array_[e]},fe.prototype.isEmpty=function(){return 0===this.array_.length},fe.prototype.size=function(){return this.array_.length},fe.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},fe.prototype.remove=function(e){for(var t=!1,n=0,r=this.array_.length;r>n;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t};var he=function(e){this.arrayList_=e,this.position_=0};he.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new g;return this.arrayList_.get(this.position_++)},he.prototype.hasNext=function(){return this.position_<this.arrayList_.size()?!0:!1},he.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},he.prototype.remove=function(){throw new f};var ve=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 0:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];n(r,Object.getPrototypeOf(t).call(r))}.apply(void 0,i);case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];u.ensureCapacity(r.length),u.add(r,!0)}.apply(void 0,i);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];u.ensureCapacity(r.length),u.add(r,i)}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){for(var s=r[0],o=r[1],u=!1,l=s.iterator();l.hasNext();)this.add(l.next(),o),u=!0;return u}return(e=a(Object.getPrototypeOf(t.prototype),"addAll",this)).call.apply(e,[this].concat(r))}},{key:"clone",value:function o(){for(var o=a(Object.getPrototypeOf(t.prototype),"clone",this).call(this),e=0;e<this.size();e++)o.add(e,this.get(e).copy());return o}},{key:"toCoordinateArray",value:function(){return this.toArray(t.coordArrayType)}},{key:"add",value:function(){for(var e=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=r[0];a(Object.getPrototypeOf(t.prototype),"add",e).call(e,s)}.apply(void 0,r);case 2:if(r[0]instanceof Array&&"boolean"==typeof r[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.add(i,a,!0),!0}.apply(void 0,r);if(r[0]instanceof M&&"boolean"==typeof r[1])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=r[0],o=r[1];if(!o&&e.size()>=1){var u=e.get(e.size()-1);if(u.equals2D(s))return null}a(Object.getPrototypeOf(t.prototype),"add",e).call(e,s)}.apply(void 0,r);if(r[0]instanceof Object&&"boolean"==typeof r[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.add(i,a),!0}.apply(void 0,r);case 3:if("boolean"==typeof r[2]&&r[0]instanceof Array&&"boolean"==typeof r[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];if(s)for(var o=0;o<i.length;o++)e.add(i[o],a);else for(var o=i.length-1;o>=0;o--)e.add(i[o],a);return!0}.apply(void 0,r);if("boolean"==typeof r[2]&&Number.isInteger(r[0])&&r[1]instanceof M)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=r[0],o=r[1],u=r[2];if(!u){var l=e.size();if(l>0){if(s>0){var c=e.get(s-1);if(c.equals2D(o))return null}if(l>s){var g=e.get(s);if(g.equals2D(o))return null}}}a(Object.getPrototypeOf(t.prototype),"add",e).call(e,s,o)}.apply(void 0,r);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3],u=1;s>o&&(u=-1);for(var l=s;l!==o;l+=u)e.add(i[l],a);return!0}.apply(void 0,r)}};return s.apply(this,r)}},{key:"closeRing",value:function(){this.size()>0&&this.add(new M(this.get(0)),!1)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(fe);ve.coordArrayType=new Array(0);var ye=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isRing",value:function(e){return e.length<4?!1:e[0].equals2D(e[e.length-1])?!0:!1}},{key:"ptNotInList",value:function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.indexOf(i,n)<0)return i}return null}},{key:"scroll",value:function(t,n){var r=e.indexOf(n,t);if(0>r)return null;var i=new Array(t.length);K.arraycopy(t,r,i,0,t.length-r),K.arraycopy(t,0,i,t.length-r,r),K.arraycopy(i,0,t,0,t.length)}},{key:"equals",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!r[a].equals(i[a]))return!1;return!0}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==a.compare(r[s],i[s]))return!1;return!0}.apply(void 0,t)}};return r.apply(this,t)}},{key:"intersection",value:function(e,t){for(var n=new ve,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){if(!e.hasRepeatedPoints(t))return t;var n=new ve(t,!1);return n.toCoordinateArray()}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;n>=r;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}}},{key:"removeNull",value:function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t);if(0===t)return r;for(var i=0,n=0;n<e.length;n++)null!==e[n]&&(r[i++]=e[n]);return r}},{key:"copyDeep",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],i=new Array(r.length),a=0;a<r.length;a++)i[a]=new M(r[a]);return i}.apply(void 0,t);case 5:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=0;o>u;u++)a[s+u]=new M(r[i+u])}.apply(void 0,t)}};return r.apply(this,t)}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(0!==r.compareTo(i))return!1}return!0}},{key:"envelope",value:function(e){for(var t=new Q,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1}},{key:"compare",value:function t(e,n){for(var r=0;r<e.length&&r<n.length;){var t=e[r].compareTo(n[r]);if(0!==t)return t;r++}return r<n.length?-1:r<e.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=U.clamp(t,0,e.length),n=U.clamp(n,-1,e.length);var r=n-t+1;0>n&&(r=0),t>=e.length&&(r=0),t>n&&(r=0);var i=new Array(r);if(0===r)return i;for(var a=0,s=t;n>=s;s++)i[a++]=e[s];return i}},{key:"ForwardComparator",get:function(){return me}},{key:"BidirectionalComparator",get:function(){return pe}}]),e}(),me=function(){function e(){i(this,e)}return s(e,[{key:"compare",value:function(e,t){var n=e,r=t;return ye.compare(n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[T]}}]),e}(),pe=function(){function e(){i(this,e)}return s(e,[{key:"compare",value:function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;var a=ye.compare(r,i),s=e.isEqualReversed(r,i);return s?0:a}},{key:"OLDcompare",value:function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;for(var a=e.increasingDirection(r),s=e.increasingDirection(i),o=a>0?0:r.length-1,u=s>0?0:r.length-1,l=0;l<r.length;l++){var c=r[o].compareTo(i[u]);if(0!==c)return c;o+=a,u+=s}return 0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[T]}}]),e}();ye.coordArrayType=new Array(0),h.prototype.get=function(){},h.prototype.put=function(){},h.prototype.size=function(){},h.prototype.values=function(){},h.prototype.entrySet=function(){},v.prototype=new h,y.prototype=new u,y.prototype.contains=function(){},m.prototype=new y,m.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(r===e)return!0}return!1},m.prototype.add=function(e){return this.contains(e)?!1:(this.array_.push(e),!0)},m.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},m.prototype.remove=function(e){throw new javascript.util.OperationNotSupported},m.prototype.size=function(){return this.array_.length},m.prototype.isEmpty=function(){return 0===this.array_.length},m.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},m.prototype.iterator=function(){return new de(this)};var de=function(e){this.hashSet_=e,this.position_=0};de.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new g;return this.hashSet_.array_[this.position_++]},de.prototype.hasNext=function(){return this.position_<this.hashSet_.size()?!0:!1},de.prototype.remove=function(){throw new f};var ke=0,Ae=1,Ie=function(e){return null==e?ke:e.color},Ee=function(e){return null==e?null:e.parent},xe=function(e,t){null!==e&&(e.color=t)},Ne=function(e){return null==e?null:e.left},we=function(e){return null==e?null:e.right};p.prototype=new v,p.prototype.get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(0>n)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null},p.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:ke,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do if(n=i,r=e.compareTo(i.key),0>r)i=i.left;else{if(!(r>0)){var a=i.value;return i.value=t,a}i=i.right}while(null!==i);var s={key:e,left:null,right:null,value:t,parent:n,color:ke,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>r?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},p.prototype.fixAfterInsertion=function(e){for(e.color=Ae;null!=e&&e!=this.root_&&e.parent.color==Ae;)if(Ee(e)==Ne(Ee(Ee(e)))){
var t=we(Ee(Ee(e)));Ie(t)==Ae?(xe(Ee(e),ke),xe(t,ke),xe(Ee(Ee(e)),Ae),e=Ee(Ee(e))):(e==we(Ee(e))&&(e=Ee(e),this.rotateLeft(e)),xe(Ee(e),ke),xe(Ee(Ee(e)),Ae),this.rotateRight(Ee(Ee(e))))}else{var t=Ne(Ee(Ee(e)));Ie(t)==Ae?(xe(Ee(e),ke),xe(t,ke),xe(Ee(Ee(e)),Ae),e=Ee(Ee(e))):(e==Ne(Ee(e))&&(e=Ee(e),this.rotateRight(e)),xe(Ee(e),ke),xe(Ee(Ee(e)),Ae),this.rotateLeft(Ee(Ee(e))))}this.root_.color=ke},p.prototype.values=function(){var e=new fe,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=p.successor(t));)e.add(t.value);return e},p.prototype.entrySet=function(){var e=new m,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=p.successor(t));)e.add(t);return e},p.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left==e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},p.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right==e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},p.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},p.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var t=e.parent,n=e;null!==t&&n===t.right;)n=t,t=t.parent;return t},p.prototype.size=function(){return this.size_};var Ce=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();d.prototype=new y,k.prototype=new d,k.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(0===r.compareTo(e))return!0}return!1},k.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(1===r.compareTo(e))return this.array_.splice(t,0,e),!0}return this.array_.push(e),!0},k.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},k.prototype.remove=function(e){throw new f},k.prototype.size=function(){return this.array_.length},k.prototype.isEmpty=function(){return 0===this.array_.length},k.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},k.prototype.iterator=function(){return new Oe(this)};var Oe=function(e){this.treeSet_=e,this.position_=0};Oe.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new g;return this.treeSet_.array_[this.position_++]},Oe.prototype.hasNext=function(){return this.position_<this.treeSet_.size()?!0:!1},Oe.prototype.remove=function(){throw new f},A.sort=function(){var e,t,n,r,i=arguments[0];if(1===arguments.length)return r=function(e,t){return e.compareTo(t)},void i.sort(r);if(2===arguments.length)n=arguments[1],r=function(e,t){return n.compare(e,t)},i.sort(r);else{if(3===arguments.length){t=i.slice(arguments[1],arguments[2]),t.sort();var a=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length));for(i.splice(0,i.length),e=0;e<a.length;e++)i.push(a[e]);return}if(4===arguments.length){for(t=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(e,t){return n.compare(e,t)},t.sort(r),a=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length)),i.splice(0,i.length),e=0;e<a.length;e++)i.push(a[e]);return}}},A.asList=function(e){for(var t=new fe,n=0,r=e.length;r>n;n++)t.add(e[n]);return t};var Se=function(){function e(){i(this,e)}return s(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Le=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new O("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(X.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new O("Unknown dimension symbol: "+t)}}]),e}();Le.P=0,Le.L=1,Le.A=2,Le.FALSE=-1,Le.TRUE=-2,Le.DONTCARE=-3,Le.SYM_FALSE="F",Le.SYM_TRUE="T",Le.SYM_DONTCARE="*",Le.SYM_P="0",Le.SYM_L="1",Le.SYM_A="2";var Re=function(){function e(){i(this,e)}return s(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Te=function(){function e(){i(this,e)}return s(e,[{key:"filter",value:function(e,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Pe=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.geometries=null}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,o));if(null===s&&(s=[]),t.hasNullElements(s))throw new O("geometries must not contain null elements");u.geometries=s}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new Q,t=0;t<this.geometries.length;t++)e.expandToInclude(this.geometries[t].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this.geometries[e]}},{key:"getSortIndex",value:function(){return ae.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()),t=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),i=0;i<r.length;i++)t++,e[t]=r[i];return e}},{key:"getArea",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getArea();return e}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];if(!this.isEquivalentClass(s))return!1;var u=s;if(this.geometries.length!==u.geometries.length)return!1;for(var l=0;l<this.geometries.length;l++)if(!this.geometries[l].equalsExact(u.geometries[l],o))return!1;return!0}return(e=a(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<this.geometries.length;e++)this.geometries[e].normalize();A.sort(this.geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=Le.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getBoundaryDimension());return e}},{key:"getDimension",value:function(){for(var e=Le.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this.geometries.length}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(t)}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new k(A.asList(e.geometries)),s=new k(A.asList(i.geometries));return e.compare(a,s)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=i,o=e.getNumGeometries(),u=s.getNumGeometries(),l=0;o>l&&u>l;){var c=e.getGeometryN(l),g=s.getGeometryN(l),f=c.compareToSameClass(g,a);if(0!==f)return f;l++}return o>l?1:u>l?-1:0}.apply(void 0,n)}};return i.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;a<e.geometries.length;a++)e.geometries[a].apply(i)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Te)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(0===e.geometries.length)return null;for(var a=0;a<e.geometries.length&&(e.geometries[a].apply(i),!i.isDone());a++);i.isGeometryChanged()&&e.geometryChanged()}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Re)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e);for(var a=0;a<e.geometries.length;a++)e.geometries[a].apply(i)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e);for(var a=0;a<e.geometries.length;a++)e.geometries[a].apply(i)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getBoundary",value:function(){return this.checkNotGeometryCollection(this),D.shouldNeverReachHere(),null}},{key:"clone",value:function(){var e=a(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.geometries=new Array(this.geometries.length);for(var n=0;n<this.geometries.length;n++)e.geometries[n]=this.geometries[n].clone();return e}},{key:"getGeometryType",value:function(){return"GeometryCollection"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"isEmpty",value:function(){for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isEmpty())return!1;return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ae);Pe.serialVersionUID=-0x4f07bcb1f857d800;var be=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1];n(r,Object.getPrototypeOf(t).call(r,s,o))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getSortIndex",value:function(){return ae.SORTINDEX_MULTILINESTRING}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];return this.isEquivalentClass(s)?a(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,s,o):!1}return(e=a(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Le.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isClosed())return!1;return!0}},{key:"getDimension",value:function(){return 1}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[e-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(t)}},{key:"getBoundary",value:function(){return new _e(this).getBoundary()}},{key:"getGeometryType",value:function(){return"MultiLineString"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ce]}}]),t}(Pe);be.serialVersionUID=0x7155d2ab4afa8000;var _e=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geom=null,t.geomFact=null,t.bnRule=null,t.endpointMap=null}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t,i,oe.MOD2_BOUNDARY_RULE)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.geom=i,t.geomFact=i.getFactory(),t.bnRule=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"boundaryMultiLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this.geomFact.createPoint(t[0]):this.geomFact.createMultiPointFromCoords(t)}},{key:"getBoundary",value:function(){return this.geom instanceof Xe?this.boundaryLineString(this.geom):this.geom instanceof be?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()}},{key:"boundaryLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this.bnRule.isInBoundary(2);return t?e.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])}},{key:"getEmptyMultiPoint",value:function(){return this.geomFact.createMultiPoint()}},{key:"computeBoundaryCoordinates",value:function(e){var t=new fe;this.endpointMap=new p;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this.endpointMap.entrySet().iterator();i.hasNext();){var a=i.next(),s=a.getValue(),o=s.count;this.bnRule.isInBoundary(o)&&t.add(a.getKey())}return ye.toCoordinateArray(t)}},{key:"addEndpoint",value:function(e){var t=this.endpointMap.get(e);null===t&&(t=new De,this.endpointMap.put(e,t)),t.count++}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBoundary",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new e(i);return a.getBoundary()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new e(i,a);return s.getBoundary()}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),De=function(){function e(){var t=this;i(this,e),function(){t.count=null}()}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Me=function _i(){i(this,_i)},Fe=function Di(){i(this,Di)},Ge=function Mi(){i(this,Mi)},Be=function Fi(){i(this,Fi)},qe=function Gi(){i(this,Gi)},Ue=function Bi(){i(this,Bi)},ze=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"chars",value:function(e,t){for(var n=new Array(t),r=0;t>r;r++)n[r]=e;return new String(n)}},{key:"getStackTrace",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=new Be,a=new Me(i);return r.printStackTrace(a),i.toString()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s="",o=new Fe(e.getStackTrace(i)),u=new Ue(o),l=0;a>l;l++)try{s+=u.readLine()+e.NEWLINE}catch(c){if(!(c instanceof qe))throw c;D.shouldNeverReachHere()}finally{}return s}.apply(void 0,n)}};return i.apply(this,n)}},{key:"split",value:function(e,t){for(var n=t.length,r=new fe,i=""+e,a=i.indexOf(t);a>=0;){var s=i.substring(0,a);r.add(s),i=i.substring(a+n),a=i.indexOf(t)}i.length>0&&r.add(i);for(var o=new Array(r.size()),u=0;u<o.length;u++)o[u]=r.get(u);return o}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return e.SIMPLE_ORDINATE_FORMAT.format(s)}return(t=a(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"spaces",value:function(t){return e.chars(" ",t)}}]),e}();ze.NEWLINE=K.getProperty("line.separator"),ze.SIMPLE_ORDINATE_FORMAT=new Ge("0.#");var Ye=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoord",value:function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),a=0;i>a;a++)n.setOrdinate(r,a,e.getOrdinate(t,a))}},{key:"isRing",value:function(e){var t=e.size();return 0===t?!0:3>=t?!1:e.getOrdinate(0,G.X)===e.getOrdinate(t-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(t-1,G.Y)}},{key:"isEqual",value:function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),a=0;n>a;a++)for(var s=0;i>s;s++){var o=e.getOrdinate(a,s),u=t.getOrdinate(a,s);if(!(e.getOrdinate(a,s)===t.getOrdinate(a,s)||S.isNaN(o)&&S.isNaN(u)))return!1}return!0}},{key:"extend",value:function(t,n,r){var i=t.create(r,n.getDimension()),a=n.size();if(e.copy(n,0,i,0,a),a>0)for(var s=a;r>s;s++)e.copy(n,a-1,i,s,1);return i}},{key:"reverse",value:function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;r>=i;i++)e.swap(t,i,n-i)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}}},{key:"copy",value:function(t,n,r,i,a){for(var s=0;a>s;s++)e.copyCoord(t,n+s,r,i+s)}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0],o=s.size();if(0===o)return"()";var u=s.getDimension(),l=new z;l.append("(");for(var c=0;o>c;c++){c>0&&l.append(" ");for(var g=0;u>g;g++)g>0&&l.append(","),l.append(ze.toString(s.getOrdinate(c,g)))}return l.append(")"),l.toString()}return(t=a(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"ensureValidRing",value:function(t,n){var r=n.size();if(0===r)return n;if(3>=r)return e.createClosedRing(t,n,4);var i=n.getOrdinate(0,G.X)===n.getOrdinate(r-1,G.X)&&n.getOrdinate(0,G.Y)===n.getOrdinate(r-1,G.Y);return i?n:e.createClosedRing(t,n,r+1)}},{key:"createClosedRing",value:function(t,n,r){var i=t.create(r,n.getDimension()),a=n.size();e.copy(n,0,i,0,a);for(var s=a;r>s;s++)e.copy(n,0,i,s,1);return i}}]),e}(),Xe=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.points=null}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,o));u.init(s)}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Q:this.points.expandEnvelope(new Q)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getSortIndex",value:function(){return ae.SORTINDEX_LINESTRING}},{key:"getCoordinates",value:function(){return this.points.toCoordinateArray()}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];if(!this.isEquivalentClass(s))return!1;var u=s;if(this.points.size()!==u.points.size())return!1;for(var l=0;l<this.points.size();l++)if(!this.equal(this.points.getCoordinate(l),u.points.getCoordinate(l),o))return!1;return!0}return(e=a(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this.points.size()/2);e++){var t=this.points.size()-1-e;if(!this.points.getCoordinate(e).equals(this.points.getCoordinate(t)))return this.points.getCoordinate(e).compareTo(this.points.getCoordinate(t))>0&&Ye.reverse(this.points),null}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Le.FALSE:0}},{key:"isClosed",value:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return ie.length(this.points)}},{key:"getNumPoints",value:function(){return this.points.size()}},{key:"reverse",value:function(){var e=this.points.clone();Ye.reverse(e);var t=this.getFactory().createLineString(e);return t}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=i,s=0,o=0;s<e.points.size()&&o<a.points.size();){var u=e.points.getCoordinate(s).compareTo(a.points.getCoordinate(o));if(0!==u)return u;s++,o++}return s<e.points.size()?1:o<a.points.size()?-1:0}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=i;return a.compare(e.points,s.points)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;a<e.points.size();a++)i.filter(e.points.getCoordinate(a))}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Te)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(0===e.points.size())return null;for(var a=0;a<e.points.size()&&(i.filter(e.points,a),!i.isDone());a++);i.isGeometryChanged()&&e.geometryChanged()}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Re)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getBoundary",value:function(){return new _e(this).getBoundary()}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"clone",value:function(){var e=a(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.points=this.points.clone(),e}},{key:"getCoordinateN",value:function(e){return this.points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return"LineString"}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.points}},{key:"isEmpty",value:function(){return 0===this.points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new O("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this.points=e}},{key:"isCoordinate",value:function(e){for(var t=0;t<this.points.size();t++)if(this.points.getCoordinate(t).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this.points.getCoordinate(e))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ce]}}]),t}(ae);Xe.serialVersionUID=0x2b2b51ba435c8e00;var Ve=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),je=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.coordinates=null}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,o));u.init(s)}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Q;var e=new Q;return e.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),e}},{key:"getSortIndex",value:function(){return ae.SORTINDEX_POINT}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];return this.isEquivalentClass(s)?this.isEmpty()&&s.isEmpty()?!0:this.isEmpty()!==s.isEmpty()?!1:this.equal(s.getCoordinate(),this.getCoordinate(),o):!1}return(e=a(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Le.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"reverse",value:function(){return this.copy()}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=i;return e.getCoordinate().compareTo(a.getCoordinate())}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=i;return a.compare(e.coordinates,s.coordinates)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.isEmpty()?null:void i.filter(e.getCoordinate())}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Te)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.isEmpty()?null:(i.filter(e.coordinates,0),void(i.isGeometryChanged()&&e.geometryChanged()))}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Re)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"clone",value:function(){var e=a(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.coordinates=this.coordinates.clone(),e}},{key:"getGeometryType",value:function(){return"Point"}},{key:"copy",value:function(){return new t(this.coordinates.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this.coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),D.isTrue(e.size()<=1),this.coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ve]}}]),t}(ae);je.serialVersionUID=0x44077bad161cbc00;var He=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),We=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.shell=null,u.holes=null}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 3:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=i[2],l=n(r,Object.getPrototypeOf(t).call(r,u));if(null===s&&(s=l.getFactory().createLinearRing()),null===o&&(o=[]),t.hasNullElements(o))throw new O("holes must not contain null elements");if(s.isEmpty()&&t.hasNonEmptyElements(o))throw new O("shell is empty but holes are not");l.shell=s,l.holes=o}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"computeEnvelopeInternal",value:function(){return this.shell.getEnvelopeInternal()}},{key:"getSortIndex",value:function(){return ae.SORTINDEX_POLYGON}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()),t=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)t++,e[t]=n[r];for(var i=0;i<this.holes.length;i++)for(var a=this.holes[i].getCoordinates(),s=0;s<a.length;s++)t++,e[t]=a[s];return e}},{key:"getArea",value:function(){var e=0;e+=Math.abs(ie.signedArea(this.shell.getCoordinateSequence()));for(var t=0;t<this.holes.length;t++)e-=Math.abs(ie.signedArea(this.holes[t].getCoordinateSequence()));return e}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var e=this.shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;5>n;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var i=e.getY(n);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var a=e.getX(0),s=e.getY(0),n=1;4>=n;n++){var r=e.getX(n),i=e.getY(n),o=r!==a,u=i!==s;if(o===u)return!1;a=r,s=i}return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];if(!this.isEquivalentClass(s))return!1;var u=s,l=this.shell,c=u.shell;if(!l.equalsExact(c,o))return!1;if(this.holes.length!==u.holes.length)return!1;for(var g=0;g<this.holes.length;g++)if(!this.holes[g].equalsExact(u.holes[g],o))return!1;return!0}return(e=a(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r));
}},{key:"normalize",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.normalize(e.shell,!0);for(var i=0;i<e.holes.length;i++)e.normalize(e.holes[i],!1);A.sort(e.holes)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(r.isEmpty())return null;var a=new Array(r.getCoordinates().length-1);K.arraycopy(r.getCoordinates(),0,a,0,a.length);var s=ye.minCoordinate(r.getCoordinates());ye.scroll(a,s),K.arraycopy(a,0,r.getCoordinates(),0,a.length),r.getCoordinates()[a.length]=a[0],ie.isCCW(r.getCoordinates())===i&&ye.reverse(r.getCoordinates())}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getCoordinate",value:function(){return this.shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this.holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this.shell.getLength();for(var t=0;t<this.holes.length;t++)e+=this.holes[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this.shell.getNumPoints(),t=0;t<this.holes.length;t++)e+=this.holes[t].getNumPoints();return e}},{key:"reverse",value:function(){var e=this.copy();e.shell=this.shell.clone().reverse(),e.holes=new Array(this.holes.length);for(var t=0;t<this.holes.length;t++)e.holes[t]=this.holes[t].clone().reverse();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"compareToSameClass",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=e.shell,s=i.shell;return a.compareToSameClass(s)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=i,o=e.shell,u=s.shell,l=o.compareToSameClass(u,a);if(0!==l)return l;for(var c=e.getNumInteriorRing(),g=s.getNumInteriorRing(),f=0;c>f&&g>f;){var h=e.getInteriorRingN(f),v=s.getInteriorRingN(f),y=h.compareToSameClass(v,a);if(0!==y)return y;f++}return c>f?1:g>f?-1:0}.apply(void 0,n)}};return i.apply(this,n)}},{key:"apply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.shell.apply(i);for(var a=0;a<e.holes.length;a++)e.holes[a].apply(i)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Te)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(e.shell.apply(i),!i.isDone())for(var a=0;a<e.holes.length&&(e.holes[a].apply(i),!i.isDone());a++);i.isGeometryChanged()&&e.geometryChanged()}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Re)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(Se)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];i.filter(e),e.shell.apply(i);for(var a=0;a<e.holes.length;a++)e.holes[a].apply(i)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this.holes.length+1);e[0]=this.shell;for(var t=0;t<this.holes.length;t++)e[t+1]=this.holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"clone",value:function(){var e=a(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.shell=this.shell.clone(),e.holes=new Array(this.holes.length);for(var n=0;n<this.holes.length;n++)e.holes[n]=this.holes[n].clone();return e}},{key:"getGeometryType",value:function(){return"Polygon"}},{key:"copy",value:function(){for(var e=this.shell.copy(),n=new Array(this.holes.length),r=0;r<n.length;r++)n[r]=this.holes[r].copy();return new t(e,n,this.factory)}},{key:"getExteriorRing",value:function(){return this.shell}},{key:"isEmpty",value:function(){return this.shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this.holes[e]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[He]}}]),t}(ae);We.serialVersionUID=-0x307ffefd8dc97200;var Ke=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1];n(r,Object.getPrototypeOf(t).call(r,s,o))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getSortIndex",value:function(){return ae.SORTINDEX_MULTIPOINT}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];return this.isEquivalentClass(s)?a(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,s,o):!1}return(e=a(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getCoordinate",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return this.geometries[s].getCoordinate()}return(e=a(Object.getPrototypeOf(t.prototype),"getCoordinate",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return Le.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"getGeometryType",value:function(){return"MultiPoint"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ve]}}]),t}(Pe);Ke.serialVersionUID=-0x6fb1ed4162e0fc00;var Je=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function c(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:if(i[0]instanceof M&&i[1]instanceof st)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];c.call(u,i.getCoordinateSequenceFactory().create(r),i)}.apply(void 0,i);if(i[0].interfaces_&&i[0].interfaces_.indexOf(G)>-1&&i[1]instanceof st)return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,s,o));u.validateConstruction()}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getSortIndex",value:function(){return ae.SORTINDEX_LINEARRING}},{key:"getBoundaryDimension",value:function(){return Le.FALSE}},{key:"isClosed",value:function(){return this.isEmpty()?!0:a(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this)}},{key:"reverse",value:function(){var e=this.points.clone();Ye.reverse(e);var t=this.getFactory().createLinearRing(e);return t}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!a(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this))throw new O("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new O("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return"LinearRing"}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Xe);Je.MINIMUM_VALID_SIZE=4,Je.serialVersionUID=-0x3b229e262367a600;var Qe=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1];n(r,Object.getPrototypeOf(t).call(r,s,o))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getSortIndex",value:function(){return ae.SORTINDEX_MULTIPOLYGON}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];return this.isEquivalentClass(s)?a(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,s,o):!1}return(e=a(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(t)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new fe,t=0;t<this.geometries.length;t++)for(var n=this.geometries[t],r=n.getBoundary(),i=0;i<r.getNumGeometries();i++)e.add(r.getGeometryN(i));var a=new Array(e.size());return this.getFactory().createMultiLineString(e.toArray(a))}},{key:"getGeometryType",value:function(){return"MultiPolygon"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[He]}}]),t}(Pe);Qe.serialVersionUID=-0x7a5aa1369171980;var Ze=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.factory=null,t.isUserDataCopied=!1}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.factory=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"setCopyUserData",value:function(e){this.isUserDataCopied=e}},{key:"edit",value:function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this.isUserDataCopied&&n.setUserData(e.getUserData()),n}},{key:"editInternal",value:function(e,t){return null===this.factory&&(this.factory=e.getFactory()),e instanceof Pe?this.editGeometryCollection(e,t):e instanceof We?this.editPolygon(e,t):e instanceof je?t.edit(e,this.factory):e instanceof Xe?t.edit(e,this.factory):(D.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)}},{key:"editGeometryCollection",value:function(e,t){for(var n=t.edit(e,this.factory),r=new fe,i=0;i<n.getNumGeometries();i++){var a=this.edit(n.getGeometryN(i),t);null===a||a.isEmpty()||r.add(a)}return n.getClass()===Ke?this.factory.createMultiPoint(r.toArray([])):n.getClass()===be?this.factory.createMultiLineString(r.toArray([])):n.getClass()===Qe?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))}},{key:"editPolygon",value:function(e,t){var n=t.edit(e,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),t);if(null===r||r.isEmpty())return this.factory.createPolygon();for(var i=new fe,a=0;a<n.getNumInteriorRing();a++){var s=this.edit(n.getInteriorRingN(a),t);null===s||s.isEmpty()||i.add(s)}return this.factory.createPolygon(r,i.toArray([]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"NoOpGeometryOperation",get:function(){return $e}},{key:"CoordinateOperation",get:function(){return et}},{key:"CoordinateSequenceOperation",get:function(){return tt}}]),e}(),$e=function(){function e(){i(this,e)}return s(e,[{key:"edit",value:function(e,t){return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),et=function(){function e(){i(this,e)}return s(e,[{key:"edit",value:function(e,t){if(e instanceof Je)return t.createLinearRing(this.edit(e.getCoordinates(),e));if(e instanceof Xe)return t.createLineString(this.edit(e.getCoordinates(),e));if(e instanceof je){var n=this.edit(e.getCoordinates(),e);return n.length>0?t.createPoint(n[0]):t.createPoint()}return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),tt=function(){function e(){i(this,e)}return s(e,[{key:"edit",value:function(e,t){return e instanceof Je?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Xe?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof je?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),nt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.dimension=3,t.coordinates=null}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Array)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t,i,3)}.apply(void 0,n);if(Number.isInteger(n[0]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.coordinates=new Array(i);for(var a=0;i>a;a++)t.coordinates[a]=new M}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(G)>-1)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];if(null===i)return t.coordinates=new Array(0),null;t.dimension=i.getDimension(),t.coordinates=new Array(i.size());for(var a=0;a<t.coordinates.length;a++)t.coordinates[a]=i.getCoordinateCopy(a)}.apply(void 0,n);case 2:if(n[0]instanceof Array&&Number.isInteger(n[1]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.coordinates=i,t.dimension=a,null===i&&(t.coordinates=new Array(0))}.apply(void 0,n);if(Number.isInteger(n[0])&&Number.isInteger(n[1]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.coordinates=new Array(i),t.dimension=a;for(var s=0;i>s;s++)t.coordinates[s]=new M}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"setOrdinate",value:function(e,t,n){switch(t){case G.X:this.coordinates[e].x=n;break;case G.Y:this.coordinates[e].y=n;break;case G.Z:this.coordinates[e].z=n;break;default:throw new O("invalid ordinateIndex")}}},{key:"size",value:function(){return this.coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case G.X:return this.coordinates[e].x;case G.Y:return this.coordinates[e].y;case G.Z:return this.coordinates[e].z}return S.NaN}},{key:"getCoordinate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.coordinates[i]}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];a.x=e.coordinates[i].x,a.y=e.coordinates[i].y,a.z=e.coordinates[i].z}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getCoordinateCopy",value:function(e){return new M(this.coordinates[e])}},{key:"getDimension",value:function(){return this.dimension}},{key:"getX",value:function(e){return this.coordinates[e].x}},{key:"clone",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].clone();return new e(t,this.dimension)}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this.coordinates.length;t++)e.expandToInclude(this.coordinates[t]);return e}},{key:"copy",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].copy();return new e(t,this.dimension)}},{key:"toString",value:function(){if(this.coordinates.length>0){var e=new z(17*this.coordinates.length);e.append("("),e.append(this.coordinates[0]);for(var t=1;t<this.coordinates.length;t++)e.append(", "),e.append(this.coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this.coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this.coordinates}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[G,P]}}]),e}();nt.serialVersionUID=-0xcb44a778db18e00;var rt=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return s(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:if(t[0]instanceof Array)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return new nt(r)}.apply(void 0,t);if(t[0].interfaces_&&t[0].interfaces_.indexOf(G)>-1)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return new nt(r)}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];return i>3&&(i=3),2>i?new nt(r):new nt(r,i)}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[B,P]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();rt.serialVersionUID=-0x38e49fa6cf6f2e00,rt.instanceObject=new rt,I.prototype=new h,I.prototype.get=function(e){return this.map_.get(e)||null},I.prototype.put=function(e,t){return this.map_.set(e,t),t},I.prototype.values=function(){var e=new fe;return Array.from(this.map_.values()).forEach(function(t){return e.add(t)}),e},I.prototype.entrySet=function(){var e=new m;return this.map_.entries().forEach(function(t){return e.add(t)}),e},I.prototype.size=function(){return this.map_.size()};var it=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.modelType=null,t.scale=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];t.modelType=e.FLOATING}.apply(void 0,r);case 1:if(r[0]instanceof at)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];t.modelType=a,a===e.FIXED&&t.setScale(1)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];t.modelType=e.FIXED,t.setScale(a)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.modelType=i.modelType,t.scale=i.scale}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.modelType===n.modelType&&this.scale===n.scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new Y(n).compareTo(new Y(r))}},{key:"getScale",value:function(){return this.scale}},{key:"isFloating",value:function(){return this.modelType===e.FLOATING||this.modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this.modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this.modelType===e.FLOATING?t="Floating":this.modelType===e.FLOATING_SINGLE?t="Floating-Single":this.modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if("number"==typeof r[0])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];if(S.isNaN(a))return a;if(t.modelType===e.FLOATING_SINGLE){var s=a;return s}return t.modelType===e.FIXED?Math.round(a*t.scale)/t.scale:a}.apply(void 0,r);if(r[0]instanceof M)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];return t.modelType===e.FLOATING?null:(a.x=t.makePrecise(a.x),void(a.y=t.makePrecise(a.y)))}.apply(void 0,r)}};return a.apply(this,r)}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this.modelType===e.FLOATING?t=16:this.modelType===e.FLOATING_SINGLE?t=6:this.modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(e){this.scale=Math.abs(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[P,L]}}],[{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}},{key:"Type",get:function(){return at}}]),e}(),at=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.name=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];t.name=a,e.nameToTypeMap.put(a,t)}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this.name)}},{key:"toString",value:function(){return this.name}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[P]}}]),e}();at.serialVersionUID=-552860263173159e4,at.nameToTypeMap=new I,it.serialVersionUID=0x6bee6404e9a25c00,it.FIXED=new at("FIXED"),it.FLOATING=new at("FLOATING"),it.FLOATING_SINGLE=new at("FLOATING SINGLE"),it.maximumPreciseValue=9007199254740992;var st=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.precisionModel=null,t.coordinateSequenceFactory=null,t.SRID=null}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,new it,0)}.apply(void 0,r);case 1:if(r[0].interfaces_&&r[0].interfaces_.indexOf(B)>-1)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t,new it,0,i)}.apply(void 0,r);if(r[0]instanceof it)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];o.call(t,a,0,e.getDefaultCoordinateSequenceFactory())}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1];o.call(t,a,s,e.getDefaultCoordinateSequenceFactory())}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.precisionModel=i,t.coordinateSequenceFactory=s,t.SRID=a}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new M(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new M(e.getMinX(),e.getMinY()),new M(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new M(e.getMinX(),e.getMinY()),new M(e.getMinX(),e.getMaxY()),new M(e.getMaxX(),e.getMaxY()),new M(e.getMaxX(),e.getMinY()),new M(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.createLineString(e.getCoordinateSequenceFactory().create([]))}.apply(void 0,n);case 1:if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.createLineString(null!==i?e.getCoordinateSequenceFactory().create(i):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(G)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new Xe(i,e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"createMultiLineString",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new be(null,e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new be(i,e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"buildGeometry",value:function(t){for(var n=null,r=!1,i=!1,a=t.iterator();a.hasNext();){var s=a.next(),o=s.getClass();null===n&&(n=o),o!==n&&(r=!0),s.isGeometryCollectionOrDerived()&&(i=!0)}if(null===n)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(e.toGeometryArray(t));var u=t.iterator().next(),l=t.size()>1;if(l){if(u instanceof We)return this.createMultiPolygon(e.toPolygonArray(t));if(u instanceof Xe)return this.createMultiLineString(e.toLineStringArray(t));if(u instanceof je)return this.createMultiPoint(e.toPointArray(t));D.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.createPoint(e.getCoordinateSequenceFactory().create([]))}.apply(void 0,n);case 1:if(n[0]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.createPoint(null!==i?e.getCoordinateSequenceFactory().create([i]):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(G)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new je(i,e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getCoordinateSequenceFactory",value:function(){return this.coordinateSequenceFactory}},{key:"createPolygon",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new We(null,null,e)}.apply(void 0,n);case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(G)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.createPolygon(e.createLinearRing(i))}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.createPolygon(e.createLinearRing(i))}.apply(void 0,n);if(n[0]instanceof Je)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.createPolygon(i,null)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return new We(i,a,e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getSRID",value:function(){return this.SRID}},{key:"createGeometryCollection",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new Pe(null,e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new Pe(i,e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"createGeometry",value:function(e){var t=new Ze(this);return t.edit(e,new(function(e){function t(){return i(this,t),n(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"edit",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0];r[1];return this.coordinateSequenceFactory.create(s)}return(e=a(Object.getPrototypeOf(t.prototype),"edit",this)).call.apply(e,[this].concat(r))}}]),t}(CoordinateSequenceOperation)))}},{key:"getPrecisionModel",value:function(){return this.precisionModel}},{key:"createLinearRing",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.createLinearRing(e.getCoordinateSequenceFactory().create([]))}.apply(void 0,n);case 1:if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.createLinearRing(null!==i?e.getCoordinateSequenceFactory().create(i):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(G)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new Je(i,e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"createMultiPolygon",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return new Qe(null,e)}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new Qe(i,e)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"createMultiPoint",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];
return new Ke(null,e)}.apply(void 0,n);case 1:if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return new Ke(i,e)}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.createMultiPoint(null!==i?e.getCoordinateSequenceFactory().create(i):null)}.apply(void 0,n);if(n[0].interfaces_&&n[0].interfaces_.indexOf(G)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(null===i)return e.createMultiPoint(new Array(0));for(var a=new Array(i.size()),s=0;s<i.size();s++){var o=e.getCoordinateSequenceFactory().create(1,i.getDimension());Ye.copy(i,s,o,0,1),a[s]=e.createPoint(o)}return e.createMultiPoint(a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[P]}}],[{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(null===e)return null;var t=new Array(e.size());return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return rt.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}]),e}();st.serialVersionUID=-0x5ea75f2051eeb400;var ot=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ut=function(){function e(t){i(this,e),this.geometryFactory=t||new st}return s(e,[{key:"read",value:function(e){var t;t="string"==typeof e?JSON.parse(e):e;var n=t.type;if(!lt[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==ot.indexOf(n)?lt[n].apply(this,[t.coordinates]):"GeometryCollection"===n?lt[n].apply(this,[t.geometries]):this.parse[n].apply(this,[t])}},{key:"write",value:function(e){var t=e.getGeometryType();if(!ct[t])throw new Error("Geometry is not supported");return ct[t].apply(this,[e])}}]),e}(),lt={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!this.parse[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function qi(e){for(var qi=[],t=0;t<e.length;++t){var n=e[t];qi.push(new M(n[0],n[1]))}return qi},bbox:function(e){return this.geometryFactory.createLinearRing([new M(e[0],e[1]),new M(e[2],e[1]),new M(e[2],e[3]),new M(e[0],e[3]),new M(e[0],e[1])])},Point:function(e){var t=new M(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(lt.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=lt.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(lt.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=lt.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),r=[],i=1;i<e.length;++i){var a=e[i],s=lt.coordinates.apply(this,[a]),o=this.geometryFactory.createLinearRing(s);r.push(o)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(lt.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},ct={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=ct.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=ct.Point.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=0;n<e.points.length;++n){var r=e.points[n];t.push(ct.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=ct.LineString.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=ct.LineString.apply(this,[e.shell]);t.push(n.coordinates);for(var r=0;r<e.holes.length;++r){var i=e.holes[r],a=ct.LineString.apply(this,[i]);t.push(a.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=ct.Polygon.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=r.getGeometryType().slice(10);t.push(ct[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:t}}},gt=function(){function e(t){i(this,e),this.geometryFactory=t||new st,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new ut(this.geometryFactory)}return s(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===it.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;n>t;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),ft=function(){function e(){i(this,e),this.parser=new ut(this.geometryFactory)}return s(e,[{key:"write",value:function(e){return this.parser.write(e)}}]),e}(),ht=function(){function e(t){i(this,e),this.geometryFactory=t||new st,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Z(this.geometryFactory)}return s(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===it.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.coordinates.length;n>t;t++)this.precisionModel.makePrecise(e.points.coordinates[t]);else if(e.geometries)for(t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),vt=function(){function e(t){i(this,e),this.geometryFactory=t||new st}return s(e,[{key:"read",value:function(e){return e instanceof ol.geom.Point?this.convertFromPoint(e):e instanceof ol.geom.LineString?this.convertFromLineString(e):e instanceof ol.geom.LinearRing?this.convertFromLinearRing(e):e instanceof ol.geom.Polygon?this.convertFromPolygon(e):e instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(e):e instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(e):e instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(e):e instanceof ol.geom.GeometryCollection?this.convertFromCollection(e):void 0}},{key:"convertFromPoint",value:function(e){var t=e.getCoordinates();return this.geometryFactory.createPoint(new M(t[0],t[1]))}},{key:"convertFromLineString",value:function(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(e){return new M(e[0],e[1])}))}},{key:"convertFromLinearRing",value:function(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(e){return new M(e[0],e[1])}))}},{key:"convertFromPolygon",value:function(e){for(var t=e.getLinearRings(),n=null,r=[],i=0;i<t.length;i++){var a=this.convertFromLinearRing(t[i]);0===i?n=a:r.push(a)}return this.geometryFactory.createPolygon(n,r)}},{key:"convertFromMultiPoint",value:function(e){var t=e.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(t)}},{key:"convertFromMultiLineString",value:function(e){var t=e.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(t)}},{key:"convertFromMultiPolygon",value:function(e){var t=e.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(t)}},{key:"convertFromCollection",value:function(e){var t=e.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(t)}},{key:"write",value:function(e){return"Point"===e.getGeometryType()?this.convertToPoint(e.getCoordinate()):"LineString"===e.getGeometryType()?this.convertToLineString(e):"LinearRing"===e.getGeometryType()?this.convertToLinearRing(e):"Polygon"===e.getGeometryType()?this.convertToPolygon(e):"MultiPoint"===e.getGeometryType()?this.convertToMultiPoint(e):"MultiLineString"===e.getGeometryType()?this.convertToMultiLineString(e):"MultiPolygon"===e.getGeometryType()?this.convertToMultiPolygon(e):"GeometryCollection"===e.getGeometryType()?this.convertToCollection(e):void 0}},{key:"convertToPoint",value:function(e){return new ol.geom.Point([e.x,e.y])}},{key:"convertToLineString",value:function(e){var t=e.points.coordinates.map(E);return new ol.geom.LineString(t)}},{key:"convertToLinearRing",value:function(e){var t=e.points.coordinates.map(E);return new ol.geom.LinearRing(t)}},{key:"convertToPolygon",value:function(e){for(var t=[e.shell.points.coordinates.map(E)],n=0;n<e.holes.length;n++)t.push(e.holes[n].points.coordinates.map(E));return new ol.geom.Polygon(t)}},{key:"convertToMultiPoint",value:function(e){return new ol.geom.MultiPoint(e.getCoordinates().map(E))}},{key:"convertToMultiLineString",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToLineString(e.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(t)}},{key:"convertToMultiPolygon",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToPolygon(e.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(t)}},{key:"convertToCollection",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++){var r=e.geometries[n];t.push(this.write(r))}return new ol.geom.GeometryCollection(t)}}]),e}(),yt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.mapOp=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.mapOp=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"map",value:function(e){for(var t=new fe,n=0;n<e.getNumGeometries();n++){var r=this.mapOp.map(e.getGeometryN(n));r.isEmpty()||t.add(r)}return e.getFactory().createGeometryCollection(st.toGeometryArray(t))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"map",value:function(t,n){var r=new e(n);return r.map(t)}}]),e}(),mt=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();mt.ON=0,mt.LEFT=1,mt.RIGHT=2;var pt=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.pt=null}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 1:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0];n(r,Object.getPrototypeOf(t).call(r,s))}.apply(void 0,i);case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,t.msgWithCoord(s,o)));u.pt=new M(o)}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"msgWithCoord",value:function(e,t){return null!==t?e+" [ "+t+" ]":e}}]),t}(b),dt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.location=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof Array)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i.length)}.apply(void 0,r);if(Number.isInteger(r[0]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(1),t.location[mt.ON]=i}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];if(t.init(i.location.length),null!==i)for(var a=0;a<t.location.length;a++)t.location[a]=i.location[a]}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.init(3),t.location[mt.ON]=i,t.location[mt.LEFT]=a,t.location[mt.RIGHT]=s}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==q.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===q.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3);t[mt.ON]=this.location[mt.ON],t[mt.LEFT]=q.NONE,t[mt.RIGHT]=q.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===q.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[mt.LEFT];this.location[mt.LEFT]=this.location[mt.RIGHT],this.location[mt.RIGHT]=e}},{key:"toString",value:function(){var e=new z;return this.location.length>1&&e.append(q.toLocationSymbol(this.location[mt.LEFT])),e.append(q.toLocationSymbol(this.location[mt.ON])),this.location.length>1&&e.append(q.toLocationSymbol(this.location[mt.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[mt.ON]=e,this.location[mt.LEFT]=t,this.location[mt.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:q.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===q.NONE)return!0;return!1}},{key:"setLocation",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.setLocation(mt.ON,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.location[i]=a}.apply(void 0,n)}};return i.apply(this,n)}},{key:"init",value:function(e){this.location=new Array(e),this.setAllLocations(q.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),kt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.elt=new Array(2)}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(Number.isInteger(r[0]))return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.elt[0]=new dt(i),t.elt[1]=new dt(i)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.elt[0]=new dt(i.elt[0]),t.elt[1]=new dt(i.elt[1])}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.elt[0]=new dt(q.NONE),t.elt[1]=new dt(q.NONE),t.elt[i].setLocation(a)}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.elt[0]=new dt(i,a,s),t.elt[1]=new dt(i,a,s)}.apply(void 0,r);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];t.elt[0]=new dt(q.NONE,q.NONE,q.NONE),t.elt[1]=new dt(q.NONE,q.NONE,q.NONE),t.elt[i].setLocations(a,s,o)}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.setAllLocationsIfNull(0,i),e.setAllLocationsIfNull(1,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.elt[i].setAllLocationsIfNull(a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;2>t;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new dt(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.elt[i].get(mt.ON)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.elt[i].get(a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"toString",value:function(){var e=new z;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.elt[0].isArea()||e.elt[1].isArea()}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.elt[i].isArea()}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.elt[i].setLocation(mt.ON,a)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];e.elt[i].setLocation(a,s)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new dt(this.elt[e].location[0]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLineLabel",value:function(t){for(var n=new e(q.NONE),r=0;2>r;r++)n.setLocation(r,t.getLocation(r));return n}}]),e}(),At=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.startDe=null,t.maxNodeDegree=-1,t.edges=new fe,t.pts=new fe,t.label=new kt(q.NONE),t.ring=null,t._isHole=null,t.shell=null,t.holes=new fe,t.geometryFactory=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.geometryFactory=a,t.computePoints(i),t.computeRing()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"computeRing",value:function(){if(null!==this.ring)return null;for(var e=new Array(this.pts.size()),t=0;t<this.pts.size();t++)e[t]=this.pts.get(t);this.ring=this.geometryFactory.createLinearRing(e),this._isHole=ie.isCCW(this.ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"computePoints",value:function(e){this.startDe=e;var t=e,n=!0;do{if(null===t)throw new pt("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new pt("Directed Edge visited twice during ring-building at "+t.getCoordinate());this.edges.add(t);var r=t.getLabel();D.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this.startDe)}},{key:"getLinearRing",value:function(){return this.ring}},{key:"getCoordinate",value:function(e){return this.pts.get(e)}},{key:"computeMaxNodeDegree",value:function(){this.maxNodeDegree=0;var e=this.startDe;do{var t=e.getNode(),n=t.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),e=this.getNext(e)}while(e!==this.startDe);this.maxNodeDegree*=2}},{key:"addPoints",value:function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var a=i;a<r.length;a++)this.pts.add(r[a])}else{var i=r.length-2;n&&(i=r.length-1);for(var a=i;a>=0;a--)this.pts.add(r[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var e=this.startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this.startDe)}},{key:"containsPoint",value:function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e))return!1;if(!ie.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0}},{key:"addHole",value:function(e){this.holes.add(e)}},{key:"isShell",value:function(){return null===this.shell}},{key:"getLabel",value:function(){return this.label}},{key:"getEdges",value:function(){return this.edges}},{key:"getMaxNodeDegree",value:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree}},{key:"getShell",value:function(){return this.shell}},{key:"mergeLabel",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.mergeLabel(i,0),e.mergeLabel(i,1)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=i.getLocation(a,mt.RIGHT);return s===q.NONE?null:e.label.getLocation(a)===q.NONE?(e.label.setLocation(a,s),null):void 0}.apply(void 0,n)}};return i.apply(this,n)}},{key:"setShell",value:function(e){this.shell=e,null!==e&&e.addHole(this)}},{key:"toPolygon",value:function(e){for(var t=new Array(this.holes.size()),n=0;n<this.holes.size();n++)t[n]=this.holes.get(n).getLinearRing();var r=e.createPolygon(this.getLinearRing(),t);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),It=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1];n(r,Object.getPrototypeOf(t).call(r,s,o))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"setEdgeRing",value:function(e,t){e.setMinEdgeRing(t)}},{key:"getNext",value:function(e){return e.getNextMin()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(At),Et=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1];n(r,Object.getPrototypeOf(t).call(r,s,o))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"buildMinimalRings",value:function(){var e=new fe,t=this.startDe;do{if(null===t.getMinEdgeRing()){var n=new It(t,this.geometryFactory);e.add(n)}t=t.getNext()}while(t!==this.startDe);return e}},{key:"setEdgeRing",value:function(e,t){e.setEdgeRing(t)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this.startDe;do{var t=e.getNode();t.getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this.startDe)}},{key:"getNext",value:function(e){return e.getNext()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(At),xt=function(){function e(){i(this,e)}return s(e,[{key:"locate",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Nt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.parent=null,t.atStart=null,t.max=null,t.index=null,t.subcollectionIterator=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.parent=i,t.atStart=!0,t.index=0,t.max=i.getNumGeometries()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"next",value:function(){if(this.atStart)return this.atStart=!1,e.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new g;var t=this.parent.getGeometryN(this.index++);return t instanceof Pe?(this.subcollectionIterator=new e(t),this.subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new UnsupportedOperationException(this.getClass().getName())}},{key:"hasNext",value:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return this.index>=this.max?!1:!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[o]}}],[{key:"isAtomic",value:function(e){return!(e instanceof Pe)}}]),e}(),wt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geom=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.geom=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"locate",value:function(t){return e.locate(t,this.geom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[xt]}}],[{key:"isPointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?ie.isPointInRing(e,t.getCoordinates()):!1}},{key:"containsPointInPolygon",value:function(t,n){if(n.isEmpty())return!1;var r=n.getExteriorRing();if(!e.isPointInRing(t,r))return!1;for(var i=0;i<n.getNumInteriorRing();i++){var a=n.getInteriorRingN(i);if(e.isPointInRing(t,a))return!1}return!0}},{key:"containsPoint",value:function(t,n){if(n instanceof We)return e.containsPointInPolygon(t,n);if(n instanceof Pe)for(var r=new Nt(n);r.hasNext();){var i=r.next();if(i!==n&&e.containsPoint(t,i))return!0}return!1}},{key:"locate",value:function(t,n){return n.isEmpty()?q.EXTERIOR:e.containsPoint(t,n)?q.INTERIOR:q.EXTERIOR}}]),e}(),Ct=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.edgeMap=new p,t.edgeList=null,t.ptInAreaLocation=[q.NONE,q.NONE]}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"getNextCW",value:function(e){this.getEdges();var t=this.edgeList.indexOf(e),n=t-1;return 0===t&&(n=this.edgeList.size()-1),this.edgeList.get(n)}},{key:"propagateSideLabels",value:function(e){for(var t=q.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,mt.LEFT)!==q.NONE&&(t=i.getLocation(e,mt.LEFT))}if(t===q.NONE)return null;for(var a=t,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();if(i.getLocation(e,mt.ON)===q.NONE&&i.setLocation(e,mt.ON,a),i.isArea(e)){var s=i.getLocation(e,mt.LEFT),o=i.getLocation(e,mt.RIGHT);if(o!==q.NONE){if(o!==a)throw new pt("side location conflict",r.getCoordinate());s===q.NONE&&D.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),a=s}else D.isTrue(i.getLocation(e,mt.LEFT)===q.NONE,"found single null side"),i.setLocation(e,mt.RIGHT,a),i.setLocation(e,mt.LEFT,a)}}}},{key:"getCoordinate",value:function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()}},{key:"print",value:function(e){K.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"isAreaLabelsConsistent",value:function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,mt.LEFT);D.isTrue(i!==q.NONE,"Found unlabelled area edge");for(var a=i,s=this.iterator();s.hasNext();){var o=s.next(),u=o.getLabel();D.isTrue(u.isArea(e),"Found non-area edge");var l=u.getLocation(e,mt.LEFT),c=u.getLocation(e,mt.RIGHT);if(l===c)return!1;if(c!==a)return!1;a=l}return!0}},{key:"findIndex",value:function(e){
this.iterator();for(var t=0;t<this.edgeList.size();t++){var n=this.edgeList.get(t);if(n===e)return t}return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this.edgeList&&(this.edgeList=new fe(this.edgeMap.values())),this.edgeList}},{key:"getLocation",value:function(e,t,n){return this.ptInAreaLocation[e]===q.NONE&&(this.ptInAreaLocation[e]=wt.locate(t,n[e].getGeometry())),this.ptInAreaLocation[e]}},{key:"toString",value:function(){var e=new z;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()}},{key:"computeEdgeEndLabels",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}}},{key:"computeLabelling",value:function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getLabel(),a=0;2>a;a++)i.isLine(a)&&i.getLocation(a)===q.BOUNDARY&&(t[a]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getLabel(),a=0;2>a;a++)if(i.isAnyNull(a)){var s=q.NONE;if(t[a])s=q.EXTERIOR;else{var o=r.getCoordinate();s=this.getLocation(a,o,e)}i.setAllLocationsIfNull(a,s)}}},{key:"getDegree",value:function(){return this.edgeMap.size()}},{key:"insertEdgeEnd",value:function(e,t){this.edgeMap.put(e,t),this.edgeList=null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ot=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return 2===n?!0:!1}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(2===n)return-1;var r=t>e?e:t,i=e>t?e:t;return 0===r&&3===i?3:r}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if("number"==typeof n[0]&&"number"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];if(0===i&&0===a)throw new O("Cannot compute the quadrant for point ( "+i+", "+a+" )");return i>=0?a>=0?e.NE:e.SE:a>=0?e.NW:e.SW}.apply(void 0,n);if(n[0]instanceof M&&n[1]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];if(a.x===i.x&&a.y===i.y)throw new O("Cannot compute the quadrant for two identical points "+i);return a.x>=i.x?a.y>=i.y?e.NE:e.SE:a.y>=i.y?e.NW:e.SW}.apply(void 0,n)}};return i.apply(this,n)}}]),e}();Ot.NE=0,Ot.NW=1,Ot.SW=2,Ot.SE=3;var St=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.resultAreaEdgeList=null,o.label=null,o.SCANNING_FOR_INCOMING=1,o.LINKING_TO_OUTGOING=2}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,t=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var i=this.resultAreaEdgeList.get(r),a=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),n){case this.SCANNING_FOR_INCOMING:if(!a.isInResult())continue;t=a,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!i.isInResult())continue;t.setNext(i),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===e)throw new pt("no outgoing dirEdge found",this.getCoordinate());D.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}},{key:"insert",value:function(e){var t=e;this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),t=e.size();if(1>t)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),i=n.getQuadrant(),a=r.getQuadrant();if(Ot.isNorthern(i)&&Ot.isNorthern(a))return n;if(!Ot.isNorthern(i)&&!Ot.isNorthern(a))return r;return 0!==n.getDy()?n:0!==r.getDy()?r:(D.shouldNeverReachHere("found two horizontal edges incident on node"),null)}},{key:"print",value:function(e){K.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new fe;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this.resultAreaEdgeList.add(t)}return this.resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.setAllLocationsIfNull(0,e.getLocation(0)),r.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,t=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),i=r.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=r}t.setNext(e)}},{key:"computeDepths",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=e.findIndex(i),s=(i.getLabel(),i.getDepth(mt.LEFT)),o=i.getDepth(mt.RIGHT),u=e.computeDepths(a+1,e.edgeList.size(),s),l=e.computeDepths(0,a,u);if(l!==o)throw new pt("depth mismatch at "+i.getCoordinate())}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=n[2],o=s,u=i;a>u;u++){var l=e.edgeList.get(u);l.getLabel();l.setEdgeDepths(mt.RIGHT,o),o=l.getDepth(mt.LEFT)}return o}.apply(void 0,n)}};return i.apply(this,n)}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();n.merge(t.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var t=null,n=null,r=this.SCANNING_FOR_INCOMING,i=this.resultAreaEdgeList.size()-1;i>=0;i--){var a=this.resultAreaEdgeList.get(i),s=a.getSym();switch(null===t&&a.getEdgeRing()===e&&(t=a),r){case this.SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==e)continue;n=s,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(a.getEdgeRing()!==e)continue;n.setNextMin(a),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(D.isTrue(null!==t,"found null for first outgoing dirEdge"),D.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}},{key:"getOutgoingDegree",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=0,a=e.iterator();a.hasNext();){var s=a.next();s.isInResult()&&i++}return i}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0,s=e.iterator();s.hasNext();){var o=s.next();o.getEdgeRing()===i&&a++}return a}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getLabel",value:function(){return this.label}},{key:"findCoveredLineEdges",value:function(){for(var e=q.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=q.INTERIOR;break}if(r.isInResult()){e=q.EXTERIOR;break}}}if(e===q.NONE)return null;for(var i=e,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(i===q.INTERIOR):(n.isInResult()&&(i=q.EXTERIOR),r.isInResult()&&(i=q.INTERIOR))}}},{key:"computeLabelling",value:function(e){a(Object.getPrototypeOf(t.prototype),"computeLabelling",this).call(this,e),this.label=new kt(q.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getEdge(),s=i.getLabel(),o=0;2>o;o++){var u=s.getLocation(o);(u===q.INTERIOR||u===q.BOUNDARY)&&this.label.setLocation(o,q.INTERIOR)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Ct),Lt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.label=null,t._isInResult=!1,t._isCovered=!1,t._isCoveredSet=!1,t._isVisited=!1}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.label=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(e){this.label=e}},{key:"getLabel",value:function(){return this.label}},{key:"setCovered",value:function(e){this._isCovered=e,this._isCoveredSet=!0}},{key:"updateIM",value:function(e){D.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Rt=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.coord=null,o.edges=null}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];o.coord=r,o.edges=i,o.label=new kt(0,q.NONE)}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){var t=e.next();if(t.getEdge().isInResult())return!0}return!1}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.println("node "+this.coord+" lbl: "+this.label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,t){var n=q.NONE;if(n=this.label.getLocation(t),!e.isNull(t)){var r=e.getLocation(t);n!==q.BOUNDARY&&(n=r)}return n}},{key:"setLabel",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=a(Object.getPrototypeOf(t.prototype),"setLabel",this)).call.apply(e,[this].concat(r));var s=r[0],o=r[1];null===this.label?this.label=new kt(s,o):this.label.setLocation(s,o)}},{key:"getEdges",value:function(){return this.edges}},{key:"mergeLabel",value:function(){for(var e=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof t)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.mergeLabel(i.label)}.apply(void 0,r);if(r[0]instanceof kt)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;2>a;a++){var s=e.computeMergedLocation(i,a),o=e.label.getLocation(a);o===q.NONE&&e.label.setLocation(a,s)}}.apply(void 0,r)}};return a.apply(this,r)}},{key:"add",value:function(e){this.edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this.label)return null;var t=q.NONE;null!==this.label&&(t=this.label.getLocation(e));var n=null;switch(t){case q.BOUNDARY:n=q.INTERIOR;break;case q.INTERIOR:n=q.BOUNDARY;break;default:n=q.BOUNDARY}this.label.setLocation(e,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Lt),Tt=function(){function e(){i(this,e)}return s(e,[{key:"createNode",value:function(e){return new Rt(e,null)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Pt=function(e){function t(){return i(this,t),n(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"createNode",value:function(e){return new Rt(e,new St)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Tt),bt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.nodeMap=new p,t.nodeFact=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.nodeFact=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"addNode",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=e.nodeMap.get(i);return null===a&&(a=e.nodeFact.createNode(i),e.nodeMap.put(i,a)),a}.apply(void 0,n);if(n[0]instanceof Rt)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=e.nodeMap.get(i.getCoordinate());return null===a?(e.nodeMap.put(i.getCoordinate(),i),i):(a.mergeLabel(i),a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"print",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(e){for(var t=new fe,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===q.BOUNDARY&&t.add(r)}return t}},{key:"add",value:function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),_t=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.edge=null,t.label=null,t.node=null,t.p0=null,t.p1=null,t.dx=null,t.dy=null,t.quadrant=null}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.edge=i}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];o.call(t,i,a,s,null)}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],u=n[3];o.call(t,i),t.init(a,s),t.label=u}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"compareDirection",value:function(e){return this.dx===e.dx&&this.dy===e.dy?0:this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:ie.computeOrientation(e.p0,e.p1,this.p1)}},{key:"getDy",value:function(){return this.dy}},{key:"getCoordinate",value:function(){return this.p0}},{key:"setNode",value:function(e){this.node=e}},{key:"print",value:function(e){var t=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this.p1}},{key:"getDx",value:function(){return this.dx}},{key:"getLabel",value:function(){return this.label}},{key:"getEdge",value:function(){return this.edge}},{key:"getQuadrant",value:function(){return this.quadrant}},{key:"getNode",value:function(){return this.node}},{key:"toString",value:function(){var e=Math.atan2(this.dy,this.dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this.p0=e,this.p1=t,this.dx=t.x-e.x,this.dy=t.y-e.y,this.quadrant=Ot.quadrant(this.dx,this.dy),D.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}]),e}(),Dt=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u._isForward=null,u._isInResult=!1,u._isVisited=!1,u.sym=null,u.next=null,u.nextMin=null,u.edgeRing=null,u.minEdgeRing=null,u.depth=[0,-999,-999]}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,s));if(u._isForward=o,o)u.init(s.getCoordinate(0),s.getCoordinate(1));else{var l=s.getNumPoints()-1;u.init(s.getCoordinate(l),s.getCoordinate(l-1))}u.computeDirectedLabel()}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getNextMin",value:function(){return this.nextMin}},{key:"getDepth",value:function(e){return this.depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this.label=new kt(this.edge.getLabel()),this._isForward||this.label.flip()}},{key:"getNext",value:function(){return this.next}},{key:"setDepth",value:function(e,t){if(-999!==this.depth[e]&&this.depth[e]!==t)throw new pt("assigned depths do not match",this.getCoordinate());this.depth[e]=t}},{key:"isInteriorAreaEdge",value:function o(){for(var o=!0,e=0;2>e;e++)this.label.isArea(e)&&this.label.getLocation(e,mt.LEFT)===q.INTERIOR&&this.label.getLocation(e,mt.RIGHT)===q.INTERIOR||(o=!1);return o}},{key:"setNextMin",value:function(e){this.nextMin=e}},{key:"print",value:function(e){a(Object.getPrototypeOf(t.prototype),"print",this).call(this,e),e.print(" "+this.depth[mt.LEFT]+"/"+this.depth[mt.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this.minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this.label.isLine(0)||this.label.isLine(1),t=!this.label.isArea(0)||this.label.allPositionsEqual(0,q.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,q.EXTERIOR);return e&&t&&n}},{key:"setEdgeRing",value:function(e){this.edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this.minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this.edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this.sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this.edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this.edge.print(e):this.edge.printReverse(e)}},{key:"setSym",value:function(e){this.sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this.sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===mt.LEFT&&(r=-1);var i=mt.opposite(e),a=n*r,s=t+a;this.setDepth(e,t),this.setDepth(i,s)}},{key:"getEdgeRing",value:function(){return this.edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this.next=e}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthFactor",value:function(e,t){return e===q.EXTERIOR&&t===q.INTERIOR?1:e===q.INTERIOR&&t===q.EXTERIOR?-1:0}}]),t}(_t),Mt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.edges=new fe,t.nodes=null,t.edgeEndList=new fe}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.nodes=new bt(new Tt)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.nodes=new bt(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"printEdges",value:function(e){e.println("Edges:");for(var t=0;t<this.edges.size();t++){e.println("edge "+t+":");var n=this.edges.get(t);n.print(e),n.eiList.print(e)}}},{key:"find",value:function(e){return this.nodes.find(e)}},{key:"addNode",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Rt)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.nodes.addNode(i)}.apply(void 0,n);if(n[0]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.nodes.addNode(i)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}}},{key:"debugPrintln",value:function(e){K.out.println(e)}},{key:"isBoundaryNode",value:function(e,t){var n=this.nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===q.BOUNDARY?!0:!1}},{key:"linkAllDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}}},{key:"matchInSameDirection",value:function(e,t,n,r){return e.equals(n)&&ie.computeOrientation(e,t,r)===ie.COLLINEAR&&Ot.quadrant(e,t)===Ot.quadrant(n,r)?!0:!1}},{key:"getEdgeEnds",value:function(){return this.edgeEndList}},{key:"debugPrint",value:function(e){K.out.print(e)}},{key:"getEdgeIterator",value:function(){return this.edges.iterator()}},{key:"findEdgeInSameDirection",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return r;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return r}return null}},{key:"insertEdge",value:function(e){this.edges.add(e)}},{key:"findEdgeEnd",value:function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}},{key:"addEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.edges.add(n);var r=new Dt(n,!0),i=new Dt(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}},{key:"add",value:function(e){this.nodes.add(e),this.edgeEndList.add(e)}},{key:"getNodes",value:function(){return this.nodes.values()}},{key:"findEdge",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return r}return null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"linkResultDirectedEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}}}]),e}(),Ft=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geometryFactory=new st,t.geomGraph=null,t.disconnectedRingcoord=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.geomGraph=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"visitInteriorRing",value:function(t,n){var r=t.getCoordinates(),i=r[0],a=e.findDifferentPoint(r,i),s=n.findEdgeInSameDirection(i,a),o=n.findEdgeEnd(s),u=null;o.getLabel().getLocation(0,mt.RIGHT)===q.INTERIOR?u=o:o.getSym().getLabel().getLocation(0,mt.RIGHT)===q.INTERIOR&&(u=o.getSym()),D.isTrue(null!==u,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(u)}},{key:"visitShellInteriors",value:function(e,t){if(e instanceof We){var n=e;this.visitInteriorRing(n.getExteriorRing(),t)}if(e instanceof Qe)for(var r=e,i=0;i<r.getNumGeometries();i++){var n=r.getGeometryN(i);this.visitInteriorRing(n.getExteriorRing(),t)}}},{key:"getCoordinate",value:function(){return this.disconnectedRingcoord}},{key:"setInteriorEdgesInResult",value:function(e){for(var t=e.getEdgeEnds().iterator();t.hasNext();){var n=t.next();n.getLabel().getLocation(0,mt.RIGHT)===q.INTERIOR&&n.setInResult(!0)}}},{key:"visitLinkedDirectedEdges",value:function(e){var t=e,n=e;do D.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==t)}},{key:"buildEdgeRings",value:function(e){for(var t=new fe,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&null===r.getEdgeRing()){var i=new Et(r,this.geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var a=i.buildMinimalRings();t.addAll(a)}}return t}},{key:"hasUnvisitedShellEdge",value:function(e){for(var t=0;t<e.size();t++){var n=e.get(t);if(!n.isHole()){var r=n.getEdges(),i=r.get(0);if(i.getLabel().getLocation(0,mt.RIGHT)===q.INTERIOR)for(var a=0;a<r.size();a++)if(i=r.get(a),!i.isVisited())return this.disconnectedRingcoord=i.getCoordinate(),!0}}return!1}},{key:"isInteriorsConnected",value:function(){var e=new fe;this.geomGraph.computeSplitEdges(e);var t=new Mt(new Pt);t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();var n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDifferentPoint",value:function(e,t){for(var n=0;n<e.length;n++)if(!e[n].equals(t))return e[n];return null}}]),e}(),Gt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.p0=null,t.p1=null}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];o.call(t,new M,new M)}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t,i.p0,i.p1)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.p0=i,t.p1=a}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],u=n[3];o.call(t,new M(i,a),new M(s,u))}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=ie.orientationIndex(t.p0,t.p1,i.p0),s=ie.orientationIndex(t.p0,t.p1,i.p1);return a>=0&&s>=0?Math.max(a,s):0>=a&&0>=s?Math.max(a,s):0}.apply(void 0,r);if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return ie.orientationIndex(t.p0,t.p1,i)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(e){var t=new te;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];if(i.equals(t.p0)||i.equals(t.p1))return new M(i);var a=t.projectionFactor(i),s=new M;return s.x=t.p0.x+a*(t.p1.x-t.p0.x),s.y=t.p0.y+a*(t.p1.y-t.p0.y),s}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=t.projectionFactor(a.p0),o=t.projectionFactor(a.p1);if(s>=1&&o>=1)return null;if(0>=s&&0>=o)return null;var u=t.project(a.p0);0>s&&(u=t.p0),s>1&&(u=t.p1);var l=t.project(a.p1);return 0>o&&(l=t.p0),o>1&&(l=t.p1),new e(u,l)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return 0===e?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return ie.distancePointLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(0>=r)return S.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2),r=S.MAX_VALUE,i=null,a=this.closestPoint(e.p0);r=a.distance(e.p0),n[0]=a,n[1]=e.p0;var s=this.closestPoint(e.p1);i=s.distance(e.p1),r>i&&(r=i,n[0]=s,n[1]=e.p1);var o=e.closestPoint(this.p0);i=o.distance(this.p0),r>i&&(r=i,n[0]=this.p0,n[1]=o);var u=e.closestPoint(this.p1);return i=u.distance(this.p1),r>i&&(r=i,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);if(t>0&&1>t)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return r>n?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){try{var t=J.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof W))throw n}finally{}return null}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,s=Math.sqrt(i*i+a*a),o=0,u=0;
if(0!==t){if(0>=s)throw new IllegalStateException("Cannot compute offset from zero-length line segment");o=t*i/s,u=t*a/s}var l=n-u,c=r+o,g=new M(l,c);return g}},{key:"setCoordinates",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.setCoordinates(i.p0,i.p1)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.p0.x=i.x,e.p0.y=i.y,e.p1.x=a.x,e.p1.y=a.y}.apply(void 0,n)}};return i.apply(this,n)}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return 0>t?t=0:(t>1||S.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"distance",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return ie.distanceLineLine(t.p0,t.p1,i.p0,i.p1)}.apply(void 0,r);if(r[0]instanceof M)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return ie.distancePointLine(i,t.p0,t.p1)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"pointAlong",value:function(e){var t=new M;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=java.lang.Double.doubleToLongBits(this.p0.x);e^=31*java.lang.Double.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return t^r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L,P]}}],[{key:"midPoint",value:function(e,t){return new M((e.x+t.x)/2,(e.y+t.y)/2)}}]),e}();Gt.serialVersionUID=0x2d2172135f411c00;var Bt=function(){function e(){var t=this;i(this,e),function(){t.tempEnv1=new Q,t.selectedSegment=new Gt}()}return s(e,[{key:"select",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];i.getLineSegment(a,e.selectedSegment),e.select(e.selectedSegment)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),qt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.items=new fe,t.subnode=[null,null]}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"hasChildren",value:function(){for(var e=0;2>e;e++)if(null!==this.subnode[e])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(e){e.addAll(this.items);for(var t=0;2>t;t++)null!==this.subnode[t]&&this.subnode[t].addAllItems(e);return e}},{key:"size",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.size()}},{key:"addAllItemsFromOverlapping",value:function(e,t){return null===e||this.isSearchMatch(e)?(t.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(e,t),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(e,t))):null}},{key:"hasItems",value:function(){return!this.items.isEmpty()}},{key:"remove",value:function(e,t){if(!this.isSearchMatch(e))return!1;for(var n=!1,r=0;2>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(e,t))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n?n:n=this.items.remove(t)}},{key:"getItems",value:function(){return this.items}},{key:"depth",value:function(){for(var e=0,t=0;2>t;t++)if(null!==this.subnode[t]){var n=this.subnode[t].depth();n>e&&(e=n)}return e+1}},{key:"nodeSize",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].nodeSize());return e+1}},{key:"add",value:function(e){this.items.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getSubnodeIndex",value:function(e,t){var n=-1;return e.min>=t&&(n=1),e.max<=t&&(n=0),n}}]),e}(),Ut=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.min=null,t.max=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.min=0,t.max=0}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i.min,i.max)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.init(i,a)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"expandToInclude",value:function(e){e.max>this.max&&(this.max=e.max),e.min<this.min&&(this.min=e.min)}},{key:"getWidth",value:function(){return this.max-this.min}},{key:"overlaps",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.overlaps(i.min,i.max)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.min>a||e.max<i?!1:!0}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getMin",value:function(){return this.min}},{key:"toString",value:function(){return"["+this.min+", "+this.max+"]"}},{key:"contains",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.contains(i.min,i.max)}.apply(void 0,r);if("number"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return i>=t.min&&i<=t.max}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i>=t.min&&a<=t.max}.apply(void 0,r)}};return a.apply(this,r)}},{key:"init",value:function(e,t){this.min=e,this.max=t,e>t&&(this.min=t,this.max=e)}},{key:"getMax",value:function(){return this.max}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),zt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.x=null,t.xBits=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.x=i,t.xBits=S.doubleToLongBits(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"numCommonMantissaBits",value:function(e){for(var t=0;52>t;t++){if(this.getBit(t)!==e.getBit(t))return t}return 52}},{key:"getExponent",value:function(){return this.biasedExponent()-e.EXPONENT_BIAS}},{key:"biasedExponent",value:function(){var e=Math.trunc(this.xBits>>52),t=2047&e;return t}},{key:"getDouble",value:function(){return S.longBitsToDouble(this.xBits)}},{key:"zeroLowerBits",value:function(e){var t=(1<<e)-1,n=~t;this.xBits&=n}},{key:"toString",value:function(){var e=Long.toBinaryString(this.xBits),t="0000000000000000000000000000000000000000000000000000000000000000",n=t+e,r=n.substring(n.length-64),i=r.substring(0,1)+"  "+r.substring(1,12)+"("+this.getExponent()+") "+r.substring(12)+" [ "+this.x+" ]";return i}},{key:"getBit",value:function(e){var t=1<<e;return 0!==(this.xBits&t)?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"exponent",value:function(t){var n=new e(t);return n.getExponent()}},{key:"toBinaryString",value:function(t){var n=new e(t);return n.toString()}},{key:"powerOf2",value:function(t){if(t>1023||-1022>t)throw new O("Exponent out of bounds");var n=t+e.EXPONENT_BIAS,r=n<<52;return S.longBitsToDouble(r)}},{key:"truncateToPowerOfTwo",value:function(t){var n=new e(t);return n.zeroLowerBits(52),n.getDouble()}},{key:"maximumCommonMantissa",value:function(t,n){if(0===t||0===n)return 0;var r=new e(t),i=new e(n);if(r.getExponent()!==i.getExponent())return 0;var a=r.numCommonMantissaBits(i);return r.zeroLowerBits(64-(12+a)),r.getDouble()}}]),e}();zt.EXPONENT_BIAS=1023;var Yt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pt=0,t.level=0,t.interval=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.computeKey(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getInterval",value:function(){return this.interval}},{key:"getLevel",value:function(){return this.level}},{key:"computeKey",value:function(t){for(this.level=e.computeLevel(t),this.interval=new Ut,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)}},{key:"computeInterval",value:function(e,t){var n=zt.powerOf2(e);this.pt=Math.floor(t.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)}},{key:"getPoint",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeLevel",value:function(e){var t=e.getWidth(),n=zt.exponent(t)+1;return n}}]),e}(),Xt=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.interval=null,o.centre=null,o.level=null}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];o.interval=r,o.level=i,o.centre=(r.getMin()+r.getMax())/2}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"getInterval",value:function(){return this.interval}},{key:"find",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1===n)return this;if(null!==this.subnode[n]){var r=this.subnode[n];return r.find(e)}return this}},{key:"insert",value:function(e){D.isTrue(null===this.interval||this.interval.contains(e.interval));var n=t.getSubnodeIndex(e.interval,this.centre);if(e.level===this.level-1)this.subnode[n]=e;else{var r=this.createSubnode(n);r.insert(e),this.subnode[n]=r}}},{key:"isSearchMatch",value:function(e){return e.overlaps(this.interval)}},{key:"getSubnode",value:function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]}},{key:"getNode",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1!==n){var r=this.getSubnode(n);return r.getNode(e)}return this}},{key:"createSubnode",value:function(e){var n=0,r=0;switch(e){case 0:n=this.interval.getMin(),r=this.centre;break;case 1:n=this.centre,r=this.interval.getMax()}var i=new Ut(n,r),a=new t(i,this.level-1);return a}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(e){var n=new Yt(e),r=new t(n.getInterval(),n.getLevel());return r}},{key:"createExpanded",value:function(e,n){var r=new Ut(n);null!==e&&r.expandToInclude(e.interval);var i=t.createNode(r);return null!==e&&i.insert(e),i}}]),t}(qt),Vt=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isZeroWidth",value:function(t,n){var r=n-t;if(0===r)return!0;var i=Math.max(Math.abs(t),Math.abs(n)),a=r/i,s=zt.exponent(a);return s<=e.MIN_BINARY_EXPONENT}}]),e}();Vt.MIN_BINARY_EXPONENT=-50;var jt=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this)),u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"insert",value:function(e,n){var r=t.getSubnodeIndex(e,t.origin);if(-1===r)return this.add(n),null;var i=this.subnode[r];if(null===i||!i.getInterval().contains(e)){var a=Xt.createExpanded(i,e);this.subnode[r]=a}this.insertContained(this.subnode[r],e,n)}},{key:"isSearchMatch",value:function(e){return!0}},{key:"insertContained",value:function(e,t,n){D.isTrue(e.getInterval().contains(t));var r=Vt.isZeroWidth(t.getMin(),t.getMax()),i=null;i=r?e.find(t):e.getNode(t),i.add(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(qt);jt.origin=0;var Ht=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.root=null,t.minExtent=1}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.root=new jt}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"size",value:function(){return null!==this.root?this.root.size():0}},{key:"insert",value:function(t,n){this.collectStats(t);var r=e.ensureExtent(t,this.minExtent);this.root.insert(r,n)}},{key:"query",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if("number"==typeof n[0])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.query(new Ut(i,i))}.apply(void 0,n);if(n[0]instanceof Ut)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new fe;return e.query(i,a),a}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.root.addAllItemsFromOverlapping(i,a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"iterator",value:function(){var e=new fe;return this.root.addAllItems(e),e.iterator()}},{key:"remove",value:function(t,n){var r=e.ensureExtent(t,this.minExtent);return this.root.remove(r,n)}},{key:"collectStats",value:function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t)}},{key:"depth",value:function(){return null!==this.root?this.root.depth():0}},{key:"nodeSize",value:function(){return null!==this.root?this.root.nodeSize():0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"ensureExtent",value:function(e,t){var n=e.getMin(),r=e.getMax();return n!==r?e:(n===r&&(n-=t/2,r=n+t/2),new Ut(n,r))}}]),e}(),Wt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pts=null,t.start=null,t.end=null,t.env=null,t.context=null,t.id=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];t.pts=i,t.start=a,t.end=s,t.context=o}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getLineSegment",value:function(e,t){t.p0=this.pts[e],t.p1=this.pts[e+1]}},{key:"computeSelect",value:function(e,t,n,r){var i=this.pts[t],a=this.pts[n];if(r.tempEnv1.init(i,a),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var s=Math.trunc((t+n)/2);s>t&&this.computeSelect(e,t,s,r),n>s&&this.computeSelect(e,s,n,r)}},{key:"getCoordinates",value:function(){for(var e=new Array(this.end-this.start+1),t=0,n=this.start;n<=this.end;n++)e[t++]=this.pts[n];return e}},{key:"computeOverlaps",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.computeOverlaps(e.start,e.end,i,i.start,i.end,a)}.apply(void 0,n);case 6:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3],u=n[4],l=n[5],c=e.pts[i],g=e.pts[a],f=s.pts[o],h=s.pts[u];if(a-i===1&&u-o===1)return l.overlap(e,i,s,o),null;if(l.tempEnv1.init(c,g),l.tempEnv2.init(f,h),!l.tempEnv1.intersects(l.tempEnv2))return null;var v=Math.trunc((i+a)/2),y=Math.trunc((o+u)/2);v>i&&(y>o&&e.computeOverlaps(i,v,s,o,y,l),u>y&&e.computeOverlaps(i,v,s,y,u,l)),a>v&&(y>o&&e.computeOverlaps(v,a,s,o,y,l),u>y&&e.computeOverlaps(v,a,s,y,u,l))}.apply(void 0,n)}};return i.apply(this,n)}},{key:"setId",value:function(e){this.id=e}},{key:"select",value:function(e,t){this.computeSelect(e,this.start,this.end,t)}},{key:"getEnvelope",value:function(){if(null===this.env){var e=this.pts[this.start],t=this.pts[this.end];this.env=new Q(e,t)}return this.env}},{key:"getEndIndex",value:function(){return this.end}},{key:"getStartIndex",value:function(){return this.start}},{key:"getContext",value:function(){return this.context}},{key:"getId",value:function(){return this.id}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Kt=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getChainStartIndices",value:function(t){var n=0,r=new fe;r.add(new Y(n));do{var i=e.findChainEnd(t,n);r.add(new Y(i)),n=i}while(n<t.length-1);var a=e.toIntArray(r);return a}},{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Ot.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var a=Ot.quadrant(e[i-1],e[i]);if(a!==r)break}i++}return i-1}},{key:"getChains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.getChains(i,null)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=new fe,o=e.getChainStartIndices(i),u=0;u<o.length-1;u++){var l=new Wt(i,o[u],o[u+1],a);s.add(l)}return s}.apply(void 0,n)}};return i.apply(this,n)}},{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),Jt=function(){function e(){i(this,e)}return s(e,[{key:"isInside",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Qt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.ring=null,t.tree=null,t.crossings=0,t.interval=new Ut}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.ring=i,t.buildIndex()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"testLineSegment",value:function(e,t){var n=null,r=null,i=null,a=null,s=null,o=t.p0,u=t.p1;r=o.x-e.x,i=o.y-e.y,a=u.x-e.x,s=u.y-e.y,(i>0&&0>=s||s>0&&0>=i)&&(n=ne.signOfDet2x2(r,i,a,s)/(s-i),n>0&&this.crossings++)}},{key:"buildIndex",value:function(){this.tree=new Ht;for(var e=ye.removeRepeatedPoints(this.ring.getCoordinates()),t=Kt.getChains(e),n=0;n<t.size();n++){var r=t.get(n),i=r.getEnvelope();this.interval.min=i.getMinY(),this.interval.max=i.getMaxY(),this.tree.insert(this.interval,r)}}},{key:"testMonotoneChain",value:function(e,t,n){n.select(e,t)}},{key:"isInside",value:function(e){this.crossings=0;var t=new Q(S.NEGATIVE_INFINITY,S.POSITIVE_INFINITY,e.y,e.y);this.interval.min=e.y,this.interval.max=e.y;for(var n=this.tree.query(this.interval),r=new Zt(this,e),i=n.iterator();i.hasNext();){var a=i.next();this.testMonotoneChain(t,r,a)}return this.crossings%2===1?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Jt]}}],[{key:"MCSelecter",get:function(){return Zt}}]),e}(),Zt=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.mcp=null,o.p=null}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];o.mcp=r,o.p=i}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1!==r.length)return(e=a(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var s=r[0];this.mcp.testLineSegment(this.p,s)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Bt),$t=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.boundaryRule=oe.OGC_SFS_BOUNDARY_RULE,t.isIn=null,t.numBoundaries=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];if(null===i)throw new O("Rule must be non-null");t.boundaryRule=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"locateInPolygonRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?ie.locatePointInRing(e,t.getCoordinates()):q.EXTERIOR}},{key:"intersects",value:function(e,t){return this.locate(e,t)!==q.EXTERIOR}},{key:"updateLocationInfo",value:function(e){e===q.INTERIOR&&(this.isIn=!0),e===q.BOUNDARY&&this.numBoundaries++}},{key:"computeLocation",value:function(e,t){if(t instanceof je&&this.updateLocationInfo(this.locate(e,t)),t instanceof Xe)this.updateLocationInfo(this.locate(e,t));else if(t instanceof We)this.updateLocationInfo(this.locate(e,t));else if(t instanceof be)for(var n=t,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locate(e,i))}else if(t instanceof Qe)for(var a=t,r=0;r<a.getNumGeometries();r++){var s=a.getGeometryN(r);this.updateLocationInfo(this.locate(e,s))}else if(t instanceof Pe)for(var o=new Nt(t);o.hasNext();){var u=o.next();u!==t&&this.computeLocation(e,u)}}},{key:"locate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if(n[0]instanceof M&&n[1]instanceof We)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];if(a.isEmpty())return q.EXTERIOR;var s=a.getExteriorRing(),o=e.locateInPolygonRing(i,s);if(o===q.EXTERIOR)return q.EXTERIOR;if(o===q.BOUNDARY)return q.BOUNDARY;for(var u=0;u<a.getNumInteriorRing();u++){var l=a.getInteriorRingN(u),c=e.locateInPolygonRing(i,l);if(c===q.INTERIOR)return q.EXTERIOR;if(c===q.BOUNDARY)return q.BOUNDARY}return q.INTERIOR}.apply(void 0,n);if(n[0]instanceof M&&n[1]instanceof Xe)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!i.getEnvelopeInternal().intersects(r))return q.EXTERIOR;var a=i.getCoordinates();return i.isClosed()||!r.equals(a[0])&&!r.equals(a[a.length-1])?ie.isOnLine(r,a)?q.INTERIOR:q.EXTERIOR:q.BOUNDARY}.apply(void 0,n);if(n[0]instanceof M&&n[1]instanceof je)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=i.getCoordinate();return a.equals2D(r)?q.INTERIOR:q.EXTERIOR}.apply(void 0,n);if(n[0]instanceof M&&n[1]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return a.isEmpty()?q.EXTERIOR:a instanceof Xe?e.locate(i,a):a instanceof We?e.locate(i,a):(e.isIn=!1,e.numBoundaries=0,e.computeLocation(i,a),e.boundaryRule.isInBoundary(e.numBoundaries)?q.BOUNDARY:e.numBoundaries>0||e.isIn?q.INTERIOR:q.EXTERIOR)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),en=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.mce=null,t.chainIndex=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.mce=i,t.chainIndex=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"computeIntersections",value:function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),tn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.label=null,t.xValue=null,t.eventType=null,t.insertEvent=null,t.deleteEventIndex=null,t.obj=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1];t.eventType=e.DELETE,t.xValue=a,t.insertEvent=s}.apply(void 0,r);case 3:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=r[2];t.eventType=e.INSERT,t.label=a,t.xValue=s,t.obj=o}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"isDelete",value:function(){return this.eventType===e.DELETE}},{key:"setDeleteEventIndex",value:function(e){this.deleteEventIndex=e}},{key:"getObject",value:function(){return this.obj}},{key:"compareTo",value:function(e){var t=e;return this.xValue<t.xValue?-1:this.xValue>t.xValue?1:this.eventType<t.eventType?-1:this.eventType>t.eventType?1:0}},{key:"getInsertEvent",value:function(){return this.insertEvent}},{key:"isInsert",value:function(){return this.eventType===e.INSERT}},{key:"isSameLabel",value:function(e){return null===this.label?!1:this.label===e.label}},{key:"getDeleteEventIndex",value:function(){return this.deleteEventIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}]),e}();tn.INSERT=1,tn.DELETE=2;var nn=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),rn=function(){function e(){i(this,e)}return s(e,null,[{key:"reverseOrder",value:function(){return{compare:function(e,t){return t.compareTo(e)}}}},{key:"min",value:function(t){return e.sort(t),t.get(0)}},{key:"sort",value:function(e,t){var n=e.toArray();t?A.sort(n,t):A.sort(n);for(var r=e.iterator(),i=0,a=n.length;a>i;i++)r.next(),r.set(n[i])}}]),e}(),an=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t._hasIntersection=!1,t.hasProper=!1,t.hasProperInterior=!1,t.properIntersectionPoint=null,t.li=null,t.includeProper=null,t.recordIsolated=null,t.isSelfIntersection=null,t.numIntersections=0,t.numTests=0,t.bdyNodes=null,t._isDone=!1,t.isDoneWhenProperInt=!1}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.li=i,t.includeProper=a,t.recordIsolated=s}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"isTrivialIntersection",value:function(t,n,r,i){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var a=t.getNumPoints()-1;if(0===n&&i===a||0===i&&n===a)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"setIsDoneIfProperInt",value:function(e){this.isDoneWhenProperInt=e}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"isBoundaryPointInternal",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return this._isDone}},{key:"isBoundaryPoint",value:function(e,t){return null===t?!1:this.isBoundaryPointInternal(e,t[0])?!0:this.isBoundaryPointInternal(e,t[1])?!0:!1}},{key:"setBoundaryNodes",value:function(e,t){this.bdyNodes=new Array(2),this.bdyNodes[0]=e,this.bdyNodes[1]=t}},{key:"addIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[r],o=n.getCoordinates()[r+1];this.li.computeIntersection(i,a,s,o),this.li.hasIntersection()&&(this.recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this.includeProper||!this.li.isProper())&&(e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),sn=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));
!function(){o.events=new fe,o.nOverlaps=null}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"prepareEvents",value:function(){rn.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}}},{key:"computeIntersections",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.nOverlaps=0,e.prepareEvents();for(var a=0;a<e.events.size();a++){var s=e.events.get(a);if(s.isInsert()&&e.processOverlaps(a,s.getDeleteEventIndex(),s,i),i.isDone())break}}.apply(void 0,n);case 3:if(n[2]instanceof an&&n[0].interfaces_&&n[0].interfaces_.indexOf(c)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(c)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];e.addEdges(i,i),e.addEdges(a,a),e.computeIntersections(s)}.apply(void 0,n);if("boolean"==typeof n[2]&&n[0].interfaces_&&n[0].interfaces_.indexOf(c)>-1&&n[1]instanceof an)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];s?e.addEdges(i,null):e.addEdges(i),e.computeIntersections(a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"addEdge",value:function(e,t){for(var n=e.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var a=new en(n,i),s=new tn(t,n.getMinX(i),a);this.events.add(s),this.events.add(new tn(n.getMaxX(i),s))}}},{key:"processOverlaps",value:function(e,t,n,r){for(var i=n.getObject(),a=e;t>a;a++){var s=this.events.get(a);if(s.isInsert()){var o=s.getObject();n.isSameLabel(s)||(i.computeIntersections(o,r),this.nOverlaps++)}}}},{key:"addEdges",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=i.iterator();a.hasNext();){var s=a.next();e.addEdge(s,s)}}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=i.iterator();s.hasNext();){var o=s.next();e.addEdge(o,a)}}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(nn),on=function(){function e(){i(this,e)}return s(e,[{key:"visitItem",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),un=function(){function e(){var t=this;i(this,e),function(){t.min=S.POSITIVE_INFINITY,t.max=S.NEGATIVE_INFINITY}()}return s(e,[{key:"getMin",value:function(){return this.min}},{key:"intersects",value:function(e,t){return this.min>t||this.max<e?!1:!0}},{key:"getMax",value:function(){return this.max}},{key:"toString",value:function(){return $.toLineString(new M(this.min,0),new M(this.max,0))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"NodeComparator",get:function(){return ln}}]),e}(),ln=function(){function e(){i(this,e)}return s(e,[{key:"compare",value:function(e,t){var n=e,r=t,i=(n.min+n.max)/2,a=(r.min+r.max)/2;return a>i?-1:i>a?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[T]}}]),e}(),cn=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.item=null}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];o.min=r,o.max=i,o.item=a}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"query",value:function(e,t,n){return this.intersects(e,t)?void n.visitItem(this.item):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(un),gn=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.node1=null,o.node2=null}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];o.node1=r,o.node2=i,o.buildExtent(o.node1,o.node2)}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"buildExtent",value:function(e,t){this.min=Math.min(e.min,t.min),this.max=Math.max(e.max,t.max)}},{key:"query",value:function(e,t,n){return this.intersects(e,t)?(null!==this.node1&&this.node1.query(e,t,n),void(null!==this.node2&&this.node2.query(e,t,n))):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(un),fn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.leaves=new fe,t.root=null,t.level=0}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"buildTree",value:function(){rn.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var e=this.leaves,t=null,n=new fe;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}}},{key:"insert",value:function(e,t,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new cn(e,t,n))}},{key:"query",value:function(e,t,n){this.init(),this.root.query(e,t,n)}},{key:"buildRoot",value:function(){return null!==this.root?null:void(this.root=this.buildTree())}},{key:"printNode",value:function(e){K.out.println($.toLineString(new M(e.min,this.level),new M(e.max,this.level)))}},{key:"init",value:function(){return null!==this.root?null:void this.buildRoot()}},{key:"buildLevel",value:function(e,t){this.level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(null===i)t.add(r);else{var a=new gn(e.get(n),e.get(n+1));t.add(a)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),hn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.lines=null,t.isForcedToLineString=!1}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.lines=i}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.lines=i,t.isForcedToLineString=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"filter",value:function(e){if(this.isForcedToLineString&&e instanceof Je){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this.lines.add(t),null}e instanceof Xe&&this.lines.add(e)}},{key:"setForceToLineString",value:function(e){this.isForcedToLineString=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Se]}}],[{key:"getGeometry",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return i.getFactory().buildGeometry(e.getLines(i))}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i.getFactory().buildGeometry(e.getLines(i,a))}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getLines",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.getLines(i,!1)}.apply(void 0,n);case 2:if(n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=i.iterator();s.hasNext();){var o=s.next();e.getLines(o,a)}return a}.apply(void 0,n);if(n[0]instanceof ae&&"boolean"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new fe;return i.apply(new e(s,a)),s}.apply(void 0,n);if(n[0]instanceof ae&&n[1].interfaces_&&n[1].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i instanceof Xe?a.add(i):i.apply(new e(a)),a}.apply(void 0,n);case 3:if("boolean"==typeof n[2]&&n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=n[2],o=i.iterator();o.hasNext();){var u=o.next();e.getLines(u,a,s)}return a}.apply(void 0,n);if("boolean"==typeof n[2]&&n[0]instanceof ae&&n[1].interfaces_&&n[1].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];return i.apply(new e(a,s)),a}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),vn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.items=new fe}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"visitItem",value:function(e){this.items.add(e)}},{key:"getItems",value:function(){return this.items}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[on]}}]),e}(),yn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.index=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];if(!(i.interfaces_&&i.interfaces_.indexOf(He)>-1))throw new O("Argument must be Polygonal");t.index=new pn(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"locate",value:function(e){var t=new re(e),n=new mn(t);return this.index.query(e.y,e.y,n),t.getLocation()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[xt]}}],[{key:"SegmentVisitor",get:function(){return mn}},{key:"IntervalIndexedGeometry",get:function(){return pn}}]),e}(),mn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.counter=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.counter=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"visitItem",value:function(e){var t=e;this.counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[on]}}]),e}(),pn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.index=new fn}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.init(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"init",value:function(e){for(var t=hn.getLines(e),n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinates();this.addLine(i)}}},{key:"addLine",value:function(e){for(var t=1;t<e.length;t++){var n=new Gt(e[t-1],e[t]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this.index.insert(r,i,n)}}},{key:"query",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new vn;return e.index.query(i,a,s),s.getItems()}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];e.index.query(i,a,s)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),dn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.coord=null,t.segmentIndex=null,t.dist=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.coord=new M(i),t.segmentIndex=a,t.dist=s}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}},{key:"compareTo",value:function(e){var t=e;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&0===this.dist?!0:this.segmentIndex===e?!0:!1}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}]),e}(),kn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.nodeMap=new p,t.edge=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.edge=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"addEndpoints",value:function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(r);i||n--;var a=new Array(n),s=0;a[s++]=new M(e.coord);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)a[s++]=this.edge.pts[o];return i&&(a[s]=t.coord),new xn(a,new kt(this.edge.label))}},{key:"add",value:function(e,t,n){var r=new dn(e,t,n),i=this.nodeMap.get(r);return null!==i?i:(this.nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),An=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return s(e,[{key:"getChainStartIndices",value:function(t){var n=0,r=new fe;r.add(new Y(n));do{var i=this.findChainEnd(t,n);r.add(new Y(i)),n=i}while(n<t.length-1);var a=e.toIntArray(r);return a}},{key:"findChainEnd",value:function(e,t){for(var n=Ot.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=Ot.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),In=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.e=null,t.pts=null,t.startIndex=null,t.env1=new Q,t.env2=new Q}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.e=i,t.pts=i.getCoordinates();var a=new An;t.startIndex=a.getChainStartIndices(t.pts)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}},{key:"getMinX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return n>t?t:n}},{key:"computeIntersectsForChain",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];e.computeIntersectsForChain(e.startIndex[i],e.startIndex[i+1],a,a.startIndex[s],a.startIndex[s+1],o)}.apply(void 0,n);case 6:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3],u=n[4],l=n[5],c=e.pts[i],g=e.pts[a],f=s.pts[o],h=s.pts[u];if(a-i===1&&u-o===1)return l.addIntersections(e.e,i,s.e,o),null;if(e.env1.init(c,g),e.env2.init(f,h),!e.env1.intersects(e.env2))return null;var v=Math.trunc((i+a)/2),y=Math.trunc((o+u)/2);v>i&&(y>o&&e.computeIntersectsForChain(i,v,s,o,y,l),u>y&&e.computeIntersectsForChain(i,v,s,y,u,l)),a>v&&(y>o&&e.computeIntersectsForChain(v,a,s,o,y,l),u>y&&e.computeIntersectsForChain(v,a,s,y,u,l))}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),En=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.depth=Array(2).fill().map(function(){return Array(3)})}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];for(var a=0;2>a;a++)for(var s=0;3>s;s++)t.depth[a][s]=e.NULL_VALUE}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"getDepth",value:function(e,t){return this.depth[e][t]}},{key:"setDepth",value:function(e,t,n){this.depth[e][t]=n}},{key:"isNull",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];for(var a=0;2>a;a++)for(var s=0;3>s;s++)if(t.depth[a][s]!==e.NULL_VALUE)return!1;return!0}.apply(void 0,r);case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];return t.depth[a][1]===e.NULL_VALUE}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1];return t.depth[a][s]===e.NULL_VALUE}.apply(void 0,r)}};return a.apply(this,r)}},{key:"normalize",value:function(){for(var e=0;2>e;e++)if(!this.isNull(e)){var t=this.depth[e][1];this.depth[e][2]<t&&(t=this.depth[e][2]),0>t&&(t=0);for(var n=1;3>n;n++){var r=0;this.depth[e][n]>t&&(r=1),this.depth[e][n]=r}}}},{key:"getDelta",value:function(e){return this.depth[e][mt.RIGHT]-this.depth[e][mt.LEFT]}},{key:"getLocation",value:function(e,t){return this.depth[e][t]<=0?q.EXTERIOR:q.INTERIOR}},{key:"toString",value:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}},{key:"add",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];for(var a=r[0],s=0;2>s;s++)for(var o=1;3>o;o++){var u=a.getLocation(s,o);(u===q.EXTERIOR||u===q.INTERIOR)&&(t.isNull(s,o)?t.depth[s][o]=e.depthAtLocation(u):t.depth[s][o]+=e.depthAtLocation(u))}}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];s===q.INTERIOR&&t.depth[i][a]++}.apply(void 0,r)}};return a.apply(this,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthAtLocation",value:function(t){return t===q.EXTERIOR?0:t===q.INTERIOR?1:e.NULL_VALUE}}]),e}();En.NULL_VALUE=-1;var xn=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.pts=null,o.env=null,o.eiList=new kn(o),o.name=null,o.mce=null,o._isIsolated=!0,o.depth=new En,o.depthDelta=0}();var u=function l(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];l.call(o,r,null)}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];o.pts=r,o.label=i}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"getDepth",value:function(){return this.depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2);e[0]=this.pts[0],e[1]=this.pts[1];var n=new t(e,kt.toLineLabel(this.label));return n}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this.name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,a=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--a])||(i=!1),!r&&!i)return!1;return!0}},{key:"getCoordinate",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.pts.length>0?e.pts[0]:null}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.pts[i]}.apply(void 0,n)}};return i.apply(this,n)}},{key:"print",value:function(e){e.print("edge "+this.name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this.label+" "+this.depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this.label,e)}},{key:"isCollapsed",value:function(){return this.label.isArea()?3!==this.pts.length?!1:this.pts[0].equals(this.pts[2])?!0:!1:!1}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this.depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this.name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this.mce&&(this.mce=new In(this)),this.mce}},{key:"getEnvelope",value:function(){if(null===this.env){this.env=new Q;for(var e=0;e<this.pts.length;e++)this.env.expandToInclude(this.pts[e])}return this.env}},{key:"addIntersection",value:function(e,t,n,r){var i=new M(e.getIntersection(r)),a=t,s=e.getEdgeDistance(n,r),o=a+1;if(o<this.pts.length){var u=this.pts[o];i.equals2D(u)&&(a=o,s=0)}this.eiList.add(i,a,s)}},{key:"toString",value:function(){var e=new z;e.append("edge "+this.name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this.label+" "+this.depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this.depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"updateIM",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=a(Object.getPrototypeOf(t),"updateIM",this)).call.apply(e,[this].concat(r));var s=r[0],o=r[1];o.setAtLeastIfValid(s.getLocation(0,mt.ON),s.getLocation(1,mt.ON),1),s.isArea()&&(o.setAtLeastIfValid(s.getLocation(0,mt.LEFT),s.getLocation(1,mt.LEFT),2),o.setAtLeastIfValid(s.getLocation(0,mt.RIGHT),s.getLocation(1,mt.RIGHT),2))}}]),t}(Lt),Nn=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.parentGeom=null,o.lineEdgeMap=new I,o.boundaryNodeRule=null,o.useBoundaryDeterminationRule=!0,o.argIndex=null,o.boundaryNodes=null,o._hasTooFewPoints=!1,o.invalidPoint=null,o.areaPtLocator=null,o.ptLocator=new $t}();var u=function l(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];l.call(o,r,i,oe.OGC_SFS_BOUNDARY_RULE)}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];o.argIndex=r,o.parentGeom=i,o.boundaryNodeRule=a,null!==i&&o.add(i)}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"insertBoundaryPoint",value:function(e,n){var r=this.nodes.addNode(n),i=r.getLabel(),a=1,s=q.NONE;s=i.getLocation(e,mt.ON),s===q.BOUNDARY&&a++;var o=t.determineBoundary(this.boundaryNodeRule,a);i.setLocation(e,o)}},{key:"computeSelfNodes",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.computeSelfNodes(i,a,!1)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=new an(i,!0,!1);o.setIsDoneIfProperInt(s);var u=e.createEdgeSetIntersector(),l=e.parentGeom instanceof Je||e.parentGeom instanceof We||e.parentGeom instanceof Qe,c=a||!l;return u.computeIntersections(e.edges,o,c),e.addSelfIntersectionNodes(e.argIndex),o}.apply(void 0,n)}};return i.apply(this,n)}},{key:"computeSplitEdges",value:function(e){for(var t=this.edges.iterator();t.hasNext();){var n=t.next();n.eiList.addSplitEdges(e)}}},{key:"computeEdgeIntersections",value:function(e,t,n){var r=new an(t,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var i=this.createEdgeSetIntersector();return i.computeIntersections(this.edges,e.edges,r),r}},{key:"getGeometry",value:function(){return this.parentGeom}},{key:"getBoundaryNodeRule",value:function(){return this.boundaryNodeRule}},{key:"hasTooFewPoints",value:function(){return this._hasTooFewPoints}},{key:"addPoint",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof je)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=i.getCoordinate();e.insertPoint(e.argIndex,a,q.INTERIOR)}.apply(void 0,n);if(n[0]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.insertPoint(e.argIndex,i,q.INTERIOR)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"addPolygon",value:function(e){this.addPolygonRing(e.getExteriorRing(),q.EXTERIOR,q.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,q.INTERIOR,q.EXTERIOR)}}},{key:"addEdge",value:function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this.argIndex,t[0],q.BOUNDARY),this.insertPoint(this.argIndex,t[t.length-1],q.BOUNDARY)}},{key:"addLineString",value:function(e){var t=ye.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=t[0],null;var n=new xn(t,new kt(this.argIndex,q.INTERIOR));this.lineEdgeMap.put(e,n),this.insertEdge(n),D.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,t[0]),this.insertBoundaryPoint(this.argIndex,t[t.length-1])}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"getBoundaryPoints",value:function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()),n=0,r=e.iterator();r.hasNext();){var i=r.next();t[n++]=i.getCoordinate().copy()}return t}},{key:"getBoundaryNodes",value:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes}},{key:"addSelfIntersectionNode",value:function(e,t,n){return this.isBoundaryNode(e,t)?null:void(n===q.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n))}},{key:"addPolygonRing",value:function(e,t,n){if(e.isEmpty())return null;var r=ye.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var i=t,a=n;ie.isCCW(r)&&(i=n,a=t);var s=new xn(r,new kt(this.argIndex,q.BOUNDARY,i,a));this.lineEdgeMap.put(e,s),this.insertEdge(s),this.insertPoint(this.argIndex,r[0],q.BOUNDARY)}},{key:"insertPoint",value:function(e,t,n){var r=this.nodes.addNode(t),i=r.getLabel();null===i?r.label=new kt(e,n):i.setLocation(e,n);
}},{key:"createEdgeSetIntersector",value:function(){return new sn}},{key:"addSelfIntersectionNodes",value:function(e){for(var t=this.edges.iterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.eiList.iterator();i.hasNext();){var a=i.next();this.addSelfIntersectionNode(e,a.coord,r)}}},{key:"add",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1!==r.length)return(e=a(Object.getPrototypeOf(t.prototype),"add",this)).call.apply(e,[this].concat(r));var s=r[0];if(s.isEmpty())return null;if(s instanceof Qe&&(this.useBoundaryDeterminationRule=!1),s instanceof We)this.addPolygon(s);else if(s instanceof Xe)this.addLineString(s);else if(s instanceof je)this.addPoint(s);else if(s instanceof Ke)this.addCollection(s);else if(s instanceof be)this.addCollection(s);else if(s instanceof Qe)this.addCollection(s);else{if(!(s instanceof Pe))throw new UnsupportedOperationException(s.getClass().getName());this.addCollection(s)}}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"locate",value:function(e){return this.parentGeom.interfaces_&&this.parentGeom.interfaces_.indexOf(He)>-1&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new yn(this.parentGeom)),this.areaPtLocator.locate(e)):this.ptLocator.locate(e,this.parentGeom)}},{key:"findEdge",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return this.lineEdgeMap.get(s)}return(e=a(Object.getPrototypeOf(t.prototype),"findEdge",this)).call.apply(e,[this].concat(r))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"determineBoundary",value:function(e,t){return e.isInBoundary(t)?q.BOUNDARY:q.INTERIOR}}]),t}(Mt),wn=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return s(e,[{key:"createEdgeEndForNext",value:function(e,t,n,r){var i=n.segmentIndex+1;if(i>=e.getNumPoints()&&null===r)return null;var a=e.getCoordinate(i);null!==r&&r.segmentIndex===n.segmentIndex&&(a=r.coord);var s=new _t(e,n.coord,a,new kt(e.getLabel()));t.add(s)}},{key:"createEdgeEndForPrev",value:function(e,t,n,r){var i=n.segmentIndex;if(0===n.dist){if(0===i)return null;i--}var a=e.getCoordinate(i);null!==r&&r.segmentIndex>=i&&(a=r.coord);var s=new kt(e.getLabel());s.flip();var o=new _t(e,n.coord,a,s);t.add(o)}},{key:"computeEdgeEnds",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=new fe,s=i;s.hasNext();){var o=s.next();e.computeEdgeEnds(o,a)}return a}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=i.getEdgeIntersectionList();s.addEndpoints();var o=s.iterator(),u=null,l=null;if(!o.hasNext())return null;var c=o.next();do u=l,l=c,c=null,o.hasNext()&&(c=o.next()),null!==l&&(e.createEdgeEndForPrev(i,a,l,u),e.createEdgeEndForNext(i,a,l,c));while(null!==l)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Cn=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.edgeEnds=new fe}();var l=function c(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];c.call(u,null,r)}.apply(void 0,i);case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=(i[0],i[1]),o=n(r,Object.getPrototypeOf(t).call(r,s.getEdge(),s.getCoordinate(),s.getDirectedCoordinate(),new kt(s.getLabel())));o.insert(s)}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"insert",value:function(e){this.edgeEnds.add(e)}},{key:"print",value:function(e){e.println("EdgeEndBundle--> Label: "+this.label);for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e),e.println()}}},{key:"iterator",value:function(){return this.edgeEnds.iterator()}},{key:"getEdgeEnds",value:function(){return this.edgeEnds}},{key:"computeLabelOn",value:function(e,t){for(var n=0,r=!1,i=this.iterator();i.hasNext();){var a=i.next(),s=a.getLabel().getLocation(e);s===q.BOUNDARY&&n++,s===q.INTERIOR&&(r=!0)}var s=q.NONE;r&&(s=q.INTERIOR),n>0&&(s=Nn.determineBoundary(t,n)),this.label.setLocation(e,s)}},{key:"computeLabelSide",value:function(e,t){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var i=r.getLabel().getLocation(e,t);if(i===q.INTERIOR)return this.label.setLocation(e,t,q.INTERIOR),null;i===q.EXTERIOR&&this.label.setLocation(e,t,q.EXTERIOR)}}}},{key:"getLabel",value:function(){return this.label}},{key:"computeLabelSides",value:function(e){this.computeLabelSide(e,mt.LEFT),this.computeLabelSide(e,mt.RIGHT)}},{key:"updateIM",value:function(e){xn.updateIM(this.label,e)}},{key:"computeLabel",value:function(e){for(var t=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(t=!0)}t?this.label=new kt(q.NONE,q.NONE,q.NONE):this.label=new kt(q.NONE);for(var i=0;2>i;i++)this.computeLabelOn(i,e),t&&this.computeLabelSides(i)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(_t),On=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this)),u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"updateIM",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}}},{key:"insert",value:function(e){var t=this.edgeMap.get(e);null===t?(t=new Cn(e),this.insertEdgeEnd(e,t)):t.insert(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Ct),Sn=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1];n(r,Object.getPrototypeOf(t).call(r,s,o))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"updateIMFromEdges",value:function(e){this.edges.updateIM(e)}},{key:"computeIM",value:function(e){e.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Rt),Ln=function(e){function t(){return i(this,t),n(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"createNode",value:function(e){return new Sn(e,new On)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Tt),Rn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.nodes=new bt(new Ln)}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"copyNodesAndLabels",value:function(e,t){for(var n=e.getNodeIterator();n.hasNext();){var r=n.next(),i=this.nodes.addNode(r.getCoordinate());i.setLabel(t,r.getLabel().getLocation(t))}}},{key:"build",value:function(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);var t=new wn,n=t.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)}},{key:"computeIntersectionNodes",value:function(e,t){for(var n=e.getEdgeIterator();n.hasNext();)for(var r=n.next(),i=r.getLabel().getLocation(t),a=r.getEdgeIntersectionList().iterator();a.hasNext();){var s=a.next(),o=this.nodes.addNode(s.coord);i===q.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,q.INTERIOR)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Tn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=new te,t.geomGraph=null,t.nodeGraph=new Rn,t.invalidPoint=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.geomGraph=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"isNodeEdgeAreaLabelsConsistent",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();){var t=e.next();if(!t.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=t.getCoordinate().copy(),!1}return!0}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"hasDuplicateRings",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();)for(var t=e.next(),n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1}},{key:"isNodeConsistentArea",value:function(){var e=this.geomGraph.computeSelfNodes(this.li,!0,!0);return e.hasProperIntersection()?(this.invalidPoint=e.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Pn=function(){function e(){i(this,e)}return s(e,[{key:"getBounds",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),bn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.bounds=null,t.item=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.bounds=i,t.item=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getItem",value:function(){return this.item}},{key:"getBounds",value:function(){return this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Pn,P]}}]),e}(),_n=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t._size=null,t.items=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t._size=0,t.items=new fe,t.items.add(null)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var e=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),e}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(e){for(var t=null,n=this.items.get(e);2*e<=this._size&&(t=2*e,t!==this._size&&this.items.get(t+1).compareTo(this.items.get(t))<0&&t++,this.items.get(t).compareTo(n)<0);e=t)this.items.set(e,this.items.get(t));this.items.set(e,n)}},{key:"clear",value:function(){this._size=0,this.items.clear()}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(e){this.items.add(null),this._size+=1;var t=this._size;for(this.items.set(0,e);e.compareTo(this.items.get(Math.trunc(t/2)))<0;t/=2)this.items.set(t,this.items.get(Math.trunc(t/2)));this.items.set(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Dn=function(){function e(){i(this,e)}return s(e,[{key:"insert",value:function(e,t){}},{key:"remove",value:function(e,t){}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0]}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Mn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.childBoundables=new fe,t.bounds=null,t.level=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.level=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getLevel",value:function(){return this.level}},{key:"size",value:function(){return this.childBoundables.size()}},{key:"getChildBoundables",value:function(){return this.childBoundables}},{key:"addChildBoundable",value:function(e){D.isTrue(null===this.bounds),this.childBoundables.add(e)}},{key:"isEmpty",value:function(){return this.childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Pn,P]}}]),e}();Mn.serialVersionUID=0x5a1e55ec41369800;var Fn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.boundable1=null,t.boundable2=null,t._distance=null,t.itemDistance=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.boundable1=i,t.boundable2=a,t.itemDistance=s,t._distance=t.distance()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"expandToQueue",value:function(t,n){var r=e.isComposite(this.boundable1),i=e.isComposite(this.boundable2);if(r&&i)return e.area(this.boundable1)>e.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,n),null):(this.expand(this.boundable2,this.boundable1,t,n),null);if(r)return this.expand(this.boundable1,this.boundable2,t,n),null;if(i)return this.expand(this.boundable2,this.boundable1,t,n),null;throw new O("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this.boundable1)||e.isComposite(this.boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(t,n,r,i){for(var a=t.getChildBoundables(),s=a.iterator();s.hasNext();){var o=s.next(),u=new e(o,n,this.itemDistance);u.getDistance()<i&&r.add(u)}}},{key:"getBoundable",value:function(e){return 0===e?this.boundable1:this.boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}],[{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof Mn}}]),e}(),Gn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.root=null,t.built=!1,t.itemBoundables=new fe,t.nodeCapacity=null}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];o.call(t,e.DEFAULT_NODE_CAPACITY)}.apply(void 0,r);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];D.isTrue(i>1,"Node capacity must be greater than 1"),t.nodeCapacity=i}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"getNodeCapacity",value:function(){return this.nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.isEmpty()?0:(e.build(),e.size(e.root))}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0,s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();o instanceof Mn?a+=e.size(o):o instanceof bn&&(a+=1)}return a}.apply(void 0,n)}};return i.apply(this,n)}},{key:"removeItem",value:function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof bn&&i.getItem()===t&&(n=i)}return null!==n?(e.getChildBoundables().remove(n),!0):!1}},{key:"itemsTree",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];e.build();var i=e.itemsTree(e.root);return null===i?new fe:i}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=new fe,s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();if(o instanceof Mn){var u=e.itemsTree(o);null!==u&&a.add(u)}else o instanceof bn?a.add(o.getItem()):D.shouldNeverReachHere()}return a.size()<=0?null:a}.apply(void 0,n)}};return i.apply(this,n)}},{key:"insert",value:function(e,t){D.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new bn(e,t))}},{key:"boundablesAtLevel",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new fe;return e.boundablesAtLevel(i,e.root,a),a}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];if(D.isTrue(i>-2),a.getLevel()===i)return s.add(a),null;for(var o=a.getChildBoundables().iterator();o.hasNext();){var u=o.next();u instanceof Mn?e.boundablesAtLevel(i,u,s):(D.isTrue(u instanceof bn),-1===i&&s.add(u))}return null}.apply(void 0,n)}};return i.apply(this,n)}},{key:"query",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.build();var a=new fe;return e.isEmpty()?a:(e.getIntersectsOp().intersects(e.root.getBounds(),i)&&e.query(i,e.root,a),a)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.build(),e.isEmpty()?null:void(e.getIntersectsOp().intersects(e.root.getBounds(),i)&&e.query(i,e.root,a))}.apply(void 0,n);case 3:if(n[2].interfaces_&&n[2].interfaces_.indexOf(on)>-1&&n[0]instanceof Object&&n[1]instanceof Mn)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=n[2],o=a.getChildBoundables(),u=0;u<o.size();u++){var l=o.get(u);e.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Mn?e.query(i,l,s):l instanceof bn?s.visitItem(l.getItem()):D.shouldNeverReachHere())}}.apply(void 0,n);if(n[2].interfaces_&&n[2].interfaces_.indexOf(c)>-1&&n[0]instanceof Object&&n[1]instanceof Mn)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=n[2],o=a.getChildBoundables(),u=0;u<o.size();u++){var l=o.get(u);e.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Mn?e.query(i,l,s):l instanceof bn?s.add(l.getItem()):D.shouldNeverReachHere())}}.apply(void 0,n)}};return i.apply(this,n)}},{key:"build",value:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))}},{key:"getRoot",value:function(){return this.build(),this.root}},{key:"remove",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.build(),e.getIntersectsOp().intersects(e.root.getBounds(),i)?e.remove(i,e.root,a):!1}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=e.removeItem(a,s);if(o)return!0;for(var u=null,l=a.getChildBoundables().iterator();l.hasNext();){var c=l.next();if(e.getIntersectsOp().intersects(c.getBounds(),i)&&c instanceof Mn&&(o=e.remove(i,c,s))){u=c;break}}return null!==u&&u.getChildBoundables().isEmpty()&&a.getChildBoundables().remove(u),o}.apply(void 0,n)}};return i.apply(this,n)}},{key:"createHigherLevels",value:function(e,t){D.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.isEmpty()?0:(e.build(),e.depth(e.root))}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0,s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();if(o instanceof Mn){var u=e.depth(o);u>a&&(a=u)}}return a+1}.apply(void 0,n)}};return i.apply(this,n)}},{key:"createParentBoundables",value:function(e,t){D.isTrue(!e.isEmpty());var n=new fe;n.add(this.createNode(t));var r=new fe(e);rn.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var a=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(a)}return n}},{key:"isEmpty",value:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[P]}}],[{key:"compareDoubles",value:function(e,t){return e>t?1:t>e?-1:0}},{key:"IntersectsOp",get:function(){return Bn}}]),e}(),Bn=function(){function e(){i(this,e)}return s(e,[{key:"intersects",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();Gn.serialVersionUID=-0x35ef64c82d4c5400,Gn.DEFAULT_NODE_CAPACITY=10;var qn=function(){function e(){i(this,e)}return s(e,[{key:"distance",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Un=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function c(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];c.call(u,t.DEFAULT_NODE_CAPACITY)}.apply(void 0,i);case 1:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0];n(r,Object.getPrototypeOf(t).call(r,s))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,t){D.isTrue(e.length>0);for(var n=new fe,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n}},{key:"createNode",value:function(e){return new zn(e)}},{key:"size",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length?a(Object.getPrototypeOf(t.prototype),"size",this).call(this):(e=a(Object.getPrototypeOf(t.prototype),"size",this)).call.apply(e,[this].concat(r))}},{key:"insert",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=a(Object.getPrototypeOf(t.prototype),"insert",this)).call.apply(e,[this].concat(r));var s=r[0],o=r[1];return s.isNull()?null:void a(Object.getPrototypeOf(t.prototype),"insert",this).call(this,s,o)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t),i=e.iterator(),a=0;t>a;a++){r[a]=new fe;for(var s=0;i.hasNext()&&n>s;){var o=i.next();r[a].add(o),s++}}return r}},{key:"query",value:function(){for(var e=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=r[0];return a(Object.getPrototypeOf(t.prototype),"query",e).call(e,s)}.apply(void 0,r);case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=r[0],o=r[1];a(Object.getPrototypeOf(t.prototype),"query",e).call(e,s,o)}.apply(void 0,r);case 3:if(r[2].interfaces_&&r[2].interfaces_.indexOf(on)>-1&&r[0]instanceof Object&&r[1]instanceof Mn)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=r[0],o=r[1],u=r[2];a(Object.getPrototypeOf(t.prototype),"query",e).call(e,s,o,u)}.apply(void 0,r);if(r[2].interfaces_&&r[2].interfaces_.indexOf(c)>-1&&r[0]instanceof Object&&r[1]instanceof Mn)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var s=r[0],o=r[1],u=r[2];a(Object.getPrototypeOf(t.prototype),"query",e).call(e,s,o,u)}.apply(void 0,r)}};return s.apply(this,r)}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return a(Object.getPrototypeOf(t.prototype),"createParentBoundables",this).call(this,e,n)}},{key:"remove",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];return a(Object.getPrototypeOf(t.prototype),"remove",this).call(this,s,o)}return(e=a(Object.getPrototypeOf(t.prototype),"remove",this)).call.apply(e,[this].concat(r))}},{key:"depth",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length?a(Object.getPrototypeOf(t.prototype),"depth",this).call(this):(e=a(Object.getPrototypeOf(t.prototype),"depth",this)).call.apply(e,[this].concat(r))}},{key:"createParentBoundables",value:function(e,n){D.isTrue(!e.isEmpty());var r=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),i=new fe(e);rn.sort(i,t.xComparator);var a=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(a,n)}},{key:"nearestNeighbour",value:function(){for(var e=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0].interfaces_&&r[0].interfaces_.indexOf(qn)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new Fn(e.getRoot(),e.getRoot(),i);return e.nearestNeighbour(a)}.apply(void 0,r);if(r[0]instanceof Fn)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.nearestNeighbour(i,S.POSITIVE_INFINITY)}.apply(void 0,r);case 2:if(r[0]instanceof t&&r[1].interfaces_&&r[1].interfaces_.indexOf(qn)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new Fn(e.getRoot(),i.getRoot(),a);return e.nearestNeighbour(s)}.apply(void 0,r);if(r[0]instanceof Fn&&"number"==typeof r[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=i,s=null,o=new _n;for(o.add(r);!o.isEmpty()&&a>0;){var u=o.poll(),l=u.getDistance();if(l>=a)break;u.isLeaves()?(a=l,s=u):u.expandToQueue(o,a)}return[s.getBoundable(0).getItem(),s.getBoundable(1).getItem()]}.apply(void 0,r);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=new bn(i,a),u=new Fn(e.getRoot(),o,s);return e.nearestNeighbour(u)[0]}.apply(void 0,r)}};return a.apply(this,r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Dn,P]}}],[{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}},{key:"STRtreeNode",get:function(){return zn}}]),t}(Gn),zn=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this)),l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 1:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0];n(r,Object.getPrototypeOf(t).call(r,s))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"computeBounds",value:function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new Q(n.getBounds()):e.expandToInclude(n.getBounds())}return e}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Mn);Un.serialVersionUID=0x39920f7d5f261e0,Un.xComparator=new(function(){function e(){i(this,e)}return s(e,[{key:"compare",value:function(e,t){return Un.compareDoubles(Un.centreX(e.getBounds()),Un.centreX(t.getBounds()))}},{key:"interfaces_",get:function(){return[T]}}]),e}()),Un.yComparator=new(function(){function e(){i(this,e)}return s(e,[{key:"compare",value:function(e,t){return Un.compareDoubles(Un.centreY(e.getBounds()),Un.centreY(t.getBounds()))}},{key:"interfaces_",get:function(){return[T]}}]),e}()),Un.intersectsOp=new(function(){function e(){i(this,e)}return s(e,[{key:"intersects",value:function(e,t){return e.intersects(t)}},{key:"interfaces_",get:function(){return[IntersectsOp]}}]),e}()),Un.DEFAULT_NODE_CAPACITY=10;var Yn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];
i(this,e),function(){t.graph=null,t.rings=new fe,t.totalEnv=new Q,t.index=null,t.nestedPt=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.graph=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"buildIndex",value:function(){this.index=new Un;for(var e=0;e<this.rings.size();e++){var t=this.rings.get(e),n=t.getEnvelopeInternal();this.index.insert(n,t)}}},{key:"getNestedPoint",value:function(){return this.nestedPt}},{key:"isNonNested",value:function(){this.buildIndex();for(var e=0;e<this.rings.size();e++)for(var t=this.rings.get(e),n=t.getCoordinates(),r=this.index.query(t.getEnvelopeInternal()),i=0;i<r.size();i++){var a=r.get(i),s=a.getCoordinates();if(t!==a&&t.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){var o=Vn.findPtNotNode(n,a,this.graph);if(null!==o){var u=ie.isPointInRing(o,s);if(u)return this.nestedPt=o,!1}}}return!0}},{key:"add",value:function(e){this.rings.add(e),this.totalEnv.expandToInclude(e.getEnvelopeInternal())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Xn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.errorType=null,t.pt=null}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t,i,null)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.errorType=i,null!==a&&(t.pt=a.copy())}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getErrorType",value:function(){return this.errorType}},{key:"getMessage",value:function(){return e.errMsg[this.errorType]}},{key:"getCoordinate",value:function(){return this.pt}},{key:"toString",value:function(){var e="";return null!==this.pt&&(e=" at or near point "+this.pt),this.getMessage()+e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();Xn.ERROR=0,Xn.REPEATED_POINT=1,Xn.HOLE_OUTSIDE_SHELL=2,Xn.NESTED_HOLES=3,Xn.DISCONNECTED_INTERIOR=4,Xn.SELF_INTERSECTION=5,Xn.RING_SELF_INTERSECTION=6,Xn.NESTED_SHELLS=7,Xn.DUPLICATE_RINGS=8,Xn.TOO_FEW_POINTS=9,Xn.INVALID_COORDINATE=10,Xn.RING_NOT_CLOSED=11,Xn.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];var Vn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.parentGeometry=null,t.isSelfTouchingRingFormingHoleValid=!1,t.validErr=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.parentGeometry=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"checkInvalidCoordinates",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:if(r[0]instanceof Array)return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];for(var a=r[0],s=0;s<a.length;s++)if(!e.isValid(a[s]))return t.validErr=new Xn(Xn.INVALID_COORDINATE,a[s]),null}.apply(void 0,r);if(r[0]instanceof We)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];if(t.checkInvalidCoordinates(i.getExteriorRing().getCoordinates()),null!==t.validErr)return null;for(var a=0;a<i.getNumInteriorRing();a++)if(t.checkInvalidCoordinates(i.getInteriorRingN(a).getCoordinates()),null!==t.validErr)return null}.apply(void 0,r)}};return a.apply(this,r)}},{key:"checkHolesNotNested",value:function(e,t){for(var n=new Yn(t),r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);n.add(i)}var a=n.isNonNested();a||(this.validErr=new Xn(Xn.NESTED_HOLES,n.getNestedPoint()))}},{key:"checkConsistentArea",value:function(e){var t=new Tn(e),n=t.isNodeConsistentArea();return n?void(t.hasDuplicateRings()&&(this.validErr=new Xn(Xn.DUPLICATE_RINGS,t.getInvalidPoint()))):(this.validErr=new Xn(Xn.SELF_INTERSECTION,t.getInvalidPoint()),null)}},{key:"isValid",value:function(){return this.checkValid(this.parentGeometry),null===this.validErr}},{key:"checkShellInsideHole",value:function(t,n,r){var i=t.getCoordinates(),a=n.getCoordinates(),s=e.findPtNotNode(i,n,r);if(null!==s){var o=ie.isPointInRing(s,a);if(!o)return s}var u=e.findPtNotNode(a,t,r);if(null!==u){var l=ie.isPointInRing(u,i);return l?u:null}return D.shouldNeverReachHere("points in shell and hole appear to be equal"),null}},{key:"checkNoSelfIntersectingRings",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();){var n=t.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}}},{key:"checkConnectedInteriors",value:function(e){var t=new Ft(e);t.isInteriorsConnected()||(this.validErr=new Xn(Xn.DISCONNECTED_INTERIOR,t.getCoordinate()))}},{key:"checkNoSelfIntersectingRing",value:function(e){for(var t=new k,n=!0,r=e.iterator();r.hasNext();){var i=r.next();if(n)n=!1;else{if(t.contains(i.coord))return this.validErr=new Xn(Xn.RING_SELF_INTERSECTION,i.coord),null;t.add(i.coord)}}}},{key:"checkHolesInShell",value:function(t,n){for(var r=t.getExteriorRing(),i=new Qt(r),a=0;a<t.getNumInteriorRing();a++){var s=t.getInteriorRingN(a),o=e.findPtNotNode(s.getCoordinates(),r,n);if(null===o)return null;var u=!i.isInside(o);if(u)return this.validErr=new Xn(Xn.HOLE_OUTSIDE_SHELL,o),null}}},{key:"checkTooFewPoints",value:function(e){return e.hasTooFewPoints()?(this.validErr=new Xn(Xn.TOO_FEW_POINTS,e.getInvalidPoint()),null):void 0}},{key:"getValidationError",value:function(){return this.checkValid(this.parentGeometry),this.validErr}},{key:"checkValid",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof je)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.checkInvalidCoordinates(i.getCoordinates())}.apply(void 0,n);if(n[0]instanceof Ke)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.checkInvalidCoordinates(i.getCoordinates())}.apply(void 0,n);if(n[0]instanceof Je)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(e.checkInvalidCoordinates(i.getCoordinates()),null!==e.validErr)return null;if(e.checkClosedRing(i),null!==e.validErr)return null;var a=new Nn(0,i);if(e.checkTooFewPoints(a),null!==e.validErr)return null;var s=new te;a.computeSelfNodes(s,!0,!0),e.checkNoSelfIntersectingRings(a)}.apply(void 0,n);if(n[0]instanceof Xe)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(e.checkInvalidCoordinates(i.getCoordinates()),null!==e.validErr)return null;var a=new Nn(0,i);e.checkTooFewPoints(a)}.apply(void 0,n);if(n[0]instanceof We)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(e.checkInvalidCoordinates(i),null!==e.validErr)return null;if(e.checkClosedRings(i),null!==e.validErr)return null;var a=new Nn(0,i);return e.checkTooFewPoints(a),null!==e.validErr?null:(e.checkConsistentArea(a),null!==e.validErr?null:e.isSelfTouchingRingFormingHoleValid||(e.checkNoSelfIntersectingRings(a),null===e.validErr)?(e.checkHolesInShell(i,a),null!==e.validErr?null:(e.checkHolesNotNested(i,a),null!==e.validErr?null:void e.checkConnectedInteriors(a))):null)}.apply(void 0,n);if(n[0]instanceof Qe)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;a<i.getNumGeometries();a++){var s=i.getGeometryN(a);if(e.checkInvalidCoordinates(s),null!==e.validErr)return null;if(e.checkClosedRings(s),null!==e.validErr)return null}var o=new Nn(0,i);if(e.checkTooFewPoints(o),null!==e.validErr)return null;if(e.checkConsistentArea(o),null!==e.validErr)return null;if(!e.isSelfTouchingRingFormingHoleValid&&(e.checkNoSelfIntersectingRings(o),null!==e.validErr))return null;for(var a=0;a<i.getNumGeometries();a++){var s=i.getGeometryN(a);if(e.checkHolesInShell(s,o),null!==e.validErr)return null}for(var a=0;a<i.getNumGeometries();a++){var s=i.getGeometryN(a);if(e.checkHolesNotNested(s,o),null!==e.validErr)return null}return e.checkShellsNotNested(i,o),null!==e.validErr?null:void e.checkConnectedInteriors(o)}.apply(void 0,n);if(n[0]instanceof Pe)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;a<i.getNumGeometries();a++){var s=i.getGeometryN(a);if(e.checkValid(s),null!==e.validErr)return null}}.apply(void 0,n);if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(e.validErr=null,i.isEmpty())return null;if(i instanceof je)e.checkValid(i);else if(i instanceof Ke)e.checkValid(i);else if(i instanceof Je)e.checkValid(i);else if(i instanceof Xe)e.checkValid(i);else if(i instanceof We)e.checkValid(i);else if(i instanceof Qe)e.checkValid(i);else{if(!(i instanceof Pe))throw new UnsupportedOperationException(i.getClass().getName());e.checkValid(i)}}.apply(void 0,n)}};return i.apply(this,n)}},{key:"setSelfTouchingRingFormingHoleValid",value:function(e){this.isSelfTouchingRingFormingHoleValid=e}},{key:"checkShellNotNested",value:function(t,n,r){var i=t.getCoordinates(),a=n.getExteriorRing(),s=a.getCoordinates(),o=e.findPtNotNode(i,a,r);if(null===o)return null;var u=ie.isPointInRing(o,s);if(!u)return null;if(n.getNumInteriorRing()<=0)return this.validErr=new Xn(Xn.NESTED_SHELLS,o),null;for(var l=null,c=0;c<n.getNumInteriorRing();c++){var g=n.getInteriorRingN(c);if(l=this.checkShellInsideHole(t,g,r),null===l)return null}this.validErr=new Xn(Xn.NESTED_SHELLS,l)}},{key:"checkClosedRings",value:function(e){if(this.checkClosedRing(e.getExteriorRing()),null!==this.validErr)return null;for(var t=0;t<e.getNumInteriorRing();t++)if(this.checkClosedRing(e.getInteriorRingN(t)),null!==this.validErr)return null}},{key:"checkClosedRing",value:function(e){if(!e.isClosed()){var t=null;e.getNumPoints()>=1&&(t=e.getCoordinateN(0)),this.validErr=new Xn(Xn.RING_NOT_CLOSED,t)}}},{key:"checkShellsNotNested",value:function(e,t){for(var n=0;n<e.getNumGeometries();n++)for(var r=e.getGeometryN(n),i=r.getExteriorRing(),a=0;a<e.getNumGeometries();a++)if(n!==a){var s=e.getGeometryN(a);if(this.checkShellNotNested(i,s,t),null!==this.validErr)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findPtNotNode",value:function(e,t,n){for(var r=n.findEdge(t),i=r.getEdgeIntersectionList(),a=0;a<e.length;a++){var s=e[a];if(!i.isIntersection(s))return s}return null}},{key:"isValid",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new e(i);return a.isValid()}.apply(void 0,n);if(n[0]instanceof M)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return S.isNaN(r.x)?!1:S.isInfinite(r.x)?!1:S.isNaN(r.y)?!1:S.isInfinite(r.y)?!1:!0}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),jn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.factory=null,t.interiorPoint=null,t.maxWidth=0}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.factory=i.getFactory(),t.add(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"addPolygon",value:function(t){if(t.isEmpty())return null;var n=null,r=0,i=this.horizontalBisector(t);if(0===i.getLength())r=0,n=i.getCoordinate();else{var a=i.intersection(t),s=this.widestGeometry(a);r=s.getEnvelopeInternal().getWidth(),n=e.centre(s.getEnvelopeInternal())}(null===this.interiorPoint||r>this.maxWidth)&&(this.interiorPoint=n,this.maxWidth=r)}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"widestGeometry",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof Pe)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];if(r.isEmpty())return r;for(var i=r.getGeometryN(0),a=1;a<r.getNumGeometries();a++)r.getGeometryN(a).getEnvelopeInternal().getWidth()>i.getEnvelopeInternal().getWidth()&&(i=r.getGeometryN(a));return i}.apply(void 0,n);if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return i instanceof Pe?e.widestGeometry(i):i}.apply(void 0,n)}};return i.apply(this,n)}},{key:"horizontalBisector",value:function(e){var t=e.getEnvelopeInternal(),n=Hn.getBisectorY(e);return this.factory.createLineString([new M(t.getMinX(),n),new M(t.getMaxX(),n)])}},{key:"add",value:function(e){if(e instanceof We)this.addPolygon(e);else if(e instanceof Pe)for(var t=e,n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"centre",value:function(t){return new M(e.avg(t.getMinX(),t.getMaxX()),e.avg(t.getMinY(),t.getMaxY()))}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"SafeBisectorFinder",get:function(){return Hn}}]),e}(),Hn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.poly=null,t.centreY=null,t.hiY=S.MAX_VALUE,t.loY=-S.MAX_VALUE}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];t.poly=a,t.hiY=a.getEnvelopeInternal().getMaxY(),t.loY=a.getEnvelopeInternal().getMinY(),t.centreY=e.avg(t.loY,t.hiY)}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"updateInterval",value:function(e){e<=this.centreY?e>this.loY&&(this.loY=e):e>this.centreY&&e<this.hiY&&(this.hiY=e)}},{key:"getBisectorY",value:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var n=e.avg(this.hiY,this.loY);return n}},{key:"process",value:function(e){for(var t=e.getCoordinateSequence(),n=0;n<t.size();n++){var r=t.getY(n);this.updateInterval(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBisectorY",value:function(t){var n=new e(t);return n.getBisectorY()}}]),e}(),Wn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geomFactory=null,t.skipEmpty=!1,t.inputGeoms=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];t.geomFactory=e.extractFactory(a),t.inputGeoms=a}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"extractElements",value:function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this.skipEmpty&&r.isEmpty()||t.add(r)}}},{key:"combine",value:function(){for(var e=new fe,t=this.inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new e(i);return a.combine()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new e(e.createList(i,a));return s.combine()}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=new e(e.createList(i,a,s));return o.combine()}.apply(void 0,n)}};return i.apply(this,n)}},{key:"extractFactory",value:function(e){return e.isEmpty()?null:e.iterator().next().getFactory()}},{key:"createList",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=new fe;return a.add(r),a.add(i),a}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=new fe;return s.add(r),s.add(i),s.add(a),s}.apply(void 0,t)}};return r.apply(this,t)}}]),e}(),Kn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pointGeom=null,t.otherGeom=null,t.geomFact=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.pointGeom=i,t.otherGeom=a,t.geomFact=a.getFactory()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"union",value:function(){for(var e=new $t,t=new k,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),i=r.getCoordinate(),a=e.locate(i,this.otherGeom);a===q.EXTERIOR&&t.add(i)}if(0===t.size())return this.otherGeom;var s=null,o=ye.toCoordinateArray(t);return s=1===o.length?this.geomFact.createPoint(o[0]):this.geomFact.createMultiPointFromCoords(o),Wn.combine(s,this.otherGeom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(t,n){var r=new e(t,n);return r.union()}}]),e}(),Jn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.inputGeom=null,t.factory=null,t.pruneEmptyGeometry=!0,t.preserveGeometryCollectionType=!0,t.preserveCollections=!1,t.preserveType=!1}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"transformPoint",value:function(e,t){return this.factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformPolygon",value:function(e,t){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!==r&&r instanceof Je&&!r.isEmpty()||(n=!1);for(var i=new fe,a=0;a<e.getNumInteriorRing();a++){var s=this.transformLinearRing(e.getInteriorRingN(a),e);null===s||s.isEmpty()||(s instanceof Je||(n=!1),i.add(s))}if(n)return this.factory.createPolygon(r,i.toArray([]));var o=new fe;return null!==r&&o.add(r),o.addAll(i),this.factory.buildGeometry(o)}},{key:"createCoordinateSequence",value:function(e){return this.factory.getCoordinateSequenceFactory().create(e)}},{key:"getInputGeometry",value:function(){return this.inputGeom}},{key:"transformMultiLineString",value:function(e,t){for(var n=new fe,r=0;r<e.getNumGeometries();r++){var i=this.transformLineString(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"transformCoordinates",value:function(e,t){return this.copy(e)}},{key:"transformLineString",value:function(e,t){return this.factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformMultiPoint",value:function(e,t){for(var n=new fe,r=0;r<e.getNumGeometries();r++){var i=this.transformPoint(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"transformMultiPolygon",value:function(e,t){for(var n=new fe,r=0;r<e.getNumGeometries();r++){var i=this.transformPolygon(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"copy",value:function(e){return e.clone()}},{key:"transformGeometryCollection",value:function(e,t){for(var n=new fe,r=0;r<e.getNumGeometries();r++){var i=this.transform(e.getGeometryN(r));null!==i&&(this.pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(st.toGeometryArray(n)):this.factory.buildGeometry(n)}},{key:"transform",value:function(e){if(this.inputGeom=e,this.factory=e.getFactory(),e instanceof je)return this.transformPoint(e,null);if(e instanceof Ke)return this.transformMultiPoint(e,null);if(e instanceof Je)return this.transformLinearRing(e,null);if(e instanceof Xe)return this.transformLineString(e,null);if(e instanceof be)return this.transformMultiLineString(e,null);if(e instanceof We)return this.transformPolygon(e,null);if(e instanceof Qe)return this.transformMultiPolygon(e,null);if(e instanceof Pe)return this.transformGeometryCollection(e,null);throw new O("Unknown Geometry subtype: "+e.getClass().getName())}},{key:"transformLinearRing",value:function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this.factory.createLinearRing(null);var r=n.size();return r>0&&4>r&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Qn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.snapTolerance=0,t.srcPts=null,t.seg=new Gt,t.allowSnappingToSourceVertices=!1,t._isClosed=!1}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 2:if(r[0]instanceof Xe&&"number"==typeof r[1])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];o.call(t,i.getCoordinates(),a)}.apply(void 0,r);if(r[0]instanceof Array&&"number"==typeof r[1])return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1];t.srcPts=a,t._isClosed=e.isClosed(a),t.snapTolerance=s}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"snapVertices",value:function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),r=0;n>r;r++){var i=e.get(r),a=this.findSnapForVertex(i,t);null!==a&&(e.set(r,new M(a)),0===r&&this._isClosed&&e.set(e.size()-1,new M(a)))}}},{key:"findSnapForVertex",value:function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this.snapTolerance)return t[n]}return null}},{key:"snapTo",value:function(e){var t=new ve(this.srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n}},{key:"snapSegments",value:function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var r=0;n>r;r++){var i=t[r],a=this.findSegmentIndexToSnap(i,e);a>=0&&e.add(a+1,new M(i),!1)}}},{key:"findSegmentIndexToSnap",value:function(e,t){for(var n=S.MAX_VALUE,r=-1,i=0;i<t.size()-1;i++){if(this.seg.p0=t.get(i),this.seg.p1=t.get(i+1),this.seg.p0.equals2D(e)||this.seg.p1.equals2D(e)){if(this.allowSnappingToSourceVertices)continue;return-1}var a=this.seg.distance(e);a<this.snapTolerance&&n>a&&(n=a,r=i)}return r}},{key:"setAllowSnappingToSourceVertices",value:function(e){this.allowSnappingToSourceVertices=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isClosed",value:function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])}}]),e}(),Zn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.srcGeom=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.srcGeom=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"snapTo",value:function(e,t){var n=this.extractTargetCoordinates(e),r=new $n(t,n);return r.transform(this.srcGeom)}},{key:"snapToSelf",value:function(e,t){var n=this.extractTargetCoordinates(this.srcGeom),r=new $n(e,n,!0),i=r.transform(this.srcGeom),a=i;return t&&a.interfaces_&&a.interfaces_.indexOf(He)>-1&&(a=i.buffer(0)),a}},{key:"computeSnapTolerance",value:function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n}},{key:"extractTargetCoordinates",value:function(e){for(var t=new k,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0))}},{key:"computeMinimumSegmentLength",value:function(e){for(var t=S.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);t>r&&(t=r)}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"snap",value:function(t,n,r){var i=new Array(2),a=new e(t);i[0]=a.snapTo(n,r);var s=new e(n);return i[1]=s.snapTo(i[0],r),i}},{key:"computeOverlaySnapTolerance",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=e.computeSizeBasedSnapTolerance(i),s=i.getPrecisionModel();if(s.getType()===it.FIXED){var o=1/s.getScale()*2/1.415;o>a&&(a=o)}return a}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return Math.min(e.computeOverlaySnapTolerance(i),e.computeOverlaySnapTolerance(a))}.apply(void 0,n)}};return i.apply(this,n)}},{key:"computeSizeBasedSnapTolerance",value:function(t){var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth()),i=r*e.SNAP_PRECISION_FACTOR;return i}},{key:"snapToSelf",value:function(t,n,r){var i=new e(t);return i.snapToSelf(n,r)}}]),e}();Zn.SNAP_PRECISION_FACTOR=1e-9;var $n=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.snapTolerance=null,o.snapPts=null,o.isSelfSnap=!1}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];o.snapTolerance=r,o.snapPts=i}.apply(void 0,t);case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];o.snapTolerance=r,o.snapPts=i,o.isSelfSnap=a}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"snapLine",value:function(e,t){var n=new Qn(e,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(t)}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Jn),er=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.isFirst=!0,t.commonMantissaBitsCount=53,t.commonBits=0,t.commonSignExp=null}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"getCommon",value:function(){return S.longBitsToDouble(this.commonBits)}},{key:"add",value:function(t){var n=S.doubleToLongBits(t);if(this.isFirst)return this.commonBits=n,this.commonSignExp=e.signExpBits(this.commonBits),this.isFirst=!1,null;var r=e.signExpBits(n);return r!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=e.numCommonMostSigMantissaBits(this.commonBits,n),void(this.commonBits=e.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0],o=S.longBitsToDouble(s),u=Long.toBinaryString(s),l="0000000000000000000000000000000000000000000000000000000000000000"+u,c=l.substring(l.length-64),g=c.substring(0,1)+"  "+c.substring(1,12)+"(exp) "+c.substring(12)+" [ "+o+" ]";return g}return(t=a(Object.getPrototypeOf(e.prototype),"toString",this)).call.apply(t,[this].concat(r))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBit",value:function(e,t){var n=1<<t;return 0!==(e&n)?1:0}},{key:"signExpBits",value:function(e){return e>>52}},{key:"zeroLowerBits",value:function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i}},{key:"numCommonMostSigMantissaBits",value:function(t,n){for(var r=0,i=52;i>=0;i--){if(e.getBit(t,i)!==e.getBit(n,i))return r;r++}return 52}}]),e}(),tr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.commonCoord=null,t.ccFilter=new nr}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"addCommonBits",value:function(e){var t=new rr(this.commonCoord);e.apply(t),e.geometryChanged()}},{key:"removeCommonBits",value:function(e){if(0===this.commonCoord.x&&0===this.commonCoord.y)return e;var t=new M(this.commonCoord);t.x=-t.x,t.y=-t.y;var n=new rr(t);return e.apply(n),e.geometryChanged(),e}},{key:"getCommonCoordinate",value:function(){return this.commonCoord}},{key:"add",value:function(e){e.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"CommonCoordinateFilter",get:function(){return nr}},{key:"Translater",get:function(){return rr}}]),e}(),nr=function(){function e(){var t=this;i(this,e),function(){t.commonBitsX=new er,t.commonBitsY=new er}()}return s(e,[{key:"filter",value:function(e){this.commonBitsX.add(e.x),this.commonBitsY.add(e.y)}},{key:"getCommonCoordinate",value:function(){return new M(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[se]}}]),e}(),rr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.trans=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.trans=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"filter",value:function(e,t){
var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Te]}}]),e}(),ir=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];i(this,e);var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return a.apply(this,n)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"octant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if("number"==typeof n[0]&&"number"==typeof n[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(0===r&&0===i)throw new O("Cannot compute the octant for point ( "+r+", "+i+" )");var a=Math.abs(r),s=Math.abs(i);return r>=0?i>=0?a>=s?0:1:a>=s?7:6:i>=0?a>=s?3:2:a>=s?4:5}.apply(void 0,n);if(n[0]instanceof M&&n[1]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=a.x-i.x,o=a.y-i.y;if(0===s&&0===o)throw new O("Cannot compute the octant for two identical points "+i);return e.octant(s,o)}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),ar=function(){function e(){i(this,e)}return s(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(e){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),sr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pts=null,t.data=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.pts=i,t.data=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:ir.octant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"toString",value:function(){return $.toLineString(new nt(this.pts))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ar]}}]),e}(),or=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"relativeSign",value:function(e,t){return t>e?-1:e>t?1:0}},{key:"compare",value:function(t,n,r){if(n.equals2D(r))return 0;var i=e.relativeSign(n.x,r.x),a=e.relativeSign(n.y,r.y);switch(t){case 0:return e.compareValue(i,a);case 1:return e.compareValue(a,i);case 2:return e.compareValue(a,-i);case 3:return e.compareValue(-i,a);case 4:return e.compareValue(-i,-a);case 5:return e.compareValue(-a,-i);case 6:return e.compareValue(-a,i);case 7:return e.compareValue(i,-a)}return D.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return 0>e?-1:e>0?1:0>t?-1:t>0?1:0}}]),e}(),ur=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.segString=null,t.coord=null,t.segmentIndex=null,t.segmentOctant=null,t._isInterior=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];t.segString=i,t.coord=new M(a),t.segmentIndex=s,t.segmentOctant=o,t._isInterior=!a.equals2D(i.getCoordinate(s))}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:or.compare(this.segmentOctant,this.coord,t.coord)}},{key:"isEndPoint",value:function(e){return 0!==this.segmentIndex||this._isInterior?this.segmentIndex===e?!0:!1:!0}},{key:"isInterior",value:function(){return this._isInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}]),e}(),lr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.nodeMap=new p,t.edge=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.edge=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getSplitCoordinates",value:function(){var e=new ve;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var e=new fe;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this.edge.getCoordinate(n),n)}}},{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"findCollapsesFromExistingVertices",value:function(e){for(var t=0;t<this.edge.size()-2;t++){var n=this.edge.getCoordinate(t),r=(this.edge.getCoordinate(t+1),this.edge.getCoordinate(t+2));n.equals2D(r)&&e.add(new Y(t+1))}}},{key:"addEdgeCoordinates",value:function(e,t,n){var r=t.segmentIndex-e.segmentIndex+2,i=this.edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(i);a||r--;n.add(new M(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(this.edge.getCoordinate(s));a&&n.add(new M(t.coord))}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"findCollapseIndex",value:function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r?(n[0]=e.segmentIndex+1,!0):!1}},{key:"findCollapsesFromInsertedNodes",value:function(e){for(var t=new Array(1),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),a=this.findCollapseIndex(r,i,t);a&&e.add(new Y(t[0])),r=i}}},{key:"getEdge",value:function(){return this.edge}},{key:"addEndpoints",value:function(){var e=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(e),e)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var a=new Array(n),s=0;a[s++]=new M(e.coord);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)a[s++]=this.edge.getCoordinate(o);return i&&(a[s]=new M(t.coord)),new gr(a,this.edge.getData())}},{key:"add",value:function(e,t){var n=new ur(this.edge,e,t,this.edge.getSegmentOctant(t)),r=this.nodeMap.get(n);return null!==r?(D.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(e){var t=this.edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new b("bad split edge start point at "+r);var i=e.get(e.size()-1),a=i.getCoordinates(),s=a[a.length-1];if(!s.equals2D(t[t.length-1]))throw new b("bad split edge end point at "+s)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),cr=function(){function e(){i(this,e)}return s(e,[{key:"addIntersection",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ar]}}]),e}(),gr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.nodeList=new lr(t),t.pts=null,t.data=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.pts=i,t.data=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:ir.octant(e,t)}},{key:"getData",value:function(){return this.data}},{key:"addIntersection",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];e.addIntersectionNode(i,a)}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=(n[2],n[3]),o=new M(i.getIntersection(s));e.addIntersection(o,a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"toString",value:function(){return $.toLineString(new nt(this.pts))}},{key:"getNodeList",value:function(){return this.nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,r=n+1;if(r<this.pts.length){var i=this.pts[r];e.equals2D(i)&&(n=r)}var a=this.nodeList.add(e,n);return a}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[cr]}}],[{key:"getNodedSubstrings",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new fe;return e.getNodedSubstrings(i,a),a}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],i=t[1],a=r.iterator();a.hasNext();){var s=a.next();s.getNodeList().addSplitEdges(i)}}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),fr=function(){function e(){var t=this;i(this,e),function(){t.tempEnv1=new Q,t.tempEnv2=new Q,t.overlapSeg1=new Gt,t.overlapSeg2=new Gt}()}return s(e,[{key:"overlap",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t[0],t[1]}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];i.getLineSegment(a,e.overlapSeg1),s.getLineSegment(o,e.overlapSeg2),e.overlap(e.overlapSeg1,e.overlapSeg2)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),hr=function(){function e(){i(this,e)}return s(e,[{key:"computeNodes",value:function(e){}},{key:"getNodedSubstrings",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),vr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.segInt=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.setSegmentIntersector(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"setSegmentIntersector",value:function(e){this.segInt=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[hr]}}]),e}(),yr=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.monoChains=new fe,u.index=new Un,u.idCounter=0,u.nodedSegStrings=null,u.nOverlaps=0}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,i);case 1:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0];n(r,Object.getPrototypeOf(t).call(r,s))}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getMonotoneChains",value:function(){return this.monoChains}},{key:"getNodedSubstrings",value:function(){return gr.getNodedSubstrings(this.nodedSegStrings)}},{key:"getIndex",value:function(){return this.index}},{key:"add",value:function(e){for(var t=Kt.getChains(e.getCoordinates(),e),n=t.iterator();n.hasNext();){var r=n.next();r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new mr(this.segInt),t=this.monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this.index.query(n.getEnvelope()),i=r.iterator();i.hasNext();){var a=i.next();if(a.getId()>n.getId()&&(n.computeOverlaps(a,e),this.nOverlaps++),this.segInt.isDone())return null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"SegmentOverlapAction",get:function(){return mr}}]),t}(vr),mr=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.si=null}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];o.si=r}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"overlap",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4!==r.length)return(e=a(Object.getPrototypeOf(t.prototype),"overlap",this)).call.apply(e,[this].concat(r));var s=r[0],o=r[1],u=r[2],l=r[3],c=s.getContext(),g=u.getContext();this.si.processIntersections(c,o,g,l)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(fr),pr=function(){function e(){i(this,e)}return s(e,[{key:"processIntersections",value:function(e,t,n,r){}},{key:"isDone",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),dr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.findAllIntersections=!1,t.isCheckEndSegmentsOnly=!1,t.li=null,t.interiorIntersection=null,t.intSegments=null,t.intersections=new fe,t.intersectionCount=0,t.keepIntersections=!0}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.li=i,t.interiorIntersection=null}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getInteriorIntersection",value:function(){return this.interiorIntersection}},{key:"setCheckEndSegmentsOnly",value:function(e){this.isCheckEndSegmentsOnly=e}},{key:"getIntersectionSegments",value:function(){return this.intSegments}},{key:"count",value:function(){return this.intersectionCount}},{key:"getIntersections",value:function(){return this.intersections}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"setKeepIntersections",value:function(e){this.keepIntersections=e}},{key:"processIntersections",value:function(e,t,n,r){if(!this.findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===r)return null;if(this.isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var a=e.getCoordinates()[t],s=e.getCoordinates()[t+1],o=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(a,s,o,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4),this.intSegments[0]=a,this.intSegments[1]=s,this.intSegments[2]=o,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)}},{key:"isEndSegment",value:function(e,t){return 0===t?!0:t>=e.size()-2?!0:!1}},{key:"hasIntersection",value:function(){return null!==this.interiorIntersection}},{key:"isDone",value:function(){return this.findAllIntersections?!1:null!==this.interiorIntersection}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[pr]}}],[{key:"createAllIntersectionsFinder",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n}},{key:"createAnyIntersectionFinder",value:function(t){return new e(t)}},{key:"createIntersectionCounter",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n}}]),e}(),kr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=new te,t.segStrings=null,t.findAllIntersections=!1,t.segInt=null,t._isValid=!0}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.segStrings=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"execute",value:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()}},{key:"getIntersections",value:function(){return this.segInt.getIntersections()}},{key:"isValid",value:function(){return this.execute(),this._isValid}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"checkInteriorIntersections",value:function(){this._isValid=!0,this.segInt=new dr(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var e=new yr;return e.setSegmentIntersector(this.segInt),e.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0}},{key:"checkValid",value:function(){if(this.execute(),!this._isValid)throw new pt(this.getErrorMessage(),this.segInt.getInteriorIntersection())}},{key:"getErrorMessage",value:function(){if(this._isValid)return"no intersections found";var e=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+$.toLineString(e[0],e[1])+" and "+$.toLineString(e[2],e[3])}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeIntersections",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()}}]),e}(),Ar=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.nv=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];t.nv=new kr(e.toSegmentStrings(a))}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"checkValid",value:function(){this.nv.checkValid()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toSegmentStrings",value:function(e){for(var t=new fe,n=e.iterator();n.hasNext();){var r=n.next();t.add(new sr(r.getCoordinates(),r))}return t}},{key:"checkValid",value:function(t){var n=new e(t);n.checkValid()}}]),e}(),Ir=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geometryFactory=null,t.shellList=new fe}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.geometryFactory=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}}},{key:"computePolygons",value:function(e){for(var t=new fe,n=e.iterator();n.hasNext();){var r=n.next(),i=r.toPolygon(this.geometryFactory);t.add(i)}return t}},{key:"placeFreeHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,e);if(null===i)throw new pt("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var r=new fe,i=e.iterator();i.hasNext();){var a=i.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var s=a.buildMinimalRings(),o=this.findShell(s);null!==o?(this.placePolygonHoles(o,s),t.add(o)):n.addAll(s)}else r.add(a)}return r}},{key:"containsPoint",value:function(e){for(var t=this.shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new fe,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Et(r,this.geometryFactory);t.add(i),i.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}}},{key:"getPolygons",value:function(){var e=this.computePolygons(this.shellList);return e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),a=null,s=null,o=t.iterator();o.hasNext();){var u=o.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==a&&(s=a.getLinearRing().getEnvelopeInternal());var g=!1;c.contains(r)&&ie.isPointInRing(i,l.getCoordinates())&&(g=!0),g&&(null===a||s.contains(c))&&(a=u)}return a}},{key:"findShell",value:function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return D.isTrue(1>=t,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.add(i.getEdgeEnds(),i.getNodes())}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];Mt.linkResultDirectedEdges(a);var s=e.buildMaximalEdgeRings(i),o=new fe,u=e.buildMinimalEdgeRings(s,e.shellList,o);e.sortShellsAndHoles(u,e.shellList,o),e.placeFreeHoles(e.shellList,o)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Er=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.op=null,t.geometryFactory=null,t.ptLocator=null,t.lineEdgesList=new fe,t.resultLineList=new fe}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.op=i,t.geometryFactory=a,t.ptLocator=s}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"collectLines",value:function(e){for(var t=this.op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this.lineEdgesList),this.collectBoundaryTouchEdge(n,e,this.lineEdgesList)}}},{key:"labelIsolatedLine",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.op.getArgGeometry(t));e.getLabel().setLocation(t,n)}},{key:"build",value:function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this.resultLineList}},{key:"collectLineEdge",value:function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!Or.isResultOfOp(r,t)||i.isCovered()||(n.add(i),e.setVisitedEdge(!0)))}},{key:"findCoveredLineEdges",value:function(){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getEdge();if(r.isLineEdge()&&!i.isCoveredSet()){var a=this.op.isCoveredByA(r.getCoordinate());i.setCovered(a)}}}},{key:"labelIsolatedLines",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}}},{key:"buildLines",value:function(e){for(var t=this.lineEdgesList.iterator();t.hasNext();){var n=t.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}}},{key:"collectBoundaryTouchEdge",value:function(e,t,n){var r=e.getLabel();return e.isLineEdge()?null:e.isVisited()?null:e.isInteriorAreaEdge()?null:e.getEdge().isInResult()?null:(D.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(Or.isResultOfOp(r,t)&&t===Or.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),xr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.op=null,t.geometryFactory=null,t.resultPointList=new fe}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];n[2];t.op=i,t.geometryFactory=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"filterCoveredNodeToPoint",value:function(e){var t=e.getCoordinate();if(!this.op.isCoveredByLA(t)){var n=this.geometryFactory.createPoint(t);this.resultPointList.add(n)}}},{key:"extractNonCoveredResultNodes",value:function(e){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==Or.INTERSECTION)){var r=n.getLabel();Or.isResultOfOp(r,e)&&this.filterCoveredNodeToPoint(n)}}}},{key:"build",value:function(e){return this.extractNonCoveredResultNodes(e),this.resultPointList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Nr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=new te,t.resultPrecisionModel=null,t.arg=null}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.setComputationPrecision(i.getPrecisionModel()),t.arg=new Array(1),t.arg[0]=new Nn(0,i)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];o.call(t,i,a,oe.OGC_SFS_BOUNDARY_RULE)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];i.getPrecisionModel().compareTo(a.getPrecisionModel())>=0?t.setComputationPrecision(i.getPrecisionModel()):t.setComputationPrecision(a.getPrecisionModel()),t.arg=new Array(2),t.arg[0]=new Nn(0,i,s),t.arg[1]=new Nn(1,a,s)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getArgGeometry",value:function(e){return this.arg[e].getGeometry()}},{key:"setComputationPrecision",value:function(e){this.resultPrecisionModel=e,this.li.setPrecisionModel(this.resultPrecisionModel)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),wr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pts=null,t._orientation=null}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];t.pts=a,t._orientation=e.orientation(a)}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"compareTo",value:function(t){var n=t,r=e.compareOriented(this.pts,this._orientation,n.pts,n._orientation);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}],[{key:"orientation",value:function(e){return 1===ye.increasingDirection(e)}},{key:"compareOriented",value:function(e,t,n,r){for(var i=t?1:-1,a=r?1:-1,s=t?e.length:-1,o=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(0!==c)return c;u+=i,l+=a;var g=u===s,f=l===o;if(g&&!f)return-1;if(!g&&f)return 1;if(g&&f)return 0}}}]),e}(),Cr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.edges=new fe,t.ocaMap=new p}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"print",value:function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this.edges.size();t++){var n=this.edges.get(t);t>0&&e.print(","),e.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&e.print(","),e.print(r[i].x+" "+r[i].y);e.println(")")}e.print(")  ")}},{key:"addAll",value:function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(e){for(var t=0;t<this.edges.size();t++)if(this.edges.get(t).equals(e))return t;return-1}},{key:"iterator",value:function(){return this.edges.iterator()}},{key:"getEdges",value:function(){return this.edges}},{key:"get",value:function(e){return this.edges.get(e)}},{key:"findEqualEdge",value:function(e){var t=new wr(e.getCoordinates()),n=this.ocaMap.get(t);return n}},{key:"add",value:function(e){this.edges.add(e);var t=new wr(e.getCoordinates());this.ocaMap.put(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Or=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u.ptLocator=new $t,
u.geomFact=null,u.resultGeom=null,u.graph=null,u.edgeList=new Cr,u.resultPolyList=new fe,u.resultLineList=new fe,u.resultPointList=new fe}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,s,o));u.graph=new Mt(new Pt),u.geomFact=s.getFactory()}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"insertUniqueEdge",value:function(e){var t=this.edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new kt(e.getLabel()),r.flip());var i=t.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this.edgeList.add(e)}},{key:"getGraph",value:function(){return this.graph}},{key:"cancelDuplicateResultEdges",value:function(){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}}},{key:"isCoveredByLA",value:function(e){return this.isCovered(e,this.resultLineList)?!0:this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"computeGeometry",value:function(e,n,r,i){var a=new fe;return a.addAll(e),a.addAll(n),a.addAll(r),a.isEmpty()?t.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(a)}},{key:"mergeSymLabels",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().mergeSymLabels()}}},{key:"isCovered",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=this.ptLocator.locate(e,r);if(i!==q.EXTERIOR)return!0}return!1}},{key:"replaceCollapsedEdges",value:function(){for(var e=new fe,t=this.edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this.edgeList.addAll(e)}},{key:"updateNodeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}}},{key:"getResultGeometry",value:function(e){return this.computeOverlay(e),this.resultGeom}},{key:"insertUniqueEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}}},{key:"computeOverlay",value:function(e){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var t=new fe;this.arg[0].computeSplitEdges(t),this.arg[1].computeSplitEdges(t);this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ar.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new Ir(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new Er(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(e);var i=new xr(this,this.geomFact,this.ptLocator);this.resultPointList=i.build(e),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,e)}},{key:"labelIncompleteNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setLocation(t,n)}},{key:"copyPoints",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"findResultAreaEdges",value:function(e){for(var n=this.graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&t.isResultOfOp(i.getLocation(0,mt.RIGHT),i.getLocation(1,mt.RIGHT),e)&&r.setInResult(!0)}}},{key:"computeLabelsFromDepths",value:function(){for(var e=this.edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var i=0;2>i;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(D.isTrue(!r.isNull(i,mt.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,mt.LEFT,r.getLocation(i,mt.LEFT)),D.isTrue(!r.isNull(i,mt.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,mt.RIGHT,r.getLocation(i,mt.RIGHT))))}}}},{key:"computeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()}},{key:"labelIncompleteNodes",value:function(){for(var e=0,t=this.graph.getNodes().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(e++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}}},{key:"isCoveredByA",value:function(e){return this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(e,n,r){var i=new t(e,n),a=i.getResultGeometry(r);return a}},{key:"isResultOfOp",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=i.getLocation(0),o=i.getLocation(1);return t.isResultOfOp(s,o,a)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];switch(i===q.BOUNDARY&&(i=q.INTERIOR),a===q.BOUNDARY&&(a=q.INTERIOR),s){case t.INTERSECTION:return i===q.INTERIOR&&a===q.INTERIOR;case t.UNION:return i===q.INTERIOR||a===q.INTERIOR;case t.DIFFERENCE:return i===q.INTERIOR&&a!==q.INTERIOR;case t.SYMDIFFERENCE:return i===q.INTERIOR&&a!==q.INTERIOR||i!==q.INTERIOR&&a===q.INTERIOR}return!1}.apply(void 0,n)}};return i.apply(this,n)}},{key:"createEmptyResult",value:function(e,n,r,i){var a=null;switch(t.resultDimension(e,n,r)){case-1:a=i.createGeometryCollection(new Array(0));break;case 0:a=i.createPoint();break;case 1:a=i.createLineString();break;case 2:a=i.createPolygon()}return a}},{key:"resultDimension",value:function a(e,n,r){var i=n.getDimension(),s=r.getDimension(),a=-1;switch(e){case t.INTERSECTION:a=Math.min(i,s);break;case t.UNION:a=Math.max(i,s);break;case t.DIFFERENCE:a=i;break;case t.SYMDIFFERENCE:a=Math.max(i,s)}return a}}]),t}(Nr);Or.INTERSECTION=1,Or.UNION=2,Or.DIFFERENCE=3,Or.SYMDIFFERENCE=4;var Sr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geom=new Array(2),t.snapTolerance=null,t.cbr=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.geom[0]=i,t.geom[1]=a,t.computeSnapTolerance()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"selfSnap",value:function(e){var t=new Zn(e),n=t.snapTo(e,this.snapTolerance);return n}},{key:"removeCommonBits",value:function(e){this.cbr=new tr,this.cbr.add(e[0]),this.cbr.add(e[1]);var t=new Array(2);return t[0]=this.cbr.removeCommonBits(e[0].copy()),t[1]=this.cbr.removeCommonBits(e[1].copy()),t}},{key:"prepareResult",value:function(e){return this.cbr.addCommonBits(e),e}},{key:"getResultGeometry",value:function(e){var t=this.snap(this.geom),n=Or.overlayOp(t[0],t[1],e);return this.prepareResult(n)}},{key:"checkValid",value:function(e){e.isValid()||K.out.println("Snapped geometry is invalid")}},{key:"computeSnapTolerance",value:function(){this.snapTolerance=Zn.computeOverlaySnapTolerance(this.geom[0],this.geom[1])}},{key:"snap",value:function(e){var t=this.removeCommonBits(e),n=Zn.snap(t[0],t[1],this.snapTolerance);return n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var i=new e(t,n);return i.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,Or.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,Or.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,Or.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,Or.DIFFERENCE)}}]),e}(),Lr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geom=new Array(2)}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.geom[0]=i,t.geom[1]=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getResultGeometry",value:function(e){var t=null,n=!1,r=null;try{t=Or.overlayOp(this.geom[0],this.geom[1],e);var i=!0;i&&(n=!0)}catch(a){if(!(a instanceof b))throw a;r=a}finally{}if(!n)try{t=Sr.overlayOp(this.geom[0],this.geom[1],e)}catch(a){throw a instanceof b?r:a}finally{}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var i=new e(t,n);return i.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,Or.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,Or.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,Or.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,Or.DIFFERENCE)}}]),e}(),Rr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.clz=null,t.comps=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.clz=i,t.comps=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"filter",value:function(t){(null===this.clz||e.isOfClass(t,this.clz))&&this.comps.add(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Re]}}],[{key:"isOfClass",value:function(e,t){return t.isAssignableFrom(e.getClass())}},{key:"extract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return e.extract(i,a,new fe)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];return e.isOfClass(i,a)?s.add(i):i instanceof Pe&&i.apply(new e(a,s)),s}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),Tr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.comps=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.comps=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"filter",value:function(e){e instanceof We&&this.comps.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Re]}}],[{key:"getPolygons",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.getPolygons(i,new fe)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i instanceof We?a.add(i):i instanceof Pe&&i.apply(new e(a)),a}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),Pr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.inputPolys=null,t.geomFactory=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.inputPolys=i,null===t.inputPolys&&(t.inputPolys=new fe)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"reduceToGeometries",value:function(e){for(var t=new fe,n=e.iterator();n.hasNext();){var r=n.next(),i=null;r.interfaces_&&r.interfaces_.indexOf(c)>-1?i=this.unionTree(r):r instanceof ae&&(i=r),t.add(i)}return t}},{key:"extractByEnvelope",value:function(e,t,n){for(var r=new fe,i=0;i<t.getNumGeometries();i++){var a=t.getGeometryN(i);a.getEnvelopeInternal().intersects(e)?r.add(a):n.add(a)}return this.geomFactory.buildGeometry(r)}},{key:"unionOptimized",value:function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Wn.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var a=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,a)}},{key:"union",value:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Un(e.STRTREE_NODE_CAPACITY),n=this.inputPolys.iterator();n.hasNext();){var r=n.next();t.insert(r.getEnvelopeInternal(),r)}this.inputPolys=null;var i=t.itemsTree(),a=this.unionTree(i);return a}},{key:"binaryUnion",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];return t.binaryUnion(i,0,i.size())}.apply(void 0,r);case 3:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=r[2];if(1>=o-s){var u=e.getGeometry(a,s);return t.unionSafe(u,null)}if(o-s===2)return t.unionSafe(e.getGeometry(a,s),e.getGeometry(a,s+1));var l=Math.trunc((o+s)/2),u=t.binaryUnion(a,s,l),c=t.binaryUnion(a,l,o);return t.unionSafe(u,c)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"repeatedUnion",value:function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t=null===t?r.copy():t.union(r)}return t}},{key:"unionSafe",value:function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)}},{key:"unionActual",value:function(t,n){return e.restrictToPolygons(t.union(n))}},{key:"unionTree",value:function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n}},{key:"unionUsingEnvelopeIntersection",value:function(e,t,n){var r=new fe,i=this.extractByEnvelope(n,e,r),a=this.extractByEnvelope(n,t,r),s=this.unionActual(i,a);r.add(s);var o=Wn.combine(r);return o}},{key:"bufferUnion",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=r.get(0).getFactory(),a=i.buildGeometry(r),s=a.buffer(0);return s}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=r.getFactory(),s=a.createGeometryCollection([r,i]),o=s.buffer(0);return o}.apply(void 0,t)}};return r.apply(this,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"restrictToPolygons",value:function(e){if(e.interfaces_&&e.interfaces_.indexOf(He)>-1)return e;var t=Tr.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(st.toPolygonArray(t))}},{key:"getGeometry",value:function(e,t){return t>=e.size()?null:e.get(t)}},{key:"union",value:function(t){var n=new e(t);return n.union()}}]),e}();Pr.STRTREE_NODE_CAPACITY=4;var br=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.polygons=new fe,t.lines=new fe,t.points=new fe,t.geomFact=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.extract(i)}.apply(void 0,n);if(n[0]instanceof ae)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.extract(i)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.geomFact=a,t.extract(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"unionNoOpt",value:function(e){var t=this.geomFact.createPoint();return Lr.overlayOp(e,t,Or.UNION)}},{key:"unionWithNull",value:function(e,t){return null===e&&null===t?null:null===t?e:null===e?t:e.union(t)}},{key:"extract",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=i.iterator();a.hasNext();){var s=a.next();e.extract(s)}}.apply(void 0,n);if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];null===e.geomFact&&(e.geomFact=i.getFactory()),Rr.extract(i,We,e.polygons),Rr.extract(i,Xe,e.lines),Rr.extract(i,je,e.points)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"union",value:function t(){if(null===this.geomFact)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(i)}var a=null;this.polygons.size()>0&&(a=Pr.union(this.polygons));var s=this.unionWithNull(r,a),t=null;return t=null===e?s:null===s?e:Kn.union(e,s),null===t?this.geomFact.createGeometryCollection(null):t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new e(i);return a.union()}.apply(void 0,n);if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=new e(i);return a.union()}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new e(i,a);return s.union()}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),_r=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.centroid=null,t.minDistance=S.MAX_VALUE,t.interiorPoint=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.centroid=i.getCentroid().getCoordinate(),t.addInterior(i),null===t.interiorPoint&&t.addEndpoints(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"addEndpoints",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(i instanceof Xe)e.addEndpoints(i.getCoordinates());else if(i instanceof Pe)for(var a=i,s=0;s<a.getNumGeometries();s++)e.addEndpoints(a.getGeometryN(s))}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.add(i[0]),e.add(i[i.length-1])}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"addInterior",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(i instanceof Xe)e.addInterior(i.getCoordinates());else if(i instanceof Pe)for(var a=i,s=0;s<a.getNumGeometries();s++)e.addInterior(a.getGeometryN(s))}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=1;a<i.length-1;a++)e.add(i[a])}.apply(void 0,n)}};return i.apply(this,n)}},{key:"add",value:function(e){var t=e.distance(this.centroid);t<this.minDistance&&(this.interiorPoint=new M(e),this.minDistance=t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Dr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.inputGeom=null,t.isClosedEndpointsInInterior=!0,t.nonSimpleLocation=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.inputGeom=i}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.inputGeom=i,t.isClosedEndpointsInInterior=!a.isInBoundary(2)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"isSimpleMultiPoint",value:function(e){if(e.isEmpty())return!0;for(var t=new k,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n),i=r.getCoordinate();if(t.contains(i))return this.nonSimpleLocation=i,!1;t.add(i)}return!0}},{key:"isSimplePolygonal",value:function(e){for(var t=hn.getLines(e),n=t.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0}},{key:"hasClosedEndpointIntersection",value:function(e){for(var t=new p,n=e.getEdgeIterator();n.hasNext();){var r=n.next(),i=(r.getMaximumSegmentIndex(),r.isClosed()),a=r.getCoordinate(0);this.addEndpoint(t,a,i);var s=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(t,s,i)}for(var n=t.values().iterator();n.hasNext();){var o=n.next();if(o.isClosed&&2!==o.degree)return this.nonSimpleLocation=o.getCoordinate(),!0}return!1}},{key:"getNonSimpleLocation",value:function(){return this.nonSimpleLocation}},{key:"isSimpleLinearGeometry",value:function(e){if(e.isEmpty())return!0;var t=new Nn(0,e),n=new te,r=t.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(t)?!1:this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(t)?!1:!0:!0}},{key:"hasNonEndpointIntersection",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getMaximumSegmentIndex(),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var a=i.next();if(!a.isEndPoint(r))return this.nonSimpleLocation=a.getCoordinate(),!0}return!1}},{key:"addEndpoint",value:function(e,t,n){var r=e.get(t);null===r&&(r=new Mr(t),e.put(t,r)),r.addEndpoint(n)}},{key:"computeSimple",value:function(e){return this.nonSimpleLocation=null,e.isEmpty()?!0:e instanceof Xe?this.isSimpleLinearGeometry(e):e instanceof be?this.isSimpleLinearGeometry(e):e instanceof Ke?this.isSimpleMultiPoint(e):e.interfaces_&&e.interfaces_.indexOf(He)>-1?this.isSimplePolygonal(e):e instanceof Pe?this.isSimpleGeometryCollection(e):!0}},{key:"isSimple",value:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)}},{key:"isSimpleGeometryCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.computeSimple(n))return!1}return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"EndpointInfo",get:function(){return Mr}}]),e}(),Mr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pt=null,t.isClosed=null,t.degree=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.pt=i,t.isClosed=!1,t.degree=0}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"addEndpoint",value:function(e){this.degree++,this.isClosed|=e}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Fr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,t.endCapStyle=e.CAP_ROUND,t.joinStyle=e.JOIN_ROUND,t.mitreLimit=e.DEFAULT_MITRE_LIMIT,t._isSingleSided=!1,t.simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,n);case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.setQuadrantSegments(i)}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.setQuadrantSegments(i),t.setEndCapStyle(a)}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];t.setQuadrantSegments(i),t.setEndCapStyle(a),t.setJoinStyle(s),t.setMitreLimit(o)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getEndCapStyle",value:function(){return this.endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=e.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=e.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==e.JOIN_ROUND&&(this.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this.joinStyle}},{key:"setJoinStyle",value:function(e){this.joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this.simplifyFactor=0>e?0:e}},{key:"getSimplifyFactor",value:function(){return this.simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this.quadrantSegments}},{key:"setEndCapStyle",value:function(e){this.endCapStyle=e}},{key:"getMitreLimit",value:function(){return this.mitreLimit}},{key:"setMitreLimit",value:function(e){this.mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}]),e}();Fr.CAP_ROUND=1,Fr.CAP_FLAT=2,Fr.CAP_SQUARE=3,Fr.JOIN_ROUND=1,Fr.JOIN_MITRE=2,Fr.JOIN_BEVEL=3,Fr.DEFAULT_QUADRANT_SEGMENTS=8,Fr.DEFAULT_MITRE_LIMIT=5,Fr.DEFAULT_SIMPLIFY_FACTOR=.01,x.prototype=new Error,x.prototype.name="EmptyStackException",N.prototype=new c,N.prototype.add=function(e){return this.array_.push(e),!0},N.prototype.get=function(e){if(0>e||e>=this.size())throw new IndexOutOfBoundsException;return this.array_[e]},N.prototype.push=function(e){return this.array_.push(e),e},N.prototype.pop=function(e){if(0===this.array_.length)throw new x;return this.array_.pop()},N.prototype.peek=function(){if(0===this.array_.length)throw new x;return this.array_[this.array_.length-1]},N.prototype.empty=function(){return 0===this.array_.length?!0:!1},N.prototype.isEmpty=function(){return this.empty()},N.prototype.search=function(e){return this.array_.indexOf(e)},N.prototype.size=function(){return this.array_.length},N.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},t.exports=N;var Gr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.minIndex=-1,t.minCoord=null,t.minDe=null,t.orientedDe=null}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"getCoordinate",value:function(){return this.minCoord}},{key:"getRightmostSide",value:function(e,t){var n=this.getRightmostSideOfSegment(e,t);return 0>n&&(n=this.getRightmostSideOfSegment(e,t-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(e)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var e=this.minDe.getEdge().getCoordinates();D.isTrue(this.minIndex>0&&this.minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this.minIndex-1],n=e[this.minIndex+1],r=ie.computeOrientation(this.minCoord,n,t),i=!1;t.y<this.minCoord.y&&n.y<this.minCoord.y&&r===ie.COUNTERCLOCKWISE?i=!0:t.y>this.minCoord.y&&n.y>this.minCoord.y&&r===ie.CLOCKWISE&&(i=!0),i&&(this.minIndex=this.minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(0>t||t+1>=r.length)return-1;if(r[t].y===r[t+1].y)return-1;var i=mt.LEFT;return r[t].y<r[t+1].y&&(i=mt.RIGHT),i}},{key:"getEdge",value:function(){return this.orientedDe}},{key:"checkForRightmostCoordinate",value:function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this.minCoord||t[n].x>this.minCoord.x)&&(this.minDe=e,this.minIndex=n,this.minCoord=t[n])}},{key:"findRightmostEdgeAtNode",value:function(){var e=this.minDe.getNode(),t=e.getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}D.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===mt.LEFT&&(this.orientedDe=this.minDe.getSym())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Br=function(){function e(){i(this,e),this.array_=[]}return s(e,[{key:"addLast",value:function(e){this.array_.push(e)}},{key:"removeFirst",value:function(){return this.array_.shift()}},{key:"isEmpty",value:function(){return 0===this.array_.length}}]),e}(),qr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.finder=null,t.dirEdgeList=new fe,t.nodes=new fe,t.rightMostCoord=null,t.env=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.finder=new Gr}.apply(void 0,n);
}};return s.apply(this,r)}return s(e,[{key:"clearVisitedEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}}},{key:"getRightmostCoordinate",value:function(){return this.rightMostCoord}},{key:"computeNodeDepth",value:function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new pt("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}}},{key:"computeDepth",value:function(e){this.clearVisitedEdges();var t=this.finder.getEdge();t.getNode(),t.getLabel();t.setEdgeDepths(mt.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(e){this.addReachable(e),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(mt.RIGHT)>=1&&t.getDepth(mt.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(e){var t=new m,n=new Br,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();t.add(i),this.computeNodeDepth(i);for(var a=i.getEdges().iterator();a.hasNext();){var s=a.next(),o=s.getSym();if(!o.isVisited()){var u=o.getNode();t.contains(u)||(n.addLast(u),t.add(u))}}}}},{key:"compareTo",value:function(e){var t=e;return this.rightMostCoord.x<t.rightMostCoord.x?-1:this.rightMostCoord.x>t.rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this.env){for(var e=new Q,t=this.dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this.env=e}return this.env}},{key:"addReachable",value:function(e){var t=new N;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}},{key:"copySymDepths",value:function(e){var t=e.getSym();t.setDepth(mt.LEFT,e.getDepth(mt.RIGHT)),t.setDepth(mt.RIGHT,e.getDepth(mt.LEFT))}},{key:"add",value:function(e,t){e.setVisited(!0),this.nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var i=r.getSym(),a=i.getNode();a.isVisited()||t.push(a)}}},{key:"getNodes",value:function(){return this.nodes}},{key:"getDirectedEdges",value:function(){return this.dirEdgeList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}]),e}(),Ur=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.inputLine=null,t.distanceTol=null,t.isDeleted=null,t.angleOrientation=ie.COUNTERCLOCKWISE}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.inputLine=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"isDeletable",value:function(e,t,n,r){var i=this.inputLine[e],a=this.inputLine[t],s=this.inputLine[n];return this.isConcave(i,a,s)&&this.isShallow(i,a,s,r)?this.isShallowSampled(i,a,e,n,r):!1}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),r=this.findNextNonDeletedIndex(n),i=!1;r<this.inputLine.length;){var a=!1;this.isDeletable(t,n,r,this.distanceTol)&&(this.isDeleted[n]=e.DELETE,a=!0,i=!0),t=a?r:n,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n)}return i}},{key:"isShallowConcavity",value:function(e,t,n,r){var i=ie.computeOrientation(e,t,n),a=i===this.angleOrientation;if(!a)return!1;var s=ie.distancePointLine(t,e,n);return r>s}},{key:"isShallowSampled",value:function(t,n,r,i,a){var s=Math.trunc((i-r)/e.NUM_PTS_TO_CHECK);0>=s&&(s=1);for(var o=r;i>o;o+=s)if(!this.isShallow(t,n,this.inputLine[o],a))return!1;return!0}},{key:"isConcave",value:function t(e,n,r){var i=ie.computeOrientation(e,n,r),t=i===this.angleOrientation;return t}},{key:"simplify",value:function(e){this.distanceTol=Math.abs(e),0>e&&(this.angleOrientation=ie.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this.inputLine.length&&this.isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(e,t,n,r){var i=ie.distancePointLine(t,e,n);return r>i}},{key:"collapseLine",value:function(){for(var t=new ve,n=0;n<this.inputLine.length;n++)this.isDeleted[n]!==e.DELETE&&t.add(this.inputLine[n]);return t.toCoordinateArray()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.simplify(n)}}]),e}();Ur.INIT=0,Ur.DELETE=1,Ur.KEEP=1,Ur.NUM_PTS_TO_CHECK=10;var zr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.ptList=null,t.precisionModel=null,t.minimimVertexDistance=0}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.ptList=new fe}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getCoordinates",value:function(){var t=this.ptList.toArray(e.COORDINATE_ARRAY_TYPE);return t}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"addPt",value:function(e){var t=new M(e);return this.precisionModel.makePrecise(t),this.isRedundant(t)?null:void this.ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var n=e.length-1;n>=0;n--)this.addPt(e[n])}},{key:"isRedundant",value:function(e){if(this.ptList.size()<1)return!1;var t=this.ptList.get(this.ptList.size()-1),n=e.distance(t);return n<this.minimimVertexDistance?!0:!1}},{key:"toString",value:function(){var e=new st,t=e.createLineString(this.getCoordinates());return t.toString()}},{key:"closeRing",value:function(){if(this.ptList.size()<1)return null;var e=new M(this.ptList.get(0)),t=this.ptList.get(this.ptList.size()-1),n=null;return this.ptList.size()>=2&&(n=this.ptList.get(this.ptList.size()-2)),e.equals(t)?null:void this.ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this.minimimVertexDistance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();zr.COORDINATE_ARRAY_TYPE=new Array(0);var Yr=function(){function e(){i(this,e)}return s(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];return Math.atan2(r.y,r.x)}.apply(void 0,t);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=i.x-r.x,s=i.y-r.y;return Math.atan2(s,a)}.apply(void 0,t)}};return r.apply(this,t)}},{key:"isAcute",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=n.x-t.x,s=n.y-t.y,o=r*a+i*s;return o>0}},{key:"isObtuse",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=n.x-t.x,s=n.y-t.y,o=r*a+i*s;return 0>o}},{key:"interiorAngle",value:function(t,n,r){var i=e.angle(n,t),a=e.angle(n,r);return Math.abs(a-i)}},{key:"normalizePositive",value:function(t){if(0>t){for(;0>t;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;0>t&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,r){var i=e.angle(n,t),a=e.angle(n,r);return e.diff(i,a)}},{key:"diff",value:function(e,t){var n=null;return n=t>e?t-e:e-t,n>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(t,n){var r=Math.sin(n-t);return r>0?e.COUNTERCLOCKWISE:0>r?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,r){var i=e.angle(n,t),a=e.angle(n,r),s=a-i;return s<=-Math.PI?s+e.PI_TIMES_2:s>Math.PI?s-e.PI_TIMES_2:s}}]),e}();Yr.PI_TIMES_2=2*Math.PI,Yr.PI_OVER_2=Math.PI/2,Yr.PI_OVER_4=Math.PI/4,Yr.COUNTERCLOCKWISE=ie.COUNTERCLOCKWISE,Yr.CLOCKWISE=ie.CLOCKWISE,Yr.NONE=ie.COLLINEAR;var Xr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.maxCurveSegmentError=0,t.filletAngleQuantum=null,t.closingSegLengthFactor=1,t.segList=null,t.distance=0,t.precisionModel=null,t.bufParams=null,t.li=null,t.s0=null,t.s1=null,t.s2=null,t.seg0=new Gt,t.seg1=new Gt,t.offset0=new Gt,t.offset1=new Gt,t.side=0,t._hasNarrowConcaveAngle=!1}();var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 3:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1],o=r[2];t.precisionModel=a,t.bufParams=s,t.li=new te,t.filletAngleQuantum=Math.PI/2/s.getQuadrantSegments(),s.getQuadrantSegments()>=8&&s.getJoinStyle()===Fr.JOIN_ROUND&&(t.closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),t.init(o)}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"addNextSegment",value:function(e,t){if(this.s0=this.s1,this.s1=this.s2,this.s2=e,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=ie.computeOrientation(this.s0,this.s1,this.s2),r=n===ie.CLOCKWISE&&this.side===mt.LEFT||n===ie.COUNTERCLOCKWISE&&this.side===mt.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new Gt(e,t),r=new Gt;this.computeOffsetSegment(n,mt.LEFT,this.distance,r);var i=new Gt;this.computeOffsetSegment(n,mt.RIGHT,this.distance,i);var a=t.x-e.x,s=t.y-e.y,o=Math.atan2(s,a);switch(this.bufParams.getEndCapStyle()){case Fr.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(t,o+Math.PI/2,o-Math.PI/2,ie.CLOCKWISE,this.distance),this.segList.addPt(i.p1);break;case Fr.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(i.p1);break;case Fr.CAP_SQUARE:var u=new M;u.x=Math.abs(this.distance)*Math.cos(o),u.y=Math.abs(this.distance)*Math.sin(o);var l=new M(r.p1.x+u.x,r.p1.y+u.y),c=new M(i.p1.x+u.x,i.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c)}}},{key:"getCoordinates",value:function(){var e=this.segList.getCoordinates();return e}},{key:"addMitreJoin",value:function(e,t,n,r){var i=!0,a=null;try{a=J.intersection(t.p0,t.p1,n.p0,n.p1);var s=0>=r?1:a.distance(e)/Math.abs(r);s>this.bufParams.getMitreLimit()&&(i=!1)}catch(o){if(!(o instanceof W))throw o;a=new M(0,0),i=!1}finally{}i?this.segList.addPt(a):this.addLimitedMitreJoin(t,n,r,this.bufParams.getMitreLimit())}},{key:"addFilletCorner",value:function(e,t,n,r,i){var a=t.x-e.x,s=t.y-e.y,o=Math.atan2(s,a),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===ie.CLOCKWISE?c>=o&&(o+=2*Math.PI):o>=c&&(o-=2*Math.PI),this.segList.addPt(t),this.addFilletArc(e,o,c,r,i),this.segList.addPt(n)}},{key:"addOutsideTurn",value:function(t,n){return this.offset0.p1.distance(this.offset1.p0)<this.distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Fr.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Fr.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(n&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))}},{key:"createSquare",value:function(e){this.segList.addPt(new M(e.x+this.distance,e.y+this.distance)),this.segList.addPt(new M(e.x+this.distance,e.y-this.distance)),this.segList.addPt(new M(e.x-this.distance,e.y-this.distance)),this.segList.addPt(new M(e.x-this.distance,e.y+this.distance)),this.segList.closeRing()}},{key:"addSegments",value:function(e,t){this.segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this.segList.addPt(this.offset1.p0)}},{key:"addLastSegment",value:function(){this.segList.addPt(this.offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this.s1=e,this.s2=t,this.side=n,this.seg1.setCoordinates(e,t),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,r){var i=this.seg0.p1,a=Angle.angle(i,this.seg0.p0),s=(Angle.angle(i,this.seg1.p1),Angle.angleBetweenOriented(this.seg0.p0,i,this.seg1.p1)),o=s/2,u=Angle.normalize(a+o),l=Angle.normalize(u+Math.PI),c=r*n,g=c*Math.abs(Math.sin(o)),f=n-g,h=i.x+c*Math.cos(l),v=i.y+c*Math.sin(l),y=new M(h,v),m=new Gt(i,y),p=m.pointAlongOffset(1,f),d=m.pointAlongOffset(1,-f);this.side===mt.LEFT?(this.segList.addPt(p),this.segList.addPt(d)):(this.segList.addPt(d),this.segList.addPt(p))}},{key:"computeOffsetSegment",value:function(e,t,n,r){var i=t===mt.LEFT?1:-1,a=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,o=Math.sqrt(a*a+s*s),u=i*n*a/o,l=i*n*s/o;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u}},{key:"addFilletArc",value:function(e,t,n,r,i){var a=r===ie.CLOCKWISE?-1:1,s=Math.abs(t-n),o=Math.trunc(s/this.filletAngleQuantum+.5);if(1>o)return null;var u=null,l=null;u=0,l=s/o;for(var c=u,g=new M;s>c;){var f=t+a*c;g.x=e.x+i*Math.cos(f),g.y=e.y+i*Math.sin(f),this.segList.addPt(g),c+=l}}},{key:"addInsideTurn",value:function(t,n){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var r=new M((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r);var i=new M((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}}},{key:"createCircle",value:function(e){var t=new M(e.x+this.distance,e.y);this.segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this.distance),this.segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this.segList.addPt(e.p1),this.segList.addPt(t.p0)}},{key:"init",value:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new zr,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var t=this.li.getIntersectionNum();t>=2&&(this.bufParams.getJoinStyle()===Fr.JOIN_BEVEL||this.bufParams.getJoinStyle()===Fr.JOIN_MITRE?(e&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,ie.CLOCKWISE,this.distance))}},{key:"closeRing",value:function(){this.segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();Xr.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Xr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Xr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Xr.MAX_CLOSING_SEG_LEN_FACTOR=80;var Vr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.distance=0,t.precisionModel=null,t.bufParams=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.precisionModel=i,t.bufParams=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getOffsetCurve",value:function(e,t){if(this.distance=t,0===t)return null;var n=0>t,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var a=i.getCoordinates();return n&&ye.reverse(a),a}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){n.addSegments(e,!0);var i=Ur.simplify(e,-r),a=i.length-1;n.initSideSegments(i[a],i[a-1],mt.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(e,!1);var o=Ur.simplify(e,r),u=o.length-1;n.initSideSegments(o[0],o[1],mt.LEFT),n.addFirstSegment();for(var s=2;u>=s;s++)n.addNextSegment(o[s],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);t===mt.RIGHT&&(r=-r);var i=Ur.simplify(e,r),a=i.length-1;n.initSideSegments(i[a-1],i[0],t);for(var s=1;a>=s;s++){var o=1!==s;n.addNextSegment(i[s],o)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this.distance),r=Ur.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],mt.LEFT);for(var a=2;i>=a;a++)t.addNextSegment(r[a],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var s=Ur.simplify(e,-n),o=s.length-1;t.initSideSegments(s[o],s[o-1],mt.LEFT);for(var a=o-2;a>=0;a--)t.addNextSegment(s[a],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this.bufParams.getEndCapStyle()){case Fr.CAP_ROUND:t.createCircle(e);break;case Fr.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this.distance=t,0>t&&!this.bufParams.isSingleSided())return null;if(0===t)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this.bufParams.isSingleSided()){var i=0>t;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var a=r.getCoordinates();return a}},{key:"getBufferParameters",value:function(){return this.bufParams}},{key:"simplifyTolerance",value:function(e){return e*this.bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,r){if(this.distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return e.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){var i=Ur.simplify(e,-r),a=i.length-1;n.initSideSegments(i[a],i[a-1],mt.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var o=Ur.simplify(e,r),u=o.length-1;n.initSideSegments(o[0],o[1],mt.LEFT),n.addFirstSegment();for(var s=2;u>=s;s++)n.addNextSegment(o[s],!0)}n.addLastSegment()}},{key:"getSegGen",value:function(e){return new Xr(this.precisionModel,this.bufParams,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=new M(e[n]);return t}}]),e}(),jr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.subgraphs=null,t.seg=new Gt,t.cga=new ie}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.subgraphs=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"findStabbedSegments",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=new fe,s=e.subgraphs.iterator();s.hasNext();){var o=s.next(),u=o.getEnvelope();i.y<u.getMinY()||i.y>u.getMaxY()||e.findStabbedSegments(i,o.getDirectedEdges(),a)}return a}.apply(void 0,n);case 3:if(n[2].interfaces_&&n[2].interfaces_.indexOf(c)>-1&&n[0]instanceof M&&n[1]instanceof Dt)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=n[2],o=a.getEdge().getCoordinates(),u=0;u<o.length-1;u++){e.seg.p0=o[u],e.seg.p1=o[u+1],e.seg.p0.y>e.seg.p1.y&&e.seg.reverse();var l=Math.max(e.seg.p0.x,e.seg.p1.x);if(!(l<i.x||e.seg.isHorizontal()||i.y<e.seg.p0.y||i.y>e.seg.p1.y||ie.computeOrientation(e.seg.p0,e.seg.p1,i)===ie.RIGHT)){var c=a.getDepth(mt.LEFT);e.seg.p0.equals(o[u])||(c=a.getDepth(mt.RIGHT));var g=new Hr(e.seg,c);s.add(g)}}}.apply(void 0,n);if(n[2].interfaces_&&n[2].interfaces_.indexOf(c)>-1&&n[0]instanceof M&&n[1].interfaces_&&n[1].interfaces_.indexOf(c)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=n[2],o=a.iterator();o.hasNext();){var u=o.next();u.isForward()&&e.findStabbedSegments(i,u,s)}}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getDepth",value:function(e){var t=this.findStabbedSegments(e);if(0===t.size())return 0;var n=rn.min(t);return n.leftDepth}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"DepthSegment",get:function(){return Hr}}]),e}(),Hr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.upwardSeg=null,t.leftDepth=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.upwardSeg=new Gt(i),t.leftDepth=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"compareTo",value:function(e){var t=e;if(this.upwardSeg.minX()>=t.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=t.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(t.upwardSeg);return 0!==n?n:(n=-1*t.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(t.upwardSeg))}},{key:"compareX",value:function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this.upwardSeg.toString()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[L]}}]),e}(),Wr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.p0=null,t.p1=null,t.p2=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.p0=i,t.p1=a,t.p2=s}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new O("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,r){return e*r-t*n}},{key:"interpolateZ",value:function(e,t,n,r){var i=t.x,a=t.y,s=n.x-i,o=r.x-i,u=n.y-a,l=r.y-a,c=s*l-o*u,g=e.x-i,f=e.y-a,h=(l*g-o*f)/c,v=(-u*g+s*f)/c,y=t.z+h*(n.z-t.z)+v*(r.z-t.z);return y}},{key:"longestSideLength",value:function(e,t,n){var r=e.distance(t),i=t.distance(n),a=n.distance(e),s=r;return i>s&&(s=i),a>s&&(s=a),s}},{key:"isAcute",value:function(e,t,n){return Angle.isAcute(e,t,n)&&Angle.isAcute(t,n,e)&&Angle.isAcute(n,e,t)?!0:!1}},{key:"circumcentre",value:function(t,n,r){var i=r.x,a=r.y,s=t.x-i,o=t.y-a,u=n.x-i,l=n.y-a,c=2*e.det(s,o,u,l),g=e.det(o,s*s+o*o,l,u*u+l*l),f=e.det(s,s*s+o*o,u,u*u+l*l),h=i-g/c,v=a+f/c;return new M(h,v)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new J(e.x+n/2,e.y+r/2,1),a=new J(e.x-r+n/2,e.y+n+r/2,1);return new J(i,a)}},{key:"angleBisector",value:function(e,t,n){var r=t.distance(e),i=t.distance(n),a=r/(r+i),s=n.x-e.x,o=n.y-e.y,u=new M(e.x+a*s,e.y+a*o);return u}},{key:"area3D",value:function t(e,n,r){var i=n.x-e.x,a=n.y-e.y,s=n.z-e.z,o=r.x-e.x,u=r.y-e.y,l=r.z-e.z,c=a*l-s*u,g=s*o-i*l,f=i*u-a*o,h=c*c+g*g+f*f,t=Math.sqrt(h)/2;return t}},{key:"centroid",value:function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new M(r,i)}},{key:"inCentre",value:function(e,t,n){var r=t.distance(n),i=e.distance(n),a=e.distance(t),s=r+i+a,o=(r*e.x+i*t.x+a*n.x)/s,u=(r*e.y+i*t.y+a*n.y)/s;return new M(o,u)}}]),e}(),Kr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.inputGeom=null,t.distance=null,t.curveBuilder=null,t.curveList=new fe}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.inputGeom=i,t.distance=a,t.curveBuilder=s}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"addPoint",value:function(e){if(this.distance<=0)return null;var t=e.getCoordinates(),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,q.EXTERIOR,q.INTERIOR)}},{key:"addPolygon",value:function(e){var t=this.distance,n=mt.LEFT;this.distance<0&&(t=-this.distance,n=mt.RIGHT);var r=e.getExteriorRing(),i=ye.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance))return null;if(this.distance<=0&&i.length<3)return null;this.addPolygonRing(i,t,n,q.EXTERIOR,q.INTERIOR);for(var a=0;a<e.getNumInteriorRing();a++){var s=e.getInteriorRingN(a),o=ye.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(o,t,mt.opposite(n),q.INTERIOR,q.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(e,t){var n=new Wr(e[0],e[1],e[2]),r=n.inCentre(),i=ie.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)}},{key:"addLineString",value:function(e){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var t=ye.removeRepeatedPoints(e.getCoordinates()),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,q.EXTERIOR,q.INTERIOR)}},{key:"addCurve",value:function(e,t,n){if(null===e||e.length<2)return null;var r=new gr(e,new kt(0,q.BOUNDARY,t,n));this.curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this.inputGeom),this.curveList}},{key:"addPolygonRing",value:function(e,t,n,r,i){if(0===t&&e.length<Je.MINIMUM_VALID_SIZE)return null;var a=r,s=i;e.length>=Je.MINIMUM_VALID_SIZE&&ie.isCCW(e)&&(a=i,s=r,n=mt.opposite(n));var o=this.curveBuilder.getRingCurve(e,n,t);this.addCurve(o,a,s)}},{key:"add",value:function(e){if(e.isEmpty())return null;if(e instanceof We)this.addPolygon(e);else if(e instanceof Xe)this.addLineString(e);else if(e instanceof je)this.addPoint(e);else if(e instanceof Ke)this.addCollection(e);else if(e instanceof be)this.addCollection(e);else if(e instanceof Qe)this.addCollection(e);else{if(!(e instanceof Pe))throw new UnsupportedOperationException(e.getClass().getName());this.addCollection(e)}}},{key:"isErodedCompletely",value:function(e,t){var n=e.getCoordinates();if(n.length<4)return 0>t;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return 0>t&&2*Math.abs(t)>i?!0:!1}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Jr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t._hasIntersection=!1,t.hasProper=!1,t.hasProperInterior=!1,t.hasInterior=!1,t.properIntersectionPoint=null,t.li=null,t.isSelfIntersection=null,t.numIntersections=0,t.numInteriorIntersections=0,t.numProperIntersections=0,t.numTests=0}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.li=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"isTrivialIntersection",value:function(t,n,r,i){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var a=t.size()-1;if(0===n&&i===a||0===i&&n===a)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"getLineIntersector",value:function(){return this.li}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[r],o=n.getCoordinates()[r+1];this.li.computeIntersection(i,a,s,o),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this.hasInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[pr]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),Qr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.bufParams=null,t.workingPrecisionModel=null,t.workingNoder=null,t.geomFact=null,t.graph=null,t.edgeList=new Cr}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.bufParams=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"setWorkingPrecisionModel",value:function(e){this.workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(t){var n=this.edgeList.findEqualEdge(t);if(null!==n){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new kt(t.getLabel()),i.flip()),r.merge(i);var a=e.depthDelta(i),s=n.getDepthDelta(),o=s+a;n.setDepthDelta(o)}else this.edgeList.add(t),
t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new fe,r=e.iterator();r.hasNext();){var i=r.next(),a=i.getRightmostCoordinate(),s=new jr(n),o=s.getDepth(a);i.computeDepth(o),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new fe,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new qr;i.create(r),t.add(i)}}return rn.sort(t,rn.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){var e=this.geomFact.createPolygon();return e}},{key:"getNoder",value:function(e){if(null!==this.workingNoder)return this.workingNoder;var t=new yr,n=new te;return n.setPrecisionModel(e),t.setSegmentIntersector(new Jr(n)),t}},{key:"buffer",value:function(e,t){var n=this.workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this.geomFact=e.getFactory();var r=new Vr(n,this.bufParams),i=new Kr(e,t,r),a=i.getCurves();if(a.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(a,n),this.graph=new Mt(new Pt),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),o=new Ir(this.geomFact);this.buildSubgraphs(s,o);var u=o.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this.geomFact.buildGeometry(u);return l}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings(),i=r.iterator();i.hasNext();){var a=i.next(),s=a.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var o=a.getData(),u=new xn(a.getCoordinates(),new kt(o));this.insertUniqueEdge(u)}}}},{key:"setNoder",value:function(e){this.workingNoder=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthDelta",value:function(e){var t=e.getLocation(0,mt.LEFT),n=e.getLocation(0,mt.RIGHT);return t===q.INTERIOR&&n===q.EXTERIOR?1:t===q.EXTERIOR&&n===q.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new st,n=new fe;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)}}]),e}(),Zr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.noder=null,t.scaleFactor=null,t.offsetX=null,t.offsetY=null,t.isScaled=!1}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];o.call(t,i,a,0,0)}.apply(void 0,n);case 4:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];n[2],n[3];t.noder=i,t.scaleFactor=a,t.isScaled=!t.isIntegerPrecision()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"rescale",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=i.iterator();a.hasNext();){var s=a.next();e.rescale(s.getCoordinates())}}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=null,s=null;2===i.length&&(a=new M(i[0]),s=new M(i[1]));for(var o=0;o<i.length;o++)i[o].x=i[o].x/e.scaleFactor+e.offsetX,i[o].y=i[o].y/e.scaleFactor+e.offsetY;2===i.length&&i[0].equals2D(i[1])&&K.out.println(i)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"scale",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=new fe,s=i.iterator();s.hasNext();){var o=s.next();a.add(new gr(e.scale(o.getCoordinates()),o.getData()))}return a}.apply(void 0,n);if(n[0]instanceof Array)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=new Array(i.length),s=0;s<i.length;s++)a[s]=new M(Math.round((i[s].x-e.offsetX)*e.scaleFactor),Math.round((i[s].y-e.offsetY)*e.scaleFactor),i[s].z);var o=ye.removeRepeatedPoints(a);return o}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isIntegerPrecision",value:function(){return 1===this.scaleFactor}},{key:"getNodedSubstrings",value:function(){var e=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this.isScaled&&(t=this.scale(e)),this.noder.computeNodes(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[hr]}}]),e}(),$r=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=new te,t.segStrings=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.segStrings=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"checkEndPtVertexIntersections",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=e.segStrings.iterator();i.hasNext();){var a=i.next(),s=a.getCoordinates();e.checkEndPtVertexIntersections(s[0],e.segStrings),e.checkEndPtVertexIntersections(s[s.length-1],e.segStrings)}}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r=t[0],i=t[1],a=i.iterator();a.hasNext();)for(var s=a.next(),o=s.getCoordinates(),u=1;u<o.length-1;u++)if(o[u].equals(r))throw new b("found endpt/interior pt intersection at index "+u+" :pt "+r)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"checkInteriorIntersections",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=e.segStrings.iterator();i.hasNext();)for(var a=i.next(),s=e.segStrings.iterator();s.hasNext();){var o=s.next();e.checkInteriorIntersections(a,o)}}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=i.getCoordinates(),o=a.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<o.length-1;l++)e.checkInteriorIntersections(i,u,a,l)}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(i===s&&a===o)return null;var u=i.getCoordinates()[a],l=i.getCoordinates()[a+1],c=s.getCoordinates()[o],g=s.getCoordinates()[o+1];if(e.li.computeIntersection(u,l,c,g),e.li.hasIntersection()&&(e.li.isProper()||e.hasInteriorIntersection(e.li,u,l)||e.hasInteriorIntersection(e.li,c,g)))throw new b("found non-noded intersection at "+u+"-"+l+" and "+c+"-"+g)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=e.segStrings.iterator();i.hasNext();){var a=i.next();e.checkCollapses(a)}}.apply(void 0,n);case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=i.getCoordinates(),s=0;s<a.length-2;s++)e.checkCollapse(a[s],a[s+1],a[s+2])}.apply(void 0,n)}};return i.apply(this,n)}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!i.equals(t)&&!i.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,r){if(t.equals(r))throw new b("found non-noded collapse at "+e.fact.createLineString([t,n,r]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();$r.fact=new st;var ei=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=null,t.pt=null,t.originalPt=null,t.ptScaled=null,t.p0Scaled=null,t.p1Scaled=null,t.scaleFactor=null,t.minx=null,t.maxx=null,t.miny=null,t.maxy=null,t.corner=new Array(4),t.safeEnv=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];if(t.originalPt=i,t.pt=i,t.scaleFactor=a,t.li=s,0>=a)throw new O("Scale factor must be non-zero");1!==a&&(t.pt=new M(t.scale(i.x),t.scale(i.y)),t.p0Scaled=new M,t.p1Scaled=new M),t.initCorners(t.pt)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),a=Math.max(e.y,t.y),s=this.maxx<n||this.minx>r||this.maxy<i||this.miny>a;if(s)return!1;var o=this.intersectsToleranceSquare(e,t);return D.isTrue(!(s&&o),"Found bad envelope test"),o}},{key:"initCorners",value:function(e){var t=.5;this.minx=e.x-t,this.maxx=e.x+t,this.miny=e.y-t,this.maxy=e.y+t,this.corner[0]=new M(this.maxx,this.maxy),this.corner[1]=new M(this.minx,this.maxy),this.corner[2]=new M(this.minx,this.miny),this.corner[3]=new M(this.maxx,this.miny)}},{key:"intersects",value:function(e,t){return 1===this.scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this.p0Scaled),this.copyScaled(t,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this.scaleFactor)}},{key:"getCoordinate",value:function(){return this.originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(null===this.safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new Q(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.hasIntersection()?!0:!1)))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,r=!1;return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.isProper()?!0:n&&r?!0:e.equals(this.pt)?!0:t.equals(this.pt)?!0:!1)))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();ei.SAFE_ENV_EXPANSION_FACTOR=.75;var ti=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.index=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.index=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"snap",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.snap(i,null,-1)}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var a=n[0],o=n[1],u=n[2],l=a.getSafeEnvelope(),c=new ni(a,o,u);return e.index.query(l,new(function(){function e(){i(this,e)}return s(e,[{key:"visitItem",value:function(e){var t=e;t.select(l,c)}},{key:"interfaces_",get:function(){return[on]}}]),e}())),c.isNodeAdded()}.apply(void 0,n)}};return a.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"HotPixelSnapAction",get:function(){return ni}}]),e}(),ni=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.hotPixel=null,o.parentEdge=null,o.hotPixelVertexIndex=null,o._isNodeAdded=!1}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 3:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];o.hotPixel=r,o.parentEdge=i,o.hotPixelVertexIndex=a}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=a(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var s=r[0],o=r[1],u=s.getContext();return null!==this.parentEdge&&u===this.parentEdge&&o===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(u,o))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Bt),ri=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=null,t.interiorIntersections=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.li=i,t.interiorIntersections=new fe}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;var i=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[r],o=n.getCoordinates()[r+1];if(this.li.computeIntersection(i,a,s,o),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this.interiorIntersections}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[pr]}}]),e}(),ii=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pm=null,t.li=null,t.scaleFactor=null,t.noder=null,t.pointSnapper=null,t.nodedSegStrings=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.pm=i,t.li=new te,t.li.setPrecisionModel(i),t.scaleFactor=i.getScale()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"checkCorrectness",value:function(e){var t=gr.getNodedSubstrings(e),n=new $r(t);try{n.checkValid()}catch(r){if(!(r instanceof H))throw r;r.printStackTrace()}finally{}}},{key:"getNodedSubstrings",value:function(){return gr.getNodedSubstrings(this.nodedSegStrings)}},{key:"snapRound",value:function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}},{key:"findInteriorIntersections",value:function(e,t){var n=new ri(t);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(e),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0].interfaces_&&n[0].interfaces_.indexOf(u)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=i.iterator();a.hasNext();){var s=a.next();e.computeVertexSnaps(s)}}.apply(void 0,n);if(n[0]instanceof gr)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=i.getCoordinates(),s=0;s<a.length;s++){var o=new ei(a[s],e.scaleFactor,e.li),u=e.pointSnapper.snap(o,i,s);u&&i.addIntersection(a[s],s)}}.apply(void 0,n)}};return i.apply(this,n)}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e,this.noder=new yr,this.pointSnapper=new ti(this.noder.getIndex()),this.snapRound(e,this.li)}},{key:"computeIntersectionSnaps",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new ei(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[hr]}}]),e}(),ai=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.argGeom=null,t.distance=null,t.bufParams=new Fr,t.resultGeometry=null,t.saveException=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.argGeom=i}.apply(void 0,n);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.argGeom=i,t.bufParams=a}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"bufferFixedPrecision",value:function(e){var t=new Zr(new ii(new it(1)),e.getScale()),n=new Qr(this.bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this.resultGeometry=n.buffer(this.argGeom,this.distance)}},{key:"bufferReducedPrecision",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];for(var a=e.MAX_PRECISION_DIGITS;a>=0;a--){try{t.bufferReducedPrecision(a)}catch(s){if(!(s instanceof pt))throw s;t.saveException=s}finally{}if(null!==t.resultGeometry)return null}throw t.saveException}.apply(void 0,r);case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=e.precisionScaleFactor(t.argGeom,t.distance,a),o=new it(s);t.bufferFixedPrecision(o)}.apply(void 0,r)}};return a.apply(this,r)}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var e=this.argGeom.getFactory().getPrecisionModel();e.getType()===it.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this.bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new Qr(this.bufParams);this.resultGeometry=e.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof b))throw t;this.saveException=t}finally{}}},{key:"getResultGeometry",value:function(e){return this.distance=e,this.computeGeometry(),this.resultGeometry}},{key:"setEndCapStyle",value:function(e){this.bufParams.setEndCapStyle(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferOp",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new e(i),o=s.getResultGeometry(a);return o}.apply(void 0,n);case 3:if(Number.isInteger(n[2])&&n[0]instanceof ae&&"number"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=new e(i);o.setQuadrantSegments(s);var u=o.getResultGeometry(a);return u}.apply(void 0,n);if(n[2]instanceof Fr&&n[0]instanceof ae&&"number"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=new e(i,s),u=o.getResultGeometry(a);return u}.apply(void 0,n);case 4:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3],u=new e(i);u.setQuadrantSegments(s),u.setEndCapStyle(o);var l=u.getResultGeometry(a);return l}.apply(void 0,n)}};return i.apply(this,n)}},{key:"precisionScaleFactor",value:function(e,t,n){var r=e.getEnvelopeInternal(),i=U.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),a=t>0?t:0,s=i+2*a,o=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-o,l=Math.pow(10,u);return l}}]),e}();ai.CAP_ROUND=Fr.CAP_ROUND,ai.CAP_BUTT=Fr.CAP_FLAT,ai.CAP_FLAT=Fr.CAP_FLAT,ai.CAP_SQUARE=Fr.CAP_SQUARE,ai.MAX_PRECISION_DIGITS=12;var si=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.treeSet=new k,t.list=new fe}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"filter",value:function(e){this.treeSet.contains(e)||(this.list.add(e),this.treeSet.add(e))}},{key:"getCoordinates",value:function(){var e=new Array(this.list.size());return this.list.toArray(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[se]}}],[{key:"filterCoordinates",value:function(t){for(var n=new e,r=0;r<t.length;r++)n.filter(t[r]);return n.getCoordinates()}}]),e}(),oi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geomFactory=null,t.inputPts=null}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 1:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0];o.call(t,e.extractCoordinates(a),a.getFactory())}.apply(void 0,r);case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];t.inputPts=si.filterCoordinates(i),t.geomFactory=a}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"preSort",value:function(e){for(var t=null,n=1;n<e.length;n++)(e[n].y<e[0].y||e[n].y===e[0].y&&e[n].x<e[0].x)&&(t=e[0],e[0]=e[n],e[n]=t);return A.sort(e,1,e.length,new ui(e[0])),e}},{key:"computeOctRing",value:function(e){var t=this.computeOctPts(e),n=new ve;return n.add(t,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())}},{key:"lineOrPolygon",value:function(e){if(e=this.cleanRing(e),3===e.length)return this.geomFactory.createLineString([e[0],e[1]]);var t=this.geomFactory.createLinearRing(e);return this.geomFactory.createPolygon(t,null)}},{key:"cleanRing",value:function(e){D.equals(e[0],e[e.length-1]);for(var t=new fe,n=null,r=0;r<=e.length-2;r++){var i=e[r],a=e[r+1];i.equals(a)||null!==n&&this.isBetween(n,i,a)||(t.add(i),n=i)}t.add(e[e.length-1]);var s=new Array(t.size());return t.toArray(s)}},{key:"isBetween",value:function(e,t,n){if(0!==ie.computeOrientation(e,t,n))return!1;if(e.x!==n.x){if(e.x<=t.x&&t.x<=n.x)return!0;if(n.x<=t.x&&t.x<=e.x)return!0}if(e.y!==n.y){if(e.y<=t.y&&t.y<=n.y)return!0;if(n.y<=t.y&&t.y<=e.y)return!0}return!1}},{key:"reduce",value:function(e){var t=this.computeOctRing(e);if(null===t)return e;for(var n=new k,r=0;r<t.length;r++)n.add(t[r]);for(var r=0;r<e.length;r++)ie.isPointInRing(e[r],t)||n.add(e[r]);var i=ye.toCoordinateArray(n);return i.length<3?this.padArray3(i):i}},{key:"getConvexHull",value:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var e=this.inputPts;this.inputPts.length>50&&(e=this.reduce(this.inputPts));var t=this.preSort(e),n=this.grahamScan(t),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)}},{key:"padArray3",value:function(e){for(var t=new Array(3),n=0;n<t.length;n++)n<e.length?t[n]=e[n]:t[n]=e[0];return t}},{key:"computeOctPts",value:function(e){for(var t=new Array(8),n=0;n<t.length;n++)t[n]=e[0];for(var r=1;r<e.length;r++)e[r].x<t[0].x&&(t[0]=e[r]),e[r].x-e[r].y<t[1].x-t[1].y&&(t[1]=e[r]),e[r].y>t[2].y&&(t[2]=e[r]),e[r].x+e[r].y>t[3].x+t[3].y&&(t[3]=e[r]),e[r].x>t[4].x&&(t[4]=e[r]),e[r].x-e[r].y>t[5].x-t[5].y&&(t[5]=e[r]),e[r].y<t[6].y&&(t[6]=e[r]),e[r].x+e[r].y<t[7].x+t[7].y&&(t[7]=e[r]);return t}},{key:"toCoordinateArray",value:function(e){for(var t=new Array(e.size()),n=0;n<e.size();n++){var r=e.get(n);t[n]=r}return t}},{key:"grahamScan",value:function(e){var t=null,n=new N;t=n.push(e[0]),t=n.push(e[1]),t=n.push(e[2]);for(var r=3;r<e.length;r++){for(t=n.pop();!n.empty()&&ie.computeOrientation(n.peek(),t,e[r])>0;)t=n.pop();t=n.push(t),t=n.push(e[r])}return t=n.push(e[0]),n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(e){var t=new si;return e.apply(t),t.getCoordinates()}},{key:"RadialComparator",get:function(){return ui}}]),e}(),ui=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.origin=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.origin=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"compare",value:function(t,n){var r=t,i=n;return e.polarCompare(this.origin,r,i)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[T]}}],[{key:"polarCompare",value:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,a=n.x-e.x,s=n.y-e.y,o=ie.computeOrientation(e,t,n);if(o===ie.COUNTERCLOCKWISE)return 1;if(o===ie.CLOCKWISE)return-1;var u=r*r+i*i,l=a*a+s*s;return l>u?-1:u>l?1:0}}]),e}(),li=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.areaBasePt=null,t.triangleCent3=new M,t.areasum2=0,t.cg3=new M,t.lineCentSum=new M,t.totalLength=0,t.ptCount=0,t.ptCentSum=new M}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.areaBasePt=null,t.add(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"addPoint",value:function(e){this.ptCount+=1,this.ptCentSum.x+=e.x,this.ptCentSum.y+=e.y}},{key:"setBasePoint",value:function(e){null===this.areaBasePt&&(this.areaBasePt=e)}},{key:"addLineSegments",value:function(e){for(var t=0,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);if(0!==r){t+=r;var i=(e[n].x+e[n+1].x)/2;this.lineCentSum.x+=r*i;var a=(e[n].y+e[n+1].y)/2;this.lineCentSum.y+=r*a}}this.totalLength+=t,0===t&&e.length>0&&this.addPoint(e[0])}},{key:"addHole",value:function(e){for(var t=ie.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"getCentroid",value:function(){var e=new M;if(Math.abs(this.areasum2)>0)e.x=this.cg3.x/3/this.areasum2,e.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)e.x=this.lineCentSum.x/this.totalLength,e.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;e.x=this.ptCentSum.x/this.ptCount,e.y=this.ptCentSum.y/this.ptCount}return e}},{key:"addShell",value:function(e){e.length>0&&this.setBasePoint(e[0]);for(var t=!ie.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"addTriangle",value:function(t,n,r,i){var a=i?1:-1;e.centroid3(t,n,r,this.triangleCent3);var s=e.area2(t,n,r);this.cg3.x+=a*s*this.triangleCent3.x,this.cg3.y+=a*s*this.triangleCent3.y,this.areasum2+=a*s}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof We)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];e.addShell(i.getExteriorRing().getCoordinates());for(var a=0;a<i.getNumInteriorRing();a++)e.addHole(i.getInteriorRingN(a).getCoordinates())}.apply(void 0,n);if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(i.isEmpty())return null;if(i instanceof je)e.addPoint(i.getCoordinate());else if(i instanceof Xe)e.addLineSegments(i.getCoordinates());else if(i instanceof We){var a=i;e.add(a)}else if(i instanceof Pe)for(var s=i,o=0;o<s.getNumGeometries();o++)e.add(s.getGeometryN(o))}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area2",value:function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}},{key:"centroid3",value:function(e,t,n,r){return r.x=e.x+t.x+n.x,r.y=e.y+t.y+n.y,null}},{key:"getCentroid",value:function(t){var n=new e(t);return n.getCentroid()}}]),e}(),ci=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.matrix=null}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 0:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];t.matrix=Array(3).fill().map(function(){return Array(3)}),t.setAll(Le.FALSE)}.apply(void 0,r);case 1:if("string"==typeof r[0])return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t),t.set(i)}.apply(void 0,r);if(r[0]instanceof e)return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];o.call(t),t.matrix[q.INTERIOR][q.INTERIOR]=i.matrix[q.INTERIOR][q.INTERIOR],t.matrix[q.INTERIOR][q.BOUNDARY]=i.matrix[q.INTERIOR][q.BOUNDARY],t.matrix[q.INTERIOR][q.EXTERIOR]=i.matrix[q.INTERIOR][q.EXTERIOR],t.matrix[q.BOUNDARY][q.INTERIOR]=i.matrix[q.BOUNDARY][q.INTERIOR],t.matrix[q.BOUNDARY][q.BOUNDARY]=i.matrix[q.BOUNDARY][q.BOUNDARY],t.matrix[q.BOUNDARY][q.EXTERIOR]=i.matrix[q.BOUNDARY][q.EXTERIOR],t.matrix[q.EXTERIOR][q.INTERIOR]=i.matrix[q.EXTERIOR][q.INTERIOR],t.matrix[q.EXTERIOR][q.BOUNDARY]=i.matrix[q.EXTERIOR][q.BOUNDARY],t.matrix[q.EXTERIOR][q.EXTERIOR]=i.matrix[q.EXTERIOR][q.EXTERIOR]}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){var t=e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])||e.isTrue(this.matrix[q.INTERIOR][q.BOUNDARY])||e.isTrue(this.matrix[q.BOUNDARY][q.INTERIOR])||e.isTrue(this.matrix[q.BOUNDARY][q.BOUNDARY]);
return t&&this.matrix[q.EXTERIOR][q.INTERIOR]===Le.FALSE&&this.matrix[q.EXTERIOR][q.BOUNDARY]===Le.FALSE}},{key:"isCoveredBy",value:function(){var t=e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])||e.isTrue(this.matrix[q.INTERIOR][q.BOUNDARY])||e.isTrue(this.matrix[q.BOUNDARY][q.INTERIOR])||e.isTrue(this.matrix[q.BOUNDARY][q.BOUNDARY]);return t&&this.matrix[q.INTERIOR][q.EXTERIOR]===Le.FALSE&&this.matrix[q.BOUNDARY][q.EXTERIOR]===Le.FALSE}},{key:"set",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;a<i.length;a++){var s=Math.trunc(a/3),o=a%3;e.matrix[s][o]=Le.toDimensionValue(i.charAt(a))}}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];e.matrix[i][a]=s}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isContains",value:function(){return e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])&&this.matrix[q.EXTERIOR][q.INTERIOR]===Le.FALSE&&this.matrix[q.EXTERIOR][q.BOUNDARY]===Le.FALSE}},{key:"setAtLeast",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=0;a<i.length;a++){var s=Math.trunc(a/3),o=a%3;e.setAtLeast(s,o,Le.toDimensionValue(i.charAt(a)))}}.apply(void 0,n);case 3:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];e.matrix[i][a]<s&&(e.matrix[i][a]=s)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])&&this.matrix[q.INTERIOR][q.EXTERIOR]===Le.FALSE&&this.matrix[q.BOUNDARY][q.EXTERIOR]===Le.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):t===Le.A&&n===Le.A||t===Le.L&&n===Le.L||t===Le.L&&n===Le.A||t===Le.P&&n===Le.A||t===Le.P&&n===Le.L?this.matrix[q.INTERIOR][q.INTERIOR]===Le.FALSE&&(e.isTrue(this.matrix[q.INTERIOR][q.BOUNDARY])||e.isTrue(this.matrix[q.BOUNDARY][q.INTERIOR])||e.isTrue(this.matrix[q.BOUNDARY][q.BOUNDARY])):!1}},{key:"isOverlaps",value:function(t,n){return t===Le.P&&n===Le.P||t===Le.A&&n===Le.A?e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])&&e.isTrue(this.matrix[q.INTERIOR][q.EXTERIOR])&&e.isTrue(this.matrix[q.EXTERIOR][q.INTERIOR]):t===Le.L&&n===Le.L?1===this.matrix[q.INTERIOR][q.INTERIOR]&&e.isTrue(this.matrix[q.INTERIOR][q.EXTERIOR])&&e.isTrue(this.matrix[q.EXTERIOR][q.INTERIOR]):!1}},{key:"isEquals",value:function(t,n){return t!==n?!1:e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])&&this.matrix[q.INTERIOR][q.EXTERIOR]===Le.FALSE&&this.matrix[q.BOUNDARY][q.EXTERIOR]===Le.FALSE&&this.matrix[q.EXTERIOR][q.INTERIOR]===Le.FALSE&&this.matrix[q.EXTERIOR][q.BOUNDARY]===Le.FALSE}},{key:"toString",value:function(){for(var e=new z("123456789"),t=0;3>t;t++)for(var n=0;3>n;n++)e.setCharAt(3*t+n,Le.toDimensionSymbol(this.matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.matrix[t][n]=e}},{key:"get",value:function(e,t){return this.matrix[e][t]}},{key:"transpose",value:function(){var e=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=e,e=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=e,e=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=e,this}},{key:"matches",value:function(t){if(9!==t.length)throw new O("Should be length 9: "+t);for(var n=0;3>n;n++)for(var r=0;3>r;r++)if(!e.matches(this.matrix[n][r],t.charAt(3*n+r)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this.matrix[q.INTERIOR][q.INTERIOR]===Le.FALSE&&this.matrix[q.INTERIOR][q.BOUNDARY]===Le.FALSE&&this.matrix[q.BOUNDARY][q.INTERIOR]===Le.FALSE&&this.matrix[q.BOUNDARY][q.BOUNDARY]===Le.FALSE}},{key:"isCrosses",value:function(t,n){return t===Le.P&&n===Le.L||t===Le.P&&n===Le.A||t===Le.L&&n===Le.A?e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])&&e.isTrue(this.matrix[q.INTERIOR][q.EXTERIOR]):t===Le.L&&n===Le.P||t===Le.A&&n===Le.P||t===Le.A&&n===Le.L?e.isTrue(this.matrix[q.INTERIOR][q.INTERIOR])&&e.isTrue(this.matrix[q.EXTERIOR][q.INTERIOR]):t===Le.L&&n===Le.L?0===this.matrix[q.INTERIOR][q.INTERIOR]:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[R]}}],[{key:"matches",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 2:if(Number.isInteger(n[0])&&"string"==typeof n[1])return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];return i===Le.SYM_DONTCARE?!0:i===Le.SYM_TRUE&&(r>=0||r===Le.TRUE)?!0:i===Le.SYM_FALSE&&r===Le.FALSE?!0:i===Le.SYM_P&&r===Le.P?!0:i===Le.SYM_L&&r===Le.L?!0:i===Le.SYM_A&&r===Le.A?!0:!1}.apply(void 0,n);if("string"==typeof n[0]&&"string"==typeof n[1])return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new e(i);return s.matches(a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"isTrue",value:function(e){return e>=0||e===Le.TRUE?!0:!1}}]),e}(),gi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=new te,t.ptLocator=new $t,t.arg=null,t.nodes=new bt(new Ln),t.im=null,t.isolatedEdges=new fe,t.invalidPoint=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.arg=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"computeProperIntersectionIM",value:function(e,t){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),i=e.hasProperIntersection(),a=e.hasProperInteriorIntersection();2===n&&2===r?i&&t.setAtLeast("212101212"):2===n&&1===r?(i&&t.setAtLeast("FFF0FFFF2"),a&&t.setAtLeast("1FFFFF1FF")):1===n&&2===r?(i&&t.setAtLeast("F0FFFFFF2"),a&&t.setAtLeast("1F1FFFFFF")):1===n&&1===r&&a&&t.setAtLeast("0FFFFFFFF")}},{key:"labelIsolatedEdges",value:function(e,t){for(var n=this.arg[e].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,t,this.arg[t].getGeometry()),this.isolatedEdges.add(r))}}},{key:"labelIsolatedEdge",value:function(e,t,n){if(n.getDimension()>0){var r=this.ptLocator.locate(e.getCoordinate(),n);e.getLabel().setAllLocations(t,r)}else e.getLabel().setAllLocations(t,q.EXTERIOR)}},{key:"computeIM",value:function(){var e=new ci;if(e.set(q.EXTERIOR,q.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var t=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(t,e);var n=new wn,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var i=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e}},{key:"labelNodeEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}}},{key:"copyNodesAndLabels",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"labelIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var a=i.next(),s=this.nodes.find(a.coord);s.getLabel().isNull(e)&&(r===q.BOUNDARY?s.setLabelBoundary(e):s.setLabel(e,q.INTERIOR))}}},{key:"labelIsolatedNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}},{key:"computeIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var a=i.next(),s=this.nodes.addNode(a.coord);r===q.BOUNDARY?s.setLabelBoundary(e):s.getLabel().isNull(e)&&s.setLabel(e,q.INTERIOR)}}},{key:"labelIsolatedNodes",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();D.isTrue(n.getGeometryCount()>0,"node with empty label found"),t.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(t,0):this.labelIsolatedNode(t,1))}}},{key:"updateIM",value:function(e){for(var t=this.isolatedEdges.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}for(var r=this.nodes.iterator();r.hasNext();){var i=r.next();i.updateIM(e),i.updateIMFromEdges(e)}}},{key:"computeDisjointIM",value:function(e){var t=this.arg[0].getGeometry();t.isEmpty()||(e.set(q.INTERIOR,q.EXTERIOR,t.getDimension()),e.set(q.BOUNDARY,q.EXTERIOR,t.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(e.set(q.EXTERIOR,q.INTERIOR,n.getDimension()),e.set(q.EXTERIOR,q.BOUNDARY,n.getBoundaryDimension()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),fi=function(e){function t(){for(var e,r=this,a=arguments.length,s=Array(a),o=0;a>o;o++)s[o]=arguments[o];i(this,t);var u=n(this,Object.getPrototypeOf(t).call(this));!function(){u._relate=null}();var l=function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];switch(i.length){case 2:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=n(r,Object.getPrototypeOf(t).call(r,s,o));u._relate=new gi(u.arg)}.apply(void 0,i);case 3:return function(){for(var e=arguments.length,i=Array(e),a=0;e>a;a++)i[a]=arguments[a];var s=i[0],o=i[1],u=i[2],l=n(r,Object.getPrototypeOf(t).call(r,s,o,u));l._relate=new gi(l.arg)}.apply(void 0,i)}};return e=l.apply(u,s),n(u,e)}return r(t,e),s(t,[{key:"getIntersectionMatrix",value:function(){return this._relate.computeIM()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"relate",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=new t(i,a),o=s.getIntersectionMatrix();return o}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=new t(i,a,s),u=o.getIntersectionMatrix();return u}.apply(void 0,n)}};return i.apply(this,n)}}]),t}(Nr),hi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.centroid=null,t.minDistance=S.MAX_VALUE,t.interiorPoint=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.centroid=i.getCentroid().getCoordinate(),t.add(i)}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof ae)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];if(i instanceof je)e.add(i.getCoordinate());else if(i instanceof Pe)for(var a=i,s=0;s<a.getNumGeometries();s++)e.add(a.getGeometryN(s))}.apply(void 0,n);if(n[0]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=i.distance(e.centroid);a<e.minDistance&&(e.interiorPoint=new M(i),e.minDistance=a)}.apply(void 0,n)}};return i.apply(this,n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),vi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.component=null,t.segIndex=null,t.pt=null}();var s=function o(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];switch(r.length){case 2:return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];var a=r[0],s=r[1];o.call(t,a,e.INSIDE_AREA,s)}.apply(void 0,r);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.component=i,t.segIndex=a,t.pt=s}.apply(void 0,r)}};return s.apply(this,r)}return s(e,[{key:"isInsideArea",value:function(){return this.segIndex===e.INSIDE_AREA}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getGeometryComponent",value:function(){return this.component}},{key:"getSegmentIndex",value:function(){return this.segIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();vi.INSIDE_AREA=-1;var yi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.pts=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.pts=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"filter",value:function(e){e instanceof je&&this.pts.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Re]}}],[{key:"getPoints",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return i instanceof je?rn.singletonList(i):e.getPoints(i,new fe)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i instanceof je?a.add(i):i instanceof Pe&&i.apply(new e(a)),a}.apply(void 0,n)}};return i.apply(this,n)}}]),e}(),mi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.locations=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.locations=i}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"filter",value:function(e){(e instanceof je||e instanceof Xe||e instanceof We)&&this.locations.add(new vi(e,0,e.getCoordinate()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Re]}}],[{key:"getLocations",value:function(t){var n=new fe;return t.apply(new e(n)),n}}]),e}(),pi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.geom=null,t.terminateDistance=0,t.ptLocator=new $t,t.minDistanceLocation=null,t.minDistance=S.MAX_VALUE}();var s=function o(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 2:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1];o.call(t,i,a,0)}.apply(void 0,n);case 3:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];t.geom=new Array(2),t.geom[0]=i,t.geom[1]=a,t.terminateDistance=s}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"computeContainmentDistance",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=new Array(2);return e.computeContainmentDistance(0,i),e.minDistance<=e.terminateDistance?null:void e.computeContainmentDistance(1,i)}.apply(void 0,n);case 2:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=1-i,o=Tr.getPolygons(e.geom[i]);if(o.size()>0){var u=mi.getLocations(e.geom[s]);if(e.computeContainmentDistance(u,o,a),e.minDistance<=e.terminateDistance)return e.minDistanceLocation[s]=a[0],e.minDistanceLocation[i]=a[1],null}}.apply(void 0,n);case 3:if(n[2]instanceof Array&&n[0].interfaces_&&n[0].interfaces_.indexOf(c)>-1&&n[1].interfaces_&&n[1].interfaces_.indexOf(c)>-1)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];for(var i=n[0],a=n[1],s=n[2],o=0;o<i.size();o++)for(var u=i.get(o),l=0;l<a.size();l++)if(e.computeContainmentDistance(u,a.get(l),s),e.minDistance<=e.terminateDistance)return null}.apply(void 0,n);if(n[2]instanceof Array&&n[0]instanceof vi&&n[1]instanceof We)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=i.getCoordinate();return q.EXTERIOR!==e.ptLocator.locate(o,a)?(e.minDistance=0,s[0]=i,s[1]=new vi(a,o),null):void 0}.apply(void 0,n)}};return i.apply(this,n)}},{key:"computeMinDistanceLinesPoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),a=0;a<t.size();a++){var s=t.get(a);if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return null}}},{key:"computeFacetDistance",value:function(){var e=new Array(2),t=hn.getLines(this.geom[0]),n=hn.getLines(this.geom[1]),r=yi.getPoints(this.geom[0]),i=yi.getPoints(this.geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),void this.updateMinDistance(e,!1))))}},{key:"nearestLocations",value:function(){return this.computeMinDistance(),this.minDistanceLocation}},{key:"updateMinDistance",value:function(e,t){return null===e[0]?null:void(t?(this.minDistanceLocation[0]=e[1],this.minDistanceLocation[1]=e[0]):(this.minDistanceLocation[0]=e[0],this.minDistanceLocation[1]=e[1]))}},{key:"nearestPoints",value:function(){this.computeMinDistance();var e=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return e}},{key:"computeMinDistance",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 0:return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return null!==e.minDistanceLocation?null:(e.minDistanceLocation=new Array(2),e.computeContainmentDistance(),e.minDistance<=e.terminateDistance?null:void e.computeFacetDistance())}.apply(void 0,n);case 3:if(n[2]instanceof Array&&n[0]instanceof Xe&&n[1]instanceof je)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];if(i.getEnvelopeInternal().distance(a.getEnvelopeInternal())>e.minDistance)return null;for(var o=i.getCoordinates(),u=a.getCoordinate(),l=0;l<o.length-1;l++){var c=ie.distancePointLine(u,o[l],o[l+1]);if(c<e.minDistance){e.minDistance=c;var g=new Gt(o[l],o[l+1]),f=g.closestPoint(u);s[0]=new vi(i,l,f),s[1]=new vi(a,0,u)}if(e.minDistance<=e.terminateDistance)return null}}.apply(void 0,n);if(n[2]instanceof Array&&n[0]instanceof Xe&&n[1]instanceof Xe)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2];if(i.getEnvelopeInternal().distance(a.getEnvelopeInternal())>e.minDistance)return null;for(var o=i.getCoordinates(),u=a.getCoordinates(),l=0;l<o.length-1;l++)for(var c=0;c<u.length-1;c++){var g=ie.distanceLineLine(o[l],o[l+1],u[c],u[c+1]);if(g<e.minDistance){e.minDistance=g;var f=new Gt(o[l],o[l+1]),h=new Gt(u[c],u[c+1]),v=f.closestPoints(h);s[0]=new vi(i,l,v[0]),s[1]=new vi(a,c,v[1])}if(e.minDistance<=e.terminateDistance)return null}}.apply(void 0,n)}};return i.apply(this,n)}},{key:"computeMinDistancePoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),a=0;a<t.size();a++){var s=t.get(a),o=i.getCoordinate().distance(s.getCoordinate());if(o<this.minDistance&&(this.minDistance=o,n[0]=new vi(i,0,i.getCoordinate()),n[1]=new vi(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return null}}},{key:"distance",value:function(){if(null===this.geom[0]||null===this.geom[1])throw new O("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)}},{key:"computeMinDistanceLines",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),a=0;a<t.size();a++){var s=t.get(a);if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(t,n){var r=new e(t,n);return r.distance()}},{key:"isWithinDistance",value:function(t,n,r){var i=new e(t,n,r);return i.distance()<=r}},{key:"nearestPoints",value:function(t,n){var r=new e(t,n);return r.nearestPoints()}}]),e}(),di=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.rectEnv=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.rectEnv=i.getEnvelopeInternal()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"isContainedInBoundary",value:function(e){if(e instanceof We)return!1;if(e instanceof je)return this.isPointContainedInBoundary(e);if(e instanceof Xe)return this.isLineStringContainedInBoundary(e);for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.isContainedInBoundary(n))return!1}return!0}},{key:"isLineSegmentContainedInBoundary",value:function(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x===t.x){if(e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX())return!0}else if(e.y===t.y&&(e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()))return!0;return!1}},{key:"isLineStringContainedInBoundary",value:function(e){for(var t=e.getCoordinateSequence(),n=new M,r=new M,i=0;i<t.size()-1;i++)if(t.getCoordinate(i,n),t.getCoordinate(i+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0}},{key:"isPointContainedInBoundary",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];switch(n.length){case 1:if(n[0]instanceof je)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return e.isPointContainedInBoundary(i.getCoordinate())}.apply(void 0,n);if(n[0]instanceof M)return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];var i=n[0];return i.x===e.rectEnv.getMinX()||i.x===e.rectEnv.getMaxX()||i.y===e.rectEnv.getMinY()||i.y===e.rectEnv.getMaxY()}.apply(void 0,n)}};return i.apply(this,n)}},{key:"contains",value:function(e){return this.rectEnv.contains(e.getEnvelopeInternal())?this.isContainedInBoundary(e)?!1:!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"contains",value:function(t,n){var r=new e(t);return r.contains(n)}}]),e}(),ki=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.li=new te,t.rectEnv=null,t.diagUp0=null,t.diagUp1=null,t.diagDown0=null,t.diagDown1=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.rectEnv=i,t.diagUp0=new M(i.getMinX(),i.getMinY()),t.diagUp1=new M(i.getMaxX(),i.getMaxY()),t.diagDown0=new M(i.getMinX(),i.getMaxY()),t.diagDown1=new M(i.getMaxX(),i.getMinY())}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"intersects",value:function(e,t){var n=new Q(e,t);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(e))return!0;if(this.rectEnv.intersects(t))return!0;if(e.compareTo(t)>0){var r=e;e=t,t=r}var i=!1;return t.y>e.y&&(i=!0),i?this.li.computeIntersection(e,t,this.diagDown0,this.diagDown1):this.li.computeIntersection(e,t,this.diagUp0,this.diagUp1),this.li.hasIntersection()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ai=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t._isDone=!1}();var s=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 0:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t)}};return s.apply(this,r)}return s(e,[{key:"applyTo",value:function(e){for(var t=0;t<e.getNumGeometries()&&!this._isDone;t++){var n=e.getGeometryN(t);if(n instanceof Pe)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ii=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;n>a;a++)r[a]=arguments[a];i(this,e),function(){t.rectangle=null,t.rectEnv=null}();var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];switch(n.length){case 1:return function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n[0];t.rectangle=i,t.rectEnv=i.getEnvelopeInternal()}.apply(void 0,n)}};return s.apply(this,r)}return s(e,[{key:"intersects",value:function(e){if(!this.rectEnv.intersects(e.getEnvelopeInternal()))return!1;var t=new Ei(this.rectEnv);if(t.applyTo(e),t.intersects())return!0;var n=new xi(this.rectangle);if(n.applyTo(e),n.containsPoint())return!0;var r=new Ni(this.rectangle);return r.applyTo(e),r.intersects()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersects",value:function(t,n){var r=new e(t);return r.intersects(n)}}]),e}(),Ei=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.rectEnv=null,o._intersects=!1}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];o.rectEnv=r}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"isDone",value:function(){return this._intersects===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();return this.rectEnv.intersects(t)?this.rectEnv.contains(t)?(this._intersects=!0,null):t.getMinX()>=this.rectEnv.getMinX()&&t.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):t.getMinY()>=this.rectEnv.getMinY()&&t.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}},{key:"intersects",value:function(){return this._intersects}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Ai),xi=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.rectSeq=null,o.rectEnv=null,o._containsPoint=!1}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];o.rectSeq=r.getExteriorRing().getCoordinateSequence(),o.rectEnv=r.getEnvelopeInternal()}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"isDone",value:function(){return this._containsPoint===!0}},{key:"visit",value:function(e){if(!(e instanceof We))return null;var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;for(var n=new M,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),t.contains(n)&&wt.containsPointInPolygon(n,e))return this._containsPoint=!0,null}},{key:"containsPoint",value:function(){return this._containsPoint}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Ai),Ni=function(e){function t(){for(var e,r=arguments.length,a=Array(r),s=0;r>s;s++)a[s]=arguments[s];i(this,t);var o=n(this,Object.getPrototypeOf(t).call(this));!function(){o.rectEnv=null,o.rectIntersector=null,o.hasIntersection=!1,o.p0=new M,o.p1=new M}();var u=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];switch(t.length){case 1:return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];o.rectEnv=r.getEnvelopeInternal(),o.rectIntersector=new ki(o.rectEnv)}.apply(void 0,t)}};return e=u.apply(o,a),n(o,e)}return r(t,e),s(t,[{key:"intersects",value:function(){return this.hasIntersection}},{key:"isDone",value:function(){return this.hasIntersection===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;var n=hn.getLines(e);this.checkIntersectionWithLineStrings(n)}},{key:"checkIntersectionWithLineStrings",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}}},{key:"checkIntersectionWithSegments",value:function(e){for(var t=e.getCoordinateSequence(),n=1;n<t.size();n++)if(t.getCoordinate(n-1,this.p0),t.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Ai);!function(){w()}();var wi={geom:{Coordinate:M,GeometryFactory:st,Geometry:ae,Point:je,LineString:Xe,Polygon:Qe,GeometryCollection:Pe,MultiPoint:Ke,MultiLineString:be,MultiPolygon:Qe},io:{GeoJSONReader:gt,GeoJSONWriter:ft,WKTReader:ht,WKTWriter:$,olParser:vt}};e.jsts=wi}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
