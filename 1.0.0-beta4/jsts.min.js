"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){function e(){}function t(){}function n(e){this.message=e||""}function r(){}function i(e){this.message=e||""}function s(e){this.message=e||""}function a(){}function o(){}function u(){}function l(){this.array_=[],arguments[0]instanceof t&&this.addAll(arguments[0])}function h(){this.root_=null,this.size_=0}function c(){}function g(){this.array_=[],arguments[0]instanceof t&&this.addAll(arguments[0])}function f(){}function v(){this.map_=new Map}function y(e){this.message=e||""}function d(){this.array_=[]}function p(e){return[e.x,e.y]}function m(){Z.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},Z.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1};var e={getFactory:function(){return this.factory},getGeometryN:function(e){return this},getArea:function(){return 0},union:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return ci.union(this);if(1===t.length){var r=t[0];if(this.isEmpty()||r.isEmpty()){if(this.isEmpty()&&r.isEmpty())return Dr.createEmptyResult(Dr.UNION,this,r,this.factory);if(this.isEmpty())return r.copy();if(r.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),li.overlayOp(this,r,Dr.UNION)}},isValid:function(){return Ri.isValid(this)},intersection:function(e){if(this.isEmpty()||e.isEmpty())return Dr.createEmptyResult(Dr.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return ji.map(this,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"map",value:function(e){return e.intersection(t)}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),li.overlayOp(this,e,Dr.INTERSECTION)},intersects:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?is.intersects(this,e):e.isRectangle()?is.intersects(e,this):this.relate(e).isIntersects():!1},buffer:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return cr.bufferOp(this,r)}if(2===t.length){var r=t[0],i=t[1];return cr.bufferOp(this,r,i)}if(3===t.length){var r=t[0],i=t[1],s=t[2];return cr.bufferOp(this,r,i,s)}},convexHull:function(){return new Qi(this).getConvexHull()},relate:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),Qr.relate(this,r)}if(2===t.length){var r=t[0],i=t[1];return this.relate(r).matches(i)}},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var e=$i.getCentroid(this);return this.createPointFromInternalCoord(e,this)},isEquivalentClass:function(e){return this.getClass()===e.getClass()},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new es(this);e=n.getInteriorPoint()}else if(1===t){var n=new Ki(this);e=n.getInteriorPoint()}else{var n=new Hi(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)},symDifference:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return Dr.createEmptyResult(Dr.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),li.overlayOp(this,e,Dr.SYMDIFFERENCE)},createPointFromInternalCoord:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},disjoint:function(e){return!this.intersects(e)},toText:function(){var e=new j;return e.write(this)},contains:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?ts.contains(this,e):this.relate(e).isContains():!1},difference:function(e){return this.isEmpty()?Dr.createEmptyResult(Dr.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),li.overlayOp(this,e,Dr.DIFFERENCE))},isSimple:function(){var e=new rn(this);return e.isSimple()},isWithinDistance:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:dr.isWithinDistance(this,e,t)},distance:function(e){return dr.distance(this,e)}};for(var t in e)Z.prototype[t]=e[t]}var k=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"equalsWithTolerance",value:function(e,t,n){return Math.abs(e-t)<=n}}]),e}(),C=function ls(){_classCallCheck(this,ls)},E=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isNaN",value:function(e){return Number.isNaN(e)}},{key:"doubleToLongBits",value:function(e){return e}},{key:"longBitsToDouble",value:function(e){return e}},{key:"isInfinite",value:function(e){return!Number.isFinite(e)}}]),e}(),I=function hs(){_classCallCheck(this,hs)},x=function cs(){_classCallCheck(this,cs)},_=function gs(){_classCallCheck(this,gs)},N=function fs(){_classCallCheck(this,fs)},S=function vs(){_classCallCheck(this,vs)},O=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 0===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n))}.apply(void 0,r):1===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s))}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(S),R=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"shouldNeverReachHere",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length)e.shouldNeverReachHere(null);else if(1===n.length){var i=n[0];throw new O("Should never reach here"+(null!==i?": "+i:""))}}},{key:"isTrue",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];e.isTrue(i,null)}else if(2===n.length){var i=n[0],s=n[1];if(!i)throw null===s?new O:new O(s)}}},{key:"equals",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];e.equals(i,s,null)}else if(3===n.length){var i=n[0],s=n[1],a=n[2];if(!s.equals(i))throw new O("Expected "+i+" but encountered "+s+(null!==a?": "+a:""))}}}]),e}(),L=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.x=null,this.y=null,this.z=null;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)a.call(t,0,0);else if(1===r.length){var s=r[0];a.call(t,s.x,s.y,s.z)}else if(2===r.length){var o=r[0],u=r[1];a.call(t,o,u,e.NULL_ORDINATE)}else if(3===r.length){var o=r[0],u=r[1],l=r[2];t.x=o,t.y=u,t.z=l}};return s.apply(this,r)}return _createClass(e,[{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.z=n;break;default:throw new C("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.x!==r.x?!1:this.y!==r.y?!1:!0}if(2===t.length){var i=t[0],s=t[1];return k.equalsWithTolerance(this.x,i.x,s)&&k.equalsWithTolerance(this.y,i.y,s)?!0:!1}}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.z}throw new C("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||E.isNaN(this.z)&&E.isNaN(e.z))}},{key:"equals",value:function(t){return t instanceof e?this.equals2D(t):!1}},{key:"equalInZ",value:function(e,t){return k.equalsWithTolerance(this.z,e.z,t)}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"clone",value:function(){try{var t=_get(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return t}catch(n){if(n instanceof CloneNotSupportedException)return R.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw n}finally{}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.z+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*t+e.hashCode(this.x),t=37*t+e.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.z}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I,x,N]}}],[{key:"hashCode",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0],a=E.doubleToLongBits(s);return Math.trunc(a^a>>>32)}return(t=_get(Object.getPrototypeOf(e),"hashCode",this)).call.apply(t,[this].concat(r))}},{key:"DimensionalComparator",get:function(){return A}}]),e}(),A=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.dimensionsToTest=2;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)a.call(t,2);else if(1===n.length){var i=n[0];if(2!==i&&3!==i)throw new C("only 2 or 3 dimensions may be specified");t.dimensionsToTest=i}};return s.apply(this,r)}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,i=n,s=e.compare(r.x,i.x);if(0!==s)return s;var a=e.compare(r.y,i.y);if(0!==a)return a;if(this.dimensionsToTest<=2)return 0;var o=e.compare(r.z,i.z);return o}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[_]}}],[{key:"compare",value:function(e,t){return t>e?-1:e>t?1:E.isNaN(e)?E.isNaN(t)?0:-1:E.isNaN(t)?1:0}}]),e}();L.serialVersionUID=0x5cbf2c235c7e5800,L.NULL_ORDINATE=E.NaN,L.X=0,L.Y=1,L.Z=2;var w=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"setOrdinate",value:function(e,t,n){}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(e,t){}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){t[0]}else if(2===t.length){t[0],t[1]}}},{key:"getCoordinateCopy",value:function(e){}},{key:"getDimension",value:function(){}},{key:"getX",value:function(e){}},{key:"clone",value:function(){}},{key:"expandEnvelope",value:function(e){}},{key:"copy",value:function(){}},{key:"getY",value:function(e){}},{key:"toCoordinateArray",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[x]}}]),e}();w.X=0,w.Y=1,w.Z=2,w.M=3;var b=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Array){t[0]}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){t[0]}}else if(2===t.length){t[0],t[1]}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),P=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new C("Unknown location value: "+t)}}]),e}();P.INTERIOR=0,P.BOUNDARY=1,P.EXTERIOR=2,P.NONE=-1;var T=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"log10",value:function(t){var n=Math.log(t);return E.isInfinite(n)?n:E.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function t(e,n,r,i){var t=e;return t>n&&(t=n),t>r&&(t=r),t>i&&(t=i),t}},{key:"clamp",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(3===t.length){if("number"==typeof t[2]&&"number"==typeof t[0]&&"number"==typeof t[1]){var r=t[0],i=t[1],s=t[2];return i>r?i:r>s?s:r}if(Number.isInteger(t[2])&&Number.isInteger(t[0])&&Number.isInteger(t[1])){var r=t[0],i=t[1],s=t[2];return i>r?i:r>s?s:r}}}},{key:"wrap",value:function(e,t){return 0>e?t- -e%t:e%t}},{key:"max",value:function n(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];if(3===t.length){var i=t[0],s=t[1],a=t[2],n=i;return s>n&&(n=s),a>n&&(n=a),n}if(4===t.length){var i=t[0],s=t[1],a=t[2],o=t[3],n=i;return s>n&&(n=s),a>n&&(n=a),o>n&&(n=o),n}}},{key:"average",value:function(e,t){return(e+t)/2}}]),e}();T.LOG_10=Math.log(10);var M=function(){function e(t){_classCallCheck(this,e),this.str=t}return _createClass(e,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){return this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),e}(),D=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"isNaN",value:function(e){return Number.isNaN(e)}}]),e}(),F=function ys(){_classCallCheck(this,ys)};F.isWhitespace=function(e){return 32>=e&&e>=0||127==e},F.toUpperCase=function(e){return e.toUpperCase()};var G=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.hi=0,this.lo=0;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.init(0);else if(1===r.length){if("number"==typeof r[0]){var s=r[0];t.init(s)}else if(r[0]instanceof e){var o=r[0];t.init(o)}else if("string"==typeof r[0]){var u=r[0];a.call(t,e.parse(u))}}else if(2===r.length){var l=r[0],h=r[1];t.init(l,h)}};return s.apply(this,r)}return _createClass(e,[{key:"le",value:function(e){return this.hi<e.hi||this.hi===e.hi&&this.lo<=e.lo}},{key:"extractSignificantDigits",value:function(t,n){var r=this.abs(),i=e.magnitude(r.hi),s=e.TEN.pow(i);r=r.divide(s),r.gt(e.TEN)?(r=r.divide(e.TEN),i+=1):r.lt(e.ONE)&&(r=r.multiply(e.TEN),i-=1);for(var a=i+1,o=new M,u=e.MAX_PRINT_DIGITS-1,l=0;u>=l;l++){t&&l===a&&o.append(".");var h=Math.trunc(r.hi);if(0>h)break;var c=!1,g=0;h>9?(c=!0,g="9"):g="0"+h,o.append(g),r=r.subtract(e.valueOf(h)).multiply(e.TEN),c&&r.selfAdd(e.TEN);var f=!0,v=e.magnitude(r.hi);if(0>v&&Math.abs(v)>=u-l&&(f=!1),!f)break}return n[0]=i,o.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this.hi+this.lo}},{key:"subtract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.add(i.negate())}if("number"==typeof n[0]){var i=n[0];return this.add(-i)}}}},{key:"equals",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return this.hi===s.hi&&this.lo===s.lo}return(t=_get(Object.getPrototypeOf(e.prototype),"equals",this)).call.apply(t,[this].concat(r))}},{key:"isZero",value:function(){return 0===this.hi&&0===this.lo}},{key:"selfSubtract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.isNaN()?this:this.selfAdd(-i.hi,-i.lo)}if("number"==typeof n[0]){var i=n[0];return this.isNaN()?this:this.selfAdd(-i,0)}}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.selfDivide(i.hi,i.lo)}if("number"==typeof n[0]){var i=n[0];return this.selfDivide(i,0)}}else if(2===n.length){var s=n[0],a=n[1],o=null,u=null,l=null,h=null,c=null,g=null,f=null,v=null;return c=this.hi/s,g=e.SPLIT*c,o=g-c,v=e.SPLIT*s,o=g-o,u=c-o,l=v-s,f=c*s,l=v-l,h=s-l,v=o*l-f+o*h+u*l+u*h,g=(this.hi-f-v+this.lo-c*a)/s,v=c+g,this.hi=v,this.lo=c-v+g,this}}},{key:"dump",value:function(){return"DD<"+this.hi+", "+this.lo+">"}},{key:"divide",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0],s=null,a=null,o=null,u=null,l=null,h=null,c=null,g=null;l=this.hi/i.hi,h=e.SPLIT*l,s=h-l,g=e.SPLIT*i.hi,s=h-s,a=l-s,o=g-i.hi,c=l*i.hi,o=g-o,u=i.hi-o,g=s*o-c+s*u+a*o+a*u,h=(this.hi-c-g+this.lo-l*i.lo)/i.hi,g=l+h;var f=g,v=l-g+h;return new e(f,v)}if("number"==typeof n[0]){var i=n[0];return E.isNaN(i)?e.createNaN():e.copy(this).selfDivide(i,0)}}}},{key:"ge",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>=e.lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),r=e.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&r.selfMultiply(n),i/=2,i>0&&(n=n.sqr());else r=n;return 0>t?r.reciprocal():r}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this.hi),n=0;return t===this.hi&&(n=Math.ceil(this.lo)),new e(t,n)}},{key:"compareTo",value:function(e){var t=e;return this.hi<t.hi?-1:this.hi>t.hi?1:this.lo<t.lo?-1:this.lo>t.lo?1:0}},{key:"rint",value:function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()}},{key:"setValue",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.init(i),this}if("number"==typeof n[0]){var i=n[0];return this.init(i),this}}}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this.hi),n=this.hi*t,r=e.valueOf(n),i=this.subtract(r.sqr()),s=i.hi*(.5*t);return r.add(s)}},{key:"selfAdd",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.selfAdd(i.hi,i.lo)}if("number"==typeof n[0]){var i=n[0],s=null,a=null,o=null,u=null,l=null,h=null;return o=this.hi+i,l=o-this.hi,u=o-l,u=i-l+(this.hi-u),h=u+this.lo,s=o+h,a=h+(o-s),this.hi=s+a,this.lo=a+(s-this.hi),this}}else if(2===n.length){var c=n[0],g=n[1],s=null,a=null,f=null,v=null,o=null,u=null,l=null,h=null;o=this.hi+c,f=this.lo+g,l=o-this.hi,h=f-this.lo,u=o-l,v=f-h,u=c-l+(this.hi-u),v=g-h+(this.lo-v),l=u+f,s=o+l,a=l+(o-s),l=v+a;var y=s+l,d=l+(s-y);return this.hi=y,this.lo=d,this}}},{key:"selfMultiply",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.selfMultiply(i.hi,i.lo)}if("number"==typeof n[0]){var i=n[0];return this.selfMultiply(i,0)}}else if(2===n.length){var s=n[0],a=n[1],o=null,u=null,l=null,h=null,c=null,g=null;c=e.SPLIT*this.hi,o=c-this.hi,g=e.SPLIT*s,o=c-o,u=this.hi-o,l=g-s,c=this.hi*s,l=g-l,h=s-l,g=o*l-c+o*h+u*l+u*h+(this.hi*a+this.lo*s);var f=c+g;o=c-f;var v=g+o;return this.hi=f,this.lo=v,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this.hi),n=0;return t===this.hi&&(n=Math.floor(this.lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this.hi,-this.lo)}},{key:"clone",value:function(){try{return _get(Object.getPrototypeOf(e.prototype),"clone",this).call(this)}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}}},{key:"multiply",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return i.isNaN()?e.createNaN():e.copy(this).selfMultiply(i)}if("number"==typeof n[0]){var i=n[0];return E.isNaN(i)?e.createNaN():e.copy(this).selfMultiply(i,0)}}}},{key:"isNaN",value:function(){return E.isNaN(this.hi)}},{key:"intValue",value:function(){return Math.trunc(this.hi)}},{key:"toString",value:function(){var t=e.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!0,n),i=n[0]+1,s=r;if("."===r.charAt(0))s="0"+r;else if(0>i)s="0."+e.stringOfChar("0",-i)+r;else if(-1===r.indexOf(".")){var a=i-r.length,o=e.stringOfChar("0",a);s=r+o+".0"}return this.isNegative()?"-"+s:s}},{key:"reciprocal",value:function(){var t=null,n=null,r=null,i=null,s=null,a=null,o=null,u=null;s=1/this.hi,a=e.SPLIT*s,t=a-s,u=e.SPLIT*this.hi,t=a-t,n=s-t,r=u-this.hi,o=s*this.hi,r=u-r,i=this.hi-r,u=t*r-o+t*i+n*r+n*i,a=(1-o-u-s*this.lo)/this.hi;var l=s+a,h=s-l+a;return new e(l,h)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1),r=this.extractSignificantDigits(!1,n),i=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var s="";r.length>1&&(s=r.substring(1));var a=r.charAt(0)+"."+s;return this.isNegative()?"-"+a+i:a+i}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this.hi>0||0===this.hi&&this.lo>0}},{key:"lt",value:function(e){return this.hi<e.hi||this.hi===e.hi&&this.lo<e.lo}},{key:"add",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return e.copy(this).selfAdd(i)}if("number"==typeof n[0]){var i=n[0];return e.copy(this).selfAdd(i)}}}},{key:"init",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if("number"==typeof n[0]){var i=n[0];this.hi=i,this.lo=0}else if(n[0]instanceof e){var s=n[0];this.hi=s.hi,this.lo=s.lo}}else if(2===n.length){var a=n[0],o=n[1];this.hi=a,this.lo=o}}},{key:"gt",value:function(e){return this.hi>e.hi||this.hi===e.hi&&this.lo>e.lo}},{key:"isNegative",value:function(){return this.hi<0||0===this.hi&&this.lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[N,I,x]}}],[{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if("string"==typeof n[0]){var i=n[0];return e.parse(i)}if("number"==typeof n[0]){var s=n[0];return new e(s)}}}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,r=t.length;F.isWhitespace(t.charAt(n));)n++;var i=!1;if(r>n){var s=t.charAt(n);("-"===s||"+"===s)&&(n++,"-"===s&&(i=!0))}for(var a=new e,o=0,u=0,l=0;;){if(n>=r)break;var h=t.charAt(n);if(n++,F.isDigit(h)){var c=h-"0";a.selfMultiply(e.TEN),a.selfAdd(c),o++}else{if("."!==h){if("e"===h||"E"===h){var g=t.substring(n);try{l=D.parseInt(g)}catch(f){throw f instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+g+" in string "+t):f}finally{}break}throw new NumberFormatException("Unexpected character '"+h+"' at position "+n+" in string "+t)}u=o}}var v=a,y=o-u-l;if(0===y)v=a;else if(y>0){var d=e.TEN.pow(y);v=a.divide(d)}else if(0>y){var d=e.TEN.pow(-y);v=a.multiply(d)}return i?v.negate():v}},{key:"createNaN",value:function(){return new e(E.NaN,E.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return t>=10*i&&(r+=1),r}},{key:"stringOfChar",value:function(e,t){for(var n=new M,r=0;t>r;r++)n.append(e);return n.toString()}}]),e}();G.PI=new G(3.141592653589793,1.2246467991473532e-16),G.TWO_PI=new G(6.283185307179586,2.4492935982947064e-16),G.PI_2=new G(1.5707963267948966,6.123233995736766e-17),G.E=new G(2.718281828459045,1.4456468917292502e-16),G.NaN=new G(E.NaN,E.NaN),G.EPS=1.23259516440783e-32,G.SPLIT=134217729,G.MAX_PRINT_DIGITS=32,G.TEN=G.valueOf(10),G.ONE=G.valueOf(1),G.SCI_NOT_EXPONENT_CHAR="E",G.SCI_NOT_ZERO="0.0E0";var B=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var i=e.orientationIndexFilter(t,n,r);if(1>=i)return i;var s=G.valueOf(n.x).selfAdd(-t.x),a=G.valueOf(n.y).selfAdd(-t.y),o=G.valueOf(r.x).selfAdd(-n.x),u=G.valueOf(r.y).selfAdd(-n.y);return s.selfMultiply(u).selfSubtract(a.selfMultiply(o)).signum()}},{key:"signOfDet2x2",value:function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()}},{key:"intersection",value:function(e,t,n,r){var i=G.valueOf(r.y).selfSubtract(n.y).selfMultiply(G.valueOf(t.x).selfSubtract(e.x)),s=G.valueOf(r.x).selfSubtract(n.x).selfMultiply(G.valueOf(t.y).selfSubtract(e.y)),a=i.subtract(s),o=G.valueOf(r.x).selfSubtract(n.x).selfMultiply(G.valueOf(e.y).selfSubtract(n.y)),u=G.valueOf(r.y).selfSubtract(n.y).selfMultiply(G.valueOf(e.x).selfSubtract(n.x)),l=o.subtract(u),h=l.selfDivide(a).doubleValue(),c=G.valueOf(e.x).selfAdd(G.valueOf(t.x).selfSubtract(e.x).selfMultiply(h)).doubleValue(),g=G.valueOf(t.x).selfSubtract(e.x).selfMultiply(G.valueOf(e.y).selfSubtract(n.y)),f=G.valueOf(t.y).selfSubtract(e.y).selfMultiply(G.valueOf(e.x).selfSubtract(n.x)),v=g.subtract(f),y=v.selfDivide(a).doubleValue(),d=G.valueOf(n.y).selfAdd(G.valueOf(r.y).selfSubtract(n.y).selfMultiply(y)).doubleValue();return new L(c,d)}},{key:"orientationIndexFilter",value:function(t,n,r){var i=null,s=(t.x-r.x)*(n.y-r.y),a=(t.y-r.y)*(n.x-r.x),o=s-a;if(s>0){if(0>=a)return e.signum(o);i=s+a}else{if(!(0>s))return e.signum(o);if(a>=0)return e.signum(o);i=-s-a}var u=e.DP_SAFE_EPSILON*i;return o>=u||-o>=u?e.signum(o):2}},{key:"signum",value:function(e){return e>0?1:0>e?-1:0}}]),e}();B.DP_SAFE_EPSILON=1e-15;var q=function ds(){_classCallCheck(this,ds)},z=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,"Projective point not representable on the Cartesian plane."));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(q),U=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"arraycopy",value:function(e,t,n,r,i){for(var s=0,a=t;t+i>a;a++)n[r+s]=e[a],s++}},{key:"getProperty",value:function(e){return{"line.separator":"\n"}[e]}}]),e}(),Y=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.x=null,this.y=null,this.w=null;var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.x=0,t.y=0,t.w=1;else if(1===r.length){var s=r[0];t.x=s.x,t.y=s.y,t.w=1}else if(2===r.length){if("number"==typeof r[0]&&"number"==typeof r[1]){var a=r[0],o=r[1];t.x=a,t.y=o,t.w=1}else if(r[0]instanceof e&&r[1]instanceof e){var u=r[0],l=r[1];t.x=u.y*l.w-l.y*u.w,t.y=l.x*u.w-u.x*l.w,t.w=u.x*l.y-l.x*u.y}else if(r[0]instanceof L&&r[1]instanceof L){var u=r[0],l=r[1];t.x=u.y-l.y,t.y=l.x-u.x,t.w=u.x*l.y-l.x*u.y}}else if(3===r.length){var a=r[0],o=r[1],h=r[2];t.x=a,t.y=o,t.w=h}else if(4===r.length){var u=r[0],l=r[1],c=r[2],g=r[3],f=u.y-l.y,v=l.x-u.x,y=u.x*l.y-l.x*u.y,d=c.y-g.y,p=g.x-c.x,m=c.x*g.y-g.x*c.y;t.x=v*m-p*y,t.y=d*y-f*m,t.w=f*p-d*v}};return s.apply(this,r)}return _createClass(e,[{key:"getY",value:function(){var e=this.y/this.w;if(E.isNaN(e)||E.isInfinite(e))throw new z;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(E.isNaN(e)||E.isInfinite(e))throw new z;return e}},{key:"getCoordinate",value:function(){var e=new L;return e.x=this.getX(),e.y=this.getY(),e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersection",value:function(e,t,n,r){var i=e.y-t.y,s=t.x-e.x,a=e.x*t.y-t.x*e.y,o=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,h=s*l-u*a,c=o*a-i*l,g=i*u-o*s,f=h/g,v=c/g;if(E.isNaN(f)||E.isInfinite(f)||E.isNaN(v)||E.isInfinite(v))throw new z;return new L(f,v)}}]),e}(),V=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.minx=null,this.maxx=null,this.miny=null,this.maxy=null;var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.init();else if(1===r.length){if(r[0]instanceof L){var s=r[0];t.init(s.x,s.x,s.y,s.y)}else if(r[0]instanceof e){var a=r[0];t.init(a)}}else if(2===r.length){var o=r[0],u=r[1];t.init(o.x,u.x,o.y,u.y)}else if(4===r.length){var l=r[0],h=r[1],c=r[2],g=r[3];t.init(l,h,c,g)}};return s.apply(this,r)}return _createClass(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this.maxx===n.getMaxX()&&this.maxy===n.getMaxY()&&this.minx===n.getMinX()&&this.miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this.minx>t.minx?this.minx:t.minx,r=this.miny>t.miny?this.miny:t.miny,i=this.maxx<t.maxx?this.maxx:t.maxx,s=this.maxy<t.maxy?this.maxy:t.maxy;return new e(n,i,r,s)}},{key:"isNull",value:function(){return this.maxx<this.minx}},{key:"getMaxX",value:function(){return this.maxx}},{key:"covers",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof L){var i=n[0];return this.covers(i.x,i.y)}if(n[0]instanceof e){var s=n[0];return this.isNull()||s.isNull()?!1:s.getMinX()>=this.minx&&s.getMaxX()<=this.maxx&&s.getMinY()>=this.miny&&s.getMaxY()<=this.maxy;
}}else if(2===n.length){var a=n[0],o=n[1];return this.isNull()?!1:a>=this.minx&&a<=this.maxx&&o>=this.miny&&o<=this.maxy}}},{key:"intersects",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.isNull()||i.isNull()?!1:!(i.minx>this.maxx||i.maxx<this.minx||i.miny>this.maxy||i.maxy<this.miny)}if(n[0]instanceof L){var s=n[0];return this.intersects(s.x,s.y)}}else if(2===n.length){var a=n[0],o=n[1];return this.isNull()?!1:!(a>this.maxx||a<this.minx||o>this.maxy||o<this.miny)}}},{key:"getMinY",value:function(){return this.miny}},{key:"getMinX",value:function(){return this.minx}},{key:"expandToInclude",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof L){var i=n[0];this.expandToInclude(i.x,i.y)}else if(n[0]instanceof e){var s=n[0];if(s.isNull())return null;this.isNull()?(this.minx=s.getMinX(),this.maxx=s.getMaxX(),this.miny=s.getMinY(),this.maxy=s.getMaxY()):(s.minx<this.minx&&(this.minx=s.minx),s.maxx>this.maxx&&(this.maxx=s.maxx),s.miny<this.miny&&(this.miny=s.miny),s.maxy>this.maxy&&(this.maxy=s.maxy))}}else if(2===n.length){var a=n[0],o=n[1];this.isNull()?(this.minx=a,this.maxx=a,this.miny=o,this.maxy=o):(a<this.minx&&(this.minx=a),a>this.maxx&&(this.maxx=a),o<this.miny&&(this.miny=o),o>this.maxy&&(this.maxy=o))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return t>e?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this.maxx-this.minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this.minx<t.minx?-1:this.minx>t.minx?1:this.miny<t.miny?-1:this.miny>t.miny?1:this.maxx<t.maxx?-1:this.maxx>t.maxx?1:this.maxy<t.maxy?-1:this.maxy>t.maxy?1:0}},{key:"translate",value:function(e,t){return this.isNull()?null:void this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"toString",value:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"}},{key:"setToNull",value:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1}},{key:"getHeight",value:function(){return this.isNull()?0:this.maxy-this.miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.expandBy(r,r)}else if(2===t.length){var i=t[0],s=t[1];if(this.isNull())return null;this.minx-=i,this.maxx+=i,this.miny-=s,this.maxy+=s,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}}},{key:"contains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.covers(i)}if(n[0]instanceof L){var s=n[0];return this.covers(s)}}else if(2===n.length){var a=n[0],o=n[1];return this.covers(a,o)}}},{key:"centre",value:function(){return this.isNull()?null:new L((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length)this.setToNull();else if(1===n.length){if(n[0]instanceof L){var i=n[0];this.init(i.x,i.x,i.y,i.y)}else if(n[0]instanceof e){var s=n[0];this.minx=s.minx,this.maxx=s.maxx,this.miny=s.miny,this.maxy=s.maxy}}else if(2===n.length){var a=n[0],o=n[1];this.init(a.x,o.x,a.y,o.y)}else if(4===n.length){var u=n[0],l=n[1],h=n[2],c=n[3];l>u?(this.minx=u,this.maxx=l):(this.minx=l,this.maxx=u),c>h?(this.miny=h,this.maxy=c):(this.miny=c,this.maxy=h)}}},{key:"getMaxY",value:function(){return this.maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this.maxx<e.minx?t=e.minx-this.maxx:this.minx>e.maxx&&(t=this.minx-e.maxx);var n=0;return this.maxy<e.miny?n=e.miny-this.maxy:this.miny>e.maxy&&(n=this.miny-e.maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*e+L.hashCode(this.minx),e=37*e+L.hashCode(this.maxx),e=37*e+L.hashCode(this.miny),e=37*e+L.hashCode(this.maxy)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I,N]}}],[{key:"intersects",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(3===t.length){var r=t[0],i=t[1],s=t[2];return s.x>=(r.x<i.x?r.x:i.x)&&s.x<=(r.x>i.x?r.x:i.x)&&s.y>=(r.y<i.y?r.y:i.y)&&s.y<=(r.y>i.y?r.y:i.y)?!0:!1}if(4===t.length){var r=t[0],i=t[1],a=t[2],o=t[3],u=Math.min(a.x,o.x),l=Math.max(a.x,o.x),h=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return h>l?!1:u>c?!1:(u=Math.min(a.y,o.y),l=Math.max(a.y,o.y),h=Math.min(r.y,i.y),c=Math.max(r.y,i.y),h>l?!1:u>c?!1:!0)}}}]),e}();V.serialVersionUID=0x51845cd552189800;var X=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new $e,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}}return _createClass(e,[{key:"read",value:function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);if(-1!==e.search("EMPTY")&&(i=this.regExes.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],this.parse[n]&&(t=this.parse[n].apply(this,[r]))),void 0===t)throw new Error("Could not parse WKT "+e);return t}},{key:"write",value:function(e){return this.extractGeometry(e)}},{key:"extractGeometry",value:function(e){var t=e.getGeometryType().toLowerCase();if(!this.extract[t])return null;var n,r=t.toUpperCase();return n=e.isEmpty()?r+" EMPTY":r+"("+this.extract[t].apply(this,[e])+")"}},{key:"extract",get:function(){return{coordinate:function(e){return e.x+" "+e.y},point:function(e){return this.extract.coordinate.call(this,e.coordinates.coordinates[0])},multipoint:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.point.apply(this,[e.geometries[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(this.extract.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},linearring:function(e){for(var t=[],n=0,r=e.points.coordinates.length;r>n;++n)t.push(this.extract.coordinate.apply(this,[e.points.coordinates[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.linestring.apply(this,[e.geometries[n]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+this.extract.linestring.apply(this,[e.shell])+")");for(var n=0,r=e.holes.length;r>n;++n)t.push("("+this.extract.linestring.apply(this,[e.holes[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push("("+this.extract.polygon.apply(this,[e.geometries[n]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],n=0,r=e.geometries.length;r>n;++n)t.push(this.extractGeometry.apply(this,[e.geometries[n]]));return t.join(",")}}}},{key:"parse",get:function(){return{point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new L(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var t,n=e.trim().split(","),r=[],i=0,s=n.length;s>i;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(r)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,n=e.trim().split(","),r=[],i=0,s=n.length;s>i;++i)t=n[i].trim().split(this.regExes.spaces),r.push(new L(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(r)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,n=e.trim().split(","),r=[],i=0,s=n.length;s>i;++i)t=n[i].trim().split(this.regExes.spaces),r.push(new L(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var t,n=e.trim().split(this.regExes.parenComma),r=[],i=0,s=n.length;s>i;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(r)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var t,n,r,i,s=e.trim().split(this.regExes.parenComma),a=[],o=0,u=s.length;u>o;++o)t=s[o].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]),r=this.geometryFactory.createLinearRing(n.points),0===o?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var t,n=e.trim().split(this.regExes.doubleParenComma),r=[],i=0,s=n.length;s>i;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=t.trim().split("|"),r=[],i=0,s=n.length;s>i;++i)r.push(e.prototype.read.apply(this,[n[i]]));return this.geometryFactory.createGeometryCollection(r)}}}}]),e}(),j=function(){function e(t){_classCallCheck(this,e),this.parser=new X(t)}return _createClass(e,[{key:"write",value:function(e){return this.parser.write(e)}},{key:"toLineString",value:function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}]),e}(),H=function(){function e(){_classCallCheck(this,e),this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.intPt[0]=new L,this.intPt[1]=new L,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0)}return _createClass(e,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new M;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,r){this.inputLines[0][0]=e,this.inputLines[0][1]=t,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(e,t,n,r)}},{key:"getIntersectionNum",value:function(){return this.result}},{key:"computeIntLineIndex",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===t.length){var r=t[0],i=this.getEdgeDistance(r,0),s=this.getEdgeDistance(r,1);i>s?(this.intLineIndex[r][0]=0,this.intLineIndex[r][1]=1):(this.intLineIndex[r][0]=1,this.intLineIndex[r][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"isInteriorIntersection",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.isInteriorIntersection(0)?!0:this.isInteriorIntersection(1)?!0:!1;if(1===t.length){for(var r=t[0],i=0;i<this.result;i++)if(!this.intPt[i].equals2D(this.inputLines[r][0])&&!this.intPt[i].equals2D(this.inputLines[r][1]))return!0;return!1}}},{key:"getIntersection",value:function(e){return this.intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this.result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){var r=e.computeEdgeDistance(this.intPt[n],this.inputLines[t][0],this.inputLines[t][1]);return r}},{key:"isCollinear",value:function(){return this.result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return j.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+j.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this.inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this.result;t++)if(this.intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[e][t]]}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeEdgeDistance",value:function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),s=-1;if(e.equals(t))s=0;else if(e.equals(n))s=r>i?r:i;else{var a=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);s=r>i?a:o,0!==s||e.equals(t)||(s=Math.max(a,o))}return R.isTrue(!(0===s&&!e.equals(t)),"Bad distance calculation"),s}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,s=Math.sqrt(r*r+i*i);return R.isTrue(!(0===s&&!e.equals(t)),"Invalid distance calculation"),s}}]),e}();H.DONT_INTERSECT=0,H.DO_INTERSECT=1,H.COLLINEAR=2,H.NO_INTERSECTION=0,H.POINT_INTERSECTION=1,H.COLLINEAR_INTERSECTION=2;var W=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"isInSegmentEnvelopes",value:function(e){var t=new V(this.inputLines[0][0],this.inputLines[0][1]),n=new V(this.inputLines[1][0],this.inputLines[1][1]);return t.contains(e)&&n.contains(e)}},{key:"computeIntersection",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"computeIntersection",this)).call.apply(e,[this].concat(r));var s=r[0],a=r[1],o=r[2];return this._isProper=!1,V.intersects(a,o,s)&&0===Q.orientationIndex(a,o,s)&&0===Q.orientationIndex(o,a,s)?(this._isProper=!0,(s.equals(a)||s.equals(o))&&(this._isProper=!1),this.result=H.POINT_INTERSECTION,null):void(this.result=H.NO_INTERSECTION)}},{key:"normalizeToMinimum",value:function(e,t,n,r,i){i.x=this.smallestInAbsValue(e.x,t.x,n.x,r.x),i.y=this.smallestInAbsValue(e.y,t.y,n.y,r.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}},{key:"safeHCoordinateIntersection",value:function(e,n,r,i){var s=null;try{s=Y.intersection(e,n,r,i)}catch(a){if(!(a instanceof z))throw a;s=t.nearestEndpoint(e,n,r,i)}finally{}return s}},{key:"intersection",value:function(e,n,r,i){var s=this.intersectionWithNormalization(e,n,r,i);return this.isInSegmentEnvelopes(s)||(s=new L(t.nearestEndpoint(e,n,r,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(s),s}},{key:"smallestInAbsValue",value:function(e,t,n,r){var i=e,s=Math.abs(i);return Math.abs(t)<s&&(i=t,s=Math.abs(t)),Math.abs(n)<s&&(i=n,s=Math.abs(n)),Math.abs(r)<s&&(i=r),i}},{key:"checkDD",value:function(e,t,n,r,i){var s=B.intersection(e,t,n,r),a=this.isInSegmentEnvelopes(s);U.out.println("DD in env = "+a+"  --------------------- "+s),i.distance(s)>1e-4&&U.out.println("Distance = "+i.distance(s))}},{key:"intersectionWithNormalization",value:function(e,t,n,r){var i=new L(e),s=new L(t),a=new L(n),o=new L(r),u=new L;this.normalizeToEnvCentre(i,s,a,o,u);var l=this.safeHCoordinateIntersection(i,s,a,o);return l.x+=u.x,l.y+=u.y,l}},{key:"computeCollinearIntersection",value:function(e,t,n,r){var i=V.intersects(e,t,n),s=V.intersects(e,t,r),a=V.intersects(n,r,e),o=V.intersects(n,r,t);return i&&s?(this.intPt[0]=n,this.intPt[1]=r,H.COLLINEAR_INTERSECTION):a&&o?(this.intPt[0]=e,this.intPt[1]=t,H.COLLINEAR_INTERSECTION):i&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||s||o?H.COLLINEAR_INTERSECTION:H.POINT_INTERSECTION):i&&o?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||s||a?H.COLLINEAR_INTERSECTION:H.POINT_INTERSECTION):s&&a?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||i||o?H.COLLINEAR_INTERSECTION:H.POINT_INTERSECTION):s&&o?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||i||a?H.COLLINEAR_INTERSECTION:H.POINT_INTERSECTION):H.NO_INTERSECTION}},{key:"normalizeToEnvCentre",value:function(e,t,n,r,i){var s=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,o=e.x>t.x?e.x:t.x,u=e.y>t.y?e.y:t.y,l=n.x<r.x?n.x:r.x,h=n.y<r.y?n.y:r.y,c=n.x>r.x?n.x:r.x,g=n.y>r.y?n.y:r.y,f=s>l?s:l,v=c>o?o:c,y=a>h?a:h,d=g>u?u:g,p=(f+v)/2,m=(y+d)/2;i.x=p,i.y=m,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}},{key:"computeIntersect",value:function(e,t,n,r){if(this._isProper=!1,!V.intersects(e,t,n,r))return H.NO_INTERSECTION;var i=Q.orientationIndex(e,t,n),s=Q.orientationIndex(e,t,r);if(i>0&&s>0||0>i&&0>s)return H.NO_INTERSECTION;var a=Q.orientationIndex(n,r,e),o=Q.orientationIndex(n,r,t);if(a>0&&o>0||0>a&&0>o)return H.NO_INTERSECTION;var u=0===i&&0===s&&0===a&&0===o;return u?this.computeCollinearIntersection(e,t,n,r):(0===i||0===s||0===a||0===o?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:0===i?this.intPt[0]=new L(n):0===s?this.intPt[0]=new L(r):0===a?this.intPt[0]=new L(e):0===o&&(this.intPt[0]=new L(t))):(this._isProper=!0,this.intPt[0]=this.intersection(e,t,n,r)),H.POINT_INTERSECTION)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"nearestEndpoint",value:function(e,t,n,r){var i=e,s=Q.distancePointLine(e,n,r),a=Q.distancePointLine(t,n,r);return s>a&&(s=a,i=t),a=Q.distancePointLine(n,e,t),s>a&&(s=a,i=n),a=Q.distancePointLine(r,e,t),s>a&&(s=a,i=r),i}}]),t}(H),K=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(t,n,r){var i=n.x-t.x,s=n.y-t.y,a=r.x-n.x,o=r.y-n.y;return e.signOfDet2x2(i,s,a,o)}},{key:"signOfDet2x2",value:function(e,t,n,r){var i=null,s=null,a=null,o=0;if(i=1,0===e||0===r)return 0===t||0===n?0:t>0?n>0?-i:i:n>0?i:-i;if(0===t||0===n)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?r>=t||(i=-i,s=e,e=n,n=s,s=t,t=r,r=s):-r>=t?(i=-i,n=-n,r=-r):(s=e,e=-n,n=s,s=t,t=-r,r=s):r>0?r>=-t?(i=-i,e=-e,t=-t):(s=-e,e=n,n=s,s=-t,t=r,r=s):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,s=-e,e=-n,n=s,s=-t,t=-r,r=s),e>0){if(!(n>0))return i;if(!(n>=e))return i}else{if(n>0)return-i;if(!(e>=n))return-i;i=-i,e=-e,n=-n}for(;;){if(o+=1,a=Math.floor(n/e),n-=a*e,r-=a*t,0>r)return-i;if(r>t)return i;if(e>n+n){if(r+r>t)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(a=Math.floor(e/n),e-=a*n,t-=a*r,0>t)return i;if(t>r)return-i;if(n>e+e){if(t+t>r)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(0===t)return 0===e?0:i;if(0===e)return-i}}}]),e}(),J=function(){function e(){_classCallCheck(this,e),this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.p=i}}return _createClass(e,[{key:"countSegment",value:function(e,t){if(e.x<this.p.x&&t.x<this.p.x)return null;if(this.p.x===t.x&&this.p.y===t.y)return this.isPointOnSegment=!0,null;if(e.y===this.p.y&&t.y===this.p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(e.y>this.p.y&&t.y<=this.p.y||t.y>this.p.y&&e.y<=this.p.y){var i=e.x-this.p.x,s=e.y-this.p.y,a=t.x-this.p.x,o=t.y-this.p.y,u=K.signOfDet2x2(i,s,a,o);if(0===u)return this.isPointOnSegment=!0,null;s>o&&(u=-u),u>0&&this.crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==P.EXTERIOR}},{key:"getLocation",value:function(){return this.isPointOnSegment?P.BOUNDARY:this.crossingCount%2===1?P.INTERIOR:P.EXTERIOR}},{key:"isOnSegment",value:function(){return this.isPointOnSegment}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"locatePointInRing",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if(n[0]instanceof L&&n[1].interfaces_&&n[1].interfaces_.indexOf(w)>-1){for(var i=n[0],s=n[1],a=new e(i),o=new L,u=new L,l=1;l<s.size();l++)if(s.getCoordinate(l,o),s.getCoordinate(l-1,u),a.countSegment(o,u),a.isOnSegment())return a.getLocation();return a.getLocation()}if(n[0]instanceof L&&n[1]instanceof Array){for(var i=n[0],s=n[1],a=new e(i),l=1;l<s.length;l++){var o=s[l],u=s[l-1];if(a.countSegment(o,u),a.isOnSegment())return a.getLocation()}return a.getLocation()}}}}]),e}(),Q=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"orientationIndex",value:function(e,t,n){return B.orientationIndex(e,t,n)}},{key:"signedArea",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Array){var r=t[0];if(r.length<3)return 0;for(var i=0,s=r[0].x,a=1;a<r.length-1;a++){var o=r[a].x-s,u=r[a+1].y,l=r[a-1].y;i+=o*(l-u)}return i/2}if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){var r=t[0],h=r.size();if(3>h)return 0;var c=new L,g=new L,f=new L;r.getCoordinate(0,g),r.getCoordinate(1,f);var s=g.x;f.x-=s;for(var i=0,a=1;h-1>a;a++)c.y=g.y,g.x=f.x,g.y=f.y,r.getCoordinate(a+1,f),f.x-=s,i+=g.x*(c.y-f.y);return i/2}}}},{key:"distanceLineLine",value:function(t,n,r,i){if(t.equals(n))return e.distancePointLine(t,r,i);if(r.equals(i))return e.distancePointLine(i,t,n);var s=!1;if(V.intersects(t,n,r,i)){var a=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(0===a)s=!0;else{var o=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),u=(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y),l=u/a,h=o/a;(0>h||h>1||0>l||l>1)&&(s=!0)}}else s=!0;return s?T.min(e.distancePointLine(t,r,i),e.distancePointLine(n,r,i),e.distancePointLine(r,t,n),e.distancePointLine(i,t,n)):0}},{key:"isPointInRing",value:function(t,n){return e.locatePointInRing(t,n)!==P.EXTERIOR}},{key:"isCCW",value:function t(n){var r=n.length-1;if(3>r)throw new C("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=n[0],s=0,a=1;r>=a;a++){var o=n[a];o.y>i.y&&(i=o,s=a)}var u=s;do u-=1,0>u&&(u=r);while(n[u].equals2D(i)&&u!==s);var l=s;do l=(l+1)%r;while(n[l].equals2D(i)&&l!==s);var h=n[u],c=n[l];if(h.equals2D(i)||c.equals2D(i)||h.equals2D(c))return!1;var g=e.computeOrientation(h,i,c),t=!1;return t=0===g?h.x>c.x:g>0}},{key:"locatePointInRing",value:function(e,t){return J.locatePointInRing(e,t)}},{key:"distancePointLinePerpendicular",value:function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)}},{key:"computeOrientation",value:function(t,n,r){return e.orientationIndex(t,n,r)}},{key:"length",value:function(e){var t=e.size();if(1>=t)return 0;var n=0,r=new L;e.getCoordinate(0,r);for(var i=r.x,s=r.y,a=1;t>a;a++){e.getCoordinate(a,r);var o=r.x,u=r.y,l=o-i,h=u-s;n+=Math.sqrt(l*l+h*h),i=o,s=u}return n}},{key:"distancePointLine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];if(0===s.length)throw new C("Line array must contain at least one vertex");for(var a=i.distance(s[0]),o=0;o<s.length-1;o++){var u=e.distancePointLine(i,s[o],s[o+1]);a>u&&(a=u)}return a}if(3===n.length){var i=n[0],l=n[1],h=n[2];if(l.x===h.x&&l.y===h.y)return i.distance(l);var c=(h.x-l.x)*(h.x-l.x)+(h.y-l.y)*(h.y-l.y),g=((i.x-l.x)*(h.x-l.x)+(i.y-l.y)*(h.y-l.y))/c;if(0>=g)return i.distance(l);if(g>=1)return i.distance(h);var f=((l.y-i.y)*(h.x-l.x)-(l.x-i.x)*(h.y-l.y))/c;return Math.abs(f)*Math.sqrt(c)}}},{key:"isOnLine",value:function(e,t){for(var n=new W,r=1;r<t.length;r++){var i=t[r-1],s=t[r];if(n.computeIntersection(e,i,s),n.hasIntersection())return!0}return!1}}]),e}();Q.CLOCKWISE=-1,Q.RIGHT=Q.CLOCKWISE,Q.COUNTERCLOCKWISE=1,Q.LEFT=Q.COUNTERCLOCKWISE,Q.COLLINEAR=0,Q.STRAIGHT=Q.COLLINEAR;var Z=function(){function e(){_classCallCheck(this,e),this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i,this.SRID=i.getSRID()}}return _createClass(e,[{key:"isGeometryCollection",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this.factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"union",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return UnaryUnionOp.union(this);if(1===t.length){var r=t[0];if(this.isEmpty()||r.isEmpty()){if(this.isEmpty()&&r.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,this,r,this.factory);if(this.isEmpty())return r.copy();if(r.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),SnapIfNeededOverlayOp.overlayOp(this,r,OverlayOp.UNION)}}},{key:"isValid",value:function(){return IsValidOp.isValid(this)}},{key:"isRectangle",value:function(){return!1}},{key:"equals",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return null===i?!1:this.equalsTopo(i)}if(n[0]instanceof Object){var s=n[0];if(!(s instanceof e))return!1;var a=s;return this.equalsExact(a)}}}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"intersection",value:function(e){if(this.isEmpty()||e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,this,e,this.factory);if(this.isGeometryCollection()){var t=e;return GeometryCollectionMapper.map(this,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"map",value:function(e){return e.intersection(t)}},{key:"interfaces_",get:function(){return[MapOp]}}]),e}()))}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.INTERSECTION)}},{key:"covers",value:function(e){return this.getEnvelopeInternal().covers(e.getEnvelopeInternal())?this.isRectangle()?!0:this.relate(e).isCovers():!1}},{key:"intersects",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects.intersects(this,e):e.isRectangle()?RectangleIntersects.intersects(e,this):this.relate(e).isIntersects():!1}},{key:"touches",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isTouches(this.getDimension(),e.getDimension()):!1}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"within",value:function(e){return e.contains(this)}},{key:"geometryChangedAction",value:function(){this.envelope=null}},{key:"buffer",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return BufferOp.bufferOp(this,r)}if(2===t.length){var r=t[0],i=t[1];return BufferOp.bufferOp(this,r,i)}if(3===t.length){var r=t[0],i=t[1],s=t[2];return BufferOp.bufferOp(this,r,i,s)}}},{key:"equalsNorm",value:function(e){return null===e?!1:this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=r;return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(r)}if(2===t.length){var r=t[0],s=t[1],i=r;return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(r,s)}}},{key:"convexHull",value:function(){return new ConvexHull(this).getConvexHull()}},{key:"equalsTopo",value:function(e){return this.getEnvelopeInternal().equals(e.getEnvelopeInternal())?this.relate(e).isEquals(this.getDimension(),e.getDimension()):!1}},{key:"coveredBy",value:function(e){return e.covers(this)}},{key:"getUserData",value:function(){return this.userData}},{key:"getSRID",value:function(){return this.SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n}},{key:"relate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(r),RelateOp.relate(this,r)}if(2===t.length){var r=t[0],i=t[1];return this.relate(r).matches(i)}}},{key:"overlaps",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isOverlaps(this.getDimension(),e.getDimension()):!1}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"getPrecisionModel",value:function(){return this.factory.getPrecisionModel()}},{key:"getCentroid",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=Centroid.getCentroid(this);return this.createPointFromInternalCoord(e,this)}},{key:"getEnvelopeInternal",value:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new V(this.envelope)}},{key:"isEquivalentClass",value:function(e){return this.name===e.getClass().getName()}},{key:"clone",value:function t(){try{var t=_get(Object.getPrototypeOf(e.prototype),"clone",this).call(this);return null!==t.envelope&&(t.envelope=new V(t.envelope)),t}catch(n){if(n instanceof CloneNotSupportedException)return R.shouldNeverReachHere(),null;throw n}finally{}}},{key:"setSRID",value:function(e){this.SRID=e}},{key:"getInteriorPoint",value:function(){if(this.isEmpty())return this.factory.createPoint();var e=null,t=this.getDimension();if(0===t){var n=new InteriorPointPoint(this);e=n.getInteriorPoint()}else if(1===t){var n=new InteriorPointLine(this);e=n.getInteriorPoint()}else{var n=new InteriorPointArea(this);e=n.getInteriorPoint()}return this.createPointFromInternalCoord(e,this)}},{key:"symDifference",value:function(e){if(this.isEmpty()||e.isEmpty()){if(this.isEmpty()&&e.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,this,e,this.factory);if(this.isEmpty())return e.copy();if(e.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.SYMDIFFERENCE)}},{key:"setUserData",value:function(e){this.userData=e}},{key:"toString",value:function(){return this.toText()}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}},{key:"disjoint",value:function(e){return!this.intersects(e)}},{key:"toText",value:function(){var e=new WKTWriter;return e.write(this)}},{key:"crosses",value:function(e){return this.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?this.relate(e).isCrosses(this.getDimension(),e.getDimension()):!1}},{key:"contains",value:function(e){return this.getEnvelopeInternal().contains(e.getEnvelopeInternal())?this.isRectangle()?RectangleContains.contains(this,e):this.relate(e).isContains():!1}},{key:"difference",value:function(e){return this.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,this,e,this.factory):e.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),
this.checkNotGeometryCollection(e),SnapIfNeededOverlayOp.overlayOp(this,e,OverlayOp.DIFFERENCE))}},{key:"isSimple",value:function(){var e=new IsSimpleOp(this);return e.isSimple()}},{key:"compare",value:function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),s=r.next(),a=i.compareTo(s);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"isWithinDistance",value:function(e,t){var n=this.getEnvelopeInternal().distance(e.getEnvelopeInternal());return n>t?!1:DistanceOp.isWithinDistance(this,e,t)}},{key:"distance",value:function(e){return DistanceOp.distance(this,e)}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getSortIndex()===e.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===e.SORTINDEX_MULTIPOINT||this.getSortIndex()===e.SORTINDEX_MULTILINESTRING||this.getSortIndex()===e.SORTINDEX_MULTIPOLYGON?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[x,I,N]}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}]),e}();Z.serialVersionUID=0x799ea46522854c00,Z.SORTINDEX_POINT=0,Z.SORTINDEX_MULTIPOINT=1,Z.SORTINDEX_LINESTRING=2,Z.SORTINDEX_LINEARRING=3,Z.SORTINDEX_MULTILINESTRING=4,Z.SORTINDEX_POLYGON=5,Z.SORTINDEX_MULTIPOLYGON=6,Z.SORTINDEX_GEOMETRYCOLLECTION=7,Z.geometryChangedFilter=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){e.geometryChangedAction()}},{key:"interfaces_",get:function(){return[GeometryComponentFilter]}}]),e}());var $=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ee=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"Mod2BoundaryNodeRule",get:function(){return te}},{key:"EndPointBoundaryNodeRule",get:function(){return ne}},{key:"MultiValentEndPointBoundaryNodeRule",get:function(){return re}},{key:"MonoValentEndPointBoundaryNodeRule",get:function(){return ie}}]),e}(),te=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e%2===1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ee]}}]),e}(),ne=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e>0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ee]}}]),e}(),re=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return e>1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ee]}}]),e}(),ie=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInBoundary",value:function(e){return 1===e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[ee]}}]),e}();ee.MOD2_BOUNDARY_RULE=new te,ee.ENDPOINT_BOUNDARY_RULE=new ne,ee.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new re,ee.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new ie,ee.OGC_SFS_BOUNDARY_RULE=ee.MOD2_BOUNDARY_RULE,e.prototype.hasNext=function(){},e.prototype.next=function(){},e.prototype.remove=function(){},t.prototype.add=function(){},t.prototype.addAll=function(){},t.prototype.isEmpty=function(){},t.prototype.iterator=function(){},t.prototype.size=function(){},t.prototype.toArray=function(){},t.prototype.remove=function(){},n.prototype=new Error,n.prototype.name="IndexOutOfBoundsException",r.prototype=new t,r.prototype.get=function(){},r.prototype.set=function(){},r.prototype.isEmpty=function(){},i.prototype=new Error,i.prototype.name="NoSuchElementException",s.prototype=new Error,s.prototype.name="OperationNotSupported";var se=function(e){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return e.array_=[],arguments[0]instanceof t&&e.addAll(arguments[0]),e}return _inherits(n,e),_createClass(n,[{key:"ensureCapacity",value:function(){}},{key:"interfaces_",get:function(){return[r,t]}}]),n}(r);se.prototype.add=function(e){return this.array_.push(e),!0},se.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},se.prototype.set=function(e,t){var n=this.array_[e];return this.array_[e]=t,n},se.prototype.iterator=function(){return new ae(this)},se.prototype.get=function(e){if(0>e||e>=this.size())throw new n;return this.array_[e]},se.prototype.isEmpty=function(){return 0===this.array_.length},se.prototype.size=function(){return this.array_.length},se.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},se.prototype.remove=function(e){for(var t=!1,n=0,r=this.array_.length;r>n;n++)if(this.array_[n]===e){this.array_.splice(n,1),t=!0;break}return t};var ae=function(e){this.arrayList_=e,this.position_=0};ae.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},ae.prototype.hasNext=function(){return this.position_<this.arrayList_.size()?!0:!1},ae.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},ae.prototype.remove=function(){throw new s};var oe=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 0===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n))}.apply(void 0,r):1===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];a.ensureCapacity(r.length),a.add(r,!0)}.apply(void 0,r):2===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];a.ensureCapacity(r.length),a.add(r,i)}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){for(var s=r[0],a=r[1],o=!1,u=s.iterator();u.hasNext();)this.add(u.next(),a),o=!0;return o}return(e=_get(Object.getPrototypeOf(t.prototype),"addAll",this)).call.apply(e,[this].concat(r))}},{key:"clone",value:function n(){for(var n=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this),e=0;e<this.size();e++)n.add(e,this.get(e).copy());return n}},{key:"toCoordinateArray",value:function(){return this.toArray(t.coordArrayType)}},{key:"add",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];_get(Object.getPrototypeOf(t.prototype),"add",this).call(this,i)}else if(2===n.length){if(n[0]instanceof Array&&"boolean"==typeof n[1]){var i=n[0],s=n[1];return this.add(i,s,!0),!0}if(n[0]instanceof L&&"boolean"==typeof n[1]){var i=n[0],s=n[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(i))return null}_get(Object.getPrototypeOf(t.prototype),"add",this).call(this,i)}else if(n[0]instanceof Object&&"boolean"==typeof n[1]){var o=n[0],s=n[1];return this.add(o,s),!0}}else if(3===n.length){if("boolean"==typeof n[2]&&n[0]instanceof Array&&"boolean"==typeof n[1]){var i=n[0],s=n[1],u=n[2];if(u)for(var l=0;l<i.length;l++)this.add(i[l],s);else for(var l=i.length-1;l>=0;l--)this.add(i[l],s);return!0}if("boolean"==typeof n[2]&&Number.isInteger(n[0])&&n[1]instanceof L){var h=n[0],i=n[1],s=n[2];if(!s){var c=this.size();if(c>0){if(h>0){var g=this.get(h-1);if(g.equals2D(i))return null}if(c>h){var f=this.get(h);if(f.equals2D(i))return null}}}_get(Object.getPrototypeOf(t.prototype),"add",this).call(this,h,i)}}else if(4===n.length){var i=n[0],s=n[1],v=n[2],y=n[3],d=1;v>y&&(d=-1);for(var l=v;l!==y;l+=d)this.add(i[l],s);return!0}}},{key:"closeRing",value:function(){this.size()>0&&this.add(new L(this.get(0)),!1)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(se);oe.coordArrayType=new Array(0);var ue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isRing",value:function(e){return e.length<4?!1:e[0].equals2D(e[e.length-1])?!0:!1}},{key:"ptNotInList",value:function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.indexOf(i,n)<0)return i}return null}},{key:"scroll",value:function(t,n){var r=e.indexOf(n,t);if(0>r)return null;var i=new Array(t.length);U.arraycopy(t,r,i,0,t.length-r),U.arraycopy(t,0,i,t.length-r,r),U.arraycopy(i,0,t,0,t.length)}},{key:"equals",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!r[s].equals(i[s]))return!1;return!0}if(3===t.length){var r=t[0],i=t[1],a=t[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==a.compare(r[s],i[s]))return!1;return!0}}},{key:"intersection",value:function(e,t){for(var n=new oe,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){if(!e.hasRepeatedPoints(t))return t;var n=new oe(t,!1);return n.toCoordinateArray()}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;n>=r;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}}},{key:"removeNull",value:function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t);if(0===t)return r;for(var i=0,n=0;n<e.length;n++)null!==e[n]&&(r[i++]=e[n]);return r}},{key:"copyDeep",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var r=t[0],i=new Array(r.length),s=0;s<r.length;s++)i[s]=new L(r[s]);return i}if(5===t.length)for(var a=t[0],o=t[1],u=t[2],l=t[3],h=t[4],s=0;h>s;s++)u[l+s]=new L(a[o+s])}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(0!==r.compareTo(i))return!1}return!0}},{key:"envelope",value:function(e){for(var t=new V,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1}},{key:"compare",value:function t(e,n){for(var r=0;r<e.length&&r<n.length;){var t=e[r].compareTo(n[r]);if(0!==t)return t;r++}return r<n.length?-1:r<e.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=T.clamp(t,0,e.length),n=T.clamp(n,-1,e.length);var r=n-t+1;0>n&&(r=0),t>=e.length&&(r=0),t>n&&(r=0);var i=new Array(r);if(0===r)return i;for(var s=0,a=t;n>=a;a++)i[s++]=e[a];return i}},{key:"ForwardComparator",get:function(){return le}},{key:"BidirectionalComparator",get:function(){return he}}]),e}(),le=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t;return ue.compare(n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[_]}}]),e}(),he=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;var s=ue.compare(r,i),a=e.isEqualReversed(r,i);return a?0:s}},{key:"OLDcompare",value:function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;for(var s=e.increasingDirection(r),a=e.increasingDirection(i),o=s>0?0:r.length-1,u=a>0?0:r.length-1,l=0;l<r.length;l++){var h=r[o].compareTo(i[u]);if(0!==h)return h;o+=s,u+=a}return 0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[_]}}]),e}();ue.coordArrayType=new Array(0),a.prototype.get=function(){},a.prototype.put=function(){},a.prototype.size=function(){},a.prototype.values=function(){},a.prototype.entrySet=function(){},o.prototype=new a,u.prototype=new t,u.prototype.contains=function(){},l.prototype=new u,l.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(r===e)return!0}return!1},l.prototype.add=function(e){return this.contains(e)?!1:(this.array_.push(e),!0)},l.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},l.prototype.remove=function(e){throw new javascript.util.OperationNotSupported},l.prototype.size=function(){return this.array_.length},l.prototype.isEmpty=function(){return 0===this.array_.length},l.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},l.prototype.iterator=function(){return new ce(this)};var ce=function(e){this.hashSet_=e,this.position_=0};ce.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},ce.prototype.hasNext=function(){return this.position_<this.hashSet_.size()?!0:!1},ce.prototype.remove=function(){throw new s};var ge=0,fe=1,ve=function(e){return null==e?ge:e.color},ye=function(e){return null==e?null:e.parent},de=function(e,t){null!==e&&(e.color=t)},pe=function(e){return null==e?null:e.left},me=function(e){return null==e?null:e.right};h.prototype=new o,h.prototype.get=function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(0>n)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null},h.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:ge,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do if(n=i,r=e.compareTo(i.key),0>r)i=i.left;else{if(!(r>0)){var s=i.value;return i.value=t,s}i=i.right}while(null!==i);var a={key:e,left:null,right:null,value:t,parent:n,color:ge,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>r?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(e){for(e.color=fe;null!=e&&e!=this.root_&&e.parent.color==fe;)if(ye(e)==pe(ye(ye(e)))){var t=me(ye(ye(e)));ve(t)==fe?(de(ye(e),ge),de(t,ge),de(ye(ye(e)),fe),e=ye(ye(e))):(e==me(ye(e))&&(e=ye(e),this.rotateLeft(e)),de(ye(e),ge),de(ye(ye(e)),fe),this.rotateRight(ye(ye(e))))}else{var t=pe(ye(ye(e)));ve(t)==fe?(de(ye(e),ge),de(t,ge),de(ye(ye(e)),fe),e=ye(ye(e))):(e==pe(ye(e))&&(e=ye(e),this.rotateRight(e)),de(ye(e),ge),de(ye(ye(e)),fe),this.rotateLeft(ye(ye(e))))}this.root_.color=ge},h.prototype.values=function(){var e=new se,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=h.successor(t));)e.add(t.value);return e},h.prototype.entrySet=function(){var e=new l,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=h.successor(t));)e.add(t);return e},h.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left==e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},h.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right==e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},h.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},h.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var t=e.parent,n=e;null!==t&&n===t.right;)n=t,t=t.parent;return t},h.prototype.size=function(){return this.size_};var ke=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();c.prototype=new u,g.prototype=new c,g.prototype.contains=function(e){for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(0===r.compareTo(e))return!0}return!1},g.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,n=this.array_.length;n>t;t++){var r=this.array_[t];if(1===r.compareTo(e))return this.array_.splice(t,0,e),!0}return this.array_.push(e),!0},g.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},g.prototype.remove=function(e){throw new s},g.prototype.size=function(){return this.array_.length},g.prototype.isEmpty=function(){return 0===this.array_.length},g.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e},g.prototype.iterator=function(){return new Ce(this)};var Ce=function(e){this.treeSet_=e,this.position_=0};Ce.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Ce.prototype.hasNext=function(){return this.position_<this.treeSet_.size()?!0:!1},Ce.prototype.remove=function(){throw new s},f.sort=function(){var e,t,n,r,i=arguments[0];if(1===arguments.length)return r=function(e,t){return e.compareTo(t)},void i.sort(r);if(2===arguments.length)n=arguments[1],r=function(e,t){return n.compare(e,t)},i.sort(r);else{if(3===arguments.length){t=i.slice(arguments[1],arguments[2]),t.sort();var s=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length));for(i.splice(0,i.length),e=0;e<s.length;e++)i.push(s[e]);return}if(4===arguments.length){for(t=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(e,t){return n.compare(e,t)},t.sort(r),s=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length)),i.splice(0,i.length),e=0;e<s.length;e++)i.push(s[e]);return}}},f.asList=function(e){for(var t=new se,n=0,r=e.length;r>n;n++)t.add(e[n]);return t};var Ee=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ie=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new C("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(F.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new C("Unknown dimension symbol: "+t)}}]),e}();Ie.P=0,Ie.L=1,Ie.A=2,Ie.FALSE=-1,Ie.TRUE=-2,Ie.DONTCARE=-3,Ie.SYM_FALSE="F",Ie.SYM_TRUE="T",Ie.SYM_DONTCARE="*",Ie.SYM_P="0",Ie.SYM_L="1",Ie.SYM_A="2";var xe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),_e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ne=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.geometries=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a));if(null===s&&(s=[]),t.hasNullElements(s))throw new C("geometries must not contain null elements");e.geometries=s}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new V,t=0;t<this.geometries.length;t++)e.expandToInclude(this.geometries[t].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this.geometries[e]}},{key:"getSortIndex",value:function(){return Z.SORTINDEX_GEOMETRYCOLLECTION}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()),t=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),i=0;i<r.length;i++)t++,e[t]=r[i];return e}},{key:"getArea",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getArea();return e}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];if(!this.isEquivalentClass(s))return!1;var o=s;if(this.geometries.length!==o.geometries.length)return!1;for(var u=0;u<this.geometries.length;u++)if(!this.geometries[u].equalsExact(o.geometries[u],a))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<this.geometries.length;e++)this.geometries[e].normalize();f.sort(this.geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=Ie.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getBoundaryDimension());return e}},{key:"getDimension",value:function(){for(var e=Ie.FALSE,t=0;t<this.geometries.length;t++)e=Math.max(e,this.geometries[t].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,t=0;t<this.geometries.length;t++)e+=this.geometries[t].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this.geometries.length}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(t)}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=new g(f.asList(this.geometries)),s=new g(f.asList(r.geometries));return this.compare(i,s)}if(2===t.length){for(var r=t[0],a=t[1],o=r,u=this.getNumGeometries(),l=o.getNumGeometries(),h=0;u>h&&l>h;){var c=this.getGeometryN(h),v=o.getGeometryN(h),y=c.compareToSameClass(v,a);if(0!==y)return y;h++}return u>h?1:l>h?-1:0}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf($)>-1)for(var r=t[0],i=0;i<this.geometries.length;i++)this.geometries[i].apply(r);else if(t[0].interfaces_&&t[0].interfaces_.indexOf(_e)>-1){var r=t[0];if(0===this.geometries.length)return null;for(var i=0;i<this.geometries.length&&(this.geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(xe)>-1){var r=t[0];r.filter(this);for(var i=0;i<this.geometries.length;i++)this.geometries[i].apply(r)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(Ee)>-1){var r=t[0];r.filter(this);for(var i=0;i<this.geometries.length;i++)this.geometries[i].apply(r)}}},{key:"getBoundary",value:function(){return this.checkNotGeometryCollection(this),R.shouldNeverReachHere(),null}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.geometries=new Array(this.geometries.length);for(var n=0;n<this.geometries.length;n++)e.geometries[n]=this.geometries[n].clone();return e}},{key:"getGeometryType",value:function(){return"GeometryCollection"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"isEmpty",value:function(){for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isEmpty())return!1;return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Z);Ne.serialVersionUID=-0x4f07bcb1f857d800;var Se=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Z.SORTINDEX_MULTILINESTRING}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];return this.isEquivalentClass(s)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,s,a):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ie.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this.geometries.length;e++)if(!this.geometries[e].isClosed())return!1;return!0}},{key:"getDimension",value:function(){return 1}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[e-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(t)}},{key:"getBoundary",value:function(){return new Oe(this).getBoundary()}},{key:"getGeometryType",value:function(){return"MultiLineString"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ke]}}]),t}(Ne);Se.serialVersionUID=0x7155d2ab4afa8000;var Oe=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];a.call(t,i,ee.MOD2_BOUNDARY_RULE)}else if(2===n.length){var i=n[0],s=n[1];t.geom=i,t.geomFact=i.getFactory(),t.bnRule=s}};return s.apply(this,r)}return _createClass(e,[{key:"boundaryMultiLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this.geomFact.createPoint(t[0]):this.geomFact.createMultiPointFromCoords(t)}},{key:"getBoundary",value:function(){return this.geom instanceof Fe?this.boundaryLineString(this.geom):this.geom instanceof Se?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()}},{key:"boundaryLineString",value:function(e){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this.bnRule.isInBoundary(2);return t?e.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])}},{key:"getEmptyMultiPoint",value:function(){return this.geomFact.createMultiPoint()}},{key:"computeBoundaryCoordinates",value:function(e){var t=new se;this.endpointMap=new h;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this.endpointMap.entrySet().iterator();i.hasNext();){var s=i.next(),a=s.getValue(),o=a.count;this.bnRule.isInBoundary(o)&&t.add(s.getKey())}return ue.toCoordinateArray(t)}},{key:"addEndpoint",value:function(e){var t=this.endpointMap.get(e);null===t&&(t=new Re,this.endpointMap.put(e,t)),t.count++}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBoundary",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],s=new e(i);return s.getBoundary()}if(2===n.length){var i=n[0],a=n[1],s=new e(i,a);return s.getBoundary()}}}]),e}(),Re=function(){function e(){_classCallCheck(this,e),this.count=null}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Le=function ps(){_classCallCheck(this,ps)},Ae=function ms(){_classCallCheck(this,ms)},we=function ks(){_classCallCheck(this,ks)},be=function Cs(){_classCallCheck(this,Cs)},Pe=function Es(){_classCallCheck(this,Es)},Te=function Is(){_classCallCheck(this,Is)},Me=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"chars",value:function(e,t){for(var n=new Array(t),r=0;t>r;r++)n[r]=e;return new String(n)}},{key:"getStackTrace",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],s=new be,a=new Le(s);return i.printStackTrace(a),s.toString()}if(2===n.length){for(var i=n[0],o=n[1],u="",l=new Ae(e.getStackTrace(i)),h=new Te(l),c=0;o>c;c++)try{u+=h.readLine()+e.NEWLINE}catch(g){if(!(g instanceof Pe))throw g;R.shouldNeverReachHere()}finally{}return u}}},{key:"split",value:function(e,t){for(var n=t.length,r=new se,i=""+e,s=i.indexOf(t);s>=0;){var a=i.substring(0,s);r.add(a),i=i.substring(s+n),s=i.indexOf(t)}i.length>0&&r.add(i);for(var o=new Array(r.size()),u=0;u<o.length;u++)o[u]=r.get(u);return o}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return e.SIMPLE_ORDINATE_FORMAT.format(s)}return(t=_get(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"spaces",value:function(t){return e.chars(" ",t)}}]),e}();Me.NEWLINE=U.getProperty("line.separator"),Me.SIMPLE_ORDINATE_FORMAT=new we("0.#");var De=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoord",value:function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),s=0;i>s;s++)n.setOrdinate(r,s,e.getOrdinate(t,s))}},{key:"isRing",value:function(e){var t=e.size();return 0===t?!0:3>=t?!1:e.getOrdinate(0,w.X)===e.getOrdinate(t-1,w.X)&&e.getOrdinate(0,w.Y)===e.getOrdinate(t-1,w.Y)}},{key:"isEqual",value:function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),s=0;n>s;s++)for(var a=0;i>a;a++){var o=e.getOrdinate(s,a),u=t.getOrdinate(s,a);if(!(e.getOrdinate(s,a)===t.getOrdinate(s,a)||E.isNaN(o)&&E.isNaN(u)))return!1}return!0}},{key:"extend",value:function(t,n,r){var i=t.create(r,n.getDimension()),s=n.size();if(e.copy(n,0,i,0,s),s>0)for(var a=s;r>a;a++)e.copy(n,s-1,i,a,1);return i}},{key:"reverse",value:function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;r>=i;i++)e.swap(t,i,n-i)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);
e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}}},{key:"copy",value:function(t,n,r,i,s){for(var a=0;s>a;a++)e.copyCoord(t,n+a,r,i+a)}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0],a=s.size();if(0===a)return"()";var o=s.getDimension(),u=new M;u.append("(");for(var l=0;a>l;l++){l>0&&u.append(" ");for(var h=0;o>h;h++)h>0&&u.append(","),u.append(Me.toString(s.getOrdinate(l,h)))}return u.append(")"),u.toString()}return(t=_get(Object.getPrototypeOf(e),"toString",this)).call.apply(t,[this].concat(r))}},{key:"ensureValidRing",value:function(t,n){var r=n.size();if(0===r)return n;if(3>=r)return e.createClosedRing(t,n,4);var i=n.getOrdinate(0,w.X)===n.getOrdinate(r-1,w.X)&&n.getOrdinate(0,w.Y)===n.getOrdinate(r-1,w.Y);return i?n:e.createClosedRing(t,n,r+1)}},{key:"createClosedRing",value:function(t,n,r){var i=t.create(r,n.getDimension()),s=n.size();e.copy(n,0,i,0,s);for(var a=s;r>a;a++)e.copy(n,0,i,a,1);return i}}]),e}(),Fe=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.points=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a));e.init(s)}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new V:this.points.expandEnvelope(new V)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getSortIndex",value:function(){return Z.SORTINDEX_LINESTRING}},{key:"getCoordinates",value:function(){return this.points.toCoordinateArray()}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];if(!this.isEquivalentClass(s))return!1;var o=s;if(this.points.size()!==o.points.size())return!1;for(var u=0;u<this.points.size();u++)if(!this.equal(this.points.getCoordinate(u),o.points.getCoordinate(u),a))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this.points.size()/2);e++){var t=this.points.size()-1-e;if(!this.points.getCoordinate(e).equals(this.points.getCoordinate(t)))return this.points.getCoordinate(e).compareTo(this.points.getCoordinate(t))>0&&De.reverse(this.points),null}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this.points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ie.FALSE:0}},{key:"isClosed",value:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Q.length(this.points)}},{key:"getNumPoints",value:function(){return this.points.size()}},{key:"reverse",value:function(){var e=this.points.clone();De.reverse(e);var t=this.getFactory().createLineString(e);return t}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var r=t[0],i=r,s=0,a=0;s<this.points.size()&&a<i.points.size();){var o=this.points.getCoordinate(s).compareTo(i.points.getCoordinate(a));if(0!==o)return o;s++,a++}return s<this.points.size()?1:a<i.points.size()?-1:0}if(2===t.length){var r=t[0],u=t[1],i=r;return u.compare(this.points,i.points)}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf($)>-1)for(var r=t[0],i=0;i<this.points.size();i++)r.filter(this.points.getCoordinate(i));else if(t[0].interfaces_&&t[0].interfaces_.indexOf(_e)>-1){var r=t[0];if(0===this.points.size())return null;for(var i=0;i<this.points.size()&&(r.filter(this.points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(xe)>-1){var r=t[0];r.filter(this)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(Ee)>-1){var r=t[0];r.filter(this)}}},{key:"getBoundary",value:function(){return new Oe(this).getBoundary()}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.points=this.points.clone(),e}},{key:"getCoordinateN",value:function(e){return this.points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return"LineString"}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.points}},{key:"isEmpty",value:function(){return 0===this.points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new C("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this.points=e}},{key:"isCoordinate",value:function(e){for(var t=0;t<this.points.size();t++)if(this.points.getCoordinate(t).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this.points.getCoordinate(e))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[ke]}}]),t}(Z);Fe.serialVersionUID=0x2b2b51ba435c8e00;var Ge=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Be=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.coordinates=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,a));e.init(s)}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new V;var e=new V;return e.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),e}},{key:"getSortIndex",value:function(){return Z.SORTINDEX_POINT}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];return this.isEquivalentClass(s)?this.isEmpty()&&s.isEmpty()?!0:this.isEmpty()!==s.isEmpty()?!1:this.equal(s.getCoordinate(),this.getCoordinate(),a):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Ie.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"reverse",value:function(){return this.copy()}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}if(2===t.length){var r=t[0],s=t[1],i=r;return s.compare(this.coordinates,i.coordinates)}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf($)>-1){var r=t[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(_e)>-1){var r=t[0];if(this.isEmpty())return null;r.filter(this.coordinates,0),r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(xe)>-1){var r=t[0];r.filter(this)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(Ee)>-1){var r=t[0];r.filter(this)}}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);return e.coordinates=this.coordinates.clone(),e}},{key:"getGeometryType",value:function(){return"Point"}},{key:"copy",value:function(){return new t(this.coordinates.copy(),this.factory)}},{key:"getCoordinateSequence",value:function(){return this.coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this.coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),R.isTrue(e.size()<=1),this.coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ge]}}]),t}(Z);Be.serialVersionUID=0x44077bad161cbc00;var qe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ze=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.shell=null,e.holes=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3===r.length){var s=r[0],a=r[1],o=r[2],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,o));if(null===s&&(s=e.getFactory().createLinearRing()),null===a&&(a=[]),t.hasNullElements(a))throw new C("holes must not contain null elements");if(s.isEmpty()&&t.hasNonEmptyElements(a))throw new C("shell is empty but holes are not");e.shell=s,e.holes=a}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeEnvelopeInternal",value:function(){return this.shell.getEnvelopeInternal()}},{key:"getSortIndex",value:function(){return Z.SORTINDEX_POLYGON}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()),t=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)t++,e[t]=n[r];for(var i=0;i<this.holes.length;i++)for(var s=this.holes[i].getCoordinates(),a=0;a<s.length;a++)t++,e[t]=s[a];return e}},{key:"getArea",value:function(){var e=0;e+=Math.abs(Q.signedArea(this.shell.getCoordinateSequence()));for(var t=0;t<this.holes.length;t++)e-=Math.abs(Q.signedArea(this.holes[t].getCoordinateSequence()));return e}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var e=this.shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;5>n;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var i=e.getY(n);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var s=e.getX(0),a=e.getY(0),n=1;4>=n;n++){var r=e.getX(n),i=e.getY(n),o=r!==s,u=i!==a;if(o===u)return!1;s=r,a=i}return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];if(!this.isEquivalentClass(s))return!1;var o=s,u=this.shell,l=o.shell;if(!u.equalsExact(l,a))return!1;if(this.holes.length!==o.holes.length)return!1;for(var h=0;h<this.holes.length;h++)if(!this.holes[h].equalsExact(o.holes[h],a))return!1;return!0}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"normalize",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){this.normalize(this.shell,!0);for(var r=0;r<this.holes.length;r++)this.normalize(this.holes[r],!1);f.sort(this.holes)}else if(2===t.length){var i=t[0],s=t[1];if(i.isEmpty())return null;var a=new Array(i.getCoordinates().length-1);U.arraycopy(i.getCoordinates(),0,a,0,a.length);var o=ue.minCoordinate(i.getCoordinates());ue.scroll(a,o),U.arraycopy(a,0,i.getCoordinates(),0,a.length),i.getCoordinates()[a.length]=a[0],Q.isCCW(i.getCoordinates())===s&&ue.reverse(i.getCoordinates())}}},{key:"getCoordinate",value:function(){return this.shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this.holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this.shell.getLength();for(var t=0;t<this.holes.length;t++)e+=this.holes[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this.shell.getNumPoints(),t=0;t<this.holes.length;t++)e+=this.holes[t].getNumPoints();return e}},{key:"reverse",value:function(){var e=this.copy();e.shell=this.shell.clone().reverse(),e.holes=new Array(this.holes.length);for(var t=0;t<this.holes.length;t++)e.holes[t]=this.holes[t].clone().reverse();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"compareToSameClass",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=this.shell,s=r.shell;return i.compareToSameClass(s)}if(2===t.length){var r=t[0],a=t[1],o=r,i=this.shell,s=o.shell,u=i.compareToSameClass(s,a);if(0!==u)return u;for(var l=this.getNumInteriorRing(),h=o.getNumInteriorRing(),c=0;l>c&&h>c;){var g=this.getInteriorRingN(c),f=o.getInteriorRingN(c),v=g.compareToSameClass(f,a);if(0!==v)return v;c++}return l>c?1:h>c?-1:0}}},{key:"apply",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0].interfaces_&&t[0].interfaces_.indexOf($)>-1){var r=t[0];this.shell.apply(r);for(var i=0;i<this.holes.length;i++)this.holes[i].apply(r)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(_e)>-1){var r=t[0];if(this.shell.apply(r),!r.isDone())for(var i=0;i<this.holes.length&&(this.holes[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(xe)>-1){var r=t[0];r.filter(this)}else if(t[0].interfaces_&&t[0].interfaces_.indexOf(Ee)>-1){var r=t[0];r.filter(this),this.shell.apply(r);for(var i=0;i<this.holes.length;i++)this.holes[i].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this.holes.length+1);e[0]=this.shell;for(var t=0;t<this.holes.length;t++)e[t+1]=this.holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"clone",value:function(){var e=_get(Object.getPrototypeOf(t.prototype),"clone",this).call(this);e.shell=this.shell.clone(),e.holes=new Array(this.holes.length);for(var n=0;n<this.holes.length;n++)e.holes[n]=this.holes[n].clone();return e}},{key:"getGeometryType",value:function(){return"Polygon"}},{key:"copy",value:function(){for(var e=this.shell.copy(),n=new Array(this.holes.length),r=0;r<n.length;r++)n[r]=this.holes[r].copy();return new t(e,n,this.factory)}},{key:"getExteriorRing",value:function(){return this.shell}},{key:"isEmpty",value:function(){return this.shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this.holes[e]}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[qe]}}]),t}(Z);ze.serialVersionUID=-0x307ffefd8dc97200;var Ue=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Z.SORTINDEX_MULTIPOINT}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];return this.isEquivalentClass(s)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,s,a):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getCoordinate",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return this.geometries[s].getCoordinate()}return(e=_get(Object.getPrototypeOf(t.prototype),"getCoordinate",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return Ie.FALSE}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection(null)}},{key:"getGeometryType",value:function(){return"MultiPoint"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[Ge]}}]),t}(Ne);Ue.serialVersionUID=-0x6fb1ed4162e0fc00;var Ye=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function u(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];if(2===r.length){if(r[0]instanceof L&&r[1]instanceof $e)return function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];u.call(a,i.getCoordinateSequenceFactory().create(r),i)}.apply(void 0,r);if(r[0].interfaces_&&r[0].interfaces_.indexOf(w)>-1&&r[1]instanceof $e)return function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0],a=r[1],o=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s,a));o.validateConstruction()}.apply(void 0,r)}};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Z.SORTINDEX_LINEARRING}},{key:"getBoundaryDimension",value:function(){return Ie.FALSE}},{key:"isClosed",value:function(){return this.isEmpty()?!0:_get(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this)}},{key:"reverse",value:function(){var e=this.points.clone();De.reverse(e);var t=this.getFactory().createLinearRing(e);return t}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!_get(Object.getPrototypeOf(t.prototype),"isClosed",this).call(this))throw new C("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new C("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return"LinearRing"}},{key:"copy",value:function(){return new t(this.points.copy(),this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Fe);Ye.MINIMUM_VALID_SIZE=4,Ye.serialVersionUID=-0x3b229e262367a600;var Ve=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getSortIndex",value:function(){return Z.SORTINDEX_MULTIPOLYGON}},{key:"equalsExact",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];return this.isEquivalentClass(s)?_get(Object.getPrototypeOf(t.prototype),"equalsExact",this).call(this,s,a):!1}return(e=_get(Object.getPrototypeOf(t.prototype),"equalsExact",this)).call.apply(e,[this].concat(r))}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getDimension",value:function(){return 2}},{key:"reverse",value:function(){for(var e=this.geometries.length,t=new Array(e),n=0;n<this.geometries.length;n++)t[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(t)}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new se,t=0;t<this.geometries.length;t++)for(var n=this.geometries[t],r=n.getBoundary(),i=0;i<r.getNumGeometries();i++)e.add(r.getGeometryN(i));var s=new Array(e.size());return this.getFactory().createMultiLineString(e.toArray(s))}},{key:"getGeometryType",value:function(){return"MultiPolygon"}},{key:"copy",value:function(){for(var e=new Array(this.geometries.length),n=0;n<e.length;n++)e[n]=this.geometries[n].copy();return new t(e,this.factory)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[qe]}}]),t}(Ne);Ve.serialVersionUID=-0x7a5aa1369171980;var Xe=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.factory=null,this.isUserDataCopied=!1;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.factory=i}};return s.apply(this,r)}return _createClass(e,[{key:"setCopyUserData",value:function(e){this.isUserDataCopied=e}},{key:"edit",value:function(e,t){if(null===e)return null;var n=this.editInternal(e,t);return this.isUserDataCopied&&n.setUserData(e.getUserData()),n}},{key:"editInternal",value:function(e,t){return null===this.factory&&(this.factory=e.getFactory()),e instanceof Ne?this.editGeometryCollection(e,t):e instanceof ze?this.editPolygon(e,t):e instanceof Be?t.edit(e,this.factory):e instanceof Fe?t.edit(e,this.factory):(R.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)}},{key:"editGeometryCollection",value:function(e,t){for(var n=t.edit(e,this.factory),r=new se,i=0;i<n.getNumGeometries();i++){var s=this.edit(n.getGeometryN(i),t);null===s||s.isEmpty()||r.add(s)}return n.getClass()===Ue?this.factory.createMultiPoint(r.toArray([])):n.getClass()===Se?this.factory.createMultiLineString(r.toArray([])):n.getClass()===Ve?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))}},{key:"editPolygon",value:function(e,t){var n=t.edit(e,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),t);if(null===r||r.isEmpty())return this.factory.createPolygon();for(var i=new se,s=0;s<n.getNumInteriorRing();s++){var a=this.edit(n.getInteriorRingN(s),t);null===a||a.isEmpty()||i.add(a)}return this.factory.createPolygon(r,i.toArray([]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"NoOpGeometryOperation",get:function(){return je}},{key:"CoordinateOperation",get:function(){return He}},{key:"CoordinateSequenceOperation",get:function(){return We}}]),e}(),je=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),He=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){if(e instanceof Ye)return t.createLinearRing(this.edit(e.getCoordinates(),e));if(e instanceof Fe)return t.createLineString(this.edit(e.getCoordinates(),e));if(e instanceof Be){var n=this.edit(e.getCoordinates(),e);return n.length>0?t.createPoint(n[0]):t.createPoint()}return e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),We=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"edit",value:function(e,t){return e instanceof Ye?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Fe?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Be?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[GeometryEditorOperation]}}]),e}(),Ke=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.dimension=3,this.coordinates=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof Array){var i=n[0];a.call(t,i,3)}else if(Number.isInteger(n[0])){var s=n[0];t.coordinates=new Array(s);for(var o=0;s>o;o++)t.coordinates[o]=new L}else if(n[0].interfaces_&&n[0].interfaces_.indexOf(w)>-1){var u=n[0];if(null===u)return t.coordinates=new Array(0),null;t.dimension=u.getDimension(),t.coordinates=new Array(u.size());for(var o=0;o<t.coordinates.length;o++)t.coordinates[o]=u.getCoordinateCopy(o)}}else if(2===n.length)if(n[0]instanceof Array&&Number.isInteger(n[1])){var i=n[0],l=n[1];t.coordinates=i,t.dimension=l,null===i&&(t.coordinates=new Array(0))}else if(Number.isInteger(n[0])&&Number.isInteger(n[1])){var s=n[0],l=n[1];t.coordinates=new Array(s),t.dimension=l;for(var o=0;s>o;o++)t.coordinates[o]=new L}};return s.apply(this,r)}return _createClass(e,[{key:"setOrdinate",value:function(e,t,n){switch(t){case w.X:this.coordinates[e].x=n;break;case w.Y:this.coordinates[e].y=n;break;case w.Z:this.coordinates[e].z=n;break;default:throw new C("invalid ordinateIndex")}}},{key:"size",value:function(){return this.coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case w.X:return this.coordinates[e].x;case w.Y:return this.coordinates[e].y;case w.Z:return this.coordinates[e].z}return E.NaN}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.coordinates[r]}if(2===t.length){var i=t[0],s=t[1];s.x=this.coordinates[i].x,s.y=this.coordinates[i].y,s.z=this.coordinates[i].z}}},{key:"getCoordinateCopy",value:function(e){return new L(this.coordinates[e])}},{key:"getDimension",value:function(){return this.dimension}},{key:"getX",value:function(e){return this.coordinates[e].x}},{key:"clone",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].clone();return new e(t,this.dimension)}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this.coordinates.length;t++)e.expandToInclude(this.coordinates[t]);return e}},{key:"copy",value:function(){for(var t=new Array(this.size()),n=0;n<this.coordinates.length;n++)t[n]=this.coordinates[n].copy();return new e(t,this.dimension)}},{key:"toString",value:function(){if(this.coordinates.length>0){var e=new M(17*this.coordinates.length);e.append("("),e.append(this.coordinates[0]);for(var t=1;t<this.coordinates.length;t++)e.append(", "),e.append(this.coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this.coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this.coordinates}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[w,N]}}]),e}();Ke.serialVersionUID=-0xcb44a778db18e00;var Je=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Array){var r=t[0];return new Ke(r)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){var i=t[0];return new Ke(i)}}else if(2===t.length){var s=t[0],a=t[1];return a>3&&(a=3),2>a?new Ke(s):new Ke(s,a)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[b,N]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();Je.serialVersionUID=-0x38e49fa6cf6f2e00,Je.instanceObject=new Je,v.prototype=new a,v.prototype.get=function(e){return this.map_.get(e)||null},v.prototype.put=function(e,t){return this.map_.set(e,t),t},v.prototype.values=function(){var e=new se;return Array.from(this.map_.values()).forEach(function(t){return e.add(t)}),e},v.prototype.entrySet=function(){var e=new l;return this.map_.entries().forEach(function(t){return e.add(t)}),e},v.prototype.size=function(){return this.map_.size()};var Qe=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.modelType=null,this.scale=null;var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.modelType=e.FLOATING;else if(1===r.length)if(r[0]instanceof Ze){var s=r[0];t.modelType=s,s===e.FIXED&&t.setScale(1)}else if("number"==typeof r[0]){var a=r[0];t.modelType=e.FIXED,t.setScale(a)}else if(r[0]instanceof e){var o=r[0];t.modelType=o.modelType,t.scale=o.scale}};return s.apply(this,r)}return _createClass(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.modelType===n.modelType&&this.scale===n.scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new D(n).compareTo(new D(r))}},{key:"getScale",value:function(){return this.scale}},{key:"isFloating",value:function(){return this.modelType===e.FLOATING||this.modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this.modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this.modelType===e.FLOATING?t="Floating":this.modelType===e.FLOATING_SINGLE?t="Floating-Single":this.modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if("number"==typeof n[0]){var i=n[0];if(E.isNaN(i))return i;if(this.modelType===e.FLOATING_SINGLE){var s=i;return s}return this.modelType===e.FIXED?Math.round(i*this.scale)/this.scale:i}if(n[0]instanceof L){var a=n[0];if(this.modelType===e.FLOATING)return null;a.x=this.makePrecise(a.x),a.y=this.makePrecise(a.y)}}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this.modelType===e.FLOATING?t=16:this.modelType===e.FLOATING_SINGLE?t=6:this.modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(e){this.scale=Math.abs(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[N,I]}}],[{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}},{key:"Type",get:function(){return Ze}}]),e}(),Ze=function(){function e(){_classCallCheck(this,e),this.name=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.name=i,e.nameToTypeMap.put(i,this)}}return _createClass(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this.name)}},{key:"toString",value:function(){return this.name}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[N]}}]),e}();Ze.serialVersionUID=-552860263173159e4,Ze.nameToTypeMap=new v,Qe.serialVersionUID=0x6bee6404e9a25c00,Qe.FIXED=new Ze("FIXED"),Qe.FLOATING=new Ze("FLOATING"),Qe.FLOATING_SINGLE=new Ze("FLOATING SINGLE"),Qe.maximumPreciseValue=9007199254740992;var $e=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)a.call(t,new Qe,0);else if(1===r.length){if(r[0].interfaces_&&r[0].interfaces_.indexOf(b)>-1){var s=r[0];a.call(t,new Qe,0,s);
}else if(r[0]instanceof Qe){var o=r[0];a.call(t,o,0,e.getDefaultCoordinateSequenceFactory())}}else if(2===r.length){var o=r[0],u=r[1];a.call(t,o,u,e.getDefaultCoordinateSequenceFactory())}else if(3===r.length){var o=r[0],u=r[1],s=r[2];t.precisionModel=o,t.coordinateSequenceFactory=s,t.SRID=u}};return s.apply(this,r)}return _createClass(e,[{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new L(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new L(e.getMinX(),e.getMinY()),new L(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new L(e.getMinX(),e.getMinY()),new L(e.getMinX(),e.getMaxY()),new L(e.getMaxX(),e.getMaxY()),new L(e.getMaxX(),e.getMinY()),new L(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===t.length){if(t[0]instanceof Array){var r=t[0];return this.createLineString(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){var r=t[0];return new Fe(r,this)}}}},{key:"createMultiLineString",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new Se(null,this);if(1===t.length){var r=t[0];return new Se(r,this)}}},{key:"buildGeometry",value:function(t){for(var n=null,r=!1,i=!1,s=t.iterator();s.hasNext();){var a=s.next(),o=a.getClass();null===n&&(n=o),o!==n&&(r=!0),a.isGeometryCollectionOrDerived()&&(i=!0)}if(null===n)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(e.toGeometryArray(t));var u=t.iterator().next(),l=t.size()>1;if(l){if(u instanceof ze)return this.createMultiPolygon(e.toPolygonArray(t));if(u instanceof Fe)return this.createMultiLineString(e.toLineStringArray(t));if(u instanceof Be)return this.createMultiPoint(e.toPointArray(t));R.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===t.length){if(t[0]instanceof L){var r=t[0];return this.createPoint(null!==r?this.getCoordinateSequenceFactory().create([r]):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){var i=t[0];return new Be(i,this)}}}},{key:"getCoordinateSequenceFactory",value:function(){return this.coordinateSequenceFactory}},{key:"createPolygon",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new ze(null,null,this);if(1===t.length){if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){var r=t[0];return this.createPolygon(this.createLinearRing(r))}if(t[0]instanceof Array){var r=t[0];return this.createPolygon(this.createLinearRing(r))}if(t[0]instanceof Ye){var i=t[0];return this.createPolygon(i,null)}}else if(2===t.length){var i=t[0],s=t[1];return new ze(i,s,this)}}},{key:"getSRID",value:function(){return this.SRID}},{key:"createGeometryCollection",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new Ne(null,this);if(1===t.length){var r=t[0];return new Ne(r,this)}}},{key:"createGeometry",value:function(e){var t=new Xe(this);return t.edit(e,new(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"edit",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0];r[1];return this.coordinateSequenceFactory.create(s)}return(e=_get(Object.getPrototypeOf(t.prototype),"edit",this)).call.apply(e,[this].concat(r))}}]),t}(CoordinateSequenceOperation)))}},{key:"getPrecisionModel",value:function(){return this.precisionModel}},{key:"createLinearRing",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===t.length){if(t[0]instanceof Array){var r=t[0];return this.createLinearRing(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){var r=t[0];return new Ye(r,this)}}}},{key:"createMultiPolygon",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new Ve(null,this);if(1===t.length){var r=t[0];return new Ve(r,this)}}},{key:"createMultiPoint",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return new Ue(null,this);if(1===t.length){if(t[0]instanceof Array){var r=t[0];return new Ue(r,this)}if(t[0]instanceof Array){var i=t[0];return this.createMultiPoint(null!==i?this.getCoordinateSequenceFactory().create(i):null)}if(t[0].interfaces_&&t[0].interfaces_.indexOf(w)>-1){var i=t[0];if(null===i)return this.createMultiPoint(new Array(0));for(var s=new Array(i.size()),a=0;a<i.size();a++){var o=this.getCoordinateSequenceFactory().create(1,i.getDimension());De.copy(i,a,o,0,1),s[a]=this.createPoint(o)}return this.createMultiPoint(s)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[N]}}],[{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(null===e)return null;var t=new Array(e.size());return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Je.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size());return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}]),e}();$e.serialVersionUID=-0x5ea75f2051eeb400;var et=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"transformPoint",value:function(e,t){return this.factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformPolygon",value:function(e,t){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!==r&&r instanceof Ye&&!r.isEmpty()||(n=!1);for(var i=new se,s=0;s<e.getNumInteriorRing();s++){var a=this.transformLinearRing(e.getInteriorRingN(s),e);null===a||a.isEmpty()||(a instanceof Ye||(n=!1),i.add(a))}if(n)return this.factory.createPolygon(r,i.toArray([]));var o=new se;return null!==r&&o.add(r),o.addAll(i),this.factory.buildGeometry(o)}},{key:"createCoordinateSequence",value:function(e){return this.factory.getCoordinateSequenceFactory().create(e)}},{key:"getInputGeometry",value:function(){return this.inputGeom}},{key:"transformMultiLineString",value:function(e,t){for(var n=new se,r=0;r<e.getNumGeometries();r++){var i=this.transformLineString(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"transformCoordinates",value:function(e,t){return this.copy(e)}},{key:"transformLineString",value:function(e,t){return this.factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))}},{key:"transformMultiPoint",value:function(e,t){for(var n=new se,r=0;r<e.getNumGeometries();r++){var i=this.transformPoint(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"transformMultiPolygon",value:function(e,t){for(var n=new se,r=0;r<e.getNumGeometries();r++){var i=this.transformPolygon(e.getGeometryN(r),e);null!==i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)}},{key:"copy",value:function(e){return e.clone()}},{key:"transformGeometryCollection",value:function(e,t){for(var n=new se,r=0;r<e.getNumGeometries();r++){var i=this.transform(e.getGeometryN(r));null!==i&&(this.pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection($e.toGeometryArray(n)):this.factory.buildGeometry(n)}},{key:"transform",value:function(e){if(this.inputGeom=e,this.factory=e.getFactory(),e instanceof Be)return this.transformPoint(e,null);if(e instanceof Ue)return this.transformMultiPoint(e,null);if(e instanceof Ye)return this.transformLinearRing(e,null);if(e instanceof Fe)return this.transformLineString(e,null);if(e instanceof Se)return this.transformMultiLineString(e,null);if(e instanceof ze)return this.transformPolygon(e,null);if(e instanceof Ve)return this.transformMultiPolygon(e,null);if(e instanceof Ne)return this.transformGeometryCollection(e,null);throw new C("Unknown Geometry subtype: "+e.getClass().getName())}},{key:"transformLinearRing",value:function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===n)return this.factory.createLinearRing(null);var r=n.size();return r>0&&4>r&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),tt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.p0=null,this.p1=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)a.call(t,new L,new L);else if(1===n.length){var i=n[0];a.call(t,i.p0,i.p1)}else if(2===n.length){var s=n[0],o=n[1];t.p0=s,t.p1=o}else if(4===n.length){var u=n[0],l=n[1],h=n[2],c=n[3];a.call(t,new L(u,l),new L(h,c))}};return s.apply(this,r)}return _createClass(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0],s=Q.orientationIndex(this.p0,this.p1,i.p0),a=Q.orientationIndex(this.p0,this.p1,i.p1);return s>=0&&a>=0?Math.max(s,a):0>=s&&0>=a?Math.max(s,a):0}if(n[0]instanceof L){var o=n[0];return Q.orientationIndex(this.p0,this.p1,o)}}}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(e){var t=new W;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof L){var i=n[0];if(i.equals(this.p0)||i.equals(this.p1))return new L(i);var s=this.projectionFactor(i),a=new L;return a.x=this.p0.x+s*(this.p1.x-this.p0.x),a.y=this.p0.y+s*(this.p1.y-this.p0.y),a}if(n[0]instanceof e){var o=n[0],u=this.projectionFactor(o.p0),l=this.projectionFactor(o.p1);if(u>=1&&l>=1)return null;if(0>=u&&0>=l)return null;var h=this.project(o.p0);0>u&&(h=this.p0),u>1&&(h=this.p1);var c=this.project(o.p1);return 0>l&&(c=this.p0),l>1&&(c=this.p1),new e(h,c)}}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return 0===e?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return Q.distancePointLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(0>=r)return E.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2),r=E.MAX_VALUE,i=null,s=this.closestPoint(e.p0);r=s.distance(e.p0),n[0]=s,n[1]=e.p0;var a=this.closestPoint(e.p1);i=a.distance(e.p1),r>i&&(r=i,n[0]=a,n[1]=e.p1);var o=e.closestPoint(this.p0);i=o.distance(this.p0),r>i&&(r=i,n[0]=this.p0,n[1]=o);var u=e.closestPoint(this.p1);return i=u.distance(this.p1),r>i&&(r=i,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);if(t>0&&1>t)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return r>n?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){try{var t=Y.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof z))throw n}finally{}return null}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,a=Math.sqrt(i*i+s*s),o=0,u=0;if(0!==t){if(0>=a)throw new IllegalStateException("Cannot compute offset from zero-length line segment");o=t*i/a,u=t*s/a}var l=n-u,h=r+o,c=new L(l,h);return c}},{key:"setCoordinates",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.setCoordinates(r.p0,r.p1)}else if(2===t.length){var i=t[0],s=t[1];this.p0.x=i.x,this.p0.y=i.y,this.p1.x=s.x,this.p1.y=s.y}}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return 0>t?t=0:(t>1||E.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"distance",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return Q.distanceLineLine(this.p0,this.p1,i.p0,i.p1)}if(n[0]instanceof L){var s=n[0];return Q.distancePointLine(s,this.p0,this.p1)}}}},{key:"pointAlong",value:function(e){var t=new L;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=java.lang.Double.doubleToLongBits(this.p0.x);e^=31*java.lang.Double.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return t^r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I,N]}}],[{key:"midPoint",value:function(e,t){return new L((e.x+t.x)/2,(e.y+t.y)/2)}}]),e}();tt.serialVersionUID=0x2d2172135f411c00;var nt=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.distanceTolerance=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputGeom=i}}return _createClass(e,[{key:"getResultGeometry",value:function(){return new rt(this.distanceTolerance).transform(this.inputGeom)}},{key:"setDistanceTolerance",value:function(e){if(0>=e)throw new C("Tolerance must be positive");this.distanceTolerance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"densifyPoints",value:function(e,t,n){for(var r=new tt,i=new oe,s=0;s<e.length-1;s++){r.p0=e[s],r.p1=e[s+1],i.add(r.p0,!1);var a=r.getLength(),o=Math.trunc(a/t)+1;if(o>1)for(var u=a/o,l=1;o>l;l++){var h=l*u/a,c=r.pointAlong(h);n.makePrecise(c),i.add(c,!1)}}return i.add(e[e.length-1],!1),i.toCoordinateArray()}},{key:"densify",value:function(t,n){var r=new e(t);return r.setDistanceTolerance(n),r.getResultGeometry()}},{key:"DensifyTransformer",get:function(){return rt}}]),e}(),rt=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.distanceTolerance=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.distanceTolerance=s}return e}return _inherits(t,e),_createClass(t,[{key:"transformMultiPolygon",value:function(e,n){var r=_get(Object.getPrototypeOf(t.prototype),"transformMultiPolygon",this).call(this,e,n);return this.createValidArea(r)}},{key:"transformPolygon",value:function(e,n){var r=_get(Object.getPrototypeOf(t.prototype),"transformPolygon",this).call(this,e,n);return n instanceof Ve?r:this.createValidArea(r)}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=nt.densifyPoints(n,this.distanceTolerance,t.getPrecisionModel());return t instanceof Fe&&1===r.length&&(r=new Array(0)),this.factory.getCoordinateSequenceFactory().create(r)}},{key:"createValidArea",value:function(e){return e.buffer(0)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(et);y.prototype=new Error,y.prototype.name="EmptyStackException",d.prototype=new r,d.prototype.add=function(e){return this.array_.push(e),!0},d.prototype.get=function(e){if(0>e||e>=this.size())throw new IndexOutOfBoundsException;return this.array_[e]},d.prototype.push=function(e){return this.array_.push(e),e},d.prototype.pop=function(e){if(0===this.array_.length)throw new y;return this.array_.pop()},d.prototype.peek=function(){if(0===this.array_.length)throw new y;return this.array_[this.array_.length-1]},d.prototype.empty=function(){return 0===this.array_.length?!0:!1},d.prototype.isEmpty=function(){return this.empty()},d.prototype.search=function(e){return this.array_.indexOf(e)},d.prototype.size=function(){return this.array_.length},d.prototype.toArray=function(){for(var e=[],t=0,n=this.array_.length;n>t;t++)e.push(this.array_[t]);return e};var it=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return 2===n?!0:!1}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(2===n)return-1;var r=t>e?e:t,i=e>t?e:t;return 0===r&&3===i?3:r}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if("number"==typeof n[0]&&"number"==typeof n[1]){var i=n[0],s=n[1];if(0===i&&0===s)throw new C("Cannot compute the quadrant for point ( "+i+", "+s+" )");return i>=0?s>=0?e.NE:e.SE:s>=0?e.NW:e.SW}if(n[0]instanceof L&&n[1]instanceof L){var a=n[0],o=n[1];if(o.x===a.x&&o.y===a.y)throw new C("Cannot compute the quadrant for two identical points "+a);return o.x>=a.x?o.y>=a.y?e.NE:e.SE:o.y>=a.y?e.NW:e.SW}}}}]),e}();it.NE=0,it.NW=1,it.SW=2,it.SE=3;var st=function(){function e(){_classCallCheck(this,e),this._orig=null,this._sym=null,this._next=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this._orig=i}}return _createClass(e,[{key:"find",value:function(e){var t=this;do{if(null===t)return null;if(t.dest().equals2D(e))return t;t=t.oNext()}while(t!==this);return null}},{key:"dest",value:function(){return this._sym._orig}},{key:"oNext",value:function(){return this._sym._next}},{key:"insert",value:function(e){if(this.oNext()===this)return this.insertAfter(e),null;var t=this.compareTo(e),n=this;do{var r=n.oNext(),i=r.compareTo(e);if(i!==t||r===this)return n.insertAfter(e),null;n=r}while(n!==this);R.shouldNeverReachHere()}},{key:"insertAfter",value:function(e){R.equals(this._orig,e.orig());var t=this.oNext();this._sym.setNext(e),e.sym().setNext(t)}},{key:"degree",value:function t(){var t=0,e=this;do t++,e=e.oNext();while(e!==this);return t}},{key:"equals",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];return this._orig.equals2D(s)&&this._sym._orig.equals(a)}return(t=_get(Object.getPrototypeOf(e.prototype),"equals",this)).call.apply(t,[this].concat(r))}},{key:"deltaY",value:function(){return this._sym._orig.y-this._orig.y}},{key:"sym",value:function(){return this._sym}},{key:"prev",value:function(){return this._sym.next()._sym}},{key:"compareAngularDirection",value:function(e){var t=this.deltaX(),n=this.deltaY(),r=e.deltaX(),i=e.deltaY();if(t===r&&n===i)return 0;var s=it.quadrant(t,n),a=it.quadrant(r,i);return s>a?1:a>s?-1:Q.computeOrientation(e._orig,e.dest(),this.dest())}},{key:"prevNode",value:function(){for(var e=this;2===e.degree();)if(e=e.prev(),e===this)return null;return e}},{key:"compareTo",value:function(e){var t=e,n=this.compareAngularDirection(t);return n}},{key:"next",value:function(){return this._next}},{key:"setSym",value:function(e){this._sym=e}},{key:"orig",value:function(){return this._orig}},{key:"toString",value:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"}},{key:"setNext",value:function(e){this._next=e}},{key:"init",value:function(e){this.setSym(e),e.setSym(this),this.setNext(e),e.setNext(this)}},{key:"deltaX",value:function(){return this._sym._orig.x-this._orig.x}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"init",value:function(e,t){if(null!==e._sym||null!==t._sym||null!==e._next||null!==t._next)throw new IllegalStateException("Edges are already initialized");return e.init(t),e}},{key:"create",value:function(t,n){var r=new e(t),i=new e(n);return r.init(i),r}}]),e}(),at=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e._isMarked=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length)var s=r[0],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"mark",value:function(){this._isMarked=!0}},{key:"setMark",value:function(e){this._isMarked=e}},{key:"isMarked",value:function(){return this._isMarked}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"setMarkBoth",value:function(e,t){e.setMark(t),e.sym().setMark(t)}},{key:"isMarked",value:function(e){return e.isMarked()}},{key:"setMark",value:function(e,t){e.setMark(t)}},{key:"markBoth",value:function(e){e.mark(),e.sym().mark()}},{key:"mark",value:function(e){e.mark()}}]),t}(st),ot=function(){function e(){_classCallCheck(this,e),this.vertexMap=new v;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"insert",value:function(e,t,n){var r=this.create(e,t);null!==n?n.insert(r):this.vertexMap.put(e,r);var i=this.vertexMap.get(t);return null!==i?i.insert(r.sym()):this.vertexMap.put(t,r.sym()),r}},{key:"create",value:function(e,t){var n=this.createEdge(e),r=this.createEdge(t);return st.init(n,r),n}},{key:"createEdge",value:function(e){return new st(e)}},{key:"addEdge",value:function(t,n){if(!e.isValidEdge(t,n))return null;var r=this.vertexMap.get(t),i=null;if(null!==r&&(i=r.find(n)),null!==i)return i;var s=this.insert(t,n,r);return s}},{key:"getVertexEdges",value:function(){return this.vertexMap.values()}},{key:"findEdge",value:function(e,t){var n=this.vertexMap.get(e);return null===n?null:n.find(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isValidEdge",value:function(e,t){var n=t.compareTo(e);return 0!==n}}]),e}(),ut=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e._isStart=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length)var s=r[0],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"setStart",value:function(){this._isStart=!0}},{key:"isStart",value:function(){return this._isStart}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(at),lt=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createEdge",value:function(e){return new ut(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ot),ht=function(){function e(){_classCallCheck(this,e),this.result=null,this.factory=null,this.graph=null,this.lines=new se,this.nodeEdgeStack=new d,this.ringStartEdge=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.graph=new lt)}return _createClass(e,[{key:"addLine",value:function(e){this.lines.add(this.factory.createLineString(e.toCoordinateArray()))}},{key:"updateRingStartEdge",value:function(e){return e.isStart()||(e=e.sym(),e.isStart())?null===this.ringStartEdge?(this.ringStartEdge=e,null):void(e.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=e)):null}},{key:"getResult",value:function(){return null===this.result&&this.computeResult(),this.result}},{key:"process",value:function(e){var t=e.prevNode();null===t&&(t=e),this.stackEdges(t),this.buildLines()}},{key:"buildRing",value:function(e){var t=new oe,n=e;for(t.add(n.orig().copy(),!1);2===n.sym().degree();){var r=n.next();if(r===e)break;t.add(r.orig().copy(),!1),n=r}t.add(n.dest().copy(),!1),this.addLine(t)}},{key:"buildLine",value:function(e){var t=new oe,n=e;for(this.ringStartEdge=null,at.markBoth(n),t.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var r=n.next();if(r===e)return this.buildRing(this.ringStartEdge),null;t.add(r.orig().copy(),!1),n=r,at.markBoth(n)}t.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(t)}},{key:"stackEdges",value:function(e){var t=e;do at.isMarked(t)||this.nodeEdgeStack.add(t),t=t.oNext();while(t!==e)}},{key:"computeResult",value:function(){for(var e=this.graph.getVertexEdges(),t=e.iterator();t.hasNext();){var n=t.next();at.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)}},{key:"buildLines",value:function(){for(;!this.nodeEdgeStack.empty();){var e=this.nodeEdgeStack.pop();at.isMarked(e)||this.buildLine(e)}}},{key:"add",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof Z){var i=n[0];i.apply(new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){e instanceof Fe&&this.add(e)}},{key:"interfaces_",get:function(){return[Ee]}}]),e}()))}else if(n[0].interfaces_&&n[0].interfaces_.indexOf(t)>-1)for(var s=n[0],a=s.iterator();a.hasNext();){var o=a.next();this.add(o)}else if(n[0]instanceof Fe){var u=n[0];null===this.factory&&(this.factory=u.getFactory());for(var l=u.getCoordinateSequence(),h=!1,a=1;a<l.size();a++){var c=this.graph.addEdge(l.getCoordinate(a-1),l.getCoordinate(a));null!==c&&(h||(c.setStart(),h=!0))}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"dissolve",value:function(t){var n=new e;return n.add(t),n.getResult()}}]),e}(),ct=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],gt=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new $e}return _createClass(e,[{key:"read",value:function(e){var t;t="string"==typeof e?JSON.parse(e):e;var n=t.type;if(!ft[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==ct.indexOf(n)?ft[n].apply(this,[t.coordinates]):"GeometryCollection"===n?ft[n].apply(this,[t.geometries]):this.parse[n].apply(this,[t])}},{key:"write",value:function(e){var t=e.getGeometryType();if(!vt[t])throw new Error("Geometry is not supported");return vt[t].apply(this,[e])}}]),e}(),ft={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!this.parse[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function xs(e){for(var xs=[],t=0;t<e.length;++t){var n=e[t];xs.push(new L(n[0],n[1]))}return xs},bbox:function(e){return this.geometryFactory.createLinearRing([new L(e[0],e[1]),new L(e[2],e[1]),new L(e[2],e[3]),new L(e[0],e[3]),new L(e[0],e[1])])},Point:function(e){var t=new L(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(ft.Point.apply(this,[e[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=ft.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(ft.LineString.apply(this,[e[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=ft.coordinates.apply(this,[e[0]]),n=this.geometryFactory.createLinearRing(t),r=[],i=1;i<e.length;++i){var s=e[i],a=ft.coordinates.apply(this,[s]),o=this.geometryFactory.createLinearRing(a);r.push(o)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(ft.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},vt={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=vt.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=vt.Point.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=0;n<e.points.length;++n){var r=e.points[n];t.push(vt.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=vt.LineString.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=vt.LineString.apply(this,[e.shell]);t.push(n.coordinates);for(var r=0;r<e.holes.length;++r){var i=e.holes[r],s=vt.LineString.apply(this,[i]);t.push(s.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e.geometries.length;++n){var r=e.geometries[n],i=vt.Polygon.apply(this,[r]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e.geometries.length;++n){
var r=e.geometries[n],i=r.getGeometryType().slice(10);t.push(vt[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:t}}},yt=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new $e,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new gt(this.geometryFactory)}return _createClass(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===Qe.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.length;n>t;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),dt=function(){function e(){_classCallCheck(this,e),this.parser=new gt(this.geometryFactory)}return _createClass(e,[{key:"write",value:function(e){return this.parser.write(e)}}]),e}(),pt=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new $e,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new X(this.geometryFactory)}return _createClass(e,[{key:"read",value:function(e){var t=this.parser.read(e);return this.precisionModel.getType()===Qe.FIXED&&this.reducePrecision(t),t}},{key:"reducePrecision",value:function(e){var t,n;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,n=e.points.coordinates.length;n>t;t++)this.precisionModel.makePrecise(e.points.coordinates[t]);else if(e.geometries)for(t=0,n=e.geometries.length;n>t;t++)this.reducePrecision(e.geometries[t])}}]),e}(),mt=function(){function e(t){_classCallCheck(this,e),this.geometryFactory=t||new $e}return _createClass(e,[{key:"read",value:function(e){return e instanceof ol.geom.Point?this.convertFromPoint(e):e instanceof ol.geom.LineString?this.convertFromLineString(e):e instanceof ol.geom.LinearRing?this.convertFromLinearRing(e):e instanceof ol.geom.Polygon?this.convertFromPolygon(e):e instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(e):e instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(e):e instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(e):e instanceof ol.geom.GeometryCollection?this.convertFromCollection(e):void 0}},{key:"convertFromPoint",value:function(e){var t=e.getCoordinates();return this.geometryFactory.createPoint(new L(t[0],t[1]))}},{key:"convertFromLineString",value:function(e){return this.geometryFactory.createLineString(e.getCoordinates().map(function(e){return new L(e[0],e[1])}))}},{key:"convertFromLinearRing",value:function(e){return this.geometryFactory.createLinearRing(e.getCoordinates().map(function(e){return new L(e[0],e[1])}))}},{key:"convertFromPolygon",value:function(e){for(var t=e.getLinearRings(),n=null,r=[],i=0;i<t.length;i++){var s=this.convertFromLinearRing(t[i]);0===i?n=s:r.push(s)}return this.geometryFactory.createPolygon(n,r)}},{key:"convertFromMultiPoint",value:function(e){var t=e.getPoints().map(function(e){return this.convertFromPoint(e)},this);return this.geometryFactory.createMultiPoint(t)}},{key:"convertFromMultiLineString",value:function(e){var t=e.getLineStrings().map(function(e){return this.convertFromLineString(e)},this);return this.geometryFactory.createMultiLineString(t)}},{key:"convertFromMultiPolygon",value:function(e){var t=e.getPolygons().map(function(e){return this.convertFromPolygon(e)},this);return this.geometryFactory.createMultiPolygon(t)}},{key:"convertFromCollection",value:function(e){var t=e.getGeometries().map(function(e){return this.read(e)},this);return this.geometryFactory.createGeometryCollection(t)}},{key:"write",value:function(e){return"Point"===e.getGeometryType()?this.convertToPoint(e.getCoordinate()):"LineString"===e.getGeometryType()?this.convertToLineString(e):"LinearRing"===e.getGeometryType()?this.convertToLinearRing(e):"Polygon"===e.getGeometryType()?this.convertToPolygon(e):"MultiPoint"===e.getGeometryType()?this.convertToMultiPoint(e):"MultiLineString"===e.getGeometryType()?this.convertToMultiLineString(e):"MultiPolygon"===e.getGeometryType()?this.convertToMultiPolygon(e):"GeometryCollection"===e.getGeometryType()?this.convertToCollection(e):void 0}},{key:"convertToPoint",value:function(e){return new ol.geom.Point([e.x,e.y])}},{key:"convertToLineString",value:function(e){var t=e.points.coordinates.map(p);return new ol.geom.LineString(t)}},{key:"convertToLinearRing",value:function(e){var t=e.points.coordinates.map(p);return new ol.geom.LinearRing(t)}},{key:"convertToPolygon",value:function(e){for(var t=[e.shell.points.coordinates.map(p)],n=0;n<e.holes.length;n++)t.push(e.holes[n].points.coordinates.map(p));return new ol.geom.Polygon(t)}},{key:"convertToMultiPoint",value:function(e){return new ol.geom.MultiPoint(e.getCoordinates().map(p))}},{key:"convertToMultiLineString",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToLineString(e.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(t)}},{key:"convertToMultiPolygon",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++)t.push(this.convertToPolygon(e.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(t)}},{key:"convertToCollection",value:function(e){for(var t=[],n=0;n<e.geometries.length;n++){var r=e.geometries[n];t.push(this.write(r))}return new ol.geom.GeometryCollection(t)}}]),e}(),kt=function(){function t(){_classCallCheck(this,t),this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.parent=i,this.atStart=!0,this.index=0,this.max=i.getNumGeometries()}}return _createClass(t,[{key:"next",value:function(){if(this.atStart)return this.atStart=!1,t.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new i;var e=this.parent.getGeometryN(this.index++);return e instanceof Ne?(this.subcollectionIterator=new t(e),this.subcollectionIterator.next()):e}},{key:"remove",value:function(){throw new UnsupportedOperationException(this.getClass().getName())}},{key:"hasNext",value:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return this.index>=this.max?!1:!0}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[e]}}],[{key:"isAtomic",value:function(e){return!(e instanceof Ne)}}]),t}(),Ct=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.boundaryRule=ee.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];if(null===i)throw new C("Rule must be non-null");t.boundaryRule=i}};return s.apply(this,r)}return _createClass(e,[{key:"locateInPolygonRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?Q.locatePointInRing(e,t.getCoordinates()):P.EXTERIOR}},{key:"intersects",value:function(e,t){return this.locate(e,t)!==P.EXTERIOR}},{key:"updateLocationInfo",value:function(e){e===P.INTERIOR&&(this.isIn=!0),e===P.BOUNDARY&&this.numBoundaries++}},{key:"computeLocation",value:function(e,t){if(t instanceof Be&&this.updateLocationInfo(this.locate(e,t)),t instanceof Fe)this.updateLocationInfo(this.locate(e,t));else if(t instanceof ze)this.updateLocationInfo(this.locate(e,t));else if(t instanceof Se)for(var n=t,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locate(e,i))}else if(t instanceof Ve)for(var s=t,r=0;r<s.getNumGeometries();r++){var a=s.getGeometryN(r);this.updateLocationInfo(this.locate(e,a))}else if(t instanceof Ne)for(var o=new kt(t);o.hasNext();){var u=o.next();u!==t&&this.computeLocation(e,u)}}},{key:"locate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){if(t[0]instanceof L&&t[1]instanceof ze){var r=t[0],i=t[1];if(i.isEmpty())return P.EXTERIOR;var s=i.getExteriorRing(),a=this.locateInPolygonRing(r,s);if(a===P.EXTERIOR)return P.EXTERIOR;if(a===P.BOUNDARY)return P.BOUNDARY;for(var o=0;o<i.getNumInteriorRing();o++){var u=i.getInteriorRingN(o),l=this.locateInPolygonRing(r,u);if(l===P.INTERIOR)return P.EXTERIOR;if(l===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(t[0]instanceof L&&t[1]instanceof Fe){var r=t[0],h=t[1];if(!h.getEnvelopeInternal().intersects(r))return P.EXTERIOR;var c=h.getCoordinates();return h.isClosed()||!r.equals(c[0])&&!r.equals(c[c.length-1])?Q.isOnLine(r,c)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(t[0]instanceof L&&t[1]instanceof Be){var r=t[0],g=t[1],f=g.getCoordinate();return f.equals2D(r)?P.INTERIOR:P.EXTERIOR}if(t[0]instanceof L&&t[1]instanceof Z){var r=t[0],v=t[1];return v.isEmpty()?P.EXTERIOR:v instanceof Fe?this.locate(r,v):v instanceof ze?this.locate(r,v):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(r,v),this.boundaryRule.isInBoundary(this.numBoundaries)?P.BOUNDARY:this.numBoundaries>0||this.isIn?P.INTERIOR:P.EXTERIOR)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Et=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();Et.ON=0,Et.LEFT=1,Et.RIGHT=2;var It=function(){function e(){_classCallCheck(this,e),this.mce=null,this.chainIndex=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.mce=i,this.chainIndex=s}}return _createClass(e,[{key:"computeIntersections",value:function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),xt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null;var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];t.eventType=e.DELETE,t.xValue=s,t.insertEvent=a}else if(3===r.length){var o=r[0],s=r[1],u=r[2];t.eventType=e.INSERT,t.label=o,t.xValue=s,t.obj=u}};return s.apply(this,r)}return _createClass(e,[{key:"isDelete",value:function(){return this.eventType===e.DELETE}},{key:"setDeleteEventIndex",value:function(e){this.deleteEventIndex=e}},{key:"getObject",value:function(){return this.obj}},{key:"compareTo",value:function(e){var t=e;return this.xValue<t.xValue?-1:this.xValue>t.xValue?1:this.eventType<t.eventType?-1:this.eventType>t.eventType?1:0}},{key:"getInsertEvent",value:function(){return this.insertEvent}},{key:"isInsert",value:function(){return this.eventType===e.INSERT}},{key:"isSameLabel",value:function(e){return null===this.label?!1:this.label===e.label}},{key:"getDeleteEventIndex",value:function(){return this.deleteEventIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}]),e}();xt.INSERT=1,xt.DELETE=2;var _t=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Nt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"reverseOrder",value:function(){return{compare:function(e,t){return t.compareTo(e)}}}},{key:"min",value:function(t){return e.sort(t),t.get(0)}},{key:"sort",value:function(e,t){var n=e.toArray();t?f.sort(n,t):f.sort(n);for(var r=e.iterator(),i=0,s=n.length;s>i;i++)r.next(),r.set(n[i])}}]),e}(),St=function(){function e(){_classCallCheck(this,e),this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];this.li=i,this.includeProper=s,this.recordIsolated=a}}return _createClass(e,[{key:"isTrivialIntersection",value:function(t,n,r,i){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var s=t.getNumPoints()-1;if(0===n&&i===s||0===i&&n===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"setIsDoneIfProperInt",value:function(e){this.isDoneWhenProperInt=e}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"isBoundaryPointInternal",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return this._isDone}},{key:"isBoundaryPoint",value:function(e,t){return null===t?!1:this.isBoundaryPointInternal(e,t[0])?!0:this.isBoundaryPointInternal(e,t[1])?!0:!1}},{key:"setBoundaryNodes",value:function(e,t){this.bdyNodes=new Array(2),this.bdyNodes[0]=e,this.bdyNodes[1]=t}},{key:"addIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],o=n.getCoordinates()[r+1];this.li.computeIntersection(i,s,a,o),this.li.hasIntersection()&&(this.recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this.includeProper||!this.li.isProper())&&(e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),Ot=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.events=new se,e.nOverlaps=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"prepareEvents",value:function(){Nt.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}}},{key:"computeIntersections",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var i=t[0];this.nOverlaps=0,this.prepareEvents();for(var s=0;s<this.events.size();s++){var a=this.events.get(s);if(a.isInsert()&&this.processOverlaps(s,a.getDeleteEventIndex(),a,i),i.isDone())break}}else if(3===t.length)if(t[2]instanceof St&&t[0].interfaces_&&t[0].interfaces_.indexOf(r)>-1&&t[1].interfaces_&&t[1].interfaces_.indexOf(r)>-1){var o=t[0],u=t[1],i=t[2];this.addEdges(o,o),this.addEdges(u,u),this.computeIntersections(i)}else if("boolean"==typeof t[2]&&t[0].interfaces_&&t[0].interfaces_.indexOf(r)>-1&&t[1]instanceof St){var l=t[0],i=t[1],h=t[2];h?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(i)}}},{key:"addEdge",value:function(e,t){for(var n=e.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var s=new It(n,i),a=new xt(t,n.getMinX(i),s);this.events.add(a),this.events.add(new xt(n.getMaxX(i),a))}}},{key:"processOverlaps",value:function(e,t,n,r){for(var i=n.getObject(),s=e;t>s;s++){var a=this.events.get(s);if(a.isInsert()){var o=a.getObject();n.isSameLabel(a)||(i.computeIntersections(o,r),this.nOverlaps++)}}}},{key:"addEdges",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)for(var r=t[0],i=r.iterator();i.hasNext();){var s=i.next();this.addEdge(s,s)}else if(2===t.length)for(var r=t[0],a=t[1],i=r.iterator();i.hasNext();){var s=i.next();this.addEdge(s,a)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(_t),Rt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.location=null;var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){if(r[0]instanceof Array){var s=r[0];t.init(s.length)}else if(Number.isInteger(r[0])){var a=r[0];t.init(1),t.location[Et.ON]=a}else if(r[0]instanceof e){var o=r[0];if(t.init(o.location.length),null!==o)for(var u=0;u<t.location.length;u++)t.location[u]=o.location[u]}}else if(3===r.length){var a=r[0],l=r[1],h=r[2];t.init(3),t.location[Et.ON]=a,t.location[Et.LEFT]=l,t.location[Et.RIGHT]=h}};return s.apply(this,r)}return _createClass(e,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==P.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===P.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3);t[Et.ON]=this.location[Et.ON],t[Et.LEFT]=P.NONE,t[Et.RIGHT]=P.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===P.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[Et.LEFT];this.location[Et.LEFT]=this.location[Et.RIGHT],this.location[Et.RIGHT]=e}},{key:"toString",value:function(){var e=new M;return this.location.length>1&&e.append(P.toLocationSymbol(this.location[Et.LEFT])),e.append(P.toLocationSymbol(this.location[Et.ON])),this.location.length>1&&e.append(P.toLocationSymbol(this.location[Et.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[Et.ON]=e,this.location[Et.LEFT]=t,this.location[Et.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:P.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===P.NONE)return!0;return!1}},{key:"setLocation",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.setLocation(Et.ON,r)}else if(2===t.length){var i=t[0],r=t[1];this.location[i]=r}}},{key:"init",value:function(e){this.location=new Array(e),this.setAllLocations(P.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Lt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.elt=new Array(2);var s=function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){if(Number.isInteger(r[0])){var s=r[0];t.elt[0]=new Rt(s),t.elt[1]=new Rt(s)}else if(r[0]instanceof e){var a=r[0];t.elt[0]=new Rt(a.elt[0]),t.elt[1]=new Rt(a.elt[1])}}else if(2===r.length){var o=r[0],s=r[1];t.elt[0]=new Rt(P.NONE),t.elt[1]=new Rt(P.NONE),t.elt[o].setLocation(s)}else if(3===r.length){var s=r[0],u=r[1],l=r[2];t.elt[0]=new Rt(s,u,l),t.elt[1]=new Rt(s,u,l)}else if(4===r.length){var o=r[0],s=r[1],u=r[2],l=r[3];t.elt[0]=new Rt(P.NONE,P.NONE,P.NONE),t.elt[1]=new Rt(P.NONE,P.NONE,P.NONE),t.elt[o].setLocations(s,u,l)}};return s.apply(this,r)}return _createClass(e,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.setAllLocationsIfNull(0,r),this.setAllLocationsIfNull(1,r)}else if(2===t.length){var i=t[0],r=t[1];this.elt[i].setAllLocationsIfNull(r)}}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;2>t;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new Rt(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.elt[r].get(Et.ON)}if(2===t.length){var r=t[0],i=t[1];return this.elt[r].get(i)}}},{key:"toString",value:function(){var e=new M;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===t.length){var r=t[0];return this.elt[r].isArea()}}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];this.elt[r].setLocation(Et.ON,i)}else if(3===t.length){var r=t[0],s=t[1],i=t[2];this.elt[r].setLocation(s,i)}}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new Rt(this.elt[e].location[0]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toLineLabel",value:function(t){for(var n=new e(P.NONE),r=0;2>r;r++)n.setLocation(r,t.getLocation(r));return n}}]),e}(),At=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"visitItem",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),wt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"locate",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),bt=function(){function e(){_classCallCheck(this,e),this.min=E.POSITIVE_INFINITY,this.max=E.NEGATIVE_INFINITY}return _createClass(e,[{key:"getMin",value:function(){return this.min}},{key:"intersects",value:function(e,t){return this.min>t||this.max<e?!1:!0}},{key:"getMax",value:function(){return this.max}},{key:"toString",value:function(){return j.toLineString(new L(this.min,0),new L(this.max,0))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"NodeComparator",get:function(){return Pt}}]),e}(),Pt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t,i=(n.min+n.max)/2,s=(r.min+r.max)/2;return s>i?-1:i>s?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[_]}}]),e}(),Tt=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.item=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3===r.length){var s=r[0],a=r[1],o=r[2];e.min=s,e.max=a,e.item=o}return e}return _inherits(t,e),_createClass(t,[{key:"query",value:function(e,t,n){return this.intersects(e,t)?void n.visitItem(this.item):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(bt),Mt=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.node1=null,e.node2=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];e.node1=s,e.node2=a,e.buildExtent(e.node1,e.node2)}return e}return _inherits(t,e),_createClass(t,[{key:"buildExtent",value:function(e,t){this.min=Math.min(e.min,t.min),this.max=Math.max(e.max,t.max)}},{key:"query",value:function(e,t,n){return this.intersects(e,t)?(null!==this.node1&&this.node1.query(e,t,n),void(null!==this.node2&&this.node2.query(e,t,n))):null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(bt),Dt=function(){function e(){_classCallCheck(this,e),this.leaves=new se,this.root=null,this.level=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"buildTree",value:function(){Nt.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var e=this.leaves,t=null,n=new se;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}}},{key:"insert",value:function(e,t,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Tt(e,t,n))}},{key:"query",value:function(e,t,n){this.init(),this.root.query(e,t,n)}},{key:"buildRoot",value:function(){return null!==this.root?null:void(this.root=this.buildTree())}},{key:"printNode",value:function(e){U.out.println(j.toLineString(new L(e.min,this.level),new L(e.max,this.level)))}},{key:"init",value:function(){return null!==this.root?null:void this.buildRoot()}},{key:"buildLevel",value:function(e,t){this.level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(null===i)t.add(r);else{var s=new Mt(e.get(n),e.get(n+1));t.add(s)}}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ft=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.lines=null,this.isForcedToLineString=!1;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.lines=i}else if(2===n.length){var i=n[0],s=n[1];t.lines=i,t.isForcedToLineString=s}};return s.apply(this,r)}return _createClass(e,[{key:"filter",value:function(e){if(this.isForcedToLineString&&e instanceof Ye){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this.lines.add(t),null}e instanceof Fe&&this.lines.add(e)}},{key:"setForceToLineString",value:function(e){this.isForcedToLineString=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Ee]}}],[{key:"getGeometry",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return i.getFactory().buildGeometry(e.getLines(i))}if(2===n.length){var i=n[0],s=n[1];return i.getFactory().buildGeometry(e.getLines(i,s))}}},{key:"getLines",value:function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return e.getLines(s,!1)}if(2===r.length){if(r[0].interfaces_&&r[0].interfaces_.indexOf(t)>-1&&r[1].interfaces_&&r[1].interfaces_.indexOf(t)>-1){for(var a=r[0],o=r[1],u=a.iterator();u.hasNext();){var l=u.next();e.getLines(l,o)}return o}if(r[0]instanceof Z&&"boolean"==typeof r[1]){var s=r[0],h=r[1],c=new se;return s.apply(new e(c,h)),c}if(r[0]instanceof Z&&r[1].interfaces_&&r[1].interfaces_.indexOf(t)>-1){var s=r[0],g=r[1];return s instanceof Fe?g.add(s):s.apply(new e(g)),g}}else if(3===r.length){if("boolean"==typeof r[2]&&r[0].interfaces_&&r[0].interfaces_.indexOf(t)>-1&&r[1].interfaces_&&r[1].interfaces_.indexOf(t)>-1){for(var a=r[0],f=r[1],h=r[2],u=a.iterator();u.hasNext();){var l=u.next();e.getLines(l,f,h)}return f}if("boolean"==typeof r[2]&&r[0]instanceof Z&&r[1].interfaces_&&r[1].interfaces_.indexOf(t)>-1){var s=r[0],v=r[1],h=r[2];return s.apply(new e(v,h)),v}}}}]),e}(),Gt=function(){function e(){_classCallCheck(this,e),this.items=new se;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"visitItem",value:function(e){this.items.add(e)}},{key:"getItems",value:function(){return this.items}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[At]}}]),e}(),Bt=function(){function e(){_classCallCheck(this,e),this.index=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];if(!(i.interfaces_&&i.interfaces_.indexOf(qe)>-1))throw new C("Argument must be Polygonal");this.index=new zt(i)}}return _createClass(e,[{key:"locate",value:function(e){var t=new J(e),n=new qt(t);return this.index.query(e.y,e.y,n),t.getLocation()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[wt]}}],[{key:"SegmentVisitor",get:function(){return qt}},{key:"IntervalIndexedGeometry",get:function(){return zt}}]),e}(),qt=function(){function e(){_classCallCheck(this,e),this.counter=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.counter=i}}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;this.counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[At]}}]),e}(),zt=function(){function e(){_classCallCheck(this,e),this.index=new Dt;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.init(i)}}return _createClass(e,[{key:"init",value:function(e){for(var t=Ft.getLines(e),n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinates();this.addLine(i)}}},{key:"addLine",value:function(e){for(var t=1;t<e.length;t++){var n=new tt(e[t-1],e[t]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this.index.insert(r,i,n)}}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1],s=new Gt;return this.index.query(r,i,s),s.getItems()}if(3===t.length){var r=t[0],i=t[1],a=t[2];this.index.query(r,i,a)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ut=function(){function e(){_classCallCheck(this,e),this.coord=null,this.segmentIndex=null,this.dist=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];this.coord=new L(i),this.segmentIndex=s,this.dist=a}}return _createClass(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}},{key:"compareTo",value:function(e){var t=e;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&0===this.dist?!0:this.segmentIndex===e?!0:!1}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}]),e}(),Yt=function(){function e(){
_classCallCheck(this,e),this.nodeMap=new h,this.edge=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.edge=i}}return _createClass(e,[{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"addEndpoints",value:function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(r);i||n--;var s=new Array(n),a=0;s[a++]=new L(e.coord);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)s[a++]=this.edge.pts[o];return i&&(s[a]=t.coord),new Wt(s,new Lt(this.edge.label))}},{key:"add",value:function(e,t,n){var r=new Ut(e,t,n),i=this.nodeMap.get(r);return null!==i?i:(this.nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Vt=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getChainStartIndices",value:function(t){var n=0,r=new se;r.add(new D(n));do{var i=this.findChainEnd(t,n);r.add(new D(i)),n=i}while(n<t.length-1);var s=e.toIntArray(r);return s}},{key:"findChainEnd",value:function(e,t){for(var n=it.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=it.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),Xt=function(){function e(){_classCallCheck(this,e),this.e=null,this.pts=null,this.startIndex=null,this.env1=new V,this.env2=new V;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.e=i,this.pts=i.getCoordinates();var s=new Vt;this.startIndex=s.getChainStartIndices(this.pts)}}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}},{key:"getMinX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return n>t?t:n}},{key:"computeIntersectsForChain",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(4===t.length){var r=t[0],i=t[1],s=t[2],a=t[3];this.computeIntersectsForChain(this.startIndex[r],this.startIndex[r+1],i,i.startIndex[s],i.startIndex[s+1],a)}else if(6===t.length){var o=t[0],u=t[1],i=t[2],l=t[3],h=t[4],c=t[5],g=this.pts[o],f=this.pts[u],v=i.pts[l],y=i.pts[h];if(u-o===1&&h-l===1)return c.addIntersections(this.e,o,i.e,l),null;if(this.env1.init(g,f),this.env2.init(v,y),!this.env1.intersects(this.env2))return null;var d=Math.trunc((o+u)/2),p=Math.trunc((l+h)/2);d>o&&(p>l&&this.computeIntersectsForChain(o,d,i,l,p,c),h>p&&this.computeIntersectsForChain(o,d,i,p,h,c)),u>d&&(p>l&&this.computeIntersectsForChain(d,u,i,l,p,c),h>p&&this.computeIntersectsForChain(d,u,i,p,h,c))}}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),jt=function(){function e(){_classCallCheck(this,e),this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length)for(var i=0;2>i;i++)for(var s=0;3>s;s++)this.depth[i][s]=e.NULL_VALUE}return _createClass(e,[{key:"getDepth",value:function(e,t){return this.depth[e][t]}},{key:"setDepth",value:function(e,t,n){this.depth[e][t]=n}},{key:"isNull",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length){for(var i=0;2>i;i++)for(var s=0;3>s;s++)if(this.depth[i][s]!==e.NULL_VALUE)return!1;return!0}if(1===n.length){var a=n[0];return this.depth[a][1]===e.NULL_VALUE}if(2===n.length){var a=n[0],o=n[1];return this.depth[a][o]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var e=0;2>e;e++)if(!this.isNull(e)){var t=this.depth[e][1];this.depth[e][2]<t&&(t=this.depth[e][2]),0>t&&(t=0);for(var n=1;3>n;n++){var r=0;this.depth[e][n]>t&&(r=1),this.depth[e][n]=r}}}},{key:"getDelta",value:function(e){return this.depth[e][Et.RIGHT]-this.depth[e][Et.LEFT]}},{key:"getLocation",value:function(e,t){return this.depth[e][t]<=0?P.EXTERIOR:P.INTERIOR}},{key:"toString",value:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}},{key:"add",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length)for(var i=n[0],s=0;2>s;s++)for(var a=1;3>a;a++){var o=i.getLocation(s,a);(o===P.EXTERIOR||o===P.INTERIOR)&&(this.isNull(s,a)?this.depth[s][a]=e.depthAtLocation(o):this.depth[s][a]+=e.depthAtLocation(o))}else if(3===n.length){var u=n[0],l=n[1],h=n[2];h===P.INTERIOR&&this.depth[u][l]++}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthAtLocation",value:function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:e.NULL_VALUE}}]),e}();jt.NULL_VALUE=-1;var Ht=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.label=i}};return s.apply(this,r)}return _createClass(e,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(e){this.label=e}},{key:"getLabel",value:function(){return this.label}},{key:"setCovered",value:function(e){this._isCovered=e,this._isCoveredSet=!0}},{key:"updateIM",value:function(e){R.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Wt=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.pts=null,s.env=null,s.eiList=new Yt(s),s.name=null,s.mce=null,s._isIsolated=!0,s.depth=new jt,s.depthDelta=0;var a=function o(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 1===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];o.call(s,r,null)}.apply(void 0,t):2===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];s.pts=r,s.label=i}.apply(void 0,t):void 0};return e=a.apply(s,r),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"getDepth",value:function(){return this.depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2);e[0]=this.pts[0],e[1]=this.pts[1];var n=new t(e,Lt.toLineLabel(this.label));return n}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this.name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,s=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--s])||(i=!1),!r&&!i)return!1;return!0}},{key:"getCoordinate",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.pts.length>0?this.pts[0]:null;if(1===t.length){var r=t[0];return this.pts[r]}}},{key:"print",value:function(e){e.print("edge "+this.name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this.label+" "+this.depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this.label,e)}},{key:"isCollapsed",value:function(){return this.label.isArea()?3!==this.pts.length?!1:this.pts[0].equals(this.pts[2])?!0:!1:!1}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this.depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this.name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this.mce&&(this.mce=new Xt(this)),this.mce}},{key:"getEnvelope",value:function(){if(null===this.env){this.env=new V;for(var e=0;e<this.pts.length;e++)this.env.expandToInclude(this.pts[e])}return this.env}},{key:"addIntersection",value:function(e,t,n,r){var i=new L(e.getIntersection(r)),s=t,a=e.getEdgeDistance(n,r),o=s+1;if(o<this.pts.length){var u=this.pts[o];i.equals2D(u)&&(s=o,a=0)}this.eiList.add(i,s,a)}},{key:"toString",value:function(){var e=new M;e.append("edge "+this.name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this.label+" "+this.depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this.depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"updateIM",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t),"updateIM",this)).call.apply(e,[this].concat(r));var s=r[0],a=r[1];a.setAtLeastIfValid(s.getLocation(0,Et.ON),s.getLocation(1,Et.ON),1),s.isArea()&&(a.setAtLeastIfValid(s.getLocation(0,Et.LEFT),s.getLocation(1,Et.LEFT),2),a.setAtLeastIfValid(s.getLocation(0,Et.RIGHT),s.getLocation(1,Et.RIGHT),2))}}]),t}(Ht),Kt=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.coord=null,e.edges=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];e.coord=s,e.edges=a,e.label=new Lt(0,P.NONE)}return e}return _inherits(t,e),_createClass(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){var t=e.next();if(t.getEdge().isInResult())return!0}return!1}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.println("node "+this.coord+" lbl: "+this.label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,t){var n=P.NONE;if(n=this.label.getLocation(t),!e.isNull(t)){var r=e.getLocation(t);n!==P.BOUNDARY&&(n=r)}return n}},{key:"setLabel",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"setLabel",this)).call.apply(e,[this].concat(r));var s=r[0],a=r[1];null===this.label?this.label=new Lt(s,a):this.label.setLocation(s,a)}},{key:"getEdges",value:function(){return this.edges}},{key:"mergeLabel",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof t){var i=n[0];this.mergeLabel(i.label)}else if(n[0]instanceof Lt)for(var s=n[0],a=0;2>a;a++){var o=this.computeMergedLocation(s,a),u=this.label.getLocation(a);u===P.NONE&&this.label.setLocation(a,o)}}},{key:"add",value:function(e){this.edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this.label)return null;var t=P.NONE;null!==this.label&&(t=this.label.getLocation(e));var n=null;switch(t){case P.BOUNDARY:n=P.INTERIOR;break;case P.INTERIOR:n=P.BOUNDARY;break;default:n=P.BOUNDARY}this.label.setLocation(e,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Ht),Jt=function(){function e(){_classCallCheck(this,e),this.nodeMap=new h,this.nodeFact=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.nodeFact=i}}return _createClass(e,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"addNode",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof L){var r=t[0],i=this.nodeMap.get(r);return null===i&&(i=this.nodeFact.createNode(r),this.nodeMap.put(r,i)),i}if(t[0]instanceof Kt){var s=t[0],i=this.nodeMap.get(s.getCoordinate());return null===i?(this.nodeMap.put(s.getCoordinate(),s),s):(i.mergeLabel(s),i)}}}},{key:"print",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(e){for(var t=new se,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===P.BOUNDARY&&t.add(r)}return t}},{key:"add",value:function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Qt=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.edge=i}else if(3===n.length){var i=n[0],s=n[1],o=n[2];a.call(t,i,s,o,null)}else if(4===n.length){var i=n[0],s=n[1],o=n[2],u=n[3];a.call(t,i),t.init(s,o),t.label=u}};return s.apply(this,r)}return _createClass(e,[{key:"compareDirection",value:function(e){return this.dx===e.dx&&this.dy===e.dy?0:this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:Q.computeOrientation(e.p0,e.p1,this.p1)}},{key:"getDy",value:function(){return this.dy}},{key:"getCoordinate",value:function(){return this.p0}},{key:"setNode",value:function(e){this.node=e}},{key:"print",value:function(e){var t=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this.p1}},{key:"getDx",value:function(){return this.dx}},{key:"getLabel",value:function(){return this.label}},{key:"getEdge",value:function(){return this.edge}},{key:"getQuadrant",value:function(){return this.quadrant}},{key:"getNode",value:function(){return this.node}},{key:"toString",value:function(){var e=Math.atan2(this.dy,this.dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this.p0=e,this.p1=t,this.dx=t.x-e.x,this.dy=t.y-e.y,this.quadrant=it.quadrant(this.dx,this.dy),R.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}]),e}(),Zt=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.pt=null;var o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 1===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s))}.apply(void 0,r):2===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0],a=r[1],o=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,t.msgWithCoord(s,a)));o.pt=new L(a)}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"msgWithCoord",value:function(e,t){return null!==t?e+" [ "+t+" ]":e}}]),t}(S),$t=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e._isForward=null,e._isInResult=!1,e._isVisited=!1,e.sym=null,e.next=null,e.nextMin=null,e.edgeRing=null,e.minEdgeRing=null,e.depth=[0,-999,-999];for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s));if(e._isForward=a,a)e.init(s.getCoordinate(0),s.getCoordinate(1));else{var o=s.getNumPoints()-1;e.init(s.getCoordinate(o),s.getCoordinate(o-1))}e.computeDirectedLabel()}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getNextMin",value:function(){return this.nextMin}},{key:"getDepth",value:function(e){return this.depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this.label=new Lt(this.edge.getLabel()),this._isForward||this.label.flip()}},{key:"getNext",value:function(){return this.next}},{key:"setDepth",value:function(e,t){if(-999!==this.depth[e]&&this.depth[e]!==t)throw new Zt("assigned depths do not match",this.getCoordinate());this.depth[e]=t}},{key:"isInteriorAreaEdge",value:function n(){for(var n=!0,e=0;2>e;e++)this.label.isArea(e)&&this.label.getLocation(e,Et.LEFT)===P.INTERIOR&&this.label.getLocation(e,Et.RIGHT)===P.INTERIOR||(n=!1);return n}},{key:"setNextMin",value:function(e){this.nextMin=e}},{key:"print",value:function(e){_get(Object.getPrototypeOf(t.prototype),"print",this).call(this,e),e.print(" "+this.depth[Et.LEFT]+"/"+this.depth[Et.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this.minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this.label.isLine(0)||this.label.isLine(1),t=!this.label.isArea(0)||this.label.allPositionsEqual(0,P.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,P.EXTERIOR);return e&&t&&n}},{key:"setEdgeRing",value:function(e){this.edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this.minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this.edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this.sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this.edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this.edge.print(e):this.edge.printReverse(e)}},{key:"setSym",value:function(e){this.sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this.sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===Et.LEFT&&(r=-1);var i=Et.opposite(e),s=n*r,a=t+s;this.setDepth(e,t),this.setDepth(i,a)}},{key:"getEdgeRing",value:function(){return this.edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this.next=e}},{key:"isVisited",value:function(){return this._isVisited}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthFactor",value:function(e,t){return e===P.EXTERIOR&&t===P.INTERIOR?1:e===P.INTERIOR&&t===P.EXTERIOR?-1:0}}]),t}(Qt),en=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createNode",value:function(e){return new Kt(e,null)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),tn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.edges=new se,this.nodes=null,this.edgeEndList=new se;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)t.nodes=new Jt(new en);else if(1===n.length){var i=n[0];t.nodes=new Jt(i)}};return s.apply(this,r)}return _createClass(e,[{key:"printEdges",value:function(e){e.println("Edges:");for(var t=0;t<this.edges.size();t++){e.println("edge "+t+":");var n=this.edges.get(t);n.print(e),n.eiList.print(e)}}},{key:"find",value:function(e){return this.nodes.find(e)}},{key:"addNode",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Kt){var r=t[0];return this.nodes.addNode(r)}if(t[0]instanceof L){var i=t[0];return this.nodes.addNode(i)}}}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}}},{key:"debugPrintln",value:function(e){U.out.println(e)}},{key:"isBoundaryNode",value:function(e,t){var n=this.nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===P.BOUNDARY?!0:!1}},{key:"linkAllDirectedEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}}},{key:"matchInSameDirection",value:function(e,t,n,r){return e.equals(n)&&Q.computeOrientation(e,t,r)===Q.COLLINEAR&&it.quadrant(e,t)===it.quadrant(n,r)?!0:!1}},{key:"getEdgeEnds",value:function(){return this.edgeEndList}},{key:"debugPrint",value:function(e){U.out.print(e)}},{key:"getEdgeIterator",value:function(){return this.edges.iterator()}},{key:"findEdgeInSameDirection",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return r;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return r}return null}},{key:"insertEdge",value:function(e){this.edges.add(e)}},{key:"findEdgeEnd",value:function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}},{key:"addEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.edges.add(n);var r=new $t(n,!0),i=new $t(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}},{key:"add",value:function(e){this.nodes.add(e),this.edgeEndList.add(e)}},{key:"getNodes",value:function(){return this.nodes.values()}},{key:"findEdge",value:function(e,t){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),i=r.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return r}return null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"linkResultDirectedEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}}}]),e}(),nn=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.parentGeom=null,s.lineEdgeMap=new v,s.boundaryNodeRule=null,s.useBoundaryDeterminationRule=!0,s.argIndex=null,s.boundaryNodes=null,s._hasTooFewPoints=!1,s.invalidPoint=null,s.areaPtLocator=null,s.ptLocator=new Ct;var a=function o(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 2===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];o.call(s,r,i,ee.OGC_SFS_BOUNDARY_RULE)}.apply(void 0,t):3===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];s.argIndex=r,s.parentGeom=i,s.boundaryNodeRule=a,null!==i&&s.add(i)}.apply(void 0,t):void 0};return e=a.apply(s,r),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"insertBoundaryPoint",value:function(e,n){var r=this.nodes.addNode(n),i=r.getLabel(),s=1,a=P.NONE;a=i.getLocation(e,Et.ON),a===P.BOUNDARY&&s++;var o=t.determineBoundary(this.boundaryNodeRule,s);i.setLocation(e,o)}},{key:"computeSelfNodes",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];return this.computeSelfNodes(r,i,!1)}if(3===t.length){var r=t[0],i=t[1],s=t[2],a=new St(r,!0,!1);a.setIsDoneIfProperInt(s);var o=this.createEdgeSetIntersector(),u=this.parentGeom instanceof Ye||this.parentGeom instanceof ze||this.parentGeom instanceof Ve,l=i||!u;return o.computeIntersections(this.edges,a,l),this.addSelfIntersectionNodes(this.argIndex),a}}},{key:"computeSplitEdges",value:function(e){for(var t=this.edges.iterator();t.hasNext();){var n=t.next();n.eiList.addSplitEdges(e)}}},{key:"computeEdgeIntersections",value:function(e,t,n){var r=new St(t,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());var i=this.createEdgeSetIntersector();return i.computeIntersections(this.edges,e.edges,r),r}},{key:"getGeometry",value:function(){return this.parentGeom}},{key:"getBoundaryNodeRule",value:function(){return this.boundaryNodeRule}},{key:"hasTooFewPoints",value:function(){return this._hasTooFewPoints}},{key:"addPoint",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Be){var r=t[0],i=r.getCoordinate();this.insertPoint(this.argIndex,i,P.INTERIOR)}else if(t[0]instanceof L){var s=t[0];this.insertPoint(this.argIndex,s,P.INTERIOR)}}},{key:"addPolygon",value:function(e){this.addPolygonRing(e.getExteriorRing(),P.EXTERIOR,P.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var n=e.getInteriorRingN(t);this.addPolygonRing(n,P.INTERIOR,P.EXTERIOR)}}},{key:"addEdge",value:function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this.argIndex,t[0],P.BOUNDARY),this.insertPoint(this.argIndex,t[t.length-1],P.BOUNDARY)}},{key:"addLineString",value:function(e){var t=ue.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=t[0],null;var n=new Wt(t,new Lt(this.argIndex,P.INTERIOR));this.lineEdgeMap.put(e,n),this.insertEdge(n),R.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,t[0]),this.insertBoundaryPoint(this.argIndex,t[t.length-1])}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"getBoundaryPoints",value:function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()),n=0,r=e.iterator();r.hasNext();){var i=r.next();t[n++]=i.getCoordinate().copy()}return t}},{key:"getBoundaryNodes",value:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes}},{key:"addSelfIntersectionNode",value:function(e,t,n){return this.isBoundaryNode(e,t)?null:void(n===P.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,n))}},{key:"addPolygonRing",value:function(e,t,n){if(e.isEmpty())return null;var r=ue.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var i=t,s=n;Q.isCCW(r)&&(i=n,s=t);var a=new Wt(r,new Lt(this.argIndex,P.BOUNDARY,i,s));this.lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this.argIndex,r[0],P.BOUNDARY)}},{key:"insertPoint",value:function(e,t,n){var r=this.nodes.addNode(t),i=r.getLabel();null===i?r.label=new Lt(e,n):i.setLocation(e,n)}},{key:"createEdgeSetIntersector",value:function(){return new Ot}},{key:"addSelfIntersectionNodes",value:function(e){for(var t=this.edges.iterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.eiList.iterator();i.hasNext();){var s=i.next();this.addSelfIntersectionNode(e,s.coord,r)}}},{key:"add",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"add",this)).call.apply(e,[this].concat(r));var s=r[0];if(s.isEmpty())return null;if(s instanceof Ve&&(this.useBoundaryDeterminationRule=!1),s instanceof ze)this.addPolygon(s);else if(s instanceof Fe)this.addLineString(s);else if(s instanceof Be)this.addPoint(s);else if(s instanceof Ue)this.addCollection(s);else if(s instanceof Se)this.addCollection(s);else if(s instanceof Ve)this.addCollection(s);else{if(!(s instanceof Ne))throw new UnsupportedOperationException(s.getClass().getName());this.addCollection(s)}}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"locate",value:function(e){return this.parentGeom.interfaces_&&this.parentGeom.interfaces_.indexOf(qe)>-1&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Bt(this.parentGeom)),this.areaPtLocator.locate(e)):this.ptLocator.locate(e,this.parentGeom)}},{key:"findEdge",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];return this.lineEdgeMap.get(s)}return(e=_get(Object.getPrototypeOf(t.prototype),"findEdge",this)).call.apply(e,[this].concat(r))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"determineBoundary",value:function(e,t){return e.isInBoundary(t)?P.BOUNDARY:P.INTERIOR}}]),t}(tn),rn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.inputGeom=i}else if(2===n.length){var i=n[0],s=n[1];t.inputGeom=i,t.isClosedEndpointsInInterior=!s.isInBoundary(2)}};return s.apply(this,r)}return _createClass(e,[{key:"isSimpleMultiPoint",value:function(e){if(e.isEmpty())return!0;for(var t=new g,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n),i=r.getCoordinate();if(t.contains(i))return this.nonSimpleLocation=i,!1;t.add(i)}return!0}},{key:"isSimplePolygonal",value:function(e){for(var t=Ft.getLines(e),n=t.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0}},{key:"hasClosedEndpointIntersection",value:function(e){for(var t=new h,n=e.getEdgeIterator();n.hasNext();){var r=n.next(),i=(r.getMaximumSegmentIndex(),r.isClosed()),s=r.getCoordinate(0);this.addEndpoint(t,s,i);var a=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(t,a,i)}for(var n=t.values().iterator();n.hasNext();){var o=n.next();if(o.isClosed&&2!==o.degree)return this.nonSimpleLocation=o.getCoordinate(),!0}return!1;
}},{key:"getNonSimpleLocation",value:function(){return this.nonSimpleLocation}},{key:"isSimpleLinearGeometry",value:function(e){if(e.isEmpty())return!0;var t=new nn(0,e),n=new W,r=t.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(t)?!1:this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(t)?!1:!0:!0}},{key:"hasNonEndpointIntersection",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getMaximumSegmentIndex(),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next();if(!s.isEndPoint(r))return this.nonSimpleLocation=s.getCoordinate(),!0}return!1}},{key:"addEndpoint",value:function(e,t,n){var r=e.get(t);null===r&&(r=new sn(t),e.put(t,r)),r.addEndpoint(n)}},{key:"computeSimple",value:function(e){return this.nonSimpleLocation=null,e.isEmpty()?!0:e instanceof Fe?this.isSimpleLinearGeometry(e):e instanceof Se?this.isSimpleLinearGeometry(e):e instanceof Ue?this.isSimpleMultiPoint(e):e.interfaces_&&e.interfaces_.indexOf(qe)>-1?this.isSimplePolygonal(e):e instanceof Ne?this.isSimpleGeometryCollection(e):!0}},{key:"isSimple",value:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)}},{key:"isSimpleGeometryCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.computeSimple(n))return!1}return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"EndpointInfo",get:function(){return sn}}]),e}(),sn=function(){function e(){_classCallCheck(this,e),this.pt=null,this.isClosed=null,this.degree=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pt=i,this.isClosed=!1,this.degree=0}}return _createClass(e,[{key:"addEndpoint",value:function(e){this.degree++,this.isClosed|=e}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),an=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=e.CAP_ROUND,this.joinStyle=e.JOIN_ROUND,this.mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.setQuadrantSegments(i)}else if(2===n.length){var i=n[0],s=n[1];t.setQuadrantSegments(i),t.setEndCapStyle(s)}else if(4===n.length){var i=n[0],s=n[1],a=n[2],o=n[3];t.setQuadrantSegments(i),t.setEndCapStyle(s),t.setJoinStyle(a),t.setMitreLimit(o)}};return s.apply(this,r)}return _createClass(e,[{key:"getEndCapStyle",value:function(){return this.endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=e.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=e.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==e.JOIN_ROUND&&(this.quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this.joinStyle}},{key:"setJoinStyle",value:function(e){this.joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this.simplifyFactor=0>e?0:e}},{key:"getSimplifyFactor",value:function(){return this.simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this.quadrantSegments}},{key:"setEndCapStyle",value:function(e){this.endCapStyle=e}},{key:"getMitreLimit",value:function(){return this.mitreLimit}},{key:"setMitreLimit",value:function(e){this.mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}]),e}();an.CAP_ROUND=1,an.CAP_FLAT=2,an.CAP_SQUARE=3,an.JOIN_ROUND=1,an.JOIN_MITRE=2,an.JOIN_BEVEL=3,an.DEFAULT_QUADRANT_SEGMENTS=8,an.DEFAULT_MITRE_LIMIT=5,an.DEFAULT_SIMPLIFY_FACTOR=.01;var on=function(){function e(){_classCallCheck(this,e),this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getCoordinate",value:function(){return this.minCoord}},{key:"getRightmostSide",value:function(e,t){var n=this.getRightmostSideOfSegment(e,t);return 0>n&&(n=this.getRightmostSideOfSegment(e,t-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(e)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var e=this.minDe.getEdge().getCoordinates();R.isTrue(this.minIndex>0&&this.minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this.minIndex-1],n=e[this.minIndex+1],r=Q.computeOrientation(this.minCoord,n,t),i=!1;t.y<this.minCoord.y&&n.y<this.minCoord.y&&r===Q.COUNTERCLOCKWISE?i=!0:t.y>this.minCoord.y&&n.y>this.minCoord.y&&r===Q.CLOCKWISE&&(i=!0),i&&(this.minIndex=this.minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(0>t||t+1>=r.length)return-1;if(r[t].y===r[t+1].y)return-1;var i=Et.LEFT;return r[t].y<r[t+1].y&&(i=Et.RIGHT),i}},{key:"getEdge",value:function(){return this.orientedDe}},{key:"checkForRightmostCoordinate",value:function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this.minCoord||t[n].x>this.minCoord.x)&&(this.minDe=e,this.minIndex=n,this.minCoord=t[n])}},{key:"findRightmostEdgeAtNode",value:function(){var e=this.minDe.getNode(),t=e.getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}R.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===Et.LEFT&&(this.orientedDe=this.minDe.getSym())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),un=function(){function e(){_classCallCheck(this,e),this.array_=[]}return _createClass(e,[{key:"addLast",value:function(e){this.array_.push(e)}},{key:"removeFirst",value:function(){return this.array_.shift()}},{key:"isEmpty",value:function(){return 0===this.array_.length}}]),e}(),ln=function(){function e(){_classCallCheck(this,e),this.finder=null,this.dirEdgeList=new se,this.nodes=new se,this.rightMostCoord=null,this.env=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.finder=new on)}return _createClass(e,[{key:"clearVisitedEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}}},{key:"getRightmostCoordinate",value:function(){return this.rightMostCoord}},{key:"computeNodeDepth",value:function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new Zt("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}}},{key:"computeDepth",value:function(e){this.clearVisitedEdges();var t=this.finder.getEdge();t.getNode(),t.getLabel();t.setEdgeDepths(Et.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(e){this.addReachable(e),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var e=this.dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Et.RIGHT)>=1&&t.getDepth(Et.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(e){var t=new l,n=new un,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();t.add(i),this.computeNodeDepth(i);for(var s=i.getEdges().iterator();s.hasNext();){var a=s.next(),o=a.getSym();if(!o.isVisited()){var u=o.getNode();t.contains(u)||(n.addLast(u),t.add(u))}}}}},{key:"compareTo",value:function(e){var t=e;return this.rightMostCoord.x<t.rightMostCoord.x?-1:this.rightMostCoord.x>t.rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this.env){for(var e=new V,t=this.dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this.env=e}return this.env}},{key:"addReachable",value:function(e){var t=new d;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}},{key:"copySymDepths",value:function(e){var t=e.getSym();t.setDepth(Et.LEFT,e.getDepth(Et.RIGHT)),t.setDepth(Et.RIGHT,e.getDepth(Et.LEFT))}},{key:"add",value:function(e,t){e.setVisited(!0),this.nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var i=r.getSym(),s=i.getNode();s.isVisited()||t.push(s)}}},{key:"getNodes",value:function(){return this.nodes}},{key:"getDirectedEdges",value:function(){return this.dirEdgeList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}]),e}(),hn=function(){function e(){_classCallCheck(this,e),this.startDe=null,this.maxNodeDegree=-1,this.edges=new se,this.pts=new se,this.label=new Lt(P.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new se,this.geometryFactory=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.geometryFactory=s,this.computePoints(i),this.computeRing()}}return _createClass(e,[{key:"computeRing",value:function(){if(null!==this.ring)return null;for(var e=new Array(this.pts.size()),t=0;t<this.pts.size();t++)e[t]=this.pts.get(t);this.ring=this.geometryFactory.createLinearRing(e),this._isHole=Q.isCCW(this.ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this.label.getGeometryCount()}},{key:"computePoints",value:function(e){this.startDe=e;var t=e,n=!0;do{if(null===t)throw new Zt("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new Zt("Directed Edge visited twice during ring-building at "+t.getCoordinate());this.edges.add(t);var r=t.getLabel();R.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this.startDe)}},{key:"getLinearRing",value:function(){return this.ring}},{key:"getCoordinate",value:function(e){return this.pts.get(e)}},{key:"computeMaxNodeDegree",value:function(){this.maxNodeDegree=0;var e=this.startDe;do{var t=e.getNode(),n=t.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),e=this.getNext(e)}while(e!==this.startDe);this.maxNodeDegree*=2}},{key:"addPoints",value:function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var s=i;s<r.length;s++)this.pts.add(r[s])}else{var i=r.length-2;n&&(i=r.length-1);for(var s=i;s>=0;s--)this.pts.add(r[s])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var e=this.startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this.startDe)}},{key:"containsPoint",value:function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e))return!1;if(!Q.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0}},{key:"addHole",value:function(e){this.holes.add(e)}},{key:"isShell",value:function(){return null===this.shell}},{key:"getLabel",value:function(){return this.label}},{key:"getEdges",value:function(){return this.edges}},{key:"getMaxNodeDegree",value:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree}},{key:"getShell",value:function(){return this.shell}},{key:"mergeLabel",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.mergeLabel(r,0),this.mergeLabel(r,1)}else if(2===t.length){var r=t[0],i=t[1],s=r.getLocation(i,Et.RIGHT);if(s===P.NONE)return null;if(this.label.getLocation(i)===P.NONE)return this.label.setLocation(i,s),null}}},{key:"setShell",value:function(e){this.shell=e,null!==e&&e.addHole(this)}},{key:"toPolygon",value:function(e){for(var t=new Array(this.holes.size()),n=0;n<this.holes.size();n++)t[n]=this.holes.get(n).getLinearRing();var r=e.createPolygon(this.getLinearRing(),t);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),cn=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"setEdgeRing",value:function(e,t){e.setMinEdgeRing(t)}},{key:"getNext",value:function(e){return e.getNextMin()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(hn),gn=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"buildMinimalRings",value:function(){var e=new se,t=this.startDe;do{if(null===t.getMinEdgeRing()){var n=new cn(t,this.geometryFactory);e.add(n)}t=t.getNext()}while(t!==this.startDe);return e}},{key:"setEdgeRing",value:function(e,t){e.setEdgeRing(t)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this.startDe;do{var t=e.getNode();t.getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this.startDe)}},{key:"getNext",value:function(e){return e.getNext()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(hn),fn=function(){function e(){_classCallCheck(this,e),this.geometryFactory=null,this.shellList=new se;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geometryFactory=i}}return _createClass(e,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}}},{key:"computePolygons",value:function(e){for(var t=new se,n=e.iterator();n.hasNext();){var r=n.next(),i=r.toPolygon(this.geometryFactory);t.add(i)}return t}},{key:"placeFreeHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,e);if(null===i)throw new Zt("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var r=new se,i=e.iterator();i.hasNext();){var s=i.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings(),o=this.findShell(a);null!==o?(this.placePolygonHoles(o,a),t.add(o)):n.addAll(a)}else r.add(s)}return r}},{key:"containsPoint",value:function(e){for(var t=this.shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new se,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new gn(r,this.geometryFactory);t.add(i),i.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}}},{key:"getPolygons",value:function(){var e=this.computePolygons(this.shellList);return e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),s=null,a=null,o=t.iterator();o.hasNext();){var u=o.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();null!==s&&(a=s.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(r)&&Q.isPointInRing(i,l.getCoordinates())&&(c=!0),c&&(null===s||a.contains(h))&&(s=u)}return s}},{key:"findShell",value:function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return R.isTrue(1>=t,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];this.add(r.getEdgeEnds(),r.getNodes())}else if(2===t.length){var i=t[0],s=t[1];tn.linkResultDirectedEdges(s);var a=this.buildMaximalEdgeRings(i),o=new se,u=this.buildMinimalEdgeRings(a,this.shellList,o);this.sortShellsAndHoles(u,this.shellList,o),this.placeFreeHoles(this.shellList,o)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),vn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBounds",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),yn=function(){function e(){_classCallCheck(this,e),this.bounds=null,this.item=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.bounds=i,this.item=s}}return _createClass(e,[{key:"getItem",value:function(){return this.item}},{key:"getBounds",value:function(){return this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[vn,N]}}]),e}(),dn=function(){function e(){_classCallCheck(this,e),this._size=null,this.items=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this._size=0,this.items=new se,this.items.add(null))}return _createClass(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var e=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),e}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(e){for(var t=null,n=this.items.get(e);2*e<=this._size&&(t=2*e,t!==this._size&&this.items.get(t+1).compareTo(this.items.get(t))<0&&t++,this.items.get(t).compareTo(n)<0);e=t)this.items.set(e,this.items.get(t));this.items.set(e,n)}},{key:"clear",value:function(){this._size=0,this.items.clear()}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(e){this.items.add(null),this._size+=1;var t=this._size;for(this.items.set(0,e);e.compareTo(this.items.get(Math.trunc(t/2)))<0;t/=2)this.items.set(t,this.items.get(Math.trunc(t/2)));this.items.set(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),pn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"insert",value:function(e,t){}},{key:"remove",value:function(e,t){}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){t[0]}else if(2===t.length){t[0],t[1]}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),mn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.childBoundables=new se,this.bounds=null,this.level=null;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.level=i}};return s.apply(this,r)}return _createClass(e,[{key:"getLevel",value:function(){return this.level}},{key:"size",value:function(){return this.childBoundables.size()}},{key:"getChildBoundables",value:function(){return this.childBoundables}},{key:"addChildBoundable",value:function(e){R.isTrue(null===this.bounds),this.childBoundables.add(e)}},{key:"isEmpty",value:function(){return this.childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[vn,N]}}]),e}();mn.serialVersionUID=0x5a1e55ec41369800;var kn=function(){function e(){_classCallCheck(this,e),this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];this.boundable1=i,this.boundable2=s,this.itemDistance=a,this._distance=this.distance()}}return _createClass(e,[{key:"expandToQueue",value:function(t,n){var r=e.isComposite(this.boundable1),i=e.isComposite(this.boundable2);if(r&&i)return e.area(this.boundable1)>e.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,n),null):(this.expand(this.boundable2,this.boundable1,t,n),null);if(r)return this.expand(this.boundable1,this.boundable2,t,n),null;if(i)return this.expand(this.boundable2,this.boundable1,t,n),null;throw new C("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this.boundable1)||e.isComposite(this.boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(t,n,r,i){for(var s=t.getChildBoundables(),a=s.iterator();a.hasNext();){var o=a.next(),u=new e(o,n,this.itemDistance);u.getDistance()<i&&r.add(u)}}},{key:"getBoundable",value:function(e){return 0===e?this.boundable1:this.boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}],[{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof mn}}]),e}(),Cn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.root=null,this.built=!1,this.itemBoundables=new se,this.nodeCapacity=null;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)a.call(t,e.DEFAULT_NODE_CAPACITY);else if(1===r.length){var s=r[0];R.isTrue(s>1,"Node capacity must be greater than 1"),t.nodeCapacity=s}};return s.apply(this,r)}return _createClass(e,[{key:"getNodeCapacity",value:function(){return this.nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function t(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===n.length){for(var i=n[0],t=0,s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof mn?t+=this.size(a):a instanceof yn&&(t+=1)}return t}}},{key:"removeItem",value:function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof yn&&i.getItem()===t&&(n=i)}return null!==n?(e.getChildBoundables().remove(n),!0):!1}},{key:"itemsTree",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){this.build();var r=this.itemsTree(this.root);return null===r?new se:r}if(1===t.length){for(var i=t[0],s=new se,a=i.getChildBoundables().iterator();a.hasNext();){var o=a.next();if(o instanceof mn){var u=this.itemsTree(o);null!==u&&s.add(u)}else o instanceof yn?s.add(o.getItem()):R.shouldNeverReachHere()}return s.size()<=0?null:s}}},{key:"insert",value:function(e,t){R.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new yn(e,t))}},{key:"boundablesAtLevel",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=new se;return this.boundablesAtLevel(r,this.root,i),i}if(3===t.length){var r=t[0],s=t[1],a=t[2];if(R.isTrue(r>-2),s.getLevel()===r)return a.add(s),null;for(var o=s.getChildBoundables().iterator();o.hasNext();){var u=o.next();u instanceof mn?this.boundablesAtLevel(r,u,a):(R.isTrue(u instanceof yn),-1===r&&a.add(u))}return null}}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var i=t[0];this.build();var s=new se;return this.isEmpty()?s:(this.getIntersectsOp().intersects(this.root.getBounds(),i)&&this.query(i,this.root,s),s)}if(2===t.length){var i=t[0],a=t[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),i)&&this.query(i,this.root,a)}else if(3===t.length)if(t[2].interfaces_&&t[2].interfaces_.indexOf(At)>-1&&t[0]instanceof Object&&t[1]instanceof mn)for(var i=t[0],o=t[1],a=t[2],u=o.getChildBoundables(),l=0;l<u.size();l++){var h=u.get(l);this.getIntersectsOp().intersects(h.getBounds(),i)&&(h instanceof mn?this.query(i,h,a):h instanceof yn?a.visitItem(h.getItem()):R.shouldNeverReachHere())}else if(t[2].interfaces_&&t[2].interfaces_.indexOf(r)>-1&&t[0]instanceof Object&&t[1]instanceof mn)for(var i=t[0],o=t[1],c=t[2],u=o.getChildBoundables(),l=0;l<u.size();l++){var h=u.get(l);this.getIntersectsOp().intersects(h.getBounds(),i)&&(h instanceof mn?this.query(i,h,c):h instanceof yn?c.add(h.getItem()):R.shouldNeverReachHere())}}},{key:"build",value:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))}},{key:"getRoot",value:function(){return this.build(),this.root}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),r)?this.remove(r,this.root,i):!1}if(3===t.length){var r=t[0],s=t[1],i=t[2],a=this.removeItem(s,i);if(a)return!0;for(var o=null,u=s.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(this.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof mn&&(a=this.remove(r,l,i))){o=l;break}}return null!==o&&o.getChildBoundables().isEmpty()&&s.getChildBoundables().remove(o),a}}},{key:"createHigherLevels",value:function(e,t){R.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===t.length){for(var r=t[0],i=0,s=r.getChildBoundables().iterator();s.hasNext();){var a=s.next();if(a instanceof mn){var o=this.depth(a);o>i&&(i=o)}}return i+1}}},{key:"createParentBoundables",value:function(e,t){R.isTrue(!e.isEmpty());var n=new se;n.add(this.createNode(t));var r=new se(e);Nt.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var s=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(s)}return n}},{key:"isEmpty",value:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[N]}}],[{key:"compareDoubles",value:function(e,t){return e>t?1:t>e?-1:0}},{key:"IntersectsOp",get:function(){return En}}]),e}(),En=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intersects",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();Cn.serialVersionUID=-0x35ef64c82d4c5400,Cn.DEFAULT_NODE_CAPACITY=10;var In=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"distance",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),xn=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),o=function u(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 0===r.length?function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];u.call(a,t.DEFAULT_NODE_CAPACITY)}.apply(void 0,r):1===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s))}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,t){R.isTrue(e.length>0);for(var n=new se,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n}},{key:"createNode",value:function(e){return new _n(e)}},{key:"size",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length?_get(Object.getPrototypeOf(t.prototype),"size",this).call(this):(e=_get(Object.getPrototypeOf(t.prototype),"size",this)).call.apply(e,[this].concat(r))}},{key:"insert",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"insert",this)).call.apply(e,[this].concat(r));var s=r[0],a=r[1];return s.isNull()?null:void _get(Object.getPrototypeOf(t.prototype),"insert",this).call(this,s,a)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t),i=e.iterator(),s=0;t>s;s++){r[s]=new se;for(var a=0;i.hasNext()&&n>a;){var o=i.next();r[s].add(o),a++}}return r}},{key:"query",value:function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];if(1===n.length){var s=n[0];return _get(Object.getPrototypeOf(t.prototype),"query",this).call(this,s)}if(2===n.length){var s=n[0],a=n[1];_get(Object.getPrototypeOf(t.prototype),"query",this).call(this,s,a)}else if(3===n.length)if(n[2].interfaces_&&n[2].interfaces_.indexOf(At)>-1&&n[0]instanceof Object&&n[1]instanceof mn){var o=n[0],u=n[1],a=n[2];_get(Object.getPrototypeOf(t.prototype),"query",this).call(this,o,u,a)}else if(n[2].interfaces_&&n[2].interfaces_.indexOf(r)>-1&&n[0]instanceof Object&&n[1]instanceof mn){var o=n[0],u=n[1],l=n[2];_get(Object.getPrototypeOf(t.prototype),"query",this).call(this,o,u,l)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return _get(Object.getPrototypeOf(t.prototype),"createParentBoundables",this).call(this,e,n)}},{key:"remove",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];return _get(Object.getPrototypeOf(t.prototype),"remove",this).call(this,s,a)}return(e=_get(Object.getPrototypeOf(t.prototype),"remove",this)).call.apply(e,[this].concat(r))}},{key:"depth",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length?_get(Object.getPrototypeOf(t.prototype),"depth",this).call(this):(e=_get(Object.getPrototypeOf(t.prototype),"depth",this)).call.apply(e,[this].concat(r))}},{key:"createParentBoundables",value:function(e,n){R.isTrue(!e.isEmpty());var r=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),i=new se(e);Nt.sort(i,t.xComparator);var s=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(s,n)}},{key:"nearestNeighbour",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];
if(1===n.length){if(n[0].interfaces_&&n[0].interfaces_.indexOf(In)>-1){var i=n[0],s=new kn(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(s)}if(n[0]instanceof kn){var a=n[0];return this.nearestNeighbour(a,E.POSITIVE_INFINITY)}}else if(2===n.length){if(n[0]instanceof t&&n[1].interfaces_&&n[1].interfaces_.indexOf(In)>-1){var o=n[0],i=n[1],s=new kn(this.getRoot(),o.getRoot(),i);return this.nearestNeighbour(s)}if(n[0]instanceof kn&&"number"==typeof n[1]){var a=n[0],u=n[1],l=u,h=null,c=new dn;for(c.add(a);!c.isEmpty()&&l>0;){var g=c.poll(),f=g.getDistance();if(f>=l)break;g.isLeaves()?(l=f,h=g):g.expandToQueue(c,l)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===n.length){var v=n[0],y=n[1],i=n[2],d=new yn(v,y),s=new kn(this.getRoot(),d,i);return this.nearestNeighbour(s)[0]}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[pn,N]}}],[{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}},{key:"STRtreeNode",get:function(){return _n}}]),t}(Cn),_n=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length)var s=r[0],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"computeBounds",value:function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new V(n.getBounds()):e.expandToInclude(n.getBounds())}return e}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(mn);xn.serialVersionUID=0x39920f7d5f261e0,xn.xComparator=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){return xn.compareDoubles(xn.centreX(e.getBounds()),xn.centreX(t.getBounds()))}},{key:"interfaces_",get:function(){return[_]}}]),e}()),xn.yComparator=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){return xn.compareDoubles(xn.centreY(e.getBounds()),xn.centreY(t.getBounds()))}},{key:"interfaces_",get:function(){return[_]}}]),e}()),xn.intersectsOp=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intersects",value:function(e,t){return e.intersects(t)}},{key:"interfaces_",get:function(){return[IntersectsOp]}}]),e}()),xn.DEFAULT_NODE_CAPACITY=10;var Nn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"relativeSign",value:function(e,t){return t>e?-1:e>t?1:0}},{key:"compare",value:function(t,n,r){if(n.equals2D(r))return 0;var i=e.relativeSign(n.x,r.x),s=e.relativeSign(n.y,r.y);switch(t){case 0:return e.compareValue(i,s);case 1:return e.compareValue(s,i);case 2:return e.compareValue(s,-i);case 3:return e.compareValue(-i,s);case 4:return e.compareValue(-i,-s);case 5:return e.compareValue(-s,-i);case 6:return e.compareValue(-s,i);case 7:return e.compareValue(i,-s)}return R.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return 0>e?-1:e>0?1:0>t?-1:t>0?1:0}}]),e}(),Sn=function(){function e(){_classCallCheck(this,e),this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(4===n.length){var i=n[0],s=n[1],a=n[2],o=n[3];this.segString=i,this.coord=new L(s),this.segmentIndex=a,this.segmentOctant=o,this._isInterior=!s.equals2D(i.getCoordinate(a))}}return _createClass(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Nn.compare(this.segmentOctant,this.coord,t.coord)}},{key:"isEndPoint",value:function(e){return 0!==this.segmentIndex||this._isInterior?this.segmentIndex===e?!0:!1:!0}},{key:"isInterior",value:function(){return this._isInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}]),e}(),On=function(){function e(){_classCallCheck(this,e),this.nodeMap=new h,this.edge=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.edge=i}}return _createClass(e,[{key:"getSplitCoordinates",value:function(){var e=new oe;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var e=new se;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this.edge.getCoordinate(n),n)}}},{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"findCollapsesFromExistingVertices",value:function(e){for(var t=0;t<this.edge.size()-2;t++){var n=this.edge.getCoordinate(t),r=(this.edge.getCoordinate(t+1),this.edge.getCoordinate(t+2));n.equals2D(r)&&e.add(new D(t+1))}}},{key:"addEdgeCoordinates",value:function(e,t,n){var r=t.segmentIndex-e.segmentIndex+2,i=this.edge.getCoordinate(t.segmentIndex),s=t.isInterior()||!t.coord.equals2D(i);s||r--;n.add(new L(e.coord),!1);for(var a=e.segmentIndex+1;a<=t.segmentIndex;a++)n.add(this.edge.getCoordinate(a));s&&n.add(new L(t.coord))}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"findCollapseIndex",value:function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r?(n[0]=e.segmentIndex+1,!0):!1}},{key:"findCollapsesFromInsertedNodes",value:function(e){for(var t=new Array(1),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),s=this.findCollapseIndex(r,i,t);s&&e.add(new D(t[0])),r=i}}},{key:"getEdge",value:function(){return this.edge}},{key:"addEndpoints",value:function(){var e=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(e),e)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var s=new Array(n),a=0;s[a++]=new L(e.coord);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)s[a++]=this.edge.getCoordinate(o);return i&&(s[a]=new L(t.coord)),new wn(s,this.edge.getData())}},{key:"add",value:function(e,t){var n=new Sn(this.edge,e,t,this.edge.getSegmentOctant(t)),r=this.nodeMap.get(n);return null!==r?(R.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(e){var t=this.edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new S("bad split edge start point at "+r);var i=e.get(e.size()-1),s=i.getCoordinates(),a=s[s.length-1];if(!a.equals2D(t[t.length-1]))throw new S("bad split edge end point at "+a)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Rn=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"octant",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if("number"==typeof n[0]&&"number"==typeof n[1]){var i=n[0],s=n[1];if(0===i&&0===s)throw new C("Cannot compute the octant for point ( "+i+", "+s+" )");var a=Math.abs(i),o=Math.abs(s);return i>=0?s>=0?a>=o?0:1:a>=o?7:6:s>=0?a>=o?3:2:a>=o?4:5}if(n[0]instanceof L&&n[1]instanceof L){var u=n[0],l=n[1],h=l.x-u.x,c=l.y-u.y;if(0===h&&0===c)throw new C("Cannot compute the octant for two identical points "+u);return e.octant(h,c)}}}}]),e}(),Ln=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(e){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),An=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addIntersection",value:function(e,t){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Ln]}}]),e}(),wn=function(){function e(){_classCallCheck(this,e),this.nodeList=new On(this),this.pts=null,this.data=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.pts=i,this.data=s}}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:Rn.octant(e,t)}},{key:"getData",value:function(){return this.data}},{key:"addIntersection",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1];this.addIntersectionNode(r,i)}else if(4===t.length){var s=t[0],i=t[1],a=(t[2],t[3]),o=new L(s.getIntersection(a));this.addIntersection(o,i)}}},{key:"toString",value:function(){return j.toLineString(new Ke(this.pts))}},{key:"getNodeList",value:function(){return this.nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,r=n+1;if(r<this.pts.length){var i=this.pts[r];e.equals2D(i)&&(n=r)}var s=this.nodeList.add(e,n);return s}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[An]}}],[{key:"getNodedSubstrings",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],s=new se;return e.getNodedSubstrings(i,s),s}if(2===n.length)for(var i=n[0],a=n[1],o=i.iterator();o.hasNext();){var u=o.next();u.getNodeList().addSplitEdges(a)}}}]),e}(),bn=function(){function e(){_classCallCheck(this,e),this.tempEnv1=new V,this.tempEnv2=new V,this.overlapSeg1=new tt,this.overlapSeg2=new tt}return _createClass(e,[{key:"overlap",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){t[0],t[1]}else if(4===t.length){var r=t[0],i=t[1],s=t[2],a=t[3];r.getLineSegment(i,this.overlapSeg1),s.getLineSegment(a,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Pn=function(){function e(){_classCallCheck(this,e),this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(4===n.length){var i=n[0],s=n[1],a=n[2],o=n[3];this.pts=i,this.start=s,this.end=a,this.context=o}}return _createClass(e,[{key:"getLineSegment",value:function(e,t){t.p0=this.pts[e],t.p1=this.pts[e+1]}},{key:"computeSelect",value:function(e,t,n,r){var i=this.pts[t],s=this.pts[n];if(r.tempEnv1.init(i,s),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var a=Math.trunc((t+n)/2);a>t&&this.computeSelect(e,t,a,r),n>a&&this.computeSelect(e,a,n,r)}},{key:"getCoordinates",value:function(){for(var e=new Array(this.end-this.start+1),t=0,n=this.start;n<=this.end;n++)e[t++]=this.pts[n];return e}},{key:"computeOverlaps",value:function(e,t){this.computeOverlapsInternal(this.start,this.end,e,e.start,e.end,t)}},{key:"setId",value:function(e){this.id=e}},{key:"select",value:function(e,t){this.computeSelect(e,this.start,this.end,t)}},{key:"getEnvelope",value:function(){if(null===this.env){var e=this.pts[this.start],t=this.pts[this.end];this.env=new V(e,t)}return this.env}},{key:"getEndIndex",value:function(){return this.end}},{key:"getStartIndex",value:function(){return this.start}},{key:"getContext",value:function(){return this.context}},{key:"getId",value:function(){return this.id}},{key:"computeOverlapsInternal",value:function(e,t,n,r,i,s){var a=this.pts[e],o=this.pts[t],u=n.pts[r],l=n.pts[i];if(t-e===1&&i-r===1)return s.overlap(this,e,n,r),null;if(s.tempEnv1.init(a,o),s.tempEnv2.init(u,l),!s.tempEnv1.intersects(s.tempEnv2))return null;var h=Math.trunc((e+t)/2),c=Math.trunc((r+i)/2);h>e&&(c>r&&this.computeOverlapsInternal(e,h,n,r,c,s),i>c&&this.computeOverlapsInternal(e,h,n,c,i,s)),t>h&&(c>r&&this.computeOverlapsInternal(h,t,n,r,c,s),i>c&&this.computeOverlapsInternal(h,t,n,c,i,s))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Tn=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getChainStartIndices",value:function(t){var n=0,r=new se;r.add(new D(n));do{var i=e.findChainEnd(t,n);r.add(new D(i)),n=i}while(n<t.length-1);var s=e.toIntArray(r);return s}},{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=it.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var s=it.quadrant(e[i-1],e[i]);if(s!==r)break}i++}return i-1}},{key:"getChains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return e.getChains(i,null)}if(2===n.length){for(var i=n[0],s=n[1],a=new se,o=e.getChainStartIndices(i),u=0;u<o.length-1;u++){var l=new Pn(i,o[u],o[u+1],s);a.add(l)}return a}}},{key:"toIntArray",value:function(e){for(var t=new Array(e.size()),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),e}(),Mn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"computeNodes",value:function(e){}},{key:"getNodedSubstrings",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Dn=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.segInt=null;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length);else if(1===n.length){var i=n[0];t.setSegmentIntersector(i)}};return s.apply(this,r)}return _createClass(e,[{key:"setSegmentIntersector",value:function(e){this.segInt=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Mn]}}]),e}(),Fn=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.monoChains=new se,a.index=new xn,a.idCounter=0,a.nodedSegStrings=null,a.nOverlaps=0;var o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 0===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,r):1===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0];_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s))}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getMonotoneChains",value:function(){return this.monoChains}},{key:"getNodedSubstrings",value:function(){return wn.getNodedSubstrings(this.nodedSegStrings)}},{key:"getIndex",value:function(){return this.index}},{key:"add",value:function(e){for(var t=Tn.getChains(e.getCoordinates(),e),n=t.iterator();n.hasNext();){var r=n.next();r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new Gn(this.segInt),t=this.monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this.index.query(n.getEnvelope()),i=r.iterator();i.hasNext();){var s=i.next();if(s.getId()>n.getId()&&(n.computeOverlaps(s,e),this.nOverlaps++),this.segInt.isDone())return null}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"SegmentOverlapAction",get:function(){return Gn}}]),t}(Dn),Gn=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.si=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.si=s}return e}return _inherits(t,e),_createClass(t,[{key:"overlap",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"overlap",this)).call.apply(e,[this].concat(r));var s=r[0],a=r[1],o=r[2],u=r[3],l=s.getContext(),h=o.getContext();this.si.processIntersections(l,a,h,u)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(bn),Bn=function(){function e(){_classCallCheck(this,e),this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Q.COUNTERCLOCKWISE;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputLine=i}}return _createClass(e,[{key:"isDeletable",value:function(e,t,n,r){var i=this.inputLine[e],s=this.inputLine[t],a=this.inputLine[n];return this.isConcave(i,s,a)&&this.isShallow(i,s,a,r)?this.isShallowSampled(i,s,e,n,r):!1}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),r=this.findNextNonDeletedIndex(n),i=!1;r<this.inputLine.length;){var s=!1;this.isDeletable(t,n,r,this.distanceTol)&&(this.isDeleted[n]=e.DELETE,s=!0,i=!0),t=s?r:n,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n)}return i}},{key:"isShallowConcavity",value:function(e,t,n,r){var i=Q.computeOrientation(e,t,n),s=i===this.angleOrientation;if(!s)return!1;var a=Q.distancePointLine(t,e,n);return r>a}},{key:"isShallowSampled",value:function(t,n,r,i,s){var a=Math.trunc((i-r)/e.NUM_PTS_TO_CHECK);0>=a&&(a=1);for(var o=r;i>o;o+=a)if(!this.isShallow(t,n,this.inputLine[o],s))return!1;return!0}},{key:"isConcave",value:function t(e,n,r){var i=Q.computeOrientation(e,n,r),t=i===this.angleOrientation;return t}},{key:"simplify",value:function(e){this.distanceTol=Math.abs(e),0>e&&(this.angleOrientation=Q.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this.inputLine.length&&this.isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(e,t,n,r){var i=Q.distancePointLine(t,e,n);return r>i}},{key:"collapseLine",value:function(){for(var t=new oe,n=0;n<this.inputLine.length;n++)this.isDeleted[n]!==e.DELETE&&t.add(this.inputLine[n]);return t.toCoordinateArray()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.simplify(n)}}]),e}();Bn.INIT=0,Bn.DELETE=1,Bn.KEEP=1,Bn.NUM_PTS_TO_CHECK=10;var qn=function(){function e(){_classCallCheck(this,e),this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.ptList=new se)}return _createClass(e,[{key:"getCoordinates",value:function(){var t=this.ptList.toArray(e.COORDINATE_ARRAY_TYPE);return t}},{key:"setPrecisionModel",value:function(e){this.precisionModel=e}},{key:"addPt",value:function(e){var t=new L(e);return this.precisionModel.makePrecise(t),this.isRedundant(t)?null:void this.ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var n=e.length-1;n>=0;n--)this.addPt(e[n])}},{key:"isRedundant",value:function(e){if(this.ptList.size()<1)return!1;var t=this.ptList.get(this.ptList.size()-1),n=e.distance(t);return n<this.minimimVertexDistance?!0:!1}},{key:"toString",value:function(){var e=new $e,t=e.createLineString(this.getCoordinates());return t.toString()}},{key:"closeRing",value:function(){if(this.ptList.size()<1)return null;var e=new L(this.ptList.get(0)),t=this.ptList.get(this.ptList.size()-1),n=null;return this.ptList.size()>=2&&(n=this.ptList.get(this.ptList.size()-2)),e.equals(t)?null:void this.ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this.minimimVertexDistance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();qn.COORDINATE_ARRAY_TYPE=new Array(0);var zn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return Math.atan2(r.y,r.x)}if(2===t.length){var i=t[0],s=t[1],a=s.x-i.x,o=s.y-i.y;return Math.atan2(o,a)}}},{key:"isAcute",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,s=n.x-t.x,a=n.y-t.y,o=r*s+i*a;return o>0}},{key:"isObtuse",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,s=n.x-t.x,a=n.y-t.y,o=r*s+i*a;return 0>o}},{key:"interiorAngle",value:function(t,n,r){var i=e.angle(n,t),s=e.angle(n,r);return Math.abs(s-i)}},{key:"normalizePositive",value:function(t){if(0>t){for(;0>t;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;0>t&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,r){var i=e.angle(n,t),s=e.angle(n,r);return e.diff(i,s)}},{key:"diff",value:function(e,t){var n=null;return n=t>e?t-e:e-t,n>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(t,n){var r=Math.sin(n-t);return r>0?e.COUNTERCLOCKWISE:0>r?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,r){var i=e.angle(n,t),s=e.angle(n,r),a=s-i;return a<=-Math.PI?a+e.PI_TIMES_2:a>Math.PI?a-e.PI_TIMES_2:a}}]),e}();zn.PI_TIMES_2=2*Math.PI,zn.PI_OVER_2=Math.PI/2,zn.PI_OVER_4=Math.PI/4,zn.COUNTERCLOCKWISE=Q.COUNTERCLOCKWISE,zn.CLOCKWISE=Q.CLOCKWISE,zn.NONE=Q.COLLINEAR;var Un=function(){function e(){_classCallCheck(this,e),this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new tt,this.seg1=new tt,this.offset0=new tt,this.offset1=new tt,this.side=0,this._hasNarrowConcaveAngle=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];this.precisionModel=i,this.bufParams=s,this.li=new W,this.filletAngleQuantum=Math.PI/2/s.getQuadrantSegments(),s.getQuadrantSegments()>=8&&s.getJoinStyle()===an.JOIN_ROUND&&(this.closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(a)}}return _createClass(e,[{key:"addNextSegment",value:function(e,t){if(this.s0=this.s1,this.s1=this.s2,this.s2=e,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=Q.computeOrientation(this.s0,this.s1,this.s2),r=n===Q.CLOCKWISE&&this.side===Et.LEFT||n===Q.COUNTERCLOCKWISE&&this.side===Et.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new tt(e,t),r=new tt;this.computeOffsetSegment(n,Et.LEFT,this.distance,r);var i=new tt;this.computeOffsetSegment(n,Et.RIGHT,this.distance,i);var s=t.x-e.x,a=t.y-e.y,o=Math.atan2(a,s);switch(this.bufParams.getEndCapStyle()){case an.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(t,o+Math.PI/2,o-Math.PI/2,Q.CLOCKWISE,this.distance),this.segList.addPt(i.p1);break;case an.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(i.p1);break;case an.CAP_SQUARE:var u=new L;u.x=Math.abs(this.distance)*Math.cos(o),u.y=Math.abs(this.distance)*Math.sin(o);var l=new L(r.p1.x+u.x,r.p1.y+u.y),h=new L(i.p1.x+u.x,i.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(h)}}},{key:"getCoordinates",value:function(){var e=this.segList.getCoordinates();return e}},{key:"addMitreJoin",value:function(e,t,n,r){var i=!0,s=null;try{s=Y.intersection(t.p0,t.p1,n.p0,n.p1);var a=0>=r?1:s.distance(e)/Math.abs(r);a>this.bufParams.getMitreLimit()&&(i=!1)}catch(o){if(!(o instanceof z))throw o;s=new L(0,0),i=!1}finally{}i?this.segList.addPt(s):this.addLimitedMitreJoin(t,n,r,this.bufParams.getMitreLimit())}},{key:"addFilletCorner",value:function(e,t,n,r,i){var s=t.x-e.x,a=t.y-e.y,o=Math.atan2(a,s),u=n.x-e.x,l=n.y-e.y,h=Math.atan2(l,u);r===Q.CLOCKWISE?h>=o&&(o+=2*Math.PI):o>=h&&(o-=2*Math.PI),this.segList.addPt(t),this.addFilletArc(e,o,h,r,i),this.segList.addPt(n)}},{key:"addOutsideTurn",value:function(t,n){return this.offset0.p1.distance(this.offset1.p0)<this.distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===an.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===an.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(n&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))}},{key:"createSquare",value:function(e){this.segList.addPt(new L(e.x+this.distance,e.y+this.distance)),this.segList.addPt(new L(e.x+this.distance,e.y-this.distance)),this.segList.addPt(new L(e.x-this.distance,e.y-this.distance)),this.segList.addPt(new L(e.x-this.distance,e.y+this.distance)),this.segList.closeRing()}},{key:"addSegments",value:function(e,t){this.segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this.segList.addPt(this.offset1.p0)}},{key:"addLastSegment",value:function(){this.segList.addPt(this.offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this.s1=e,this.s2=t,this.side=n,this.seg1.setCoordinates(e,t),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,r){var i=this.seg0.p1,s=Angle.angle(i,this.seg0.p0),a=(Angle.angle(i,this.seg1.p1),Angle.angleBetweenOriented(this.seg0.p0,i,this.seg1.p1)),o=a/2,u=Angle.normalize(s+o),l=Angle.normalize(u+Math.PI),h=r*n,c=h*Math.abs(Math.sin(o)),g=n-c,f=i.x+h*Math.cos(l),v=i.y+h*Math.sin(l),y=new L(f,v),d=new tt(i,y),p=d.pointAlongOffset(1,g),m=d.pointAlongOffset(1,-g);this.side===Et.LEFT?(this.segList.addPt(p),this.segList.addPt(m)):(this.segList.addPt(m),this.segList.addPt(p))}},{key:"computeOffsetSegment",value:function(e,t,n,r){var i=t===Et.LEFT?1:-1,s=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,o=Math.sqrt(s*s+a*a),u=i*n*s/o,l=i*n*a/o;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u}},{key:"addFilletArc",value:function(e,t,n,r,i){var s=r===Q.CLOCKWISE?-1:1,a=Math.abs(t-n),o=Math.trunc(a/this.filletAngleQuantum+.5);if(1>o)return null;var u=null,l=null;u=0,l=a/o;for(var h=u,c=new L;a>h;){var g=t+s*h;c.x=e.x+i*Math.cos(g),c.y=e.y+i*Math.sin(g),this.segList.addPt(c),h+=l}}},{key:"addInsideTurn",value:function(t,n){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var r=new L((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r);var i=new L((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}}},{key:"createCircle",value:function(e){var t=new L(e.x+this.distance,e.y);this.segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this.distance),this.segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this.segList.addPt(e.p1),this.segList.addPt(t.p0)}},{key:"init",value:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new qn,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var t=this.li.getIntersectionNum();t>=2&&(this.bufParams.getJoinStyle()===an.JOIN_BEVEL||this.bufParams.getJoinStyle()===an.JOIN_MITRE?(e&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Q.CLOCKWISE,this.distance))}},{key:"closeRing",value:function(){this.segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();Un.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Un.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Un.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Un.MAX_CLOSING_SEG_LEN_FACTOR=80;var Yn=function(){function e(){_classCallCheck(this,e),this.distance=0,this.precisionModel=null,this.bufParams=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.precisionModel=i,this.bufParams=s}}return _createClass(e,[{key:"getOffsetCurve",value:function(e,t){if(this.distance=t,0===t)return null;var n=0>t,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var s=i.getCoordinates();return n&&ue.reverse(s),s}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){n.addSegments(e,!0);var i=Bn.simplify(e,-r),s=i.length-1;n.initSideSegments(i[s],i[s-1],Et.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(e,!1);var o=Bn.simplify(e,r),u=o.length-1;n.initSideSegments(o[0],o[1],Et.LEFT),n.addFirstSegment();for(var a=2;u>=a;a++)n.addNextSegment(o[a],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);t===Et.RIGHT&&(r=-r);var i=Bn.simplify(e,r),s=i.length-1;n.initSideSegments(i[s-1],i[0],t);for(var a=1;s>=a;a++){var o=1!==a;n.addNextSegment(i[a],o)}n.closeRing();
}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this.distance),r=Bn.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],Et.LEFT);for(var s=2;i>=s;s++)t.addNextSegment(r[s],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var a=Bn.simplify(e,-n),o=a.length-1;t.initSideSegments(a[o],a[o-1],Et.LEFT);for(var s=o-2;s>=0;s--)t.addNextSegment(a[s],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this.bufParams.getEndCapStyle()){case an.CAP_ROUND:t.createCircle(e);break;case an.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this.distance=t,0>t&&!this.bufParams.isSingleSided())return null;if(0===t)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this.bufParams.isSingleSided()){var i=0>t;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var s=r.getCoordinates();return s}},{key:"getBufferParameters",value:function(){return this.bufParams}},{key:"simplifyTolerance",value:function(e){return e*this.bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,r){if(this.distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return e.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var r=this.simplifyTolerance(this.distance);if(t){var i=Bn.simplify(e,-r),s=i.length-1;n.initSideSegments(i[s],i[s-1],Et.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var o=Bn.simplify(e,r),u=o.length-1;n.initSideSegments(o[0],o[1],Et.LEFT),n.addFirstSegment();for(var a=2;u>=a;a++)n.addNextSegment(o[a],!0)}n.addLastSegment()}},{key:"getSegGen",value:function(e){return new Un(this.precisionModel,this.bufParams,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=new L(e[n]);return t}}]),e}(),Vn=function(){function e(){_classCallCheck(this,e),this.subgraphs=null,this.seg=new tt,this.cga=new Q;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.subgraphs=i}}return _createClass(e,[{key:"findStabbedSegments",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var i=t[0],s=new se,a=this.subgraphs.iterator();a.hasNext();){var o=a.next(),u=o.getEnvelope();i.y<u.getMinY()||i.y>u.getMaxY()||this.findStabbedSegments(i,o.getDirectedEdges(),s)}return s}if(3===t.length)if(t[2].interfaces_&&t[2].interfaces_.indexOf(r)>-1&&t[0]instanceof L&&t[1]instanceof $t)for(var i=t[0],l=t[1],h=t[2],c=l.getEdge().getCoordinates(),a=0;a<c.length-1;a++){this.seg.p0=c[a],this.seg.p1=c[a+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var g=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(g<i.x||this.seg.isHorizontal()||i.y<this.seg.p0.y||i.y>this.seg.p1.y||Q.computeOrientation(this.seg.p0,this.seg.p1,i)===Q.RIGHT)){var f=l.getDepth(Et.LEFT);this.seg.p0.equals(c[a])||(f=l.getDepth(Et.RIGHT));var v=new Xn(this.seg,f);h.add(v)}}else if(t[2].interfaces_&&t[2].interfaces_.indexOf(r)>-1&&t[0]instanceof L&&t[1].interfaces_&&t[1].interfaces_.indexOf(r)>-1)for(var i=t[0],y=t[1],d=t[2],a=y.iterator();a.hasNext();){var p=a.next();p.isForward()&&this.findStabbedSegments(i,p,d)}}},{key:"getDepth",value:function(e){var t=this.findStabbedSegments(e);if(0===t.size())return 0;var n=Nt.min(t);return n.leftDepth}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"DepthSegment",get:function(){return Xn}}]),e}(),Xn=function(){function e(){_classCallCheck(this,e),this.upwardSeg=null,this.leftDepth=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.upwardSeg=new tt(i),this.leftDepth=s}}return _createClass(e,[{key:"compareTo",value:function(e){var t=e;if(this.upwardSeg.minX()>=t.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=t.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(t.upwardSeg);return 0!==n?n:(n=-1*t.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(t.upwardSeg))}},{key:"compareX",value:function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this.upwardSeg.toString()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}]),e}(),jn=function(){function e(){_classCallCheck(this,e),this.p0=null,this.p1=null,this.p2=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];this.p0=i,this.p1=s,this.p2=a}}return _createClass(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new C("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,r){return e*r-t*n}},{key:"interpolateZ",value:function(e,t,n,r){var i=t.x,s=t.y,a=n.x-i,o=r.x-i,u=n.y-s,l=r.y-s,h=a*l-o*u,c=e.x-i,g=e.y-s,f=(l*c-o*g)/h,v=(-u*c+a*g)/h,y=t.z+f*(n.z-t.z)+v*(r.z-t.z);return y}},{key:"longestSideLength",value:function(e,t,n){var r=e.distance(t),i=t.distance(n),s=n.distance(e),a=r;return i>a&&(a=i),s>a&&(a=s),a}},{key:"isAcute",value:function(e,t,n){return Angle.isAcute(e,t,n)&&Angle.isAcute(t,n,e)&&Angle.isAcute(n,e,t)?!0:!1}},{key:"circumcentre",value:function(t,n,r){var i=r.x,s=r.y,a=t.x-i,o=t.y-s,u=n.x-i,l=n.y-s,h=2*e.det(a,o,u,l),c=e.det(o,a*a+o*o,l,u*u+l*l),g=e.det(a,a*a+o*o,u,u*u+l*l),f=i-c/h,v=s+g/h;return new L(f,v)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new Y(e.x+n/2,e.y+r/2,1),s=new Y(e.x-r+n/2,e.y+n+r/2,1);return new Y(i,s)}},{key:"angleBisector",value:function(e,t,n){var r=t.distance(e),i=t.distance(n),s=r/(r+i),a=n.x-e.x,o=n.y-e.y,u=new L(e.x+s*a,e.y+s*o);return u}},{key:"area3D",value:function t(e,n,r){var i=n.x-e.x,s=n.y-e.y,a=n.z-e.z,o=r.x-e.x,u=r.y-e.y,l=r.z-e.z,h=s*l-a*u,c=a*o-i*l,g=i*u-s*o,f=h*h+c*c+g*g,t=Math.sqrt(f)/2;return t}},{key:"centroid",value:function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new L(r,i)}},{key:"inCentre",value:function(e,t,n){var r=t.distance(n),i=e.distance(n),s=e.distance(t),a=r+i+s,o=(r*e.x+i*t.x+s*n.x)/a,u=(r*e.y+i*t.y+s*n.y)/a;return new L(o,u)}}]),e}(),Hn=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new se;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];this.inputGeom=i,this.distance=s,this.curveBuilder=a}}return _createClass(e,[{key:"addPoint",value:function(e){if(this.distance<=0)return null;var t=e.getCoordinates(),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)}},{key:"addPolygon",value:function(e){var t=this.distance,n=Et.LEFT;this.distance<0&&(t=-this.distance,n=Et.RIGHT);var r=e.getExteriorRing(),i=ue.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance))return null;if(this.distance<=0&&i.length<3)return null;this.addPolygonRing(i,t,n,P.EXTERIOR,P.INTERIOR);for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),o=ue.removeRepeatedPoints(a.getCoordinates());this.distance>0&&this.isErodedCompletely(a,-this.distance)||this.addPolygonRing(o,t,Et.opposite(n),P.INTERIOR,P.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(e,t){var n=new jn(e[0],e[1],e[2]),r=n.inCentre(),i=Q.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)}},{key:"addLineString",value:function(e){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var t=ue.removeRepeatedPoints(e.getCoordinates()),n=this.curveBuilder.getLineCurve(t,this.distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)}},{key:"addCurve",value:function(e,t,n){if(null===e||e.length<2)return null;var r=new wn(e,new Lt(0,P.BOUNDARY,t,n));this.curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this.inputGeom),this.curveList}},{key:"addPolygonRing",value:function(e,t,n,r,i){if(0===t&&e.length<Ye.MINIMUM_VALID_SIZE)return null;var s=r,a=i;e.length>=Ye.MINIMUM_VALID_SIZE&&Q.isCCW(e)&&(s=i,a=r,n=Et.opposite(n));var o=this.curveBuilder.getRingCurve(e,n,t);this.addCurve(o,s,a)}},{key:"add",value:function(e){if(e.isEmpty())return null;if(e instanceof ze)this.addPolygon(e);else if(e instanceof Fe)this.addLineString(e);else if(e instanceof Be)this.addPoint(e);else if(e instanceof Ue)this.addCollection(e);else if(e instanceof Se)this.addCollection(e);else if(e instanceof Ve)this.addCollection(e);else{if(!(e instanceof Ne))throw new UnsupportedOperationException(e.getClass().getName());this.addCollection(e)}}},{key:"isErodedCompletely",value:function(e,t){var n=e.getCoordinates();if(n.length<4)return 0>t;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return 0>t&&2*Math.abs(t)>i?!0:!1}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Wn=function(){function e(){_classCallCheck(this,e),this.geom=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geom=i}}return _createClass(e,[{key:"locate",value:function(t){return e.locate(t,this.geom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[wt]}}],[{key:"isPointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?Q.isPointInRing(e,t.getCoordinates()):!1}},{key:"containsPointInPolygon",value:function(t,n){if(n.isEmpty())return!1;var r=n.getExteriorRing();if(!e.isPointInRing(t,r))return!1;for(var i=0;i<n.getNumInteriorRing();i++){var s=n.getInteriorRingN(i);if(e.isPointInRing(t,s))return!1}return!0}},{key:"containsPoint",value:function(t,n){if(n instanceof ze)return e.containsPointInPolygon(t,n);if(n instanceof Ne)for(var r=new kt(n);r.hasNext();){var i=r.next();if(i!==n&&e.containsPoint(t,i))return!0}return!1}},{key:"locate",value:function(t,n){return n.isEmpty()?P.EXTERIOR:e.containsPoint(t,n)?P.INTERIOR:P.EXTERIOR}}]),e}(),Kn=function(){function e(){_classCallCheck(this,e),this.edgeMap=new h,this.edgeList=null,this.ptInAreaLocation=[P.NONE,P.NONE];for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getNextCW",value:function(e){this.getEdges();var t=this.edgeList.indexOf(e),n=t-1;return 0===t&&(n=this.edgeList.size()-1),this.edgeList.get(n)}},{key:"propagateSideLabels",value:function(e){for(var t=P.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,Et.LEFT)!==P.NONE&&(t=i.getLocation(e,Et.LEFT))}if(t===P.NONE)return null;for(var s=t,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();if(i.getLocation(e,Et.ON)===P.NONE&&i.setLocation(e,Et.ON,s),i.isArea(e)){var a=i.getLocation(e,Et.LEFT),o=i.getLocation(e,Et.RIGHT);if(o!==P.NONE){if(o!==s)throw new Zt("side location conflict",r.getCoordinate());a===P.NONE&&R.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),s=a}else R.isTrue(i.getLocation(e,Et.LEFT)===P.NONE,"found single null side"),i.setLocation(e,Et.RIGHT,s),i.setLocation(e,Et.LEFT,s)}}}},{key:"getCoordinate",value:function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()}},{key:"print",value:function(e){U.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}}},{key:"isAreaLabelsConsistent",value:function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,Et.LEFT);R.isTrue(i!==P.NONE,"Found unlabelled area edge");for(var s=i,a=this.iterator();a.hasNext();){var o=a.next(),u=o.getLabel();R.isTrue(u.isArea(e),"Found non-area edge");var l=u.getLocation(e,Et.LEFT),h=u.getLocation(e,Et.RIGHT);if(l===h)return!1;if(h!==s)return!1;s=l}return!0}},{key:"findIndex",value:function(e){this.iterator();for(var t=0;t<this.edgeList.size();t++){var n=this.edgeList.get(t);if(n===e)return t}return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this.edgeList&&(this.edgeList=new se(this.edgeMap.values())),this.edgeList}},{key:"getLocation",value:function(e,t,n){return this.ptInAreaLocation[e]===P.NONE&&(this.ptInAreaLocation[e]=Wn.locate(t,n[e].getGeometry())),this.ptInAreaLocation[e]}},{key:"toString",value:function(){var e=new M;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()}},{key:"computeEdgeEndLabels",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}}},{key:"computeLabelling",value:function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getLabel(),s=0;2>s;s++)i.isLine(s)&&i.getLocation(s)===P.BOUNDARY&&(t[s]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getLabel(),s=0;2>s;s++)if(i.isAnyNull(s)){var a=P.NONE;if(t[s])a=P.EXTERIOR;else{var o=r.getCoordinate();a=this.getLocation(s,o,e)}i.setAllLocationsIfNull(s,a)}}},{key:"getDegree",value:function(){return this.edgeMap.size()}},{key:"insertEdgeEnd",value:function(e,t){this.edgeMap.put(e,t),this.edgeList=null}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Jn=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.resultAreaEdgeList=null,e.label=null,e.SCANNING_FOR_INCOMING=1,e.LINKING_TO_OUTGOING=2;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,t=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var i=this.resultAreaEdgeList.get(r),s=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),n){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;t=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!i.isInResult())continue;t.setNext(i),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===e)throw new Zt("no outgoing dirEdge found",this.getCoordinate());R.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}},{key:"insert",value:function(e){var t=e;this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),t=e.size();if(1>t)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),i=n.getQuadrant(),s=r.getQuadrant();if(it.isNorthern(i)&&it.isNorthern(s))return n;if(!it.isNorthern(i)&&!it.isNorthern(s))return r;return 0!==n.getDy()?n:0!==r.getDy()?r:(R.shouldNeverReachHere("found two horizontal edges incident on node"),null)}},{key:"print",value:function(e){U.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new se;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this.resultAreaEdgeList.add(t)}return this.resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();r.setAllLocationsIfNull(0,e.getLocation(0)),r.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,t=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),i=r.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=r}t.setNext(e)}},{key:"computeDepths",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=this.findIndex(r),s=(r.getLabel(),r.getDepth(Et.LEFT)),a=r.getDepth(Et.RIGHT),o=this.computeDepths(i+1,this.edgeList.size(),s),u=this.computeDepths(0,i,o);if(u!==a)throw new Zt("depth mismatch at "+r.getCoordinate())}else if(3===t.length){for(var l=t[0],h=t[1],c=t[2],g=c,f=l;h>f;f++){var v=this.edgeList.get(f);v.getLabel();v.setEdgeDepths(Et.RIGHT,g),g=v.getDepth(Et.LEFT)}return g}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();n.merge(t.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var t=null,n=null,r=this.SCANNING_FOR_INCOMING,i=this.resultAreaEdgeList.size()-1;i>=0;i--){var s=this.resultAreaEdgeList.get(i),a=s.getSym();switch(null===t&&s.getEdgeRing()===e&&(t=s),r){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==e)continue;n.setNextMin(s),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(R.isTrue(null!==t,"found null for first outgoing dirEdge"),R.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}},{key:"getOutgoingDegree",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){for(var r=0,i=this.iterator();i.hasNext();){var s=i.next();s.isInResult()&&r++}return r}if(1===t.length){for(var a=t[0],r=0,i=this.iterator();i.hasNext();){var s=i.next();s.getEdgeRing()===a&&r++}return r}}},{key:"getLabel",value:function(){return this.label}},{key:"findCoveredLineEdges",value:function(){for(var e=P.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=P.INTERIOR;break}if(r.isInResult()){e=P.EXTERIOR;break}}}if(e===P.NONE)return null;for(var i=e,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(i===P.INTERIOR):(n.isInResult()&&(i=P.EXTERIOR),r.isInResult()&&(i=P.INTERIOR))}}},{key:"computeLabelling",value:function(e){_get(Object.getPrototypeOf(t.prototype),"computeLabelling",this).call(this,e),this.label=new Lt(P.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getEdge(),s=i.getLabel(),a=0;2>a;a++){var o=s.getLocation(a);(o===P.INTERIOR||o===P.BOUNDARY)&&this.label.setLocation(a,P.INTERIOR)}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Kn),Qn=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createNode",value:function(e){return new Kt(e,new Jn)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(en),Zn=function(){function e(){_classCallCheck(this,e),this.pts=null,this._orientation=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pts=i,this._orientation=e.orientation(i)}}return _createClass(e,[{key:"compareTo",value:function(t){var n=t,r=e.compareOriented(this.pts,this._orientation,n.pts,n._orientation);return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[I]}}],[{key:"orientation",value:function(e){return 1===ue.increasingDirection(e)}},{key:"compareOriented",value:function(e,t,n,r){for(var i=t?1:-1,s=r?1:-1,a=t?e.length:-1,o=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var h=e[u].compareTo(n[l]);if(0!==h)return h;u+=i,l+=s;var c=u===a,g=l===o;if(c&&!g)return-1;if(!c&&g)return 1;if(c&&g)return 0}}}]),e}(),$n=function(){function e(){_classCallCheck(this,e),this.edges=new se,this.ocaMap=new h;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"print",value:function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this.edges.size();t++){var n=this.edges.get(t);t>0&&e.print(","),e.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&e.print(","),e.print(r[i].x+" "+r[i].y);e.println(")")}e.print(")  ")}},{key:"addAll",value:function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(e){for(var t=0;t<this.edges.size();t++)if(this.edges.get(t).equals(e))return t;return-1}},{key:"iterator",value:function(){return this.edges.iterator()}},{key:"getEdges",value:function(){return this.edges}},{key:"get",value:function(e){return this.edges.get(e)}},{key:"findEqualEdge",value:function(e){var t=new Zn(e.getCoordinates()),n=this.ocaMap.get(t);return n}},{key:"add",value:function(e){this.edges.add(e);var t=new Zn(e.getCoordinates());this.ocaMap.put(t,e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),er=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"processIntersections",value:function(e,t,n,r){}},{key:"isDone",value:function(){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),tr=function(){function e(){_classCallCheck(this,e),this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.li=i}}return _createClass(e,[{key:"isTrivialIntersection",value:function(t,n,r,i){if(t===r&&1===this.li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var s=t.size()-1;if(0===n&&i===s||0===i&&n===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this.properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this.hasProperInterior}},{key:"getLineIntersector",value:function(){return this.li}},{key:"hasProperIntersection",value:function(){return this.hasProper}},{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],o=n.getCoordinates()[r+1];this.li.computeIntersection(i,s,a,o),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this.hasInterior}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[er]}}],[{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),e}(),nr=function(){function e(){_classCallCheck(this,e),this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new $n;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.bufParams=i}}return _createClass(e,[{key:"setWorkingPrecisionModel",value:function(e){this.workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(t){var n=this.edgeList.findEqualEdge(t);if(null!==n){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new Lt(t.getLabel()),i.flip()),r.merge(i);var s=e.depthDelta(i),a=n.getDepthDelta(),o=a+s;n.setDepthDelta(o)}else this.edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new se,r=e.iterator();r.hasNext();){var i=r.next(),s=i.getRightmostCoordinate(),a=new Vn(n),o=a.getDepth(s);i.computeDepth(o),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new se,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new ln;i.create(r),t.add(i)}}return Nt.sort(t,Nt.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){var e=this.geomFact.createPolygon();return e}},{key:"getNoder",value:function(e){if(null!==this.workingNoder)return this.workingNoder;var t=new Fn,n=new W;return n.setPrecisionModel(e),t.setSegmentIntersector(new tr(n)),t}},{key:"buffer",value:function(e,t){var n=this.workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this.geomFact=e.getFactory();var r=new Yn(n,this.bufParams),i=new Hn(e,t,r),s=i.getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this.graph=new tn(new Qn),this.graph.addEdges(this.edgeList.getEdges());var a=this.createSubgraphs(this.graph),o=new fn(this.geomFact);this.buildSubgraphs(a,o);var u=o.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this.geomFact.buildGeometry(u);return l}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings(),i=r.iterator();i.hasNext();){var s=i.next(),a=s.getCoordinates();if(2!==a.length||!a[0].equals2D(a[1])){var o=s.getData(),u=new Wt(s.getCoordinates(),new Lt(o));this.insertUniqueEdge(u)}}}},{key:"setNoder",value:function(e){this.workingNoder=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"depthDelta",value:function(e){var t=e.getLocation(0,Et.LEFT),n=e.getLocation(0,Et.RIGHT);return t===P.INTERIOR&&n===P.EXTERIOR?1:t===P.EXTERIOR&&n===P.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new $e,n=new se;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)}}]),e}(),rr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];a.call(t,i,s,0,0)}else if(4===n.length){var i=n[0],s=n[1];n[2],n[3];t.noder=i,t.scaleFactor=s,t.isScaled=!t.isIntegerPrecision()}};return s.apply(this,r)}return _createClass(e,[{key:"rescale",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0].interfaces_&&n[0].interfaces_.indexOf(t)>-1)for(var i=n[0],s=i.iterator();s.hasNext();){var a=s.next();this.rescale(a.getCoordinates())}else if(n[0]instanceof Array){var o=n[0],u=null,l=null;2===o.length&&(u=new L(o[0]),l=new L(o[1]));for(var s=0;s<o.length;s++)o[s].x=o[s].x/this.scaleFactor+this.offsetX,o[s].y=o[s].y/this.scaleFactor+this.offsetY;2===o.length&&o[0].equals2D(o[1])&&U.out.println(o)}}},{key:"scale",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0].interfaces_&&n[0].interfaces_.indexOf(t)>-1){for(var i=n[0],s=new se,a=i.iterator();a.hasNext();){var o=a.next();s.add(new wn(this.scale(o.getCoordinates()),o.getData()))}return s}if(n[0]instanceof Array){for(var u=n[0],l=new Array(u.length),a=0;a<u.length;a++)l[a]=new L(Math.round((u[a].x-this.offsetX)*this.scaleFactor),Math.round((u[a].y-this.offsetY)*this.scaleFactor),u[a].z);var h=ue.removeRepeatedPoints(l);return h}}}},{key:"isIntegerPrecision",value:function(){return 1===this.scaleFactor}},{key:"getNodedSubstrings",value:function(){var e=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this.isScaled&&(t=this.scale(e)),this.noder.computeNodes(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Mn]}}]),e}(),ir=function(){function e(){_classCallCheck(this,e),this.li=new W,this.segStrings=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.segStrings=i}}return _createClass(e,[{key:"checkEndPtVertexIntersections",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(var r=this.segStrings.iterator();r.hasNext();){var i=r.next(),s=i.getCoordinates();this.checkEndPtVertexIntersections(s[0],this.segStrings),this.checkEndPtVertexIntersections(s[s.length-1],this.segStrings)}else if(2===t.length)for(var a=t[0],o=t[1],r=o.iterator();r.hasNext();)for(var i=r.next(),s=i.getCoordinates(),u=1;u<s.length-1;u++)if(s[u].equals(a))throw new S("found endpt/interior pt intersection at index "+u+" :pt "+a)}},{key:"checkInteriorIntersections",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(var r=this.segStrings.iterator();r.hasNext();)for(var i=r.next(),s=this.segStrings.iterator();s.hasNext();){var a=s.next();this.checkInteriorIntersections(i,a)}else if(2===t.length)for(var o=t[0],u=t[1],l=o.getCoordinates(),h=u.getCoordinates(),c=0;c<l.length-1;c++)for(var g=0;g<h.length-1;g++)this.checkInteriorIntersections(o,c,u,g);else if(4===t.length){var f=t[0],v=t[1],y=t[2],d=t[3];if(f===y&&v===d)return null;var p=f.getCoordinates()[v],m=f.getCoordinates()[v+1],k=y.getCoordinates()[d],C=y.getCoordinates()[d+1];if(this.li.computeIntersection(p,m,k,C),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,p,m)||this.hasInteriorIntersection(this.li,k,C)))throw new S("found non-noded intersection at "+p+"-"+m+" and "+k+"-"+C)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(var r=this.segStrings.iterator();r.hasNext();){var i=r.next();this.checkCollapses(i)}else if(1===t.length)for(var s=t[0],a=s.getCoordinates(),r=0;r<a.length-2;r++)this.checkCollapse(a[r],a[r+1],a[r+2])}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!i.equals(t)&&!i.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,r){if(t.equals(r))throw new S("found non-noded collapse at "+e.fact.createLineString([t,n,r]))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();ir.fact=new $e;var sr=function(){function e(){_classCallCheck(this,e),this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,
this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4),this.safeEnv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];if(this.originalPt=i,this.pt=i,this.scaleFactor=s,this.li=a,0>=s)throw new C("Scale factor must be non-zero");1!==s&&(this.pt=new L(this.scale(i.x),this.scale(i.y)),this.p0Scaled=new L,this.p1Scaled=new L),this.initCorners(this.pt)}}return _createClass(e,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),s=Math.max(e.y,t.y),a=this.maxx<n||this.minx>r||this.maxy<i||this.miny>s;if(a)return!1;var o=this.intersectsToleranceSquare(e,t);return R.isTrue(!(a&&o),"Found bad envelope test"),o}},{key:"initCorners",value:function(e){var t=.5;this.minx=e.x-t,this.maxx=e.x+t,this.miny=e.y-t,this.maxy=e.y+t,this.corner[0]=new L(this.maxx,this.maxy),this.corner[1]=new L(this.minx,this.maxy),this.corner[2]=new L(this.minx,this.miny),this.corner[3]=new L(this.maxx,this.miny)}},{key:"intersects",value:function(e,t){return 1===this.scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this.p0Scaled),this.copyScaled(t,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this.scaleFactor)}},{key:"getCoordinate",value:function(){return this.originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(null===this.safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new V(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.hasIntersection()?!0:!1)))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,r=!1;return this.li.computeIntersection(e,t,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(e,t,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(e,t,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(e,t,this.corner[3],this.corner[0]),this.li.isProper()?!0:n&&r?!0:e.equals(this.pt)?!0:t.equals(this.pt)?!0:!1)))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();sr.SAFE_ENV_EXPANSION_FACTOR=.75;var ar=function(){function e(){_classCallCheck(this,e),this.tempEnv1=new V,this.selectedSegment=new tt}return _createClass(e,[{key:"select",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){t[0]}else if(2===t.length){var r=t[0],i=t[1];r.getLineSegment(i,this.selectedSegment),this.select(this.selectedSegment)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),or=function(){function e(){_classCallCheck(this,e),this.index=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.index=i}}return _createClass(e,[{key:"snap",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.snap(r,null,-1)}if(3===t.length){var r=t[0],i=t[1],s=t[2],a=r.getSafeEnvelope(),o=new ur(r,i,s);return this.index.query(a,new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;t.select(a,o)}},{key:"interfaces_",get:function(){return[At]}}]),e}())),o.isNodeAdded()}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"HotPixelSnapAction",get:function(){return ur}}]),e}(),ur=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.hotPixel=null,e.parentEdge=null,e.hotPixelVertexIndex=null,e._isNodeAdded=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(3===r.length){var s=r[0],a=r[1],o=r[2];e.hotPixel=s,e.parentEdge=a,e.hotPixelVertexIndex=o}return e}return _inherits(t,e),_createClass(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var s=r[0],a=r[1],o=s.getContext();return null!==this.parentEdge&&o===this.parentEdge&&a===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(o,a))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ar),lr=function(){function e(){_classCallCheck(this,e),this.li=null,this.interiorIntersections=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.li=i,this.interiorIntersections=new se}}return _createClass(e,[{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;var i=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],o=n.getCoordinates()[r+1];if(this.li.computeIntersection(i,s,a,o),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));e.addIntersections(this.li,t,0),n.addIntersections(this.li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this.interiorIntersections}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[er]}}]),e}(),hr=function(){function e(){_classCallCheck(this,e),this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pm=i,this.li=new W,this.li.setPrecisionModel(i),this.scaleFactor=i.getScale()}}return _createClass(e,[{key:"checkCorrectness",value:function(e){var t=wn.getNodedSubstrings(e),n=new ir(t);try{n.checkValid()}catch(r){if(!(r instanceof q))throw r;r.printStackTrace()}finally{}}},{key:"getNodedSubstrings",value:function(){return wn.getNodedSubstrings(this.nodedSegStrings)}},{key:"snapRound",value:function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}},{key:"findInteriorIntersections",value:function(e,t){var n=new lr(t);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(e),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0].interfaces_&&n[0].interfaces_.indexOf(t)>-1)for(var i=n[0],s=i.iterator();s.hasNext();){var a=s.next();this.computeVertexSnaps(a)}else if(n[0]instanceof wn)for(var o=n[0],u=o.getCoordinates(),l=0;l<u.length;l++){var h=new sr(u[l],this.scaleFactor,this.li),c=this.pointSnapper.snap(h,o,l);c&&o.addIntersection(u[l],l)}}},{key:"computeNodes",value:function(e){this.nodedSegStrings=e,this.noder=new Fn,this.pointSnapper=new or(this.noder.getIndex()),this.snapRound(e,this.li)}},{key:"computeIntersectionSnaps",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new sr(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Mn]}}]),e}(),cr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.argGeom=null,this.distance=null,this.bufParams=new an,this.resultGeometry=null,this.saveException=null;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.argGeom=i}else if(2===n.length){var i=n[0],s=n[1];t.argGeom=i,t.bufParams=s}};return s.apply(this,r)}return _createClass(e,[{key:"bufferFixedPrecision",value:function(e){var t=new rr(new hr(new Qe(1)),e.getScale()),n=new nr(this.bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this.resultGeometry=n.buffer(this.argGeom,this.distance)}},{key:"bufferReducedPrecision",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(0===n.length){for(var i=e.MAX_PRECISION_DIGITS;i>=0;i--){try{this.bufferReducedPrecision(i)}catch(s){if(!(s instanceof Zt))throw s;this.saveException=s}finally{}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===n.length){var a=n[0],o=e.precisionScaleFactor(this.argGeom,this.distance,a),u=new Qe(o);this.bufferFixedPrecision(u)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var e=this.argGeom.getFactory().getPrecisionModel();e.getType()===Qe.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this.bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new nr(this.bufParams);this.resultGeometry=e.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof S))throw t;this.saveException=t}finally{}}},{key:"getResultGeometry",value:function(e){return this.distance=e,this.computeGeometry(),this.resultGeometry}},{key:"setEndCapStyle",value:function(e){this.bufParams.setEndCapStyle(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"bufferOp",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1],a=new e(i),o=a.getResultGeometry(s);return o}if(3===n.length){if(Number.isInteger(n[2])&&n[0]instanceof Z&&"number"==typeof n[1]){var i=n[0],s=n[1],u=n[2],l=new e(i);l.setQuadrantSegments(u);var o=l.getResultGeometry(s);return o}if(n[2]instanceof an&&n[0]instanceof Z&&"number"==typeof n[1]){var i=n[0],s=n[1],h=n[2],l=new e(i,h),o=l.getResultGeometry(s);return o}}else if(4===n.length){var i=n[0],s=n[1],u=n[2],c=n[3],l=new e(i);l.setQuadrantSegments(u),l.setEndCapStyle(c);var o=l.getResultGeometry(s);return o}}},{key:"precisionScaleFactor",value:function(e,t,n){var r=e.getEnvelopeInternal(),i=T.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),s=t>0?t:0,a=i+2*s,o=Math.trunc(Math.log(a)/Math.log(10)+1),u=n-o,l=Math.pow(10,u);return l}}]),e}();cr.CAP_ROUND=an.CAP_ROUND,cr.CAP_BUTT=an.CAP_FLAT,cr.CAP_FLAT=an.CAP_FLAT,cr.CAP_SQUARE=an.CAP_SQUARE,cr.MAX_PRECISION_DIGITS=12;var gr=function(){function e(){_classCallCheck(this,e),this.comps=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.comps=i}}return _createClass(e,[{key:"filter",value:function(e){e instanceof ze&&this.comps.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[xe]}}],[{key:"getPolygons",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return e.getPolygons(i,new se)}if(2===n.length){var i=n[0],s=n[1];return i instanceof ze?s.add(i):i instanceof Ne&&i.apply(new e(s)),s}}}]),e}(),fr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.component=null,this.segIndex=null,this.pt=null;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],o=r[1];a.call(t,s,e.INSIDE_AREA,o)}else if(3===r.length){var s=r[0],u=r[1],o=r[2];t.component=s,t.segIndex=u,t.pt=o}};return s.apply(this,r)}return _createClass(e,[{key:"isInsideArea",value:function(){return this.segIndex===e.INSIDE_AREA}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getGeometryComponent",value:function(){return this.component}},{key:"getSegmentIndex",value:function(){return this.segIndex}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();fr.INSIDE_AREA=-1;var vr=function(){function e(){_classCallCheck(this,e),this.pts=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pts=i}}return _createClass(e,[{key:"filter",value:function(e){e instanceof Be&&this.pts.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[xe]}}],[{key:"getPoints",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return i instanceof Be?Nt.singletonList(i):e.getPoints(i,new se)}if(2===n.length){var i=n[0],s=n[1];return i instanceof Be?s.add(i):i instanceof Ne&&i.apply(new e(s)),s}}}]),e}(),yr=function(){function e(){_classCallCheck(this,e),this.locations=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.locations=i}}return _createClass(e,[{key:"filter",value:function(e){(e instanceof Be||e instanceof Fe||e instanceof ze)&&this.locations.add(new fr(e,0,e.getCoordinate()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[xe]}}],[{key:"getLocations",value:function(t){var n=new se;return t.apply(new e(n)),n}}]),e}(),dr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.geom=null,this.terminateDistance=0,this.ptLocator=new Ct,this.minDistanceLocation=null,this.minDistance=E.MAX_VALUE;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];a.call(t,i,s,0)}else if(3===n.length){var i=n[0],s=n[1],o=n[2];t.geom=new Array(2),t.geom[0]=i,t.geom[1]=s,t.terminateDistance=o}};return s.apply(this,r)}return _createClass(e,[{key:"computeContainmentDistance",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){var i=new Array(2);if(this.computeContainmentDistance(0,i),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,i)}else if(2===t.length){var s=t[0],a=t[1],o=1-s,u=gr.getPolygons(this.geom[s]);if(u.size()>0){var l=yr.getLocations(this.geom[o]);if(this.computeContainmentDistance(l,u,a),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[o]=a[0],this.minDistanceLocation[s]=a[1],null}}else if(3===t.length)if(t[2]instanceof Array&&t[0].interfaces_&&t[0].interfaces_.indexOf(r)>-1&&t[1].interfaces_&&t[1].interfaces_.indexOf(r)>-1){for(var h=t[0],c=t[1],g=t[2],f=0;f<h.size();f++)for(var v=h.get(f),y=0;y<c.size();y++)if(this.computeContainmentDistance(v,c.get(y),g),this.minDistance<=this.terminateDistance)return null}else if(t[2]instanceof Array&&t[0]instanceof fr&&t[1]instanceof ze){var d=t[0],p=t[1],m=t[2],k=d.getCoordinate();if(P.EXTERIOR!==this.ptLocator.locate(k,p))return this.minDistance=0,m[0]=d,m[1]=new fr(p,k),null}}},{key:"computeMinDistanceLinesPoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),s=0;s<t.size();s++){var a=t.get(s);if(this.computeMinDistance(i,a,n),this.minDistance<=this.terminateDistance)return null}}},{key:"computeFacetDistance",value:function(){var e=new Array(2),t=Ft.getLines(this.geom[0]),n=Ft.getLines(this.geom[1]),r=vr.getPoints(this.geom[0]),i=vr.getPoints(this.geom[1]);return this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this.minDistance<=this.terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),void this.updateMinDistance(e,!1))))}},{key:"nearestLocations",value:function(){return this.computeMinDistance(),this.minDistanceLocation}},{key:"updateMinDistance",value:function(e,t){return null===e[0]?null:void(t?(this.minDistanceLocation[0]=e[1],this.minDistanceLocation[1]=e[0]):(this.minDistanceLocation[0]=e[0],this.minDistanceLocation[1]=e[1]))}},{key:"nearestPoints",value:function(){this.computeMinDistance();var e=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return e}},{key:"computeMinDistance",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===t.length)if(t[2]instanceof Array&&t[0]instanceof Fe&&t[1]instanceof Be){var r=t[0],i=t[1],s=t[2];if(r.getEnvelopeInternal().distance(i.getEnvelopeInternal())>this.minDistance)return null;for(var a=r.getCoordinates(),o=i.getCoordinate(),u=0;u<a.length-1;u++){var l=Q.distancePointLine(o,a[u],a[u+1]);if(l<this.minDistance){this.minDistance=l;var h=new tt(a[u],a[u+1]),c=h.closestPoint(o);s[0]=new fr(r,u,c),s[1]=new fr(i,0,o)}if(this.minDistance<=this.terminateDistance)return null}}else if(t[2]instanceof Array&&t[0]instanceof Fe&&t[1]instanceof Fe){var g=t[0],f=t[1],s=t[2];if(g.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this.minDistance)return null;for(var a=g.getCoordinates(),v=f.getCoordinates(),u=0;u<a.length-1;u++)for(var y=0;y<v.length-1;y++){var l=Q.distanceLineLine(a[u],a[u+1],v[y],v[y+1]);if(l<this.minDistance){this.minDistance=l;var d=new tt(a[u],a[u+1]),p=new tt(v[y],v[y+1]),m=d.closestPoints(p);s[0]=new fr(g,u,m[0]),s[1]=new fr(f,y,m[1])}if(this.minDistance<=this.terminateDistance)return null}}}},{key:"computeMinDistancePoints",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),s=0;s<t.size();s++){var a=t.get(s),o=i.getCoordinate().distance(a.getCoordinate());if(o<this.minDistance&&(this.minDistance=o,n[0]=new fr(i,0,i.getCoordinate()),n[1]=new fr(a,0,a.getCoordinate())),this.minDistance<=this.terminateDistance)return null}}},{key:"distance",value:function(){if(null===this.geom[0]||null===this.geom[1])throw new C("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)}},{key:"computeMinDistanceLines",value:function(e,t,n){for(var r=0;r<e.size();r++)for(var i=e.get(r),s=0;s<t.size();s++){var a=t.get(s);if(this.computeMinDistance(i,a,n),this.minDistance<=this.terminateDistance)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"distance",value:function(t,n){var r=new e(t,n);return r.distance()}},{key:"isWithinDistance",value:function(t,n,r){var i=new e(t,n,r);return i.distance()<=r}},{key:"nearestPoints",value:function(t,n){var r=new e(t,n);return r.nearestPoints()}}]),e}(),pr=function(){function e(){_classCallCheck(this,e),this.factory=null,this.directedEdges=new se,this.coordinates=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i}}return _createClass(e,[{key:"getCoordinates",value:function(){if(null===this.coordinates){for(var e=0,t=0,n=new oe,r=this.directedEdges.iterator();r.hasNext();){var i=r.next();i.getEdgeDirection()?e++:t++,n.add(i.getEdge().getLine().getCoordinates(),!1,i.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),t>e&&ue.reverse(this.coordinates)}return this.coordinates}},{key:"toLineString",value:function(){return this.factory.createLineString(this.getCoordinates())}},{key:"add",value:function(e){this.directedEdges.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),mr=function(){function e(){_classCallCheck(this,e),this._isMarked=!1,this._isVisited=!1,this.data=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"isMarked",value:function(){return this._isMarked}},{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"setMarked",value:function(e){this._isMarked=e}},{key:"getContext",value:function(){return this.data}},{key:"isVisited",value:function(){return this._isVisited}},{key:"setContext",value:function(e){this.data=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getComponentWithVisitedState",value:function(e,t){for(;e.hasNext();){var n=e.next();if(n.isVisited()===t)return n}return null}},{key:"setVisited",value:function(e,t){for(;e.hasNext();){var n=e.next();n.setVisited(t)}}},{key:"setMarked",value:function(e,t){for(;e.hasNext();){var n=e.next();n.setMarked(t)}}}]),e}(),kr=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.parentEdge=null,e.from=null,e.to=null,e.p0=null,e.p1=null,e.sym=null,e.edgeDirection=null,e.quadrant=null,e.angle=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4===r.length){var s=r[0],a=r[1],o=r[2],u=r[3];e.from=s,e.to=a,e.edgeDirection=u,e.p0=s.getCoordinate(),e.p1=o;var l=e.p1.x-e.p0.x,h=e.p1.y-e.p0.y;e.quadrant=it.quadrant(l,h),e.angle=Math.atan2(h,l)}return e}return _inherits(t,e),_createClass(t,[{key:"isRemoved",value:function(){return null===this.parentEdge}},{key:"compareDirection",value:function(e){return this.quadrant>e.quadrant?1:this.quadrant<e.quadrant?-1:Q.computeOrientation(e.p0,e.p1,this.p1)}},{key:"getCoordinate",value:function(){return this.from.getCoordinate()}},{key:"print",value:function(e){var t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);e.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)}},{key:"getDirectionPt",value:function(){return this.p1}},{key:"getAngle",value:function(){return this.angle}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getFromNode",value:function(){return this.from}},{key:"getSym",value:function(){return this.sym}},{key:"setEdge",value:function(e){this.parentEdge=e}},{key:"remove",value:function(){this.sym=null,this.parentEdge=null}},{key:"getEdge",value:function(){return this.parentEdge}},{key:"getQuadrant",value:function(){return this.quadrant}},{key:"setSym",value:function(e){this.sym=e}},{key:"getToNode",value:function(){return this.to}},{key:"getEdgeDirection",value:function(){return this.edgeDirection}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[I]}}],[{key:"toEdges",value:function(e){for(var t=new se,n=e.iterator();n.hasNext();)t.add(n.next().parentEdge);return t}}]),t}(mr),Cr=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4===r.length)var s=r[0],a=r[1],o=r[2],u=r[3],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a,o,u));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getNext",value:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(R.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(kr),Er=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.dirEdge=null;var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 0===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n]}.apply(void 0,t):2===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];s.setDirectedEdges(r,i)}.apply(void 0,t):void 0};return e=a.apply(s,r),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"isRemoved",value:function(){return null===this.dirEdge}},{key:"setDirectedEdges",value:function(e,t){this.dirEdge=[e,t],e.setEdge(this),t.setEdge(this),e.setSym(t),t.setSym(e),e.getFromNode().addOutEdge(e),t.getFromNode().addOutEdge(t)}},{key:"getDirEdge",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(Number.isInteger(t[0])){var r=t[0];return this.dirEdge[r]}if(t[0]instanceof xr){var i=t[0];return this.dirEdge[0].getFromNode()===i?this.dirEdge[0]:this.dirEdge[1].getFromNode()===i?this.dirEdge[1]:null}}}},{key:"remove",value:function(){this.dirEdge=null}},{key:"getOppositeNode",value:function(e){return this.dirEdge[0].getFromNode()===e?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===e?this.dirEdge[1].getToNode():null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(mr),Ir=function(){function e(){_classCallCheck(this,e),this.outEdges=new se,this.sorted=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getNextEdge",value:function(e){var t=this.getIndex(e);return this.outEdges.get(this.getIndex(t+1))}},{key:"getCoordinate",value:function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()}},{key:"iterator",value:function(){return this.sortEdges(),this.outEdges.iterator()}},{key:"sortEdges",value:function(){this.sorted||(Nt.sort(this.outEdges),this.sorted=!0)}},{key:"remove",value:function(e){this.outEdges.remove(e)}},{key:"getEdges",value:function(){return this.sortEdges(),this.outEdges}},{key:"getNextCWEdge",value:function(e){var t=this.getIndex(e);return this.outEdges.get(this.getIndex(t-1))}},{key:"getIndex",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Er){var r=t[0];this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var s=this.outEdges.get(i);if(s.getEdge()===r)return i}return-1}if(t[0]instanceof kr){var a=t[0];this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var s=this.outEdges.get(i);if(s===a)return i}return-1}if(Number.isInteger(t[0])){var o=t[0],u=o%this.outEdges.size();return 0>u&&(u+=this.outEdges.size()),u}}}},{key:"add",value:function(e){this.outEdges.add(e),this.sorted=!1}},{key:"getDegree",value:function(){return this.outEdges.size()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),xr=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.pt=null,s.deStar=null;var a=function o(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 1===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];o.call(s,r,new Ir)}.apply(void 0,t):2===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];s.pt=r,s.deStar=i}.apply(void 0,t):void 0};return e=a.apply(s,r),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"isRemoved",value:function(){return null===this.pt}},{key:"addOutEdge",value:function(e){this.deStar.add(e)}},{key:"getCoordinate",value:function(){return this.pt}},{key:"getOutEdges",value:function(){return this.deStar}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)this.pt=null;else if(1===t.length){var r=t[0];this.deStar.remove(r)}}},{key:"getIndex",value:function(e){return this.deStar.getIndex(e)}},{key:"getDegree",value:function(){return this.deStar.getDegree()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"getEdgesBetween",value:function(e,t){var n=kr.toEdges(e.getOutEdges().getEdges()),r=new l(n),i=kr.toEdges(t.getOutEdges().getEdges());return r.retainAll(i),r}}]),t}(mr),_r=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.line=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.line=s}return e}return _inherits(t,e),_createClass(t,[{key:"getLine",value:function(){return this.line}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Er),Nr=function(){function e(){_classCallCheck(this,e),this.nodeMap=new h;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"remove",value:function(e){return this.nodeMap.remove(e)}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"add",value:function(e){return this.nodeMap.put(e.getCoordinate(),e),e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Sr=function(){function e(){_classCallCheck(this,e),this.edges=new l,this.dirEdges=new l,this.nodeMap=new Nr;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"findNodesOfDegree",value:function(e){for(var t=new se,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()===e&&t.add(r)}return t}},{key:"dirEdgeIterator",value:function(){return this.dirEdges.iterator()}},{key:"edgeIterator",value:function(){return this.edges.iterator()}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Er){var r=t[0];this.remove(r.getDirEdge(0)),this.remove(r.getDirEdge(1)),this.edges.remove(r),r.remove()}else if(t[0]instanceof kr){var i=t[0],s=i.getSym();null!==s&&s.setSym(null),i.getFromNode().remove(i),i.remove(),this.dirEdges.remove(i)}else if(t[0]instanceof xr){for(var a=t[0],o=a.getOutEdges().getEdges(),u=o.iterator();u.hasNext();){var l=u.next(),s=l.getSym();null!==s&&this.remove(s),this.dirEdges.remove(l);var h=l.getEdge();null!==h&&this.edges.remove(h)}this.nodeMap.remove(a.getCoordinate()),a.remove()}}},{key:"findNode",value:function(e){return this.nodeMap.find(e)}},{key:"getEdges",value:function(){return this.edges}},{key:"nodeIterator",value:function(){return this.nodeMap.iterator()}},{key:"contains",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Er){var r=t[0];return this.edges.contains(r)}if(t[0]instanceof kr){var i=t[0];return this.dirEdges.contains(i)}}}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof xr){var r=t[0];this.nodeMap.add(r)}else if(t[0]instanceof Er){var i=t[0];this.edges.add(i),this.add(i.getDirEdge(0)),this.add(i.getDirEdge(1))}else if(t[0]instanceof kr){var s=t[0];this.dirEdges.add(s)}}},{key:"getNodes",value:function(){return this.nodeMap.values()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Or=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"addEdge",value:function(e){if(e.isEmpty())return null;var t=ue.removeRepeatedPoints(e.getCoordinates());
if(t.length<=1)return null;var n=t[0],r=t[t.length-1],i=this.getNode(n),s=this.getNode(r),a=new Cr(i,s,t[1],!0),o=new Cr(s,i,t[t.length-2],!1),u=new _r(e);u.setDirectedEdges(a,o),this.add(u)}},{key:"getNode",value:function(e){var t=this.findNode(e);return null===t&&(t=new xr(e),this.add(t)),t}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Sr),Rr=function(){function e(){_classCallCheck(this,e),this.graph=new Or,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"buildEdgeStringsForUnprocessedNodes",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.isMarked()||(R.isTrue(2===t.getDegree()),this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}}},{key:"buildEdgeStringsForNonDegree2Nodes",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();2!==t.getDegree()&&(this.buildEdgeStringsStartingAt(t),t.setMarked(!0))}}},{key:"buildEdgeStringsForObviousStartNodes",value:function(){this.buildEdgeStringsForNonDegree2Nodes()}},{key:"getMergedLineStrings",value:function(){return this.merge(),this.mergedLineStrings}},{key:"buildEdgeStringsStartingAt",value:function(e){for(var t=e.getOutEdges().iterator();t.hasNext();){var n=t.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}}},{key:"merge",value:function(){if(null!==this.mergedLineStrings)return null;mr.setMarked(this.graph.nodeIterator(),!1),mr.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new se,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new se;for(var e=this.edgeStrings.iterator();e.hasNext();){var t=e.next();this.mergedLineStrings.add(t.toLineString())}}},{key:"buildEdgeStringStartingWith",value:function(e){var t=new pr(this.factory),n=e;do t.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!==n&&n!==e);return t}},{key:"add",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof Z){var i=n[0];i.apply(new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filter",value:function(e){e instanceof Fe&&this.add(e)}},{key:"interfaces_",get:function(){return[Ee]}}]),e}()))}else if(n[0].interfaces_&&n[0].interfaces_.indexOf(t)>-1){var s=n[0];this.mergedLineStrings=null;for(var a=s.iterator();a.hasNext();){var o=a.next();this.add(o)}}else if(n[0]instanceof Fe){var u=n[0];null===this.factory&&(this.factory=u.getFactory()),this.graph.addEdge(u)}}},{key:"buildEdgeStringsForIsolatedLoops",value:function(){this.buildEdgeStringsForUnprocessedNodes()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Lr=function(){function e(){_classCallCheck(this,e),this.pts=null,this.data=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.pts=i,this.data=s}}return _createClass(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"size",value:function(){return this.pts.length}},{key:"getCoordinate",value:function(e){return this.pts[e]}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this.pts.length-1?-1:Rn.octant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"toString",value:function(){return j.toLineString(new Ke(this.pts))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Ln]}}]),e}(),Ar=function(){function e(){_classCallCheck(this,e),this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new se,this.intersectionCount=0,this.keepIntersections=!0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.li=i,this.interiorIntersection=null}}return _createClass(e,[{key:"getInteriorIntersection",value:function(){return this.interiorIntersection}},{key:"setCheckEndSegmentsOnly",value:function(e){this.isCheckEndSegmentsOnly=e}},{key:"getIntersectionSegments",value:function(){return this.intSegments}},{key:"count",value:function(){return this.intersectionCount}},{key:"getIntersections",value:function(){return this.intersections}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"setKeepIntersections",value:function(e){this.keepIntersections=e}},{key:"processIntersections",value:function(e,t,n,r){if(!this.findAllIntersections&&this.hasIntersection())return null;if(e===n&&t===r)return null;if(this.isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var s=e.getCoordinates()[t],a=e.getCoordinates()[t+1],o=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(s,a,o,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4),this.intSegments[0]=s,this.intSegments[1]=a,this.intSegments[2]=o,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)}},{key:"isEndSegment",value:function(e,t){return 0===t?!0:t>=e.size()-2?!0:!1}},{key:"hasIntersection",value:function(){return null!==this.interiorIntersection}},{key:"isDone",value:function(){return this.findAllIntersections?!1:null!==this.interiorIntersection}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[er]}}],[{key:"createAllIntersectionsFinder",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n}},{key:"createAnyIntersectionFinder",value:function(t){return new e(t)}},{key:"createIntersectionCounter",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n}}]),e}(),wr=function(){function e(){_classCallCheck(this,e),this.li=new W,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.segStrings=i}}return _createClass(e,[{key:"execute",value:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()}},{key:"getIntersections",value:function(){return this.segInt.getIntersections()}},{key:"isValid",value:function(){return this.execute(),this._isValid}},{key:"setFindAllIntersections",value:function(e){this.findAllIntersections=e}},{key:"checkInteriorIntersections",value:function(){this._isValid=!0,this.segInt=new Ar(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var e=new Fn;return e.setSegmentIntersector(this.segInt),e.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0}},{key:"checkValid",value:function(){if(this.execute(),!this._isValid)throw new Zt(this.getErrorMessage(),this.segInt.getInteriorIntersection())}},{key:"getErrorMessage",value:function(){if(this._isValid)return"no intersections found";var e=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+j.toLineString(e[0],e[1])+" and "+j.toLineString(e[2],e[3])}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeIntersections",value:function(t){var n=new e(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()}}]),e}(),br=function(){function e(){_classCallCheck(this,e),this.nv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.nv=new wr(e.toSegmentStrings(i))}}return _createClass(e,[{key:"checkValid",value:function(){this.nv.checkValid()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"toSegmentStrings",value:function(e){for(var t=new se,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Lr(r.getCoordinates(),r))}return t}},{key:"checkValid",value:function(t){var n=new e(t);n.checkValid()}}]),e}(),Pr=function(){function e(){_classCallCheck(this,e),this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new se,this.resultLineList=new se;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1],a=n[2];this.op=i,this.geometryFactory=s,this.ptLocator=a}}return _createClass(e,[{key:"collectLines",value:function(e){for(var t=this.op.getGraph().getEdgeEnds().iterator();t.hasNext();){var n=t.next();this.collectLineEdge(n,e,this.lineEdgesList),this.collectBoundaryTouchEdge(n,e,this.lineEdgesList)}}},{key:"labelIsolatedLine",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.op.getArgGeometry(t));e.getLabel().setLocation(t,n)}},{key:"build",value:function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this.resultLineList}},{key:"collectLineEdge",value:function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!Dr.isResultOfOp(r,t)||i.isCovered()||(n.add(i),e.setVisitedEdge(!0)))}},{key:"findCoveredLineEdges",value:function(){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getEdge();if(r.isLineEdge()&&!i.isCoveredSet()){var s=this.op.isCoveredByA(r.getCoordinate());i.setCovered(s)}}}},{key:"labelIsolatedLines",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}}},{key:"buildLines",value:function(e){for(var t=this.lineEdgesList.iterator();t.hasNext();){var n=t.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}}},{key:"collectBoundaryTouchEdge",value:function(e,t,n){var r=e.getLabel();return e.isLineEdge()?null:e.isVisited()?null:e.isInteriorAreaEdge()?null:e.getEdge().isInResult()?null:(R.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(Dr.isResultOfOp(r,t)&&t===Dr.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Tr=function(){function e(){_classCallCheck(this,e),this.op=null,this.geometryFactory=null,this.resultPointList=new se;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(3===n.length){var i=n[0],s=n[1];n[2];this.op=i,this.geometryFactory=s}}return _createClass(e,[{key:"filterCoveredNodeToPoint",value:function(e){var t=e.getCoordinate();if(!this.op.isCoveredByLA(t)){var n=this.geometryFactory.createPoint(t);this.resultPointList.add(n)}}},{key:"extractNonCoveredResultNodes",value:function(e){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&e!==Dr.INTERSECTION)){var r=n.getLabel();Dr.isResultOfOp(r,e)&&this.filterCoveredNodeToPoint(n)}}}},{key:"build",value:function(e){return this.extractNonCoveredResultNodes(e),this.resultPointList}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Mr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.li=new W,this.resultPrecisionModel=null,this.arg=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];t.setComputationPrecision(i.getPrecisionModel()),t.arg=new Array(1),t.arg[0]=new nn(0,i)}else if(2===n.length){var i=n[0],s=n[1];a.call(t,i,s,ee.OGC_SFS_BOUNDARY_RULE)}else if(3===n.length){var i=n[0],s=n[1],o=n[2];i.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?t.setComputationPrecision(i.getPrecisionModel()):t.setComputationPrecision(s.getPrecisionModel()),t.arg=new Array(2),t.arg[0]=new nn(0,i,o),t.arg[1]=new nn(1,s,o)}};return s.apply(this,r)}return _createClass(e,[{key:"getArgGeometry",value:function(e){return this.arg[e].getGeometry()}},{key:"setComputationPrecision",value:function(e){this.resultPrecisionModel=e,this.li.setPrecisionModel(this.resultPrecisionModel)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Dr=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.ptLocator=new Ct,e.geomFact=null,e.resultGeom=null,e.graph=null,e.edgeList=new $n,e.resultPolyList=new se,e.resultLineList=new se,e.resultPointList=new se;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a));e.graph=new tn(new Qn),e.geomFact=s.getFactory()}return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"insertUniqueEdge",value:function(e){var t=this.edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new Lt(e.getLabel()),r.flip());var i=t.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this.edgeList.add(e)}},{key:"getGraph",value:function(){return this.graph}},{key:"cancelDuplicateResultEdges",value:function(){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),n=t.getSym();t.isInResult()&&n.isInResult()&&(t.setInResult(!1),n.setInResult(!1))}}},{key:"isCoveredByLA",value:function(e){return this.isCovered(e,this.resultLineList)?!0:this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"computeGeometry",value:function(e,n,r,i){var s=new se;return s.addAll(e),s.addAll(n),s.addAll(r),s.isEmpty()?t.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(s)}},{key:"mergeSymLabels",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().mergeSymLabels()}}},{key:"isCovered",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=this.ptLocator.locate(e,r);if(i!==P.EXTERIOR)return!0}return!1}},{key:"replaceCollapsedEdges",value:function(){for(var e=new se,t=this.edgeList.iterator();t.hasNext();){var n=t.next();n.isCollapsed()&&(t.remove(),e.add(n.getCollapsedEdge()))}this.edgeList.addAll(e)}},{key:"updateNodeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next(),n=t.getEdges().getLabel();t.getLabel().merge(n)}}},{key:"getResultGeometry",value:function(e){return this.computeOverlay(e),this.resultGeom}},{key:"insertUniqueEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.insertUniqueEdge(n)}}},{key:"computeOverlay",value:function(e){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var t=new se;this.arg[0].computeSplitEdges(t),this.arg[1].computeSplitEdges(t);this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),br.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var n=new fn(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new Pr(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(e);var i=new Tr(this,this.geomFact,this.ptLocator);this.resultPointList=i.build(e),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,e)}},{key:"labelIncompleteNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setLocation(t,n)}},{key:"copyPoints",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"findResultAreaEdges",value:function(e){for(var n=this.graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&t.isResultOfOp(i.getLocation(0,Et.RIGHT),i.getLocation(1,Et.RIGHT),e)&&r.setInResult(!0)}}},{key:"computeLabelsFromDepths",value:function(){for(var e=this.edgeList.iterator();e.hasNext();){var t=e.next(),n=t.getLabel(),r=t.getDepth();if(!r.isNull()){r.normalize();for(var i=0;2>i;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(R.isTrue(!r.isNull(i,Et.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Et.LEFT,r.getLocation(i,Et.LEFT)),R.isTrue(!r.isNull(i,Et.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Et.RIGHT,r.getLocation(i,Et.RIGHT))))}}}},{key:"computeLabelling",value:function(){for(var e=this.graph.getNodes().iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()}},{key:"labelIncompleteNodes",value:function(){for(var e=0,t=this.graph.getNodes().iterator();t.hasNext();){var n=t.next(),r=n.getLabel();n.isIsolated()&&(e++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}}},{key:"isCoveredByA",value:function(e){return this.isCovered(e,this.resultPolyList)?!0:!1}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(e,n,r){var i=new t(e,n),s=i.getResultGeometry(r);return s}},{key:"isResultOfOp",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1],a=i.getLocation(0),o=i.getLocation(1);return t.isResultOfOp(a,o,s)}if(3===n.length){var u=n[0],l=n[1],h=n[2];switch(u===P.BOUNDARY&&(u=P.INTERIOR),l===P.BOUNDARY&&(l=P.INTERIOR),h){case t.INTERSECTION:return u===P.INTERIOR&&l===P.INTERIOR;case t.UNION:return u===P.INTERIOR||l===P.INTERIOR;case t.DIFFERENCE:return u===P.INTERIOR&&l!==P.INTERIOR;case t.SYMDIFFERENCE:return u===P.INTERIOR&&l!==P.INTERIOR||u!==P.INTERIOR&&l===P.INTERIOR}return!1}}},{key:"createEmptyResult",value:function(e,n,r,i){var s=null;switch(t.resultDimension(e,n,r)){case-1:s=i.createGeometryCollection(new Array(0));break;case 0:s=i.createPoint();break;case 1:s=i.createLineString();break;case 2:s=i.createPolygon()}return s}},{key:"resultDimension",value:function n(e,r,i){var s=r.getDimension(),a=i.getDimension(),n=-1;switch(e){case t.INTERSECTION:n=Math.min(s,a);break;case t.UNION:n=Math.max(s,a);break;case t.DIFFERENCE:n=s;break;case t.SYMDIFFERENCE:n=Math.max(s,a)}return n}}]),t}(Mr);Dr.INTERSECTION=1,Dr.UNION=2,Dr.DIFFERENCE=3,Dr.SYMDIFFERENCE=4;var Fr=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.edgeRing=null,e.next=null,e.label=-1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(4===r.length)var s=r[0],a=r[1],o=r[2],u=r[3],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a,o,u));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"getNext",value:function(){return this.next}},{key:"isInRing",value:function(){return null!==this.edgeRing}},{key:"setRing",value:function(e){this.edgeRing=e}},{key:"setLabel",value:function(e){this.label=e}},{key:"getLabel",value:function(){return this.label}},{key:"setNext",value:function(e){this.next=e}},{key:"getRing",value:function(){return this.edgeRing}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(kr),Gr=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.line=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.line=s}return e}return _inherits(t,e),_createClass(t,[{key:"getLine",value:function(){return this.line}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Er),Br=function(){function e(){_classCallCheck(this,e),this.factory=null,this.deList=new se,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i}}return _createClass(e,[{key:"isIncluded",value:function(){return this._isIncluded}},{key:"getCoordinates",value:function(){if(null===this.ringPts){for(var t=new oe,n=this.deList.iterator();n.hasNext();){var r=n.next(),i=r.getEdge();e.addEdge(i.getLine().getCoordinates(),r.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts}},{key:"isIncludedSet",value:function(){return this._isIncludedSet}},{key:"isValid",value:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())}},{key:"build",value:function(e){var t=e;do this.add(t),t.setRing(this),t=t.getNext(),R.isTrue(null!==t,"found null DE in ring"),R.isTrue(t===e||!t.isInRing(),"found DE already in ring");while(t!==e)}},{key:"isOuterHole",value:function(){return this._isHole?!this.hasShell():!1}},{key:"getPolygon",value:function(){var e=null;if(null!==this.holes){e=new Array(this.holes.size());for(var t=0;t<this.holes.size();t++)e[t]=this.holes.get(t)}var n=this.factory.createPolygon(this.ring,e);return n}},{key:"isHole",value:function(){return this._isHole}},{key:"isProcessed",value:function(){return this._isProcessed}},{key:"addHole",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof Ye){var i=n[0];null===this.holes&&(this.holes=new se),this.holes.add(i)}else if(n[0]instanceof e){var s=n[0];s.setShell(this);var a=s.getRing();null===this.holes&&(this.holes=new se),this.holes.add(a)}}},{key:"setIncluded",value:function(e){this._isIncluded=e,this._isIncludedSet=!0}},{key:"getOuterHole",value:function(){if(this.isHole())return null;for(var e=0;e<this.deList.size();e++){var t=this.deList.get(e),n=t.getSym().getRing();if(n.isOuterHole())return n}return null}},{key:"computeHole",value:function(){var e=this.getRing();this._isHole=Q.isCCW(e.getCoordinates())}},{key:"hasShell",value:function(){return null!==this.shell}},{key:"isOuterShell",value:function(){return null!==this.getOuterHole()}},{key:"getLineString",value:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)}},{key:"toString",value:function(){return j.toLineString(new Ke(this.getCoordinates()))}},{key:"getShell",value:function(){return this.isHole()?this.shell:this}},{key:"add",value:function(e){this.deList.add(e)}},{key:"getRing",value:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&U.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(e){if(!(e instanceof q))throw e;U.out.println(this.ringPts)}finally{}return this.ring}},{key:"updateIncluded",value:function(){if(this.isHole())return null;for(var e=0;e<this.deList.size();e++){var t=this.deList.get(e),n=t.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}}},{key:"setShell",value:function(e){this.shell=e}},{key:"setProcessed",value:function(e){this._isProcessed=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDirEdgesInRing",value:function(e){var t=e,n=new se;do n.add(t),t=t.getNext(),R.isTrue(null!==t,"found null DE in ring"),R.isTrue(t===e||!t.isInRing(),"found DE already in ring");while(t!==e);return n}},{key:"addEdge",value:function(e,t,n){if(t)for(var r=0;r<e.length;r++)n.add(e[r],!1);else for(var r=e.length-1;r>=0;r--)n.add(e[r],!1)}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),s=null,a=null,o=t.iterator();o.hasNext();){var u=o.next(),l=u.getRing(),h=l.getEnvelopeInternal();if(!h.equals(r)&&h.contains(r)){i=ue.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;Q.isPointInRing(i,l.getCoordinates())&&(c=!0),c&&(null===s||a.contains(h))&&(s=u,a=s.getRing().getEnvelopeInternal())}}return s}},{key:"EnvelopeComparator",get:function(){return qr}}]),e}(),qr=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"compare",value:function(e,t){var n=e,r=t;return n.getRing().getEnvelope().compareTo(r.getRing().getEnvelope())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[_]}}]),e}(),zr=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.factory=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.factory=s}return e}return _inherits(t,e),_createClass(t,[{key:"findEdgeRing",value:function(e){var t=new Br(this.factory);return t.build(e),t}},{key:"computeDepthParity",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)for(;;){var r=null;if(null===r)return null;this.computeDepthParity(r)}else if(1===t.length){t[0]}}},{key:"computeNextCWEdges",value:function(){for(var e=this.nodeIterator();e.hasNext();){var n=e.next();t.computeNextCWEdges(n)}}},{key:"addEdge",value:function(e){if(e.isEmpty())return null;var t=ue.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return null;var n=t[0],r=t[t.length-1],i=this.getNode(n),s=this.getNode(r),a=new Fr(i,s,t[1],!0),o=new Fr(s,i,t[t.length-2],!1),u=new Gr(e);u.setDirectedEdges(a,o),this.add(u)}},{key:"deleteCutEdges",value:function(){this.computeNextCWEdges(),t.findLabeledEdgeRings(this.dirEdges);for(var e=new se,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()){var i=r.getSym();if(r.getLabel()===i.getLabel()){r.setMarked(!0),i.setMarked(!0);var s=r.getEdge();e.add(s.getLine())}}}return e}},{key:"getEdgeRings",value:function(){this.computeNextCWEdges(),t.label(this.dirEdges,-1);var e=t.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(e);for(var n=new se,r=this.dirEdges.iterator();r.hasNext();){var i=r.next();if(!i.isMarked()&&!i.isInRing()){var s=this.findEdgeRing(i);n.add(s)}}return n}},{key:"getNode",value:function(e){var t=this.findNode(e);return null===t&&(t=new xr(e),this.add(t)),t}},{key:"convertMaximalToMinimalEdgeRings",value:function(e){for(var n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),s=t.findIntersectionNodes(r,i);if(null!==s)for(var a=s.iterator();a.hasNext();){var o=a.next();t.computeNextCCWEdges(o,i)}}}},{key:"deleteDangles",value:function(){for(var e=this.findNodesOfDegree(1),n=new l,r=new d,i=e.iterator();i.hasNext();)r.push(i.next());for(;!r.isEmpty();){var s=r.pop();t.deleteAllEdges(s);for(var a=s.getOutEdges().getEdges(),i=a.iterator();i.hasNext();){var o=i.next();o.setMarked(!0);var u=o.getSym();null!==u&&u.setMarked(!0);var h=o.getEdge();n.add(h.getLine());var c=o.getToNode();1===t.getDegreeNonDeleted(c)&&r.push(c)}}return n}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"findLabeledEdgeRings",value:function(e){for(var n=new se,r=1,i=e.iterator();i.hasNext();){var s=i.next();if(!(s.isMarked()||s.getLabel()>=0)){n.add(s);var a=Br.findDirEdgesInRing(s);t.label(a,r),r++}}return n}},{key:"getDegreeNonDeleted",value:function(e){for(var t=e.getOutEdges().getEdges(),n=0,r=t.iterator();r.hasNext();){var i=r.next();i.isMarked()||n++}return n}},{key:"deleteAllEdges",value:function(e){for(var t=e.getOutEdges().getEdges(),n=t.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var i=r.getSym();null!==i&&i.setMarked(!0)}}},{key:"label",value:function(e,t){for(var n=e.iterator();n.hasNext();){var r=n.next();r.setLabel(t)}}},{key:"computeNextCWEdges",value:function(e){for(var t=e.getOutEdges(),n=null,r=null,i=t.getEdges().iterator();i.hasNext();){var s=i.next();if(!s.isMarked()){if(null===n&&(n=s),null!==r){var a=r.getSym();a.setNext(s)}r=s}}if(null!==r){var a=r.getSym();a.setNext(n)}}},{key:"computeNextCCWEdges",value:function(e,t){for(var n=e.getOutEdges(),r=null,i=null,s=n.getEdges(),a=s.size()-1;a>=0;a--){var o=s.get(a),u=o.getSym(),l=null;o.getLabel()===t&&(l=o);var h=null;u.getLabel()===t&&(h=u),(null!==l||null!==h)&&(null!==h&&(i=h),null!==l&&(null!==i&&(i.setNext(l),i=null),null===r&&(r=l)))}null!==i&&(R.isTrue(null!==r),i.setNext(r))}},{key:"getDegree",value:function(e,t){for(var n=e.getOutEdges().getEdges(),r=0,i=n.iterator();i.hasNext();){var s=i.next();s.getLabel()===t&&r++}return r}},{key:"findIntersectionNodes",value:function(e,n){var r=e,i=null;do{var s=r.getFromNode();t.getDegree(s,n)>1&&(null===i&&(i=new se),i.add(s)),r=r.getNext(),R.isTrue(null!==r,"found null DE in ring"),R.isTrue(r===e||!r.isInRing(),"found DE already in ring")}while(r!==e);return i}}]),t}(Sr),Ur=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.lineStringAdder=new Yr(this),this.graph=null,this.dangles=new se,this.cutEdges=new se,this.invalidRingLines=new se,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)a.call(t,!1);else if(1===n.length){var i=n[0];t.extractOnlyPolygonal=i}};return s.apply(this,r)}return _createClass(e,[{key:"getGeometry",value:function(){return null===this.geomFactory&&(this.geomFactory=new $e),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection($e.toGeometryArray(this.polyList))}},{key:"getInvalidRingLines",value:function(){return this.polygonize(),this.invalidRingLines}},{key:"findValidRings",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isValid()?t.add(i):n.add(i.getLineString())}}},{key:"polygonize",value:function(){if(null!==this.polyList)return null;if(this.polyList=new se,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),n=new se;this.invalidRingLines=new se,this.isCheckingRingsValid?this.findValidRings(t,n,this.invalidRingLines):n=t,this.findShellsAndHoles(n),e.assignHolesToShells(this.holeList,this.shellList),Nt.sort(this.shellList,new Br.EnvelopeComparator);var r=!0;this.extractOnlyPolygonal&&(e.findDisjointShells(this.shellList),r=!1),this.polyList=e.extractPolygons(this.shellList,r)}},{key:"getDangles",value:function(){return this.polygonize(),this.dangles}},{key:"getCutEdges",value:function(){return this.polygonize(),this.cutEdges}},{key:"getPolygons",value:function(){return this.polygonize(),this.polyList}},{key:"add",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0].interfaces_&&n[0].interfaces_.indexOf(t)>-1)for(var i=n[0],s=i.iterator();s.hasNext();){var a=s.next();this.add(a)}else if(n[0]instanceof Fe){var o=n[0];this.geomFactory=o.getFactory(),null===this.graph&&(this.graph=new zr(this.geomFactory)),this.graph.addEdge(o)}else if(n[0]instanceof Z){var u=n[0];u.apply(this.lineStringAdder)}}},{key:"setCheckRingsValid",value:function(e){this.isCheckingRingsValid=e}},{key:"findShellsAndHoles",value:function(e){this.holeList=new se,this.shellList=new se;for(var t=e.iterator();t.hasNext();){var n=t.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findOuterShells",value:function(e){for(var t=e.iterator();t.hasNext();){
var n=t.next(),r=n.getOuterHole();null===r||r.isProcessed()||(n.setIncluded(!0),r.setProcessed(!0))}}},{key:"extractPolygons",value:function(e,t){for(var n=new se,r=e.iterator();r.hasNext();){var i=r.next();(t||i.isIncluded())&&n.add(i.getPolygon())}return n}},{key:"assignHolesToShells",value:function(t,n){for(var r=t.iterator();r.hasNext();){var i=r.next();e.assignHoleToShell(i,n)}}},{key:"assignHoleToShell",value:function(e,t){var n=Br.findEdgeRingContaining(e,t);null!==n&&n.addHole(e)}},{key:"findDisjointShells",value:function(t){e.findOuterShells(t);var n=null;do{n=!1;for(var r=t.iterator();r.hasNext();){var i=r.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(n=!0))}}while(n)}},{key:"LineStringAdder",get:function(){return Yr}}]),e}(),Yr=function(){function e(){_classCallCheck(this,e),this.p=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.p=i}}return _createClass(e,[{key:"filter",value:function(e){e instanceof Fe&&this.p.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Ee]}}]),e}(),Vr=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.matrix=null;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(0===r.length)t.matrix=Array(3).fill().map(function(){return Array(3)}),t.setAll(Ie.FALSE);else if(1===r.length)if("string"==typeof r[0]){var s=r[0];a.call(t),t.set(s)}else if(r[0]instanceof e){var o=r[0];a.call(t),t.matrix[P.INTERIOR][P.INTERIOR]=o.matrix[P.INTERIOR][P.INTERIOR],t.matrix[P.INTERIOR][P.BOUNDARY]=o.matrix[P.INTERIOR][P.BOUNDARY],t.matrix[P.INTERIOR][P.EXTERIOR]=o.matrix[P.INTERIOR][P.EXTERIOR],t.matrix[P.BOUNDARY][P.INTERIOR]=o.matrix[P.BOUNDARY][P.INTERIOR],t.matrix[P.BOUNDARY][P.BOUNDARY]=o.matrix[P.BOUNDARY][P.BOUNDARY],t.matrix[P.BOUNDARY][P.EXTERIOR]=o.matrix[P.BOUNDARY][P.EXTERIOR],t.matrix[P.EXTERIOR][P.INTERIOR]=o.matrix[P.EXTERIOR][P.INTERIOR],t.matrix[P.EXTERIOR][P.BOUNDARY]=o.matrix[P.EXTERIOR][P.BOUNDARY],t.matrix[P.EXTERIOR][P.EXTERIOR]=o.matrix[P.EXTERIOR][P.EXTERIOR]}};return s.apply(this,r)}return _createClass(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){var t=e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])||e.isTrue(this.matrix[P.INTERIOR][P.BOUNDARY])||e.isTrue(this.matrix[P.BOUNDARY][P.INTERIOR])||e.isTrue(this.matrix[P.BOUNDARY][P.BOUNDARY]);return t&&this.matrix[P.EXTERIOR][P.INTERIOR]===Ie.FALSE&&this.matrix[P.EXTERIOR][P.BOUNDARY]===Ie.FALSE}},{key:"isCoveredBy",value:function(){var t=e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])||e.isTrue(this.matrix[P.INTERIOR][P.BOUNDARY])||e.isTrue(this.matrix[P.BOUNDARY][P.INTERIOR])||e.isTrue(this.matrix[P.BOUNDARY][P.BOUNDARY]);return t&&this.matrix[P.INTERIOR][P.EXTERIOR]===Ie.FALSE&&this.matrix[P.BOUNDARY][P.EXTERIOR]===Ie.FALSE}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)for(var r=t[0],i=0;i<r.length;i++){var s=Math.trunc(i/3),a=i%3;this.matrix[s][a]=Ie.toDimensionValue(r.charAt(i))}else if(3===t.length){var o=t[0],u=t[1],l=t[2];this.matrix[o][u]=l}}},{key:"isContains",value:function(){return e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])&&this.matrix[P.EXTERIOR][P.INTERIOR]===Ie.FALSE&&this.matrix[P.EXTERIOR][P.BOUNDARY]===Ie.FALSE}},{key:"setAtLeast",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)for(var r=t[0],i=0;i<r.length;i++){var s=Math.trunc(i/3),a=i%3;this.setAtLeast(s,a,Ie.toDimensionValue(r.charAt(i)))}else if(3===t.length){var o=t[0],u=t[1],l=t[2];this.matrix[o][u]<l&&(this.matrix[o][u]=l)}}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])&&this.matrix[P.INTERIOR][P.EXTERIOR]===Ie.FALSE&&this.matrix[P.BOUNDARY][P.EXTERIOR]===Ie.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):t===Ie.A&&n===Ie.A||t===Ie.L&&n===Ie.L||t===Ie.L&&n===Ie.A||t===Ie.P&&n===Ie.A||t===Ie.P&&n===Ie.L?this.matrix[P.INTERIOR][P.INTERIOR]===Ie.FALSE&&(e.isTrue(this.matrix[P.INTERIOR][P.BOUNDARY])||e.isTrue(this.matrix[P.BOUNDARY][P.INTERIOR])||e.isTrue(this.matrix[P.BOUNDARY][P.BOUNDARY])):!1}},{key:"isOverlaps",value:function(t,n){return t===Ie.P&&n===Ie.P||t===Ie.A&&n===Ie.A?e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])&&e.isTrue(this.matrix[P.INTERIOR][P.EXTERIOR])&&e.isTrue(this.matrix[P.EXTERIOR][P.INTERIOR]):t===Ie.L&&n===Ie.L?1===this.matrix[P.INTERIOR][P.INTERIOR]&&e.isTrue(this.matrix[P.INTERIOR][P.EXTERIOR])&&e.isTrue(this.matrix[P.EXTERIOR][P.INTERIOR]):!1}},{key:"isEquals",value:function(t,n){return t!==n?!1:e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])&&this.matrix[P.INTERIOR][P.EXTERIOR]===Ie.FALSE&&this.matrix[P.BOUNDARY][P.EXTERIOR]===Ie.FALSE&&this.matrix[P.EXTERIOR][P.INTERIOR]===Ie.FALSE&&this.matrix[P.EXTERIOR][P.BOUNDARY]===Ie.FALSE}},{key:"toString",value:function(){for(var e=new M("123456789"),t=0;3>t;t++)for(var n=0;3>n;n++)e.setCharAt(3*t+n,Ie.toDimensionSymbol(this.matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.matrix[t][n]=e}},{key:"get",value:function(e,t){return this.matrix[e][t]}},{key:"transpose",value:function(){var e=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=e,e=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=e,e=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=e,this}},{key:"matches",value:function(t){if(9!==t.length)throw new C("Should be length 9: "+t);for(var n=0;3>n;n++)for(var r=0;3>r;r++)if(!e.matches(this.matrix[n][r],t.charAt(3*n+r)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;3>t;t++)for(var n=0;3>n;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this.matrix[P.INTERIOR][P.INTERIOR]===Ie.FALSE&&this.matrix[P.INTERIOR][P.BOUNDARY]===Ie.FALSE&&this.matrix[P.BOUNDARY][P.INTERIOR]===Ie.FALSE&&this.matrix[P.BOUNDARY][P.BOUNDARY]===Ie.FALSE}},{key:"isCrosses",value:function(t,n){return t===Ie.P&&n===Ie.L||t===Ie.P&&n===Ie.A||t===Ie.L&&n===Ie.A?e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])&&e.isTrue(this.matrix[P.INTERIOR][P.EXTERIOR]):t===Ie.L&&n===Ie.P||t===Ie.A&&n===Ie.P||t===Ie.A&&n===Ie.L?e.isTrue(this.matrix[P.INTERIOR][P.INTERIOR])&&e.isTrue(this.matrix[P.EXTERIOR][P.INTERIOR]):t===Ie.L&&n===Ie.L?0===this.matrix[P.INTERIOR][P.INTERIOR]:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[x]}}],[{key:"matches",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){if(Number.isInteger(n[0])&&"string"==typeof n[1]){var i=n[0],s=n[1];return s===Ie.SYM_DONTCARE?!0:s===Ie.SYM_TRUE&&(i>=0||i===Ie.TRUE)?!0:s===Ie.SYM_FALSE&&i===Ie.FALSE?!0:s===Ie.SYM_P&&i===Ie.P?!0:s===Ie.SYM_L&&i===Ie.L?!0:s===Ie.SYM_A&&i===Ie.A?!0:!1}if("string"==typeof n[0]&&"string"==typeof n[1]){var a=n[0],o=n[1],u=new e(a);return u.matches(o)}}}},{key:"isTrue",value:function(e){return e>=0||e===Ie.TRUE?!0:!1}}]),e}(),Xr=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"createEdgeEndForNext",value:function(e,t,n,r){var i=n.segmentIndex+1;if(i>=e.getNumPoints()&&null===r)return null;var s=e.getCoordinate(i);null!==r&&r.segmentIndex===n.segmentIndex&&(s=r.coord);var a=new Qt(e,n.coord,s,new Lt(e.getLabel()));t.add(a)}},{key:"createEdgeEndForPrev",value:function(e,t,n,r){var i=n.segmentIndex;if(0===n.dist){if(0===i)return null;i--}var s=e.getCoordinate(i);null!==r&&r.segmentIndex>=i&&(s=r.coord);var a=new Lt(e.getLabel());a.flip();var o=new Qt(e,n.coord,s,a);t.add(o)}},{key:"computeEdgeEnds",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){for(var r=t[0],i=new se,s=r;s.hasNext();){var a=s.next();this.computeEdgeEnds(a,i)}return i}if(2===t.length){var o=t[0],u=t[1],l=o.getEdgeIntersectionList();l.addEndpoints();var h=l.iterator(),c=null,g=null;if(!h.hasNext())return null;var f=h.next();do c=g,g=f,f=null,h.hasNext()&&(f=h.next()),null!==g&&(this.createEdgeEndForPrev(o,u,g,c),this.createEdgeEndForNext(o,u,g,f));while(null!==g)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),jr=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.edgeEnds=new se;var o=function u(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 1===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0];u.call(a,null,r)}.apply(void 0,r):2===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=(r[0],r[1]),a=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s.getEdge(),s.getCoordinate(),s.getDirectedCoordinate(),new Lt(s.getLabel())));a.insert(s)}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e){this.edgeEnds.add(e)}},{key:"print",value:function(e){e.println("EdgeEndBundle--> Label: "+this.label);for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e),e.println()}}},{key:"iterator",value:function(){return this.edgeEnds.iterator()}},{key:"getEdgeEnds",value:function(){return this.edgeEnds}},{key:"computeLabelOn",value:function(e,t){for(var n=0,r=!1,i=this.iterator();i.hasNext();){var s=i.next(),a=s.getLabel().getLocation(e);a===P.BOUNDARY&&n++,a===P.INTERIOR&&(r=!0)}var a=P.NONE;r&&(a=P.INTERIOR),n>0&&(a=nn.determineBoundary(t,n)),this.label.setLocation(e,a)}},{key:"computeLabelSide",value:function(e,t){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var i=r.getLabel().getLocation(e,t);if(i===P.INTERIOR)return this.label.setLocation(e,t,P.INTERIOR),null;i===P.EXTERIOR&&this.label.setLocation(e,t,P.EXTERIOR)}}}},{key:"getLabel",value:function(){return this.label}},{key:"computeLabelSides",value:function(e){this.computeLabelSide(e,Et.LEFT),this.computeLabelSide(e,Et.RIGHT)}},{key:"updateIM",value:function(e){Wt.updateIM(this.label,e)}},{key:"computeLabel",value:function(e){for(var t=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(t=!0)}t?this.label=new Lt(P.NONE,P.NONE,P.NONE):this.label=new Lt(P.NONE);for(var i=0;2>i;i++)this.computeLabelOn(i,e),t&&this.computeLabelSides(i)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Qt),Hr=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"updateIM",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}}},{key:"insert",value:function(e){var t=this.edgeMap.get(e);null===t?(t=new jr(e),this.insertEdgeEnd(e,t)):t.insert(e)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Kn),Wr=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)var s=r[0],a=r[1],e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,s,a));return _possibleConstructorReturn(e)}return _inherits(t,e),_createClass(t,[{key:"updateIMFromEdges",value:function(e){this.edges.updateIM(e)}},{key:"computeIM",value:function(e){e.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(Kt),Kr=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createNode",value:function(e){return new Wr(e,new Hr)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(en),Jr=function(){function e(){_classCallCheck(this,e),this.li=new W,this.ptLocator=new Ct,this.arg=null,this.nodes=new Jt(new Kr),this.im=null,this.isolatedEdges=new se,this.invalidPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.arg=i}}return _createClass(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"computeProperIntersectionIM",value:function(e,t){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),i=e.hasProperIntersection(),s=e.hasProperInteriorIntersection();2===n&&2===r?i&&t.setAtLeast("212101212"):2===n&&1===r?(i&&t.setAtLeast("FFF0FFFF2"),s&&t.setAtLeast("1FFFFF1FF")):1===n&&2===r?(i&&t.setAtLeast("F0FFFFFF2"),s&&t.setAtLeast("1F1FFFFFF")):1===n&&1===r&&s&&t.setAtLeast("0FFFFFFFF")}},{key:"labelIsolatedEdges",value:function(e,t){for(var n=this.arg[e].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,t,this.arg[t].getGeometry()),this.isolatedEdges.add(r))}}},{key:"labelIsolatedEdge",value:function(e,t,n){if(n.getDimension()>0){var r=this.ptLocator.locate(e.getCoordinate(),n);e.getLabel().setAllLocations(t,r)}else e.getLabel().setAllLocations(t,P.EXTERIOR)}},{key:"computeIM",value:function(){var e=new Vr;if(e.set(P.EXTERIOR,P.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var t=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(t,e);var n=new Xr,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var i=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e}},{key:"labelNodeEdges",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().computeLabelling(this.arg)}}},{key:"copyNodesAndLabels",value:function(e){for(var t=this.arg[e].getNodeIterator();t.hasNext();){var n=t.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(e,n.getLabel().getLocation(e))}}},{key:"labelIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),a=this.nodes.find(s.coord);a.getLabel().isNull(e)&&(r===P.BOUNDARY?a.setLabelBoundary(e):a.setLabel(e,P.INTERIOR))}}},{key:"labelIsolatedNode",value:function(e,t){var n=this.ptLocator.locate(e.getCoordinate(),this.arg[t].getGeometry());e.getLabel().setAllLocations(t,n)}},{key:"computeIntersectionNodes",value:function(e){for(var t=this.arg[e].getEdgeIterator();t.hasNext();)for(var n=t.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),a=this.nodes.addNode(s.coord);r===P.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,P.INTERIOR)}}},{key:"labelIsolatedNodes",value:function(){for(var e=this.nodes.iterator();e.hasNext();){var t=e.next(),n=t.getLabel();R.isTrue(n.getGeometryCount()>0,"node with empty label found"),t.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(t,0):this.labelIsolatedNode(t,1))}}},{key:"updateIM",value:function(e){for(var t=this.isolatedEdges.iterator();t.hasNext();){var n=t.next();n.updateIM(e)}for(var r=this.nodes.iterator();r.hasNext();){var i=r.next();i.updateIM(e),i.updateIMFromEdges(e)}}},{key:"computeDisjointIM",value:function(e){var t=this.arg[0].getGeometry();t.isEmpty()||(e.set(P.INTERIOR,P.EXTERIOR,t.getDimension()),e.set(P.BOUNDARY,P.EXTERIOR,t.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(e.set(P.EXTERIOR,P.INTERIOR,n.getDimension()),e.set(P.EXTERIOR,P.BOUNDARY,n.getBoundaryDimension()))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Qr=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a._relate=null;var o=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 2===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0],a=r[1],o=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s,a));o._relate=new Jr(o.arg)}.apply(void 0,r):3===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0],a=r[1],o=r[2],u=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s,a,o));u._relate=new Jr(u.arg)}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getIntersectionMatrix",value:function(){return this._relate.computeIM()}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"relate",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1],a=new t(i,s),o=a.getIntersectionMatrix();return o}if(3===n.length){var i=n[0],s=n[1],u=n[2],a=new t(i,s,u),o=a.getIntersectionMatrix();return o}}}]),t}(Mr),Zr=function(){function e(){_classCallCheck(this,e),this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geomFactory=e.extractFactory(i),this.inputGeoms=i}}return _createClass(e,[{key:"extractElements",value:function(e,t){if(null===e)return null;for(var n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);this.skipEmpty&&r.isEmpty()||t.add(r)}}},{key:"combine",value:function(){for(var e=new se,t=this.inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"combine",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],s=new e(i);return s.combine()}if(2===n.length){var a=n[0],o=n[1],s=new e(e.createList(a,o));return s.combine()}if(3===n.length){var a=n[0],o=n[1],u=n[2],s=new e(e.createList(a,o,u));return s.combine()}}},{key:"extractFactory",value:function(e){return e.isEmpty()?null:e.iterator().next().getFactory()}},{key:"createList",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(2===t.length){var r=t[0],i=t[1],s=new se;return s.add(r),s.add(i),s}if(3===t.length){var r=t[0],i=t[1],a=t[2],s=new se;return s.add(r),s.add(i),s.add(a),s}}}]),e}(),$r=function(){function e(){_classCallCheck(this,e),this.inputPolys=null,this.geomFactory=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputPolys=i,null===this.inputPolys&&(this.inputPolys=new se)}}return _createClass(e,[{key:"reduceToGeometries",value:function(e){for(var t=new se,n=e.iterator();n.hasNext();){var i=n.next(),s=null;i.interfaces_&&i.interfaces_.indexOf(r)>-1?s=this.unionTree(i):i instanceof Z&&(s=i),t.add(s)}return t}},{key:"extractByEnvelope",value:function(e,t,n){for(var r=new se,i=0;i<t.getNumGeometries();i++){var s=t.getGeometryN(i);s.getEnvelopeInternal().intersects(e)?r.add(s):n.add(s)}return this.geomFactory.buildGeometry(r)}},{key:"unionOptimized",value:function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Zr.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var s=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,s)}},{key:"union",value:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new xn(e.STRTREE_NODE_CAPACITY),n=this.inputPolys.iterator();n.hasNext();){var r=n.next();t.insert(r.getEnvelopeInternal(),r)}this.inputPolys=null;var i=t.itemsTree(),s=this.unionTree(i);return s}},{key:"binaryUnion",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];return this.binaryUnion(i,0,i.size())}if(3===n.length){var i=n[0],s=n[1],a=n[2];if(1>=a-s){var o=e.getGeometry(i,s);return this.unionSafe(o,null)}if(a-s===2)return this.unionSafe(e.getGeometry(i,s),e.getGeometry(i,s+1));var u=Math.trunc((a+s)/2),o=this.binaryUnion(i,s,u),l=this.binaryUnion(i,u,a);return this.unionSafe(o,l)}}},{key:"repeatedUnion",value:function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t=null===t?r.copy():t.union(r)}return t}},{key:"unionSafe",value:function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)}},{key:"unionActual",value:function(t,n){return e.restrictToPolygons(t.union(n))}},{key:"unionTree",value:function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n}},{key:"unionUsingEnvelopeIntersection",value:function(e,t,n){var r=new se,i=this.extractByEnvelope(n,e,r),s=this.extractByEnvelope(n,t,r),a=this.unionActual(i,s);r.add(a);var o=Zr.combine(r);return o}},{key:"bufferUnion",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=r.get(0).getFactory(),s=i.buildGeometry(r),a=s.buffer(0);return a}if(2===t.length){var o=t[0],u=t[1],i=o.getFactory(),s=i.createGeometryCollection([o,u]),a=s.buffer(0);return a}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"restrictToPolygons",value:function(e){if(e.interfaces_&&e.interfaces_.indexOf(qe)>-1)return e;var t=gr.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon($e.toPolygonArray(t))}},{key:"getGeometry",value:function(e,t){return t>=e.size()?null:e.get(t)}},{key:"union",value:function(t){var n=new e(t);return n.union()}}]),e}();$r.STRTREE_NODE_CAPACITY=4;var ei=function(){function e(){_classCallCheck(this,e),this.pointGeom=null,this.otherGeom=null,this.geomFact=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.pointGeom=i,this.otherGeom=s,this.geomFact=s.getFactory()}}return _createClass(e,[{key:"union",value:function(){for(var e=new Ct,t=new g,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),i=r.getCoordinate(),s=e.locate(i,this.otherGeom);s===P.EXTERIOR&&t.add(i)}if(0===t.size())return this.otherGeom;var a=null,o=ue.toCoordinateArray(t);return a=1===o.length?this.geomFact.createPoint(o[0]):this.geomFact.createMultiPointFromCoords(o),Zr.combine(a,this.otherGeom)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(t,n){var r=new e(t,n);return r.union()}}]),e}(),ti=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.snapTolerance=0,this.srcPts=null,this.seg=new tt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length)if(r[0]instanceof Fe&&"number"==typeof r[1]){var s=r[0],o=r[1];a.call(t,s.getCoordinates(),o)}else if(r[0]instanceof Array&&"number"==typeof r[1]){var u=r[0],o=r[1];t.srcPts=u,t._isClosed=e.isClosed(u),t.snapTolerance=o}};return s.apply(this,r)}return _createClass(e,[{key:"snapVertices",value:function(e,t){for(var n=this._isClosed?e.size()-1:e.size(),r=0;n>r;r++){var i=e.get(r),s=this.findSnapForVertex(i,t);null!==s&&(e.set(r,new L(s)),0===r&&this._isClosed&&e.set(e.size()-1,new L(s)))}}},{key:"findSnapForVertex",value:function(e,t){for(var n=0;n<t.length;n++){if(e.equals2D(t[n]))return null;if(e.distance(t[n])<this.snapTolerance)return t[n]}return null}},{key:"snapTo",value:function(e){var t=new oe(this.srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n}},{key:"snapSegments",value:function(e,t){if(0===t.length)return null;var n=t.length;t[0].equals2D(t[t.length-1])&&(n=t.length-1);for(var r=0;n>r;r++){var i=t[r],s=this.findSegmentIndexToSnap(i,e);s>=0&&e.add(s+1,new L(i),!1)}}},{key:"findSegmentIndexToSnap",value:function(e,t){for(var n=E.MAX_VALUE,r=-1,i=0;i<t.size()-1;i++){if(this.seg.p0=t.get(i),this.seg.p1=t.get(i+1),this.seg.p0.equals2D(e)||this.seg.p1.equals2D(e)){if(this.allowSnappingToSourceVertices)continue;return-1}var s=this.seg.distance(e);s<this.snapTolerance&&n>s&&(n=s,r=i)}return r}},{key:"setAllowSnappingToSourceVertices",value:function(e){this.allowSnappingToSourceVertices=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isClosed",value:function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])}}]),e}(),ni=function(){function e(){_classCallCheck(this,e),this.srcGeom=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.srcGeom=i}}return _createClass(e,[{key:"snapTo",value:function(e,t){var n=this.extractTargetCoordinates(e),r=new ri(t,n);return r.transform(this.srcGeom)}},{key:"snapToSelf",value:function(e,t){var n=this.extractTargetCoordinates(this.srcGeom),r=new ri(e,n,!0),i=r.transform(this.srcGeom),s=i;return t&&s.interfaces_&&s.interfaces_.indexOf(qe)>-1&&(s=i.buffer(0)),s}},{key:"computeSnapTolerance",value:function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n}},{key:"extractTargetCoordinates",value:function(e){for(var t=new g,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0))}},{key:"computeMinimumSegmentLength",value:function(e){for(var t=E.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);t>r&&(t=r)}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"snap",value:function(t,n,r){var i=new Array(2),s=new e(t);i[0]=s.snapTo(n,r);var a=new e(n);return i[1]=a.snapTo(i[0],r),i}},{key:"computeOverlaySnapTolerance",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0],s=e.computeSizeBasedSnapTolerance(i),a=i.getPrecisionModel();if(a.getType()===Qe.FIXED){var o=1/a.getScale()*2/1.415;o>s&&(s=o)}return s}if(2===n.length){var u=n[0],l=n[1];return Math.min(e.computeOverlaySnapTolerance(u),e.computeOverlaySnapTolerance(l))}}},{key:"computeSizeBasedSnapTolerance",value:function(t){var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth()),i=r*e.SNAP_PRECISION_FACTOR;return i}},{key:"snapToSelf",value:function(t,n,r){var i=new e(t);return i.snapToSelf(n,r)}}]),e}();ni.SNAP_PRECISION_FACTOR=1e-9;var ri=function(e){function t(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));s.snapTolerance=null,s.snapPts=null,s.isSelfSnap=!1;var a=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 2===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];s.snapTolerance=r,s.snapPts=i}.apply(void 0,t):3===t.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];s.snapTolerance=r,s.snapPts=i,s.isSelfSnap=a}.apply(void 0,t):void 0};return e=a.apply(s,r),_possibleConstructorReturn(s,e)}return _inherits(t,e),_createClass(t,[{key:"snapLine",value:function(e,t){var n=new ti(e,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(t)}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(et),ii=function(){function e(){_classCallCheck(this,e),this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"getCommon",value:function(){return E.longBitsToDouble(this.commonBits)}},{key:"add",value:function(t){var n=E.doubleToLongBits(t);if(this.isFirst)return this.commonBits=n,this.commonSignExp=e.signExpBits(this.commonBits),this.isFirst=!1,null;var r=e.signExpBits(n);return r!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=e.numCommonMostSigMantissaBits(this.commonBits,n),void(this.commonBits=e.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))}},{key:"toString",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0],a=E.longBitsToDouble(s),o=Long.toBinaryString(s),u="0000000000000000000000000000000000000000000000000000000000000000"+o,l=u.substring(u.length-64),h=l.substring(0,1)+"  "+l.substring(1,12)+"(exp) "+l.substring(12)+" [ "+a+" ]";return h}return(t=_get(Object.getPrototypeOf(e.prototype),"toString",this)).call.apply(t,[this].concat(r))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBit",value:function(e,t){var n=1<<t;return 0!==(e&n)?1:0}},{key:"signExpBits",value:function(e){return e>>52}},{key:"zeroLowerBits",value:function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i}},{key:"numCommonMostSigMantissaBits",value:function(t,n){for(var r=0,i=52;i>=0;i--){if(e.getBit(t,i)!==e.getBit(n,i))return r;r++}return 52}}]),e}(),si=function(){function e(){_classCallCheck(this,e),this.commonCoord=null,this.ccFilter=new ai;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"addCommonBits",value:function(e){var t=new oi(this.commonCoord);e.apply(t),e.geometryChanged()}},{key:"removeCommonBits",value:function(e){if(0===this.commonCoord.x&&0===this.commonCoord.y)return e;var t=new L(this.commonCoord);t.x=-t.x,t.y=-t.y;var n=new oi(t);return e.apply(n),e.geometryChanged(),e}},{key:"getCommonCoordinate",value:function(){return this.commonCoord}},{key:"add",value:function(e){e.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"CommonCoordinateFilter",get:function(){return ai}},{key:"Translater",get:function(){return oi}}]),e}(),ai=function(){function e(){_classCallCheck(this,e),this.commonBitsX=new ii,this.commonBitsY=new ii}return _createClass(e,[{key:"filter",value:function(e){this.commonBitsX.add(e.x),this.commonBitsY.add(e.y)}},{key:"getCommonCoordinate",value:function(){return new L(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[$]}}]),e}(),oi=function(){function e(){_classCallCheck(this,e),this.trans=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.trans=i}}return _createClass(e,[{key:"filter",value:function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;
e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)}},{key:"isDone",value:function(){return!1}},{key:"isGeometryChanged",value:function(){return!0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[_e]}}]),e}(),ui=function(){function e(){_classCallCheck(this,e),this.geom=new Array(2),this.snapTolerance=null,this.cbr=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.geom[0]=i,this.geom[1]=s,this.computeSnapTolerance()}}return _createClass(e,[{key:"selfSnap",value:function(e){var t=new ni(e),n=t.snapTo(e,this.snapTolerance);return n}},{key:"removeCommonBits",value:function(e){this.cbr=new si,this.cbr.add(e[0]),this.cbr.add(e[1]);var t=new Array(2);return t[0]=this.cbr.removeCommonBits(e[0].copy()),t[1]=this.cbr.removeCommonBits(e[1].copy()),t}},{key:"prepareResult",value:function(e){return this.cbr.addCommonBits(e),e}},{key:"getResultGeometry",value:function(e){var t=this.snap(this.geom),n=Dr.overlayOp(t[0],t[1],e);return this.prepareResult(n)}},{key:"checkValid",value:function(e){e.isValid()||U.out.println("Snapped geometry is invalid")}},{key:"computeSnapTolerance",value:function(){this.snapTolerance=ni.computeOverlaySnapTolerance(this.geom[0],this.geom[1])}},{key:"snap",value:function(e){var t=this.removeCommonBits(e),n=ni.snap(t[0],t[1],this.snapTolerance);return n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var i=new e(t,n);return i.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,Dr.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,Dr.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,Dr.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,Dr.DIFFERENCE)}}]),e}(),li=function(){function e(){_classCallCheck(this,e),this.geom=new Array(2);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.geom[0]=i,this.geom[1]=s}}return _createClass(e,[{key:"getResultGeometry",value:function(e){var t=null,n=!1,r=null;try{t=Dr.overlayOp(this.geom[0],this.geom[1],e);var i=!0;i&&(n=!0)}catch(s){if(!(s instanceof S))throw s;r=s}finally{}if(!n)try{t=ui.overlayOp(this.geom[0],this.geom[1],e)}catch(s){throw s instanceof S?r:s}finally{}return t}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"overlayOp",value:function(t,n,r){var i=new e(t,n);return i.getResultGeometry(r)}},{key:"union",value:function(t,n){return e.overlayOp(t,n,Dr.UNION)}},{key:"intersection",value:function(t,n){return e.overlayOp(t,n,Dr.INTERSECTION)}},{key:"symDifference",value:function(t,n){return e.overlayOp(t,n,Dr.SYMDIFFERENCE)}},{key:"difference",value:function(t,n){return e.overlayOp(t,n,Dr.DIFFERENCE)}}]),e}(),hi=function(){function e(){_classCallCheck(this,e),this.clz=null,this.comps=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.clz=i,this.comps=s}}return _createClass(e,[{key:"filter",value:function(t){(null===this.clz||e.isOfClass(t,this.clz))&&this.comps.add(t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[xe]}}],[{key:"isOfClass",value:function(e,t){return t.isAssignableFrom(e.getClass())}},{key:"extract",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];return e.extract(i,s,new se)}if(3===n.length){var i=n[0],s=n[1],a=n[2];return e.isOfClass(i,s)?a.add(i):i instanceof Ne&&i.apply(new e(s,a)),a}}}]),e}(),ci=function(){function e(){for(var n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,e),this.polygons=new se,this.lines=new se,this.points=new se,this.geomFact=null;var a=function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];if(1===r.length){if(r[0].interfaces_&&r[0].interfaces_.indexOf(t)>-1){var s=r[0];n.extract(s)}else if(r[0]instanceof Z){var a=r[0];n.extract(a)}}else if(2===r.length){var s=r[0],o=r[1];n.geomFact=o,n.extract(s)}};return a.apply(this,i)}return _createClass(e,[{key:"unionNoOpt",value:function(e){var t=this.geomFact.createPoint();return li.overlayOp(e,t,Dr.UNION)}},{key:"unionWithNull",value:function(e,t){return null===e&&null===t?null:null===t?e:null===e?t:e.union(t)}},{key:"extract",value:function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0].interfaces_&&n[0].interfaces_.indexOf(t)>-1)for(var i=n[0],s=i.iterator();s.hasNext();){var a=s.next();this.extract(a)}else if(n[0]instanceof Z){var o=n[0];null===this.geomFact&&(this.geomFact=o.getFactory()),hi.extract(o,ze,this.polygons),hi.extract(o,Fe,this.lines),hi.extract(o,Be,this.points)}}},{key:"union",value:function n(){if(null===this.geomFact)return null;var e=null;if(this.points.size()>0){var t=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(t)}var r=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(i)}var s=null;this.polygons.size()>0&&(s=$r.union(this.polygons));var a=this.unionWithNull(r,s),n=null;return n=null===e?a:null===a?e:ei.union(e,a),null===n?this.geomFact.createGeometryCollection(null):n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"union",value:function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){if(r[0].interfaces_&&r[0].interfaces_.indexOf(t)>-1){var s=r[0],a=new e(s);return a.union()}if(r[0]instanceof Z){var o=r[0],a=new e(o);return a.union()}}else if(2===r.length){var s=r[0],u=r[1],a=new e(s,u);return a.union()}}}]),e}(),gi=function(){function e(){_classCallCheck(this,e),this.geometryFactory=new $e,this.geomGraph=null,this.disconnectedRingcoord=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geomGraph=i}}return _createClass(e,[{key:"visitInteriorRing",value:function(t,n){var r=t.getCoordinates(),i=r[0],s=e.findDifferentPoint(r,i),a=n.findEdgeInSameDirection(i,s),o=n.findEdgeEnd(a),u=null;o.getLabel().getLocation(0,Et.RIGHT)===P.INTERIOR?u=o:o.getSym().getLabel().getLocation(0,Et.RIGHT)===P.INTERIOR&&(u=o.getSym()),R.isTrue(null!==u,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(u)}},{key:"visitShellInteriors",value:function(e,t){if(e instanceof ze){var n=e;this.visitInteriorRing(n.getExteriorRing(),t)}if(e instanceof Ve)for(var r=e,i=0;i<r.getNumGeometries();i++){var n=r.getGeometryN(i);this.visitInteriorRing(n.getExteriorRing(),t)}}},{key:"getCoordinate",value:function(){return this.disconnectedRingcoord}},{key:"setInteriorEdgesInResult",value:function(e){for(var t=e.getEdgeEnds().iterator();t.hasNext();){var n=t.next();n.getLabel().getLocation(0,Et.RIGHT)===P.INTERIOR&&n.setInResult(!0)}}},{key:"visitLinkedDirectedEdges",value:function(e){var t=e,n=e;do R.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==t)}},{key:"buildEdgeRings",value:function(e){for(var t=new se,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&null===r.getEdgeRing()){var i=new gn(r,this.geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var s=i.buildMinimalRings();t.addAll(s)}}return t}},{key:"hasUnvisitedShellEdge",value:function(e){for(var t=0;t<e.size();t++){var n=e.get(t);if(!n.isHole()){var r=n.getEdges(),i=r.get(0);if(i.getLabel().getLocation(0,Et.RIGHT)===P.INTERIOR)for(var s=0;s<r.size();s++)if(i=r.get(s),!i.isVisited())return this.disconnectedRingcoord=i.getCoordinate(),!0}}return!1}},{key:"isInteriorsConnected",value:function(){var e=new se;this.geomGraph.computeSplitEdges(e);var t=new tn(new Qn);t.addEdges(e),this.setInteriorEdgesInResult(t),t.linkResultDirectedEdges();var n=this.buildEdgeRings(t.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),t),!this.hasUnvisitedShellEdge(n)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findDifferentPoint",value:function(e,t){for(var n=0;n<e.length;n++)if(!e[n].equals(t))return e[n];return null}}]),e}(),fi=function(){function e(){_classCallCheck(this,e),this.items=new se,this.subnode=[null,null];for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"hasChildren",value:function(){for(var e=0;2>e;e++)if(null!==this.subnode[e])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(e){e.addAll(this.items);for(var t=0;2>t;t++)null!==this.subnode[t]&&this.subnode[t].addAllItems(e);return e}},{key:"size",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.size()}},{key:"addAllItemsFromOverlapping",value:function(e,t){return null===e||this.isSearchMatch(e)?(t.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(e,t),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(e,t))):null}},{key:"hasItems",value:function(){return!this.items.isEmpty()}},{key:"remove",value:function(e,t){if(!this.isSearchMatch(e))return!1;for(var n=!1,r=0;2>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(e,t))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n?n:n=this.items.remove(t)}},{key:"getItems",value:function(){return this.items}},{key:"depth",value:function(){for(var e=0,t=0;2>t;t++)if(null!==this.subnode[t]){var n=this.subnode[t].depth();n>e&&(e=n)}return e+1}},{key:"nodeSize",value:function(){for(var e=0,t=0;2>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].nodeSize());return e+1}},{key:"add",value:function(e){this.items.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getSubnodeIndex",value:function(e,t){var n=-1;return e.min>=t&&(n=1),e.max<=t&&(n=0),n}}]),e}(),vi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.min=null,this.max=null;var s=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(0===n.length)t.min=0,t.max=0;else if(1===n.length){var i=n[0];t.init(i.min,i.max)}else if(2===n.length){var s=n[0],a=n[1];t.init(s,a)}};return s.apply(this,r)}return _createClass(e,[{key:"expandToInclude",value:function(e){e.max>this.max&&(this.max=e.max),e.min<this.min&&(this.min=e.min)}},{key:"getWidth",value:function(){return this.max-this.min}},{key:"overlaps",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];return this.overlaps(r.min,r.max)}if(2===t.length){var i=t[0],s=t[1];return this.min>s||this.max<i?!1:!0}}},{key:"getMin",value:function(){return this.min}},{key:"toString",value:function(){return"["+this.min+", "+this.max+"]"}},{key:"contains",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof e){var i=n[0];return this.contains(i.min,i.max)}if("number"==typeof n[0]){var s=n[0];return s>=this.min&&s<=this.max}}else if(2===n.length){var a=n[0],o=n[1];return a>=this.min&&o<=this.max}}},{key:"init",value:function(e,t){this.min=e,this.max=t,e>t&&(this.min=t,this.max=e)}},{key:"getMax",value:function(){return this.max}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),yi=function(){function e(){_classCallCheck(this,e),this.x=null,this.xBits=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.x=i,this.xBits=E.doubleToLongBits(i)}}return _createClass(e,[{key:"numCommonMantissaBits",value:function(e){for(var t=0;52>t;t++){if(this.getBit(t)!==e.getBit(t))return t}return 52}},{key:"getExponent",value:function(){return this.biasedExponent()-e.EXPONENT_BIAS}},{key:"biasedExponent",value:function(){var e=Math.trunc(this.xBits>>52),t=2047&e;return t}},{key:"getDouble",value:function(){return E.longBitsToDouble(this.xBits)}},{key:"zeroLowerBits",value:function(e){var t=(1<<e)-1,n=~t;this.xBits&=n}},{key:"toString",value:function(){var e=Long.toBinaryString(this.xBits),t="0000000000000000000000000000000000000000000000000000000000000000",n=t+e,r=n.substring(n.length-64),i=r.substring(0,1)+"  "+r.substring(1,12)+"("+this.getExponent()+") "+r.substring(12)+" [ "+this.x+" ]";return i}},{key:"getBit",value:function(e){var t=1<<e;return 0!==(this.xBits&t)?1:0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"exponent",value:function(t){var n=new e(t);return n.getExponent()}},{key:"toBinaryString",value:function(t){var n=new e(t);return n.toString()}},{key:"powerOf2",value:function(t){if(t>1023||-1022>t)throw new C("Exponent out of bounds");var n=t+e.EXPONENT_BIAS,r=n<<52;return E.longBitsToDouble(r)}},{key:"truncateToPowerOfTwo",value:function(t){var n=new e(t);return n.zeroLowerBits(52),n.getDouble()}},{key:"maximumCommonMantissa",value:function(t,n){if(0===t||0===n)return 0;var r=new e(t),i=new e(n);if(r.getExponent()!==i.getExponent())return 0;var s=r.numCommonMantissaBits(i);return r.zeroLowerBits(64-(12+s)),r.getDouble()}}]),e}();yi.EXPONENT_BIAS=1023;var di=function(){function e(){_classCallCheck(this,e),this.pt=0,this.level=0,this.interval=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.computeKey(i)}}return _createClass(e,[{key:"getInterval",value:function(){return this.interval}},{key:"getLevel",value:function(){return this.level}},{key:"computeKey",value:function(t){for(this.level=e.computeLevel(t),this.interval=new vi,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)}},{key:"computeInterval",value:function(e,t){var n=yi.powerOf2(e);this.pt=Math.floor(t.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)}},{key:"getPoint",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeLevel",value:function(e){var t=e.getWidth(),n=yi.exponent(t)+1;return n}}]),e}(),pi=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.interval=null,e.centre=null,e.level=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];e.interval=s,e.level=a,e.centre=(s.getMin()+s.getMax())/2}return e}return _inherits(t,e),_createClass(t,[{key:"getInterval",value:function(){return this.interval}},{key:"find",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1===n)return this;if(null!==this.subnode[n]){var r=this.subnode[n];return r.find(e)}return this}},{key:"insert",value:function(e){R.isTrue(null===this.interval||this.interval.contains(e.interval));var n=t.getSubnodeIndex(e.interval,this.centre);if(e.level===this.level-1)this.subnode[n]=e;else{var r=this.createSubnode(n);r.insert(e),this.subnode[n]=r}}},{key:"isSearchMatch",value:function(e){return e.overlaps(this.interval)}},{key:"getSubnode",value:function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]}},{key:"getNode",value:function(e){var n=t.getSubnodeIndex(e,this.centre);if(-1!==n){var r=this.getSubnode(n);return r.getNode(e)}return this}},{key:"createSubnode",value:function(e){var n=0,r=0;switch(e){case 0:n=this.interval.getMin(),r=this.centre;break;case 1:n=this.centre,r=this.interval.getMax()}var i=new vi(n,r),s=new t(i,this.level-1);return s}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(e){var n=new di(e),r=new t(n.getInterval(),n.getLevel());return r}},{key:"createExpanded",value:function(e,n){var r=new vi(n);null!==e&&r.expandToInclude(e.interval);var i=t.createNode(r);return null!==e&&i.insert(e),i}}]),t}(fi),mi=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isZeroWidth",value:function(t,n){var r=n-t;if(0===r)return!0;var i=Math.max(Math.abs(t),Math.abs(n)),s=r/i,a=yi.exponent(s);return a<=e.MIN_BINARY_EXPONENT}}]),e}();mi.MIN_BINARY_EXPONENT=-50;var ki=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e,n){var r=t.getSubnodeIndex(e,t.origin);if(-1===r)return this.add(n),null;var i=this.subnode[r];if(null===i||!i.getInterval().contains(e)){var s=pi.createExpanded(i,e);this.subnode[r]=s}this.insertContained(this.subnode[r],e,n)}},{key:"isSearchMatch",value:function(e){return!0}},{key:"insertContained",value:function(e,t,n){R.isTrue(e.getInterval().contains(t));var r=mi.isZeroWidth(t.getMin(),t.getMax()),i=null;i=r?e.find(t):e.getNode(t),i.add(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(fi);ki.origin=0;var Ci=function(){function e(){_classCallCheck(this,e),this.root=null,this.minExtent=1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.root=new ki)}return _createClass(e,[{key:"size",value:function(){return null!==this.root?this.root.size():0}},{key:"insert",value:function(t,n){this.collectStats(t);var r=e.ensureExtent(t,this.minExtent);this.root.insert(r,n)}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if("number"==typeof t[0]){var r=t[0];return this.query(new vi(r,r))}if(t[0]instanceof vi){var i=t[0],s=new se;return this.query(i,s),s}}else if(2===t.length){var i=t[0],a=t[1];this.root.addAllItemsFromOverlapping(i,a)}}},{key:"iterator",value:function(){var e=new se;return this.root.addAllItems(e),e.iterator()}},{key:"remove",value:function(t,n){var r=e.ensureExtent(t,this.minExtent);return this.root.remove(r,n)}},{key:"collectStats",value:function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t)}},{key:"depth",value:function(){return null!==this.root?this.root.depth():0}},{key:"nodeSize",value:function(){return null!==this.root?this.root.nodeSize():0}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"ensureExtent",value:function(e,t){var n=e.getMin(),r=e.getMax();return n!==r?e:(n===r&&(n-=t/2,r=n+t/2),new vi(n,r))}}]),e}(),Ei=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isInside",value:function(e){}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ii=function(){function e(){_classCallCheck(this,e),this.ring=null,this.tree=null,this.crossings=0,this.interval=new vi;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.ring=i,this.buildIndex()}}return _createClass(e,[{key:"testLineSegment",value:function(e,t){var n=null,r=null,i=null,s=null,a=null,o=t.p0,u=t.p1;r=o.x-e.x,i=o.y-e.y,s=u.x-e.x,a=u.y-e.y,(i>0&&0>=a||a>0&&0>=i)&&(n=K.signOfDet2x2(r,i,s,a)/(a-i),n>0&&this.crossings++)}},{key:"buildIndex",value:function(){this.tree=new Ci;for(var e=ue.removeRepeatedPoints(this.ring.getCoordinates()),t=Tn.getChains(e),n=0;n<t.size();n++){var r=t.get(n),i=r.getEnvelope();this.interval.min=i.getMinY(),this.interval.max=i.getMaxY(),this.tree.insert(this.interval,r)}}},{key:"testMonotoneChain",value:function(e,t,n){n.select(e,t)}},{key:"isInside",value:function(e){this.crossings=0;var t=new V(E.NEGATIVE_INFINITY,E.POSITIVE_INFINITY,e.y,e.y);this.interval.min=e.y,this.interval.max=e.y;for(var n=this.tree.query(this.interval),r=new xi(this,e),i=n.iterator();i.hasNext();){var s=i.next();this.testMonotoneChain(t,r,s)}return this.crossings%2===1?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Ei]}}],[{key:"MCSelecter",get:function(){return xi}}]),e}(),xi=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.mcp=null,e.p=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];e.mcp=s,e.p=a}return e}return _inherits(t,e),_createClass(t,[{key:"select",value:function(){for(var e,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1!==r.length)return(e=_get(Object.getPrototypeOf(t.prototype),"select",this)).call.apply(e,[this].concat(r));var s=r[0];this.mcp.testLineSegment(this.p,s)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(ar),_i=function(){function e(){_classCallCheck(this,e),this.nodes=new Jt(new Kr);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"insertEdgeEnds",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this.nodes.add(n)}}},{key:"getNodeIterator",value:function(){return this.nodes.iterator()}},{key:"copyNodesAndLabels",value:function(e,t){for(var n=e.getNodeIterator();n.hasNext();){var r=n.next(),i=this.nodes.addNode(r.getCoordinate());i.setLabel(t,r.getLabel().getLocation(t))}}},{key:"build",value:function(e){this.computeIntersectionNodes(e,0),this.copyNodesAndLabels(e,0);var t=new Xr,n=t.computeEdgeEnds(e.getEdgeIterator());this.insertEdgeEnds(n)}},{key:"computeIntersectionNodes",value:function(e,t){for(var n=e.getEdgeIterator();n.hasNext();)for(var r=n.next(),i=r.getLabel().getLocation(t),s=r.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),o=this.nodes.addNode(a.coord);i===P.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,P.INTERIOR)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ni=function(){function e(){_classCallCheck(this,e),this.li=new W,this.geomGraph=null,this.nodeGraph=new _i,this.invalidPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.geomGraph=i}}return _createClass(e,[{key:"isNodeEdgeAreaLabelsConsistent",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();){var t=e.next();if(!t.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=t.getCoordinate().copy(),!1}return!0}},{key:"getInvalidPoint",value:function(){return this.invalidPoint}},{key:"hasDuplicateRings",value:function(){for(var e=this.nodeGraph.getNodeIterator();e.hasNext();)for(var t=e.next(),n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1}},{key:"isNodeConsistentArea",value:function(){var e=this.geomGraph.computeSelfNodes(this.li,!0,!0);return e.hasProperIntersection()?(this.invalidPoint=e.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Si=function(){function e(){_classCallCheck(this,e),this.graph=null,this.rings=new se,this.totalEnv=new V,this.index=null,this.nestedPt=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.graph=i}}return _createClass(e,[{key:"buildIndex",value:function(){this.index=new xn;for(var e=0;e<this.rings.size();e++){var t=this.rings.get(e),n=t.getEnvelopeInternal();this.index.insert(n,t)}}},{key:"getNestedPoint",value:function(){return this.nestedPt}},{key:"isNonNested",value:function(){this.buildIndex();for(var e=0;e<this.rings.size();e++)for(var t=this.rings.get(e),n=t.getCoordinates(),r=this.index.query(t.getEnvelopeInternal()),i=0;i<r.size();i++){var s=r.get(i),a=s.getCoordinates();if(t!==s&&t.getEnvelopeInternal().intersects(s.getEnvelopeInternal())){var o=Ri.findPtNotNode(n,s,this.graph);if(null!==o){var u=Q.isPointInRing(o,a);if(u)return this.nestedPt=o,!1}}}return!0}},{key:"add",value:function(e){this.rings.add(e),this.totalEnv.expandToInclude(e.getEnvelopeInternal())}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Oi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.errorType=null,this.pt=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];a.call(t,i,null)}else if(2===n.length){var i=n[0],s=n[1];t.errorType=i,null!==s&&(t.pt=s.copy())}};return s.apply(this,r)}return _createClass(e,[{key:"getErrorType",value:function(){return this.errorType}},{key:"getMessage",value:function(){return e.errMsg[this.errorType]}},{key:"getCoordinate",value:function(){return this.pt}},{key:"toString",value:function(){var e="";return null!==this.pt&&(e=" at or near point "+this.pt),this.getMessage()+e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}();Oi.ERROR=0,Oi.REPEATED_POINT=1,Oi.HOLE_OUTSIDE_SHELL=2,Oi.NESTED_HOLES=3,Oi.DISCONNECTED_INTERIOR=4,Oi.SELF_INTERSECTION=5,Oi.RING_SELF_INTERSECTION=6,Oi.NESTED_SHELLS=7,Oi.DUPLICATE_RINGS=8,Oi.TOO_FEW_POINTS=9,Oi.INVALID_COORDINATE=10,Oi.RING_NOT_CLOSED=11,Oi.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];var Ri=function(){function e(){_classCallCheck(this,e),this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.parentGeometry=i}}return _createClass(e,[{key:"checkInvalidCoordinates",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length)if(n[0]instanceof Array){for(var i=n[0],s=0;s<i.length;s++)if(!e.isValid(i[s]))return this.validErr=new Oi(Oi.INVALID_COORDINATE,i[s]),null}else if(n[0]instanceof ze){var a=n[0];if(this.checkInvalidCoordinates(a.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var s=0;s<a.getNumInteriorRing();s++)if(this.checkInvalidCoordinates(a.getInteriorRingN(s).getCoordinates()),null!==this.validErr)return null}}},{key:"checkHolesNotNested",value:function(e,t){for(var n=new Si(t),r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);n.add(i)}var s=n.isNonNested();s||(this.validErr=new Oi(Oi.NESTED_HOLES,n.getNestedPoint()))}},{key:"checkConsistentArea",value:function(e){var t=new Ni(e),n=t.isNodeConsistentArea();return n?void(t.hasDuplicateRings()&&(this.validErr=new Oi(Oi.DUPLICATE_RINGS,t.getInvalidPoint()))):(this.validErr=new Oi(Oi.SELF_INTERSECTION,t.getInvalidPoint()),null)}},{key:"isValid",value:function(){return this.checkValid(this.parentGeometry),null===this.validErr}},{key:"checkShellInsideHole",value:function(t,n,r){var i=t.getCoordinates(),s=n.getCoordinates(),a=e.findPtNotNode(i,n,r);if(null!==a){var o=Q.isPointInRing(a,s);if(!o)return a}var u=e.findPtNotNode(s,t,r);if(null!==u){var l=Q.isPointInRing(u,i);return l?u:null}return R.shouldNeverReachHere("points in shell and hole appear to be equal"),null}},{key:"checkNoSelfIntersectingRings",value:function(e){for(var t=e.getEdgeIterator();t.hasNext();){var n=t.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}}},{key:"checkConnectedInteriors",value:function(e){var t=new gi(e);t.isInteriorsConnected()||(this.validErr=new Oi(Oi.DISCONNECTED_INTERIOR,t.getCoordinate()))}},{key:"checkNoSelfIntersectingRing",value:function(e){for(var t=new g,n=!0,r=e.iterator();r.hasNext();){var i=r.next();if(n)n=!1;else{if(t.contains(i.coord))return this.validErr=new Oi(Oi.RING_SELF_INTERSECTION,i.coord),null;t.add(i.coord)}}}},{key:"checkHolesInShell",value:function(t,n){for(var r=t.getExteriorRing(),i=new Ii(r),s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),o=e.findPtNotNode(a.getCoordinates(),r,n);if(null===o)return null;var u=!i.isInside(o);if(u)return this.validErr=new Oi(Oi.HOLE_OUTSIDE_SHELL,o),null}}},{key:"checkTooFewPoints",value:function(e){return e.hasTooFewPoints()?(this.validErr=new Oi(Oi.TOO_FEW_POINTS,e.getInvalidPoint()),null):void 0}},{key:"getValidationError",value:function(){return this.checkValid(this.parentGeometry),this.validErr}},{key:"checkValid",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Be){var r=t[0];this.checkInvalidCoordinates(r.getCoordinates())}else if(t[0]instanceof Ue){var i=t[0];this.checkInvalidCoordinates(i.getCoordinates())}else if(t[0]instanceof Ye){var s=t[0];if(this.checkInvalidCoordinates(s.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(s),null!==this.validErr)return null;var a=new nn(0,s);if(this.checkTooFewPoints(a),null!==this.validErr)return null;var o=new W;a.computeSelfNodes(o,!0,!0),this.checkNoSelfIntersectingRings(a)}else if(t[0]instanceof Fe){var u=t[0];if(this.checkInvalidCoordinates(u.getCoordinates()),null!==this.validErr)return null;var a=new nn(0,u);this.checkTooFewPoints(a)}else if(t[0]instanceof ze){var l=t[0];if(this.checkInvalidCoordinates(l),null!==this.validErr)return null;if(this.checkClosedRings(l),null!==this.validErr)return null;var a=new nn(0,l);if(this.checkTooFewPoints(a),null!==this.validErr)return null;if(this.checkConsistentArea(a),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(a),null!==this.validErr))return null;if(this.checkHolesInShell(l,a),null!==this.validErr)return null;if(this.checkHolesNotNested(l,a),null!==this.validErr)return null;this.checkConnectedInteriors(a)}else if(t[0]instanceof Ve){for(var h=t[0],c=0;c<h.getNumGeometries();c++){var g=h.getGeometryN(c);if(this.checkInvalidCoordinates(g),null!==this.validErr)return null;if(this.checkClosedRings(g),null!==this.validErr)return null}var a=new nn(0,h);if(this.checkTooFewPoints(a),null!==this.validErr)return null;if(this.checkConsistentArea(a),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(a),null!==this.validErr))return null;for(var c=0;c<h.getNumGeometries();c++){var g=h.getGeometryN(c);if(this.checkHolesInShell(g,a),null!==this.validErr)return null}for(var c=0;c<h.getNumGeometries();c++){var g=h.getGeometryN(c);if(this.checkHolesNotNested(g,a),null!==this.validErr)return null}if(this.checkShellsNotNested(h,a),null!==this.validErr)return null;this.checkConnectedInteriors(a)}else if(t[0]instanceof Ne)for(var f=t[0],c=0;c<f.getNumGeometries();c++){var v=f.getGeometryN(c);if(this.checkValid(v),null!==this.validErr)return null}else if(t[0]instanceof Z){var y=t[0];if(this.validErr=null,y.isEmpty())return null;if(y instanceof Be)this.checkValid(y);else if(y instanceof Ue)this.checkValid(y);else if(y instanceof Ye)this.checkValid(y);else if(y instanceof Fe)this.checkValid(y);else if(y instanceof ze)this.checkValid(y);else if(y instanceof Ve)this.checkValid(y);else{if(!(y instanceof Ne))throw new UnsupportedOperationException(y.getClass().getName());this.checkValid(y)}}}},{key:"setSelfTouchingRingFormingHoleValid",value:function(e){this.isSelfTouchingRingFormingHoleValid=e}},{key:"checkShellNotNested",value:function(t,n,r){var i=t.getCoordinates(),s=n.getExteriorRing(),a=s.getCoordinates(),o=e.findPtNotNode(i,s,r);if(null===o)return null;var u=Q.isPointInRing(o,a);if(!u)return null;if(n.getNumInteriorRing()<=0)return this.validErr=new Oi(Oi.NESTED_SHELLS,o),null;for(var l=null,h=0;h<n.getNumInteriorRing();h++){var c=n.getInteriorRingN(h);
if(l=this.checkShellInsideHole(t,c,r),null===l)return null}this.validErr=new Oi(Oi.NESTED_SHELLS,l)}},{key:"checkClosedRings",value:function(e){if(this.checkClosedRing(e.getExteriorRing()),null!==this.validErr)return null;for(var t=0;t<e.getNumInteriorRing();t++)if(this.checkClosedRing(e.getInteriorRingN(t)),null!==this.validErr)return null}},{key:"checkClosedRing",value:function(e){if(!e.isClosed()){var t=null;e.getNumPoints()>=1&&(t=e.getCoordinateN(0)),this.validErr=new Oi(Oi.RING_NOT_CLOSED,t)}}},{key:"checkShellsNotNested",value:function(e,t){for(var n=0;n<e.getNumGeometries();n++)for(var r=e.getGeometryN(n),i=r.getExteriorRing(),s=0;s<e.getNumGeometries();s++)if(n!==s){var a=e.getGeometryN(s);if(this.checkShellNotNested(i,a,t),null!==this.validErr)return null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"findPtNotNode",value:function(e,t,n){for(var r=n.findEdge(t),i=r.getEdgeIntersectionList(),s=0;s<e.length;s++){var a=e[s];if(!i.isIntersection(a))return a}return null}},{key:"isValid",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof Z){var i=n[0],s=new e(i);return s.isValid()}if(n[0]instanceof L){var a=n[0];return E.isNaN(a.x)?!1:E.isInfinite(a.x)?!1:E.isNaN(a.y)?!1:E.isInfinite(a.y)?!1:!0}}}}]),e}(),Li=function(){function e(){_classCallCheck(this,e),this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new tt;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.pts=i}}return _createClass(e,[{key:"simplifySection",value:function(e,t){if(e+1===t)return null;this.seg.p0=this.pts[e],this.seg.p1=this.pts[t];for(var n=-1,r=e,i=e+1;t>i;i++){var s=this.seg.distance(this.pts[i]);s>n&&(n=s,r=i)}if(n<=this.distanceTolerance)for(var i=e+1;t>i;i++)this.usePt[i]=!1;else this.simplifySection(e,r),this.simplifySection(r,t)}},{key:"setDistanceTolerance",value:function(e){this.distanceTolerance=e}},{key:"simplify",value:function(){this.usePt=new Array(this.pts.length);for(var e=0;e<this.pts.length;e++)this.usePt[e]=!0;this.simplifySection(0,this.pts.length-1);for(var t=new oe,e=0;e<this.pts.length;e++)this.usePt[e]&&t.add(new L(this.pts[e]));return t.toCoordinateArray()}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.setDistanceTolerance(n),r.simplify()}}]),e}(),Ai=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputGeom=i}}return _createClass(e,[{key:"setEnsureValid",value:function(e){this.isEnsureValidTopology=e}},{key:"getResultGeometry",value:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new wi(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)}},{key:"setDistanceTolerance",value:function(e){if(0>e)throw new C("Tolerance must be non-negative");this.distanceTolerance=e}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.setDistanceTolerance(n),r.getResultGeometry()}},{key:"DPTransformer",get:function(){return wi}}]),e}(),wi=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.isEnsureValidTopology=!0,e.distanceTolerance=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];e.isEnsureValidTopology=s,e.distanceTolerance=a}return e}return _inherits(t,e),_createClass(t,[{key:"transformPolygon",value:function(e,n){if(e.isEmpty())return null;var r=_get(Object.getPrototypeOf(t.prototype),"transformPolygon",this).call(this,e,n);return n instanceof Ve?r:this.createValidArea(r)}},{key:"createValidArea",value:function(e){return this.isEnsureValidTopology?e.buffer(0):e}},{key:"transformCoordinates",value:function(e,t){var n=e.toCoordinateArray(),r=null;return r=0===n.length?new Array(0):Li.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(r)}},{key:"transformMultiPolygon",value:function(e,n){var r=_get(Object.getPrototypeOf(t.prototype),"transformMultiPolygon",this).call(this,e,n);return this.createValidArea(r)}},{key:"transformLinearRing",value:function(e,n){var r=n instanceof ze,i=_get(Object.getPrototypeOf(t.prototype),"transformLinearRing",this).call(this,e,n);return!r||i instanceof Ye?i:null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(et),bi=function(){function e(){_classCallCheck(this,e),this.items=new se,this.subnode=new Array(4);for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"hasChildren",value:function(){for(var e=0;4>e;e++)if(null!==this.subnode[e])return!0;return!1}},{key:"isPrunable",value:function(){return!(this.hasChildren()||this.hasItems())}},{key:"addAllItems",value:function(e){e.addAll(this.items);for(var t=0;4>t;t++)null!==this.subnode[t]&&this.subnode[t].addAllItems(e);return e}},{key:"getNodeCount",value:function(){for(var e=0,t=0;4>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+1}},{key:"size",value:function(){for(var e=0,t=0;4>t;t++)null!==this.subnode[t]&&(e+=this.subnode[t].size());return e+this.items.size()}},{key:"addAllItemsFromOverlapping",value:function(e,t){if(!this.isSearchMatch(e))return null;t.addAll(this.items);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(e,t)}},{key:"visitItems",value:function(e,t){for(var n=this.items.iterator();n.hasNext();)t.visitItem(n.next())}},{key:"hasItems",value:function(){return!this.items.isEmpty()}},{key:"remove",value:function(e,t){if(!this.isSearchMatch(e))return!1;for(var n=!1,r=0;4>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(e,t))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n?n:n=this.items.remove(t)}},{key:"visit",value:function(e,t){if(!this.isSearchMatch(e))return null;this.visitItems(e,t);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].visit(e,t)}},{key:"getItems",value:function(){return this.items}},{key:"depth",value:function(){for(var e=0,t=0;4>t;t++)if(null!==this.subnode[t]){var n=this.subnode[t].depth();n>e&&(e=n)}return e+1}},{key:"isEmpty",value:function t(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;4>e;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t}},{key:"add",value:function(e){this.items.add(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[N]}}],[{key:"getSubnodeIndex",value:function(e,t,n){var r=-1;return e.getMinX()>=t&&(e.getMinY()>=n&&(r=3),e.getMaxY()<=n&&(r=1)),e.getMaxX()<=t&&(e.getMinY()>=n&&(r=2),e.getMaxY()<=n&&(r=0)),r}}]),e}(),Pi=function(){function e(){_classCallCheck(this,e),this.pt=new L,this.level=0,this.env=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.computeKey(i)}}return _createClass(e,[{key:"getLevel",value:function(){return this.level}},{key:"computeKey",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];for(this.level=e.computeQuadLevel(i),this.env=new V,this.computeKey(this.level,i);!this.env.contains(i);)this.level+=1,this.computeKey(this.level,i)}else if(2===n.length){var s=n[0],i=n[1],a=yi.powerOf2(s);this.pt.x=Math.floor(i.getMinX()/a)*a,this.pt.y=Math.floor(i.getMinY()/a)*a,this.env.init(this.pt.x,this.pt.x+a,this.pt.y,this.pt.y+a)}}},{key:"getEnvelope",value:function(){return this.env}},{key:"getCentre",value:function(){return new L((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)}},{key:"getPoint",value:function(){return this.pt}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"computeQuadLevel",value:function(e){var t=e.getWidth(),n=e.getHeight(),r=t>n?t:n,i=yi.exponent(r)+1;return i}}]),e}(),Ti=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.env=null,e.centrex=null,e.centrey=null,e.level=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(2===r.length){var s=r[0],a=r[1];e.env=s,e.level=a,e.centrex=(s.getMinX()+s.getMaxX())/2,e.centrey=(s.getMinY()+s.getMaxY())/2}return e}return _inherits(t,e),_createClass(t,[{key:"find",value:function(e){var n=t.getSubnodeIndex(e,this.centrex,this.centrey);if(-1===n)return this;if(null!==this.subnode[n]){var r=this.subnode[n];return r.find(e)}return this}},{key:"isSearchMatch",value:function(e){return this.env.intersects(e)}},{key:"getSubnode",value:function(e){return null===this.subnode[e]&&(this.subnode[e]=this.createSubnode(e)),this.subnode[e]}},{key:"getEnvelope",value:function(){return this.env}},{key:"getNode",value:function(e){var n=t.getSubnodeIndex(e,this.centrex,this.centrey);if(-1!==n){var r=this.getSubnode(n);return r.getNode(e)}return this}},{key:"createSubnode",value:function(e){var n=0,r=0,i=0,s=0;switch(e){case 0:n=this.env.getMinX(),r=this.centrex,i=this.env.getMinY(),s=this.centrey;break;case 1:n=this.centrex,r=this.env.getMaxX(),i=this.env.getMinY(),s=this.centrey;break;case 2:n=this.env.getMinX(),r=this.centrex,i=this.centrey,s=this.env.getMaxY();break;case 3:n=this.centrex,r=this.env.getMaxX(),i=this.centrey,s=this.env.getMaxY()}var a=new V(n,r,i,s),o=new t(a,this.level-1);return o}},{key:"insertNode",value:function(e){R.isTrue(null===this.env||this.env.contains(e.env));var n=t.getSubnodeIndex(e.env,this.centrex,this.centrey);if(e.level===this.level-1)this.subnode[n]=e;else{var r=this.createSubnode(n);r.insertNode(e),this.subnode[n]=r}}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}],[{key:"createNode",value:function(e){var n=new Pi(e),r=new t(n.getEnvelope(),n.getLevel());return r}},{key:"createExpanded",value:function(e,n){var r=new V(n);null!==e&&r.expandToInclude(e.env);var i=t.createNode(r);return null!==e&&i.insertNode(e),i}}]),t}(bi),Mi=function(e){function t(){_classCallCheck(this,t);for(var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return 0===r.length,e}return _inherits(t,e),_createClass(t,[{key:"insert",value:function(e,n){var r=t.getSubnodeIndex(e,t.origin.x,t.origin.y);if(-1===r)return this.add(n),null;var i=this.subnode[r];if(null===i||!i.getEnvelope().contains(e)){var s=Ti.createExpanded(i,e);this.subnode[r]=s}this.insertContained(this.subnode[r],e,n)}},{key:"isSearchMatch",value:function(e){return!0}},{key:"insertContained",value:function(e,t,n){R.isTrue(e.getEnvelope().contains(t));var r=mi.isZeroWidth(t.getMinX(),t.getMaxX()),i=mi.isZeroWidth(t.getMinY(),t.getMaxY()),s=null;s=r||i?e.find(t):e.getNode(t),s.add(n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(bi);Mi.origin=new L(0,0);var Di=function(){function e(){_classCallCheck(this,e),this.root=null,this.minExtent=1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length&&(this.root=new Mi)}return _createClass(e,[{key:"size",value:function(){return null!==this.root?this.root.size():0}},{key:"insert",value:function(t,n){this.collectStats(t);var r=e.ensureExtent(t,this.minExtent);this.root.insert(r,n)}},{key:"query",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){var r=t[0],i=new Gt;return this.query(r,i),i.getItems()}if(2===t.length){var r=t[0],s=t[1];this.root.visit(r,s)}}},{key:"queryAll",value:function(){var e=new se;return this.root.addAllItems(e),e}},{key:"remove",value:function(t,n){var r=e.ensureExtent(t,this.minExtent);return this.root.remove(r,n)}},{key:"collectStats",value:function(e){var t=e.getWidth();t<this.minExtent&&t>0&&(this.minExtent=t);var n=e.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)}},{key:"depth",value:function(){return null!==this.root?this.root.depth():0}},{key:"isEmpty",value:function(){return null===this.root?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[pn,N]}}],[{key:"ensureExtent",value:function(e,t){var n=e.getMinX(),r=e.getMaxX(),i=e.getMinY(),s=e.getMaxY();return n!==r&&i!==s?e:(n===r&&(n-=t/2,r=n+t/2),i===s&&(i-=t/2,s=i+t/2),new V(n,r,i,s))}}]),e}();Di.serialVersionUID=-0x678b60c967a25400;var Fi=function(e){function t(){for(var e,n=this,r=arguments.length,i=Array(r),s=0;r>s;s++)i[s]=arguments[s];_classCallCheck(this,t);var a=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));a.parent=null,a.index=null;var o=function u(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];return 2===r.length?function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];var r=t[0],i=t[1];u.call(a,r,i,null,-1)}.apply(void 0,r):4===r.length?function(){for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var s=r[0],a=r[1],o=r[2],u=r[3],l=_possibleConstructorReturn(n,Object.getPrototypeOf(t).call(n,s,a));l.parent=o,l.index=u}.apply(void 0,r):void 0};return e=o.apply(a,i),_possibleConstructorReturn(a,e)}return _inherits(t,e),_createClass(t,[{key:"getIndex",value:function(){return this.index}},{key:"getParent",value:function(){return this.parent}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(tt),Gi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.parentLine=null,this.segs=null,this.resultSegs=new se,this.minimumSize=null;var s=function a(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];a.call(t,i,2)}else if(2===n.length){var i=n[0],s=n[1];t.parentLine=i,t.minimumSize=s,t.init()}};return s.apply(this,r)}return _createClass(e,[{key:"addToResult",value:function(e){this.resultSegs.add(e)}},{key:"asLineString",value:function(){return this.parentLine.getFactory().createLineString(e.extractCoordinates(this.resultSegs))}},{key:"getResultSize",value:function(){var e=this.resultSegs.size();return 0===e?0:e+1}},{key:"getParent",value:function(){return this.parentLine}},{key:"getSegment",value:function(e){return this.segs[e]}},{key:"getParentCoordinates",value:function(){return this.parentLine.getCoordinates()}},{key:"getMinimumSize",value:function(){return this.minimumSize}},{key:"asLinearRing",value:function(){return this.parentLine.getFactory().createLinearRing(e.extractCoordinates(this.resultSegs))}},{key:"getSegments",value:function(){return this.segs}},{key:"init",value:function(){var e=this.parentLine.getCoordinates();this.segs=new Array(e.length-1);for(var t=0;t<e.length-1;t++){var n=new Fi(e[t],e[t+1],this.parentLine,t);this.segs[t]=n}}},{key:"getResultCoordinates",value:function(){return e.extractCoordinates(this.resultSegs)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(e){for(var t=new Array(e.size()+1),n=null,r=0;r<e.size();r++)n=e.get(r),t[r]=n.p0;return t[t.length-1]=n.p1,t}}]),e}(),Bi=function(){function e(){_classCallCheck(this,e),this.index=new Di;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"remove",value:function(e){this.index.remove(new V(e.p0,e.p1),e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Gi)for(var r=t[0],i=r.getSegments(),s=0;s<i.length;s++){var a=i[s];this.add(a)}else if(t[0]instanceof tt){var o=t[0];this.index.insert(new V(o.p0,o.p1),o)}}},{key:"query",value:function(e){var t=new V(e.p0,e.p1),n=new qi(e);this.index.query(t,n);var r=n.getItems();return r}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),qi=function(){function e(){_classCallCheck(this,e),this.querySeg=null,this.items=new se;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.querySeg=i}}return _createClass(e,[{key:"visitItem",value:function(e){var t=e;V.intersects(t.p0,t.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(e)}},{key:"getItems",value:function(){return this.items}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[At]}}]),e}(),zi=function(){function e(){_classCallCheck(this,e),this.li=new W,this.inputIndex=new Bi,this.outputIndex=new Bi,this.line=null,this.linePts=null,this.distanceTolerance=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(2===n.length){var i=n[0],s=n[1];this.inputIndex=i,this.outputIndex=s}}return _createClass(e,[{key:"flatten",value:function(e,t){var n=this.linePts[e],r=this.linePts[t],i=new tt(n,r);return this.remove(this.line,e,t),this.outputIndex.add(i),i}},{key:"hasBadIntersection",value:function(e,t,n){return this.hasBadOutputIntersection(n)?!0:this.hasBadInputIntersection(e,t,n)?!0:!1}},{key:"setDistanceTolerance",value:function(e){this.distanceTolerance=e}},{key:"simplifySection",value:function(e,t,n){n+=1;var r=new Array(2);if(e+1===t){var i=this.line.getSegment(e);return this.line.addToResult(i),null}var s=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var a=n+1;a<this.line.getMinimumSize()&&(s=!1)}var o=new Array(1),u=this.findFurthestPoint(this.linePts,e,t,o);o[0]>this.distanceTolerance&&(s=!1);var l=new tt;if(l.p0=this.linePts[e],l.p1=this.linePts[t],r[0]=e,r[1]=t,this.hasBadIntersection(this.line,r,l)&&(s=!1),s){var i=this.flatten(e,t);return this.line.addToResult(i),null}this.simplifySection(e,u,n),this.simplifySection(u,t,n)}},{key:"hasBadOutputIntersection",value:function(e){for(var t=this.outputIndex.query(e),n=t.iterator();n.hasNext();){var r=n.next();if(this.hasInteriorIntersection(r,e))return!0}return!1}},{key:"findFurthestPoint",value:function(e,t,n,r){var i=new tt;i.p0=e[t],i.p1=e[n];for(var s=-1,a=t,o=t+1;n>o;o++){var u=e[o],l=i.distance(u);l>s&&(s=l,a=o)}return r[0]=s,a}},{key:"simplify",value:function(e){this.line=e,this.linePts=e.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)}},{key:"remove",value:function(e,t,n){for(var r=t;n>r;r++){var i=e.getSegment(r);this.inputIndex.remove(i)}}},{key:"hasInteriorIntersection",value:function(e,t){return this.li.computeIntersection(e.p0,e.p1,t.p0,t.p1),this.li.isInteriorIntersection()}},{key:"hasBadInputIntersection",value:function(t,n,r){for(var i=this.inputIndex.query(r),s=i.iterator();s.hasNext();){var a=s.next();if(this.hasInteriorIntersection(a,r)){if(e.isInLineSection(t,n,a))continue;return!0}}return!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"isInLineSection",value:function(e,t,n){if(n.getParent()!==e.getParent())return!1;var r=n.getIndex();return r>=t[0]&&r<t[1]?!0:!1}}]),e}(),Ui=function(){function e(){_classCallCheck(this,e),this.inputIndex=new Bi,this.outputIndex=new Bi,this.distanceTolerance=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"setDistanceTolerance",value:function(e){this.distanceTolerance=e}},{key:"simplify",value:function(e){for(var t=e.iterator();t.hasNext();)this.inputIndex.add(t.next());for(var t=e.iterator();t.hasNext();){var n=new zi(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(t.next())}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Yi=function(){function e(){_classCallCheck(this,e),this.inputGeom=null,this.lineSimplifier=new Ui,this.linestringMap=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.inputGeom=i}}return _createClass(e,[{key:"getResultGeometry",value:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new v,this.inputGeom.apply(new Xi(this)),this.lineSimplifier.simplify(this.linestringMap.values());var e=new Vi(this.linestringMap).transform(this.inputGeom);return e}},{key:"setDistanceTolerance",value:function(e){if(0>e)throw new C("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"simplify",value:function(t,n){var r=new e(t);return r.setDistanceTolerance(n),r.getResultGeometry()}},{key:"LineStringTransformer",get:function(){return Vi}},{key:"LineStringMapBuilderFilter",get:function(){return Xi}}]),e}(),Vi=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.linestringMap=null;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.linestringMap=s}return e}return _inherits(t,e),_createClass(t,[{key:"transformCoordinates",value:function(e,n){if(0===e.size())return null;if(n instanceof Fe){var r=this.linestringMap.get(n);return this.createCoordinateSequence(r.getResultCoordinates())}return _get(Object.getPrototypeOf(t.prototype),"transformCoordinates",this).call(this,e,n)}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(et),Xi=function(){function e(){_classCallCheck(this,e),this.tps=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.tps=i}}return _createClass(e,[{key:"filter",value:function(e){if(e instanceof Fe){var t=e;if(t.isEmpty())return null;var n=t.isClosed()?4:2,r=new Gi(t,n);this.tps.linestringMap.put(t,r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[Ee]}}]),e}(),ji=function(){function e(){_classCallCheck(this,e),this.mapOp=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.mapOp=i}}return _createClass(e,[{key:"map",value:function(e){for(var t=new se,n=0;n<e.getNumGeometries();n++){var r=this.mapOp.map(e.getGeometryN(n));r.isEmpty()||t.add(r)}return e.getFactory().createGeometryCollection($e.toGeometryArray(t))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"map",value:function(t,n){var r=new e(n);return r.map(t)}}]),e}(),Hi=function(){function e(){_classCallCheck(this,e),this.factory=null,this.interiorPoint=null,this.maxWidth=0;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.factory=i.getFactory(),this.add(i)}}return _createClass(e,[{key:"addPolygon",value:function(t){if(t.isEmpty())return null;var n=null,r=0,i=this.horizontalBisector(t);if(0===i.getLength())r=0,n=i.getCoordinate();else{var s=i.intersection(t),a=this.widestGeometry(s);r=a.getEnvelopeInternal().getWidth(),n=e.centre(a.getEnvelopeInternal())}(null===this.interiorPoint||r>this.maxWidth)&&(this.interiorPoint=n,this.maxWidth=r)}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"widestGeometry",value:function t(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(1===n.length){if(n[0]instanceof Ne){var i=n[0];if(i.isEmpty())return i;for(var t=i.getGeometryN(0),s=1;s<i.getNumGeometries();s++)i.getGeometryN(s).getEnvelopeInternal().getWidth()>t.getEnvelopeInternal().getWidth()&&(t=i.getGeometryN(s));return t}if(n[0]instanceof Z){var a=n[0];return a instanceof Ne?this.widestGeometry(a):a}}}},{key:"horizontalBisector",value:function(e){var t=e.getEnvelopeInternal(),n=Wi.getBisectorY(e);return this.factory.createLineString([new L(t.getMinX(),n),new L(t.getMaxX(),n)])}},{key:"add",value:function(e){if(e instanceof ze)this.addPolygon(e);else if(e instanceof Ne)for(var t=e,n=0;n<t.getNumGeometries();n++)this.add(t.getGeometryN(n))}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"centre",value:function(t){return new L(e.avg(t.getMinX(),t.getMaxX()),e.avg(t.getMinY(),t.getMaxY()))}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"SafeBisectorFinder",get:function(){return Wi}}]),e}(),Wi=function(){function e(){_classCallCheck(this,e),this.poly=null,this.centreY=null,this.hiY=E.MAX_VALUE,this.loY=-E.MAX_VALUE;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.poly=i,this.hiY=i.getEnvelopeInternal().getMaxY(),this.loY=i.getEnvelopeInternal().getMinY(),this.centreY=e.avg(this.loY,this.hiY)}}return _createClass(e,[{key:"updateInterval",value:function(e){e<=this.centreY?e>this.loY&&(this.loY=e):e>this.centreY&&e<this.hiY&&(this.hiY=e)}},{key:"getBisectorY",value:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var n=e.avg(this.hiY,this.loY);return n}},{key:"process",value:function(e){for(var t=e.getCoordinateSequence(),n=0;n<t.size();n++){var r=t.getY(n);this.updateInterval(r)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"getBisectorY",value:function(t){var n=new e(t);return n.getBisectorY()}}]),e}(),Ki=function(){function e(){_classCallCheck(this,e),this.centroid=null,this.minDistance=E.MAX_VALUE,this.interiorPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.centroid=i.getCentroid().getCoordinate(),this.addInterior(i),null===this.interiorPoint&&this.addEndpoints(i)}}return _createClass(e,[{key:"addEndpoints",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Z){var r=t[0];if(r instanceof Fe)this.addEndpoints(r.getCoordinates());else if(r instanceof Ne)for(var i=r,s=0;s<i.getNumGeometries();s++)this.addEndpoints(i.getGeometryN(s))}else if(t[0]instanceof Array){var a=t[0];this.add(a[0]),this.add(a[a.length-1])}}},{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"addInterior",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Z){var r=t[0];if(r instanceof Fe)this.addInterior(r.getCoordinates());else if(r instanceof Ne)for(var i=r,s=0;s<i.getNumGeometries();s++)this.addInterior(i.getGeometryN(s))}else if(t[0]instanceof Array)for(var a=t[0],s=1;s<a.length-1;s++)this.add(a[s])}},{key:"add",value:function(e){var t=e.distance(this.centroid);t<this.minDistance&&(this.interiorPoint=new L(e),this.minDistance=t)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),Ji=function(){function e(){_classCallCheck(this,e),this.treeSet=new g,this.list=new se;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"filter",value:function(e){this.treeSet.contains(e)||(this.list.add(e),this.treeSet.add(e))}},{key:"getCoordinates",value:function(){var e=new Array(this.list.size());return this.list.toArray(e)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[$]}}],[{key:"filterCoordinates",value:function(t){for(var n=new e,r=0;r<t.length;r++)n.filter(t[r]);return n.getCoordinates()}}]),e}(),Qi=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];_classCallCheck(this,e),this.geomFactory=null,this.inputPts=null;var s=function a(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];a.call(t,e.extractCoordinates(s),s.getFactory())}else if(2===r.length){var o=r[0],u=r[1];t.inputPts=Ji.filterCoordinates(o),t.geomFactory=u}};return s.apply(this,r)}return _createClass(e,[{key:"preSort",value:function(e){for(var t=null,n=1;n<e.length;n++)(e[n].y<e[0].y||e[n].y===e[0].y&&e[n].x<e[0].x)&&(t=e[0],e[0]=e[n],e[n]=t);return f.sort(e,1,e.length,new Zi(e[0])),e}},{key:"computeOctRing",value:function(e){var t=this.computeOctPts(e),n=new oe;return n.add(t,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())}},{key:"lineOrPolygon",value:function(e){if(e=this.cleanRing(e),3===e.length)return this.geomFactory.createLineString([e[0],e[1]]);var t=this.geomFactory.createLinearRing(e);return this.geomFactory.createPolygon(t,null)}},{key:"cleanRing",value:function(e){R.equals(e[0],e[e.length-1]);for(var t=new se,n=null,r=0;r<=e.length-2;r++){var i=e[r],s=e[r+1];i.equals(s)||null!==n&&this.isBetween(n,i,s)||(t.add(i),n=i)}t.add(e[e.length-1]);var a=new Array(t.size());return t.toArray(a)}},{key:"isBetween",value:function(e,t,n){if(0!==Q.computeOrientation(e,t,n))return!1;if(e.x!==n.x){if(e.x<=t.x&&t.x<=n.x)return!0;if(n.x<=t.x&&t.x<=e.x)return!0}if(e.y!==n.y){if(e.y<=t.y&&t.y<=n.y)return!0;if(n.y<=t.y&&t.y<=e.y)return!0}return!1}},{key:"reduce",value:function(e){var t=this.computeOctRing(e);if(null===t)return e;for(var n=new g,r=0;r<t.length;r++)n.add(t[r]);for(var r=0;r<e.length;r++)Q.isPointInRing(e[r],t)||n.add(e[r]);var i=ue.toCoordinateArray(n);return i.length<3?this.padArray3(i):i}},{key:"getConvexHull",value:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var e=this.inputPts;this.inputPts.length>50&&(e=this.reduce(this.inputPts));var t=this.preSort(e),n=this.grahamScan(t),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)}},{key:"padArray3",value:function(e){for(var t=new Array(3),n=0;n<t.length;n++)n<e.length?t[n]=e[n]:t[n]=e[0];return t}},{key:"computeOctPts",value:function(e){for(var t=new Array(8),n=0;n<t.length;n++)t[n]=e[0];for(var r=1;r<e.length;r++)e[r].x<t[0].x&&(t[0]=e[r]),e[r].x-e[r].y<t[1].x-t[1].y&&(t[1]=e[r]),e[r].y>t[2].y&&(t[2]=e[r]),e[r].x+e[r].y>t[3].x+t[3].y&&(t[3]=e[r]),e[r].x>t[4].x&&(t[4]=e[r]),e[r].x-e[r].y>t[5].x-t[5].y&&(t[5]=e[r]),e[r].y<t[6].y&&(t[6]=e[r]),e[r].x+e[r].y<t[7].x+t[7].y&&(t[7]=e[r]);return t}},{key:"toCoordinateArray",value:function(e){for(var t=new Array(e.size()),n=0;n<e.size();n++){var r=e.get(n);t[n]=r}return t}},{key:"grahamScan",value:function(e){var t=null,n=new d;t=n.push(e[0]),t=n.push(e[1]),t=n.push(e[2]);for(var r=3;r<e.length;r++){for(t=n.pop();!n.empty()&&Q.computeOrientation(n.peek(),t,e[r])>0;)t=n.pop();t=n.push(t),t=n.push(e[r])}return t=n.push(e[0]),n}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"extractCoordinates",value:function(e){var t=new Ji;return e.apply(t),t.getCoordinates()}},{key:"RadialComparator",get:function(){return Zi}}]),e}(),Zi=function(){function e(){_classCallCheck(this,e),this.origin=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.origin=i}}return _createClass(e,[{key:"compare",value:function(t,n){var r=t,i=n;return e.polarCompare(this.origin,r,i)}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[_]}}],[{key:"polarCompare",value:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,s=n.x-e.x,a=n.y-e.y,o=Q.computeOrientation(e,t,n);if(o===Q.COUNTERCLOCKWISE)return 1;if(o===Q.CLOCKWISE)return-1;var u=r*r+i*i,l=s*s+a*a;return l>u?-1:u>l?1:0}}]),e}(),$i=function(){function e(){_classCallCheck(this,e),this.areaBasePt=null,this.triangleCent3=new L,this.areasum2=0,this.cg3=new L,this.lineCentSum=new L,this.totalLength=0,this.ptCount=0,this.ptCentSum=new L;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.areaBasePt=null,this.add(i)}}return _createClass(e,[{key:"addPoint",value:function(e){this.ptCount+=1,this.ptCentSum.x+=e.x,this.ptCentSum.y+=e.y}},{key:"setBasePoint",value:function(e){null===this.areaBasePt&&(this.areaBasePt=e)}},{key:"addLineSegments",
value:function(e){for(var t=0,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);if(0!==r){t+=r;var i=(e[n].x+e[n+1].x)/2;this.lineCentSum.x+=r*i;var s=(e[n].y+e[n+1].y)/2;this.lineCentSum.y+=r*s}}this.totalLength+=t,0===t&&e.length>0&&this.addPoint(e[0])}},{key:"addHole",value:function(e){for(var t=Q.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"getCentroid",value:function(){var e=new L;if(Math.abs(this.areasum2)>0)e.x=this.cg3.x/3/this.areasum2,e.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)e.x=this.lineCentSum.x/this.totalLength,e.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;e.x=this.ptCentSum.x/this.ptCount,e.y=this.ptCentSum.y/this.ptCount}return e}},{key:"addShell",value:function(e){e.length>0&&this.setBasePoint(e[0]);for(var t=!Q.isCCW(e),n=0;n<e.length-1;n++)this.addTriangle(this.areaBasePt,e[n],e[n+1],t);this.addLineSegments(e)}},{key:"addTriangle",value:function(t,n,r,i){var s=i?1:-1;e.centroid3(t,n,r,this.triangleCent3);var a=e.area2(t,n,r);this.cg3.x+=s*a*this.triangleCent3.x,this.cg3.y+=s*a*this.triangleCent3.y,this.areasum2+=s*a}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof ze){var r=t[0];this.addShell(r.getExteriorRing().getCoordinates());for(var i=0;i<r.getNumInteriorRing();i++)this.addHole(r.getInteriorRingN(i).getCoordinates())}else if(t[0]instanceof Z){var s=t[0];if(s.isEmpty())return null;if(s instanceof Be)this.addPoint(s.getCoordinate());else if(s instanceof Fe)this.addLineSegments(s.getCoordinates());else if(s instanceof ze){var a=s;this.add(a)}else if(s instanceof Ne)for(var o=s,i=0;i<o.getNumGeometries();i++)this.add(o.getGeometryN(i))}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"area2",value:function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}},{key:"centroid3",value:function(e,t,n,r){return r.x=e.x+t.x+n.x,r.y=e.y+t.y+n.y,null}},{key:"getCentroid",value:function(t){var n=new e(t);return n.getCentroid()}}]),e}(),es=function(){function e(){_classCallCheck(this,e),this.centroid=null,this.minDistance=E.MAX_VALUE,this.interiorPoint=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.centroid=i.getCentroid().getCoordinate(),this.add(i)}}return _createClass(e,[{key:"getInteriorPoint",value:function(){return this.interiorPoint}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length)if(t[0]instanceof Z){var r=t[0];if(r instanceof Be)this.add(r.getCoordinate());else if(r instanceof Ne)for(var i=r,s=0;s<i.getNumGeometries();s++)this.add(i.getGeometryN(s))}else if(t[0]instanceof L){var a=t[0],o=a.distance(this.centroid);o<this.minDistance&&(this.interiorPoint=new L(a),this.minDistance=o)}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),ts=function(){function e(){_classCallCheck(this,e),this.rectEnv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.rectEnv=i.getEnvelopeInternal()}}return _createClass(e,[{key:"isContainedInBoundary",value:function(e){if(e instanceof ze)return!1;if(e instanceof Be)return this.isPointContainedInBoundary(e);if(e instanceof Fe)return this.isLineStringContainedInBoundary(e);for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);if(!this.isContainedInBoundary(n))return!1}return!0}},{key:"isLineSegmentContainedInBoundary",value:function(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x===t.x){if(e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX())return!0}else if(e.y===t.y&&(e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()))return!0;return!1}},{key:"isLineStringContainedInBoundary",value:function(e){for(var t=e.getCoordinateSequence(),n=new L,r=new L,i=0;i<t.size()-1;i++)if(t.getCoordinate(i,n),t.getCoordinate(i+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0}},{key:"isPointContainedInBoundary",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(1===t.length){if(t[0]instanceof Be){var r=t[0];return this.isPointContainedInBoundary(r.getCoordinate())}if(t[0]instanceof L){var i=t[0];return i.x===this.rectEnv.getMinX()||i.x===this.rectEnv.getMaxX()||i.y===this.rectEnv.getMinY()||i.y===this.rectEnv.getMaxY()}}}},{key:"contains",value:function(e){return this.rectEnv.contains(e.getEnvelopeInternal())?this.isContainedInBoundary(e)?!1:!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"contains",value:function(t,n){var r=new e(t);return r.contains(n)}}]),e}(),ns=function(){function e(){_classCallCheck(this,e),this.li=new W,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.rectEnv=i,this.diagUp0=new L(i.getMinX(),i.getMinY()),this.diagUp1=new L(i.getMaxX(),i.getMaxY()),this.diagDown0=new L(i.getMinX(),i.getMaxY()),this.diagDown1=new L(i.getMaxX(),i.getMinY())}}return _createClass(e,[{key:"intersects",value:function(e,t){var n=new V(e,t);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(e))return!0;if(this.rectEnv.intersects(t))return!0;if(e.compareTo(t)>0){var r=e;e=t,t=r}var i=!1;return t.y>e.y&&(i=!0),i?this.li.computeIntersection(e,t,this.diagDown0,this.diagDown1):this.li.computeIntersection(e,t,this.diagUp0,this.diagUp1),this.li.hasIntersection()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),rs=function(){function e(){_classCallCheck(this,e),this._isDone=!1;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];0===n.length}return _createClass(e,[{key:"applyTo",value:function(e){for(var t=0;t<e.getNumGeometries()&&!this._isDone;t++){var n=e.getGeometryN(t);if(n instanceof Ne)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}]),e}(),is=function(){function e(){_classCallCheck(this,e),this.rectangle=null,this.rectEnv=null;for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];if(1===n.length){var i=n[0];this.rectangle=i,this.rectEnv=i.getEnvelopeInternal()}}return _createClass(e,[{key:"intersects",value:function(e){if(!this.rectEnv.intersects(e.getEnvelopeInternal()))return!1;var t=new ss(this.rectEnv);if(t.applyTo(e),t.intersects())return!0;var n=new as(this.rectangle);if(n.applyTo(e),n.containsPoint())return!0;var r=new os(this.rectangle);return r.applyTo(e),r.intersects()?!0:!1}},{key:"getClass",value:function(){return e}},{key:"interfaces_",get:function(){return[]}}],[{key:"intersects",value:function(t,n){var r=new e(t);return r.intersects(n)}}]),e}(),ss=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.rectEnv=null,e._intersects=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.rectEnv=s}return e}return _inherits(t,e),_createClass(t,[{key:"isDone",value:function(){return this._intersects===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();return this.rectEnv.intersects(t)?this.rectEnv.contains(t)?(this._intersects=!0,null):t.getMinX()>=this.rectEnv.getMinX()&&t.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):t.getMinY()>=this.rectEnv.getMinY()&&t.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}},{key:"intersects",value:function(){return this._intersects}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(rs),as=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.rectSeq=null,e.rectEnv=null,e._containsPoint=!1;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.rectSeq=s.getExteriorRing().getCoordinateSequence(),e.rectEnv=s.getEnvelopeInternal()}return e}return _inherits(t,e),_createClass(t,[{key:"isDone",value:function(){return this._containsPoint===!0}},{key:"visit",value:function(e){if(!(e instanceof ze))return null;var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;for(var n=new L,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),t.contains(n)&&Wn.containsPointInPolygon(n,e))return this._containsPoint=!0,null}},{key:"containsPoint",value:function(){return this._containsPoint}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(rs),os=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));e.rectEnv=null,e.rectIntersector=null,e.hasIntersection=!1,e.p0=new L,e.p1=new L;for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];if(1===r.length){var s=r[0];e.rectEnv=s.getEnvelopeInternal(),e.rectIntersector=new ns(e.rectEnv)}return e}return _inherits(t,e),_createClass(t,[{key:"intersects",value:function(){return this.hasIntersection}},{key:"isDone",value:function(){return this.hasIntersection===!0}},{key:"visit",value:function(e){var t=e.getEnvelopeInternal();if(!this.rectEnv.intersects(t))return null;var n=Ft.getLines(e);this.checkIntersectionWithLineStrings(n)}},{key:"checkIntersectionWithLineStrings",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}}},{key:"checkIntersectionWithSegments",value:function(e){for(var t=e.getCoordinateSequence(),n=1;n<t.size();n++)if(t.getCoordinate(n-1,this.p0),t.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null}},{key:"getClass",value:function(){return t}},{key:"interfaces_",get:function(){return[]}}]),t}(rs);!function(){m()}();var us={densify:{Densifier:nt},dissolve:{LineDissolver:ht},geom:{Coordinate:L,GeometryFactory:$e,Geometry:Z,Point:Be,LineString:Fe,Polygon:Ve,GeometryCollection:Ne,MultiPoint:Ue,MultiLineString:Se,MultiPolygon:Ve},io:{GeoJSONReader:yt,GeoJSONWriter:dt,WKTReader:pt,WKTWriter:j,olParser:mt},operation:{BoundaryOp:Oe,IsSimpleOp:rn,buffer:{BufferOp:cr},distance:{DistanceOp:dr},linemerge:{LineMerger:Rr},overlay:{OverlayOp:Dr},polygonize:{Polygonizer:Ur},relate:{RelateOp:Qr},union:{CascadedPolygonUnion:$r,UnaryUnionOp:ci},valid:{IsValidOp:Ri}},simplify:{DouglasPeuckerSimplifier:Ai,TopologyPreservingSimplifier:Yi}};window.jsts=us}();
